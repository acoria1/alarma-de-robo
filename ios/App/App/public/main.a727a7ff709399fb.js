(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(ln,at,B)=>{"use strict";B.d(at,{nm:()=>ce});var y=B(4976);B(4650),B(259);var ze=B(5861),Ae=B(6881),Y=B(4859),ht=B(2090),Ke=B(1877);const fe=new Map,Ct={activated:!1,tokenObservers:[]},Ue={initialized:!1,enabled:!1};function it(ct){return fe.get(ct)||Object.assign({},Ct)}function Ve(){return Ue}const gt="https://content-firebaseappcheck.googleapis.com/v1",qe="exchangeDebugToken",We={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class _t{constructor(st,It,Kt,en,rr){if(this.operation=st,this.retryPolicy=It,this.getWaitDuration=Kt,this.lowerBound=en,this.upperBound=rr,this.pending=null,this.nextErrorWaitInterval=en,en>rr)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(st){var It=this;return(0,ze.Z)(function*(){It.stop();try{It.pending=new ht.BH,yield function mt(ct){return new Promise(st=>{setTimeout(st,ct)})}(It.getNextRun(st)),It.pending.resolve(),yield It.pending.promise,It.pending=new ht.BH,yield It.operation(),It.pending.resolve(),yield It.pending.promise,It.process(!0).catch(()=>{})}catch(Kt){It.retryPolicy(Kt)?It.process(!1).catch(()=>{}):It.stop()}})()}getNextRun(st){if(st)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const It=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),It}}}const jt=new ht.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function rn(ct,st){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,ze.Z)(function*({url:ct,body:st},It){const Kt={"Content-Type":"application/json"},en=It.getImmediate({optional:!0});if(en){const Yr=yield en.getHeartbeatsHeader();Yr&&(Kt["X-Firebase-Client"]=Yr)}const rr={method:"POST",body:JSON.stringify(st),headers:Kt};let Hn,mr;try{Hn=yield fetch(ct,rr)}catch(Yr){throw jt.create("fetch-network-error",{originalErrorMessage:null==Yr?void 0:Yr.message})}if(200!==Hn.status)throw jt.create("fetch-status-error",{httpStatus:Hn.status});try{mr=yield Hn.json()}catch(Yr){throw jt.create("fetch-parse-error",{originalErrorMessage:null==Yr?void 0:Yr.message})}const qr=mr.ttl.match(/^([\d.]+)(s)$/);if(!qr||!qr[2]||isNaN(Number(qr[1])))throw jt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${mr.ttl}`});const bs=1e3*Number(qr[1]),Ws=Date.now();return{token:mr.token,expireTimeMillis:Ws+bs,issuedAtTimeMillis:Ws}})).apply(this,arguments)}const En="firebase-app-check-database",Ht=1,cr="firebase-app-check-store";let pn=null;function Dr(ct,st){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,ze.Z)(function*(ct,st){const Kt=(yield function dr(){return pn||(pn=new Promise((ct,st)=>{try{const It=indexedDB.open(En,Ht);It.onsuccess=Kt=>{ct(Kt.target.result)},It.onerror=Kt=>{var en;st(jt.create("storage-open",{originalErrorMessage:null===(en=Kt.target.error)||void 0===en?void 0:en.message}))},It.onupgradeneeded=Kt=>{0===Kt.oldVersion&&Kt.target.result.createObjectStore(cr,{keyPath:"compositeKey"})}}catch(It){st(jt.create("storage-open",{originalErrorMessage:null==It?void 0:It.message}))}}),pn)}()).transaction(cr,"readwrite"),rr=Kt.objectStore(cr).put({compositeKey:ct,value:st});return new Promise((Hn,mr)=>{rr.onsuccess=qr=>{Hn()},Kt.onerror=qr=>{var bs;mr(jt.create("storage-set",{originalErrorMessage:null===(bs=qr.target.error)||void 0===bs?void 0:bs.message}))}})})).apply(this,arguments)}const Xr=new Ke.Yd("@firebase/app-check");function kr(ct,st){return(0,ht.hl)()?function Mr(ct,st){return Dr(function Nr(ct){return`${ct.options.appId}-${ct.name}`}(ct),st)}(ct,st).catch(It=>{Xr.warn(`Failed to write token to IndexedDB. Error: ${It}`)}):Promise.resolve()}function sr(){return Di.apply(this,arguments)}function Di(){return(Di=(0,ze.Z)(function*(){const ct=Ve();if(ct.enabled&&ct.token)return ct.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ni={error:"UNKNOWN_ERROR"};function Gr(ct){return ht.US.encodeString(JSON.stringify(ct),!1)}function ri(ct){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,ze.Z)(function*(ct,st=!1){const It=ct.app;!function Dt(ct){if(!it(ct).activated)throw jt.create("use-before-activation",{appName:ct.name})}(It);const Kt=it(It);let rr,en=Kt.token;if(en&&!de(en)&&(Kt.token=void 0,en=void 0),!en){const qr=yield Kt.cachedTokenPromise;qr&&(de(qr)?en=qr:yield kr(It,void 0))}if(!st&&en&&de(en))return{token:en.token};let mr,Hn=!1;if(function yi(){return Ve().enabled}()){Kt.exchangeTokenPromise||(Kt.exchangeTokenPromise=rn(function tn(ct,st){const{projectId:It,appId:Kt,apiKey:en}=ct.options;return{url:`${gt}/projects/${It}/apps/${Kt}:${qe}?key=${en}`,body:{debug_token:st}}}(It,yield sr()),ct.heartbeatServiceProvider).finally(()=>{Kt.exchangeTokenPromise=void 0}),Hn=!0);const qr=yield Kt.exchangeTokenPromise;return yield kr(It,qr),Kt.token=qr,{token:qr.token}}try{Kt.exchangeTokenPromise||(Kt.exchangeTokenPromise=Kt.provider.getToken().finally(()=>{Kt.exchangeTokenPromise=void 0}),Hn=!0),en=yield it(It).exchangeTokenPromise}catch(qr){"appCheck/throttled"===qr.code?Xr.warn(qr.message):Xr.error(qr),rr=qr}return en?rr?mr=de(en)?{token:en.token,internalError:rr}:lt(rr):(mr={token:en.token},Kt.token=en,yield kr(It,en)):mr=lt(rr),Hn&&function ye(ct,st){const It=it(ct).tokenObservers;for(const Kt of It)try{"EXTERNAL"===Kt.type&&null!=st.error?Kt.error(st.error):Kt.next(st)}catch{}}(It,mr),mr})).apply(this,arguments)}function Qe(ct,st){const It=it(ct),Kt=It.tokenObservers.filter(en=>en.next!==st);0===Kt.length&&It.tokenRefresher&&It.tokenRefresher.isRunning()&&It.tokenRefresher.stop(),It.tokenObservers=Kt}function Be(ct){const{app:st}=ct,It=it(st);let Kt=It.tokenRefresher;Kt||(Kt=function he(ct){const{app:st}=ct;return new _t((0,ze.Z)(function*(){let Kt;if(Kt=it(st).token?yield ri(ct,!0):yield ri(ct),Kt.error)throw Kt.error;if(Kt.internalError)throw Kt.internalError}),()=>!0,()=>{const It=it(st);if(It.token){let Kt=It.token.issuedAtTimeMillis+.5*(It.token.expireTimeMillis-It.token.issuedAtTimeMillis)+3e5;return Kt=Math.min(Kt,It.token.expireTimeMillis-3e5),Math.max(0,Kt-Date.now())}return 0},We.RETRIAL_MIN_WAIT,We.RETRIAL_MAX_WAIT)}(ct),It.tokenRefresher=Kt),!Kt.isRunning()&&It.isTokenAutoRefreshEnabled&&Kt.start()}function de(ct){return ct.expireTimeMillis-Date.now()>0}function lt(ct){return{token:Gr(ni),error:ct}}class Re{constructor(st,It){this.app=st,this.heartbeatServiceProvider=It}_delete(){const{tokenObservers:st}=it(this.app);for(const It of st)Qe(this.app,It.next);return Promise.resolve()}}const vi="app-check-internal";!function ui(){(0,Ae._registerComponent)(new Y.wA("app-check",ct=>function Fe(ct,st){return new Re(ct,st)}(ct.getProvider("app").getImmediate(),ct.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ct,st,It)=>{ct.getProvider(vi).initialize()})),(0,Ae._registerComponent)(new Y.wA(vi,ct=>function Ee(ct){return{getToken:st=>ri(ct,st),addTokenListener:st=>function Jr(ct,st,It,Kt){const{app:en}=ct,rr=it(en);if(rr.tokenObservers=[...rr.tokenObservers,{next:It,error:Kt,type:st}],rr.token&&de(rr.token)){const mr=rr.token;Promise.resolve().then(()=>{It({token:mr.token}),Be(ct)}).catch(()=>{})}rr.cachedTokenPromise.then(()=>Be(ct))}(ct,"INTERNAL",st),removeTokenListener:st=>Qe(ct.app,st)}}(ct.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ae.registerVersion)("@firebase/app-check","0.7.0")}();class ce{constructor(){return(0,y.vb)("app-check")}}typeof window<"u"&&window},1205:(ln,at,B)=>{"use strict";B.d(at,{zQ:()=>gt,ww:()=>wt,rT:()=>Ue,f7:()=>Et,L6:()=>fe,_Q:()=>Ct,lh:()=>it,Qv:()=>Ke,nw:()=>Ve});var y=B(4650),m=B(7579),q=B(9646),oe=B(9751),xe=B(8996),Pe=B(6451),Ce=B(5363),we=B(3900),He=B(4004),Se=B(6063);class me extends m.x{constructor(qe=1/0,We=1/0,Ge=Se.l){super(),this._bufferSize=qe,this._windowTime=We,this._timestampProvider=Ge,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=We===1/0,this._bufferSize=Math.max(1,qe),this._windowTime=Math.max(1,We)}next(qe){const{isStopped:We,_buffer:Ge,_infiniteTimeWindow:_t,_timestampProvider:mt,_windowTime:St}=this;We||(Ge.push(qe),!_t&&Ge.push(mt.now()+St)),this._trimBuffer(),super.next(qe)}_subscribe(qe){this._throwIfClosed(),this._trimBuffer();const We=this._innerSubscribe(qe),{_infiniteTimeWindow:Ge,_buffer:_t}=this,mt=_t.slice();for(let St=0;St<mt.length&&!qe.closed;St+=Ge?1:2)qe.next(mt[St]);return this._checkFinalizedStatuses(qe),We}_trimBuffer(){const{_bufferSize:qe,_timestampProvider:We,_buffer:Ge,_infiniteTimeWindow:_t}=this,mt=(_t?1:2)*qe;if(qe<1/0&&mt<Ge.length&&Ge.splice(0,Ge.length-mt),!_t){const St=We.now();let jt=0;for(let hn=1;hn<Ge.length&&Ge[hn]<=St;hn+=2)jt=hn;jt&&Ge.splice(0,jt+1)}}}var De=B(3099);function ke(yt,qe,We){let Ge,_t=!1;return yt&&"object"==typeof yt?({bufferSize:Ge=1/0,windowTime:qe=1/0,refCount:_t=!1,scheduler:We}=yt):Ge=null!=yt?yt:1/0,(0,De.B)({connector:()=>new me(Ge,qe,We),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:_t})}var je=B(590),Le=B(576);function Xe(yt,qe){return(0,Le.m)(qe)?(0,we.w)(()=>yt,qe):(0,we.w)(()=>yt)}var Te=B(9468),Ie=B(9300),ae=B(4976),dt=B(2011),ze=B(6895),Ae=B(6217),Y=B(9260);const Ke=new y.OlP("angularfire2.auth.use-emulator"),fe=new y.OlP("angularfire2.auth.settings"),Ct=new y.OlP("angularfire2.auth.tenant-id"),Ue=new y.OlP("angularfire2.auth.langugage-code"),it=new y.OlP("angularfire2.auth.use-device-language"),Et=new y.OlP("angularfire.auth.persistence"),Ve=(yt,qe,We,Ge,_t,mt,St,jt)=>(0,dt.cc)(`${yt.name}.auth`,"AngularFireAuth",yt.name,()=>{const hn=qe.runOutsideAngular(()=>yt.auth());if(We&&hn.useEmulator(...We),Ge&&(hn.tenantId=Ge),hn.languageCode=_t,mt&&hn.useDeviceLanguage(),St)for(const[Dt,ut]of Object.entries(St))hn.settings[Dt]=ut;return jt&&hn.setPersistence(jt),hn},[We,Ge,_t,mt,St,jt]);let gt=(()=>{class yt{constructor(We,Ge,_t,mt,St,jt,hn,Dt,ut,Rt,rn,Rn){const Un=new m.x,fn=(0,q.of)(void 0).pipe((0,Ce.Q)(St.outsideAngular),(0,we.w)(()=>mt.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,9568)))),(0,He.U)(()=>(0,dt.on)(We,mt,Ge)),(0,He.U)(tn=>Ve(tn,mt,jt,Dt,ut,Rt,hn,rn)),ke({bufferSize:1,refCount:!1}));if((0,ze.PM)(_t))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,q.of)(null);else{fn.pipe((0,je.P)()).subscribe();const En=fn.pipe((0,we.w)(Zn=>Zn.getRedirectResult().then(pn=>pn,()=>null)),ae.iC,ke({bufferSize:1,refCount:!1})),Ht=fn.pipe((0,we.w)(Zn=>new oe.y(pn=>({unsubscribe:mt.runOutsideAngular(()=>Zn.onAuthStateChanged(dr=>pn.next(dr),dr=>pn.error(dr),()=>pn.complete()))})))),cr=fn.pipe((0,we.w)(Zn=>new oe.y(pn=>({unsubscribe:mt.runOutsideAngular(()=>Zn.onIdTokenChanged(dr=>pn.next(dr),dr=>pn.error(dr),()=>pn.complete()))}))));this.authState=En.pipe(Xe(Ht),(0,Te.R)(St.outsideAngular),(0,Ce.Q)(St.insideAngular)),this.user=En.pipe(Xe(cr),(0,Te.R)(St.outsideAngular),(0,Ce.Q)(St.insideAngular)),this.idToken=this.user.pipe((0,we.w)(Zn=>Zn?(0,xe.D)(Zn.getIdToken()):(0,q.of)(null))),this.idTokenResult=this.user.pipe((0,we.w)(Zn=>Zn?(0,xe.D)(Zn.getIdTokenResult()):(0,q.of)(null))),this.credential=(0,Pe.T)(En,Un,this.authState.pipe((0,Ie.h)(Zn=>!Zn))).pipe((0,He.U)(Zn=>null!=Zn&&Zn.user?Zn:null),(0,Te.R)(St.outsideAngular),(0,Ce.Q)(St.insideAngular))}return(0,dt.pX)(this,fn,mt,{spy:{apply:(tn,En,Ht)=>{(tn.startsWith("signIn")||tn.startsWith("createUser"))&&Ht.then(cr=>Un.next(cr))}}})}}return yt.\u0275fac=function(We){return new(We||yt)(y.LFG(dt.Dh),y.LFG(dt.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(ae.HU),y.LFG(Ke,8),y.LFG(fe,8),y.LFG(Ct,8),y.LFG(Ue,8),y.LFG(it,8),y.LFG(Et,8),y.LFG(Ae.nm,8))},yt.\u0275prov=y.Yz7({token:yt,factory:yt.\u0275fac,providedIn:"any"}),yt})(),wt=(()=>{class yt{constructor(){Y.Z.registerVersion("angularfire",ae.q4.full,"auth-compat")}}return yt.\u0275fac=function(We){return new(We||yt)},yt.\u0275mod=y.oAB({type:yt}),yt.\u0275inj=y.cJS({providers:[gt]}),yt})()},1762:(ln,at,B)=>{"use strict";B.d(at,{ST:()=>tm,yb:()=>c0});var y=B(4650),m=B(4986),q=B(9751),oe=B(8996),xe=B(9646),Pe=B(4976),Ce=B(8675),we=B(4482),He=B(5403);function Se(){return(0,we.e)((r,e)=>{let t,a=!1;r.subscribe((0,He.x)(e,c=>{const p=t;t=c,a&&e.next([p,c]),a=!0}))})}var fe,me=B(4004),De=B(5026),ke=B(1884),je=B(9300),Le=B(2011),Xe=B(6895),Ie=(B(9568),B(3942)),ae=B(5861),dt=B(6881),ze=B(4859),Ae=B(1877),Y=B(2090),ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ke={},Ct=Ct||{},Ue=ht||self;function it(){}function Et(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function Ve(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var wt="closure_uid_"+(1e9*Math.random()>>>0),yt=0;function qe(r,e,t){return r.call.apply(r.bind,arguments)}function We(r,e,t){if(!r)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,a),r.apply(e,c)}}return function(){return r.apply(e,arguments)}}function Ge(r,e,t){return(Ge=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qe:We).apply(null,arguments)}function _t(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var a=t.slice();return a.push.apply(a,arguments),r.apply(this,a)}}function mt(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(a,c,p){for(var E=Array(arguments.length-2),O=2;O<arguments.length;O++)E[O-2]=arguments[O];return e.prototype[c].apply(a,E)}}function St(){this.s=this.s,this.o=this.o}St.prototype.s=!1,St.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function gt(r){Object.prototype.hasOwnProperty.call(r,wt)&&r[wt]||(r[wt]=++yt)}(this)},St.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hn=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function Dt(r){const e=r.length;if(0<e){const t=Array(e);for(let a=0;a<e;a++)t[a]=r[a];return t}return[]}function ut(r,e){for(let t=1;t<arguments.length;t++){const a=arguments[t];if(Et(a)){const c=r.length||0,p=a.length||0;r.length=c+p;for(let E=0;E<p;E++)r[c+E]=a[E]}else r.push(a)}}function Rt(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var rn=function(){if(!Ue.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Ue.addEventListener("test",it,e),Ue.removeEventListener("test",it,e)}catch{}return r}();function Rn(r){return/^[\s\xa0]*$/.test(r)}var Un=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function fn(r,e){return r<e?-1:r>e?1:0}function tn(){var r=Ue.navigator;return r&&(r=r.userAgent)?r:""}function En(r){return-1!=tn().indexOf(r)}function Ht(r){return Ht[" "](r),r}function cr(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}Ht[" "]=it;var Dr,r,Zn=En("Opera"),pn=En("Trident")||En("MSIE"),dr=En("Edge"),Mi=dr||pn,Mr=En("Gecko")&&!(-1!=tn().toLowerCase().indexOf("webkit")&&!En("Edge"))&&!(En("Trident")||En("MSIE"))&&!En("Edge"),Ri=-1!=tn().toLowerCase().indexOf("webkit")&&!En("Edge");function bi(){var r=Ue.document;return r?r.documentMode:void 0}e:{var Xn="",wn=(r=tn(),Mr?/rv:([^\);]+)(\)|;)/.exec(r):dr?/Edge\/([\d\.]+)/.exec(r):pn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Ri?/WebKit\/(\S+)/.exec(r):Zn?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(wn&&(Xn=wn?wn[1]:""),pn){var sn=bi();if(null!=sn&&sn>parseFloat(Xn)){Dr=String(sn);break e}}Dr=Xn}var Nr={},kr=Ue.document&&pn&&(bi()||parseInt(Dr,10))||void 0;function ai(r,e){if(Rt.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,a=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(Mr){e:{try{Ht(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:_r[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&ai.$.h.call(this)}}mt(ai,Rt);var _r={2:"touch",3:"pen",4:"mouse"};ai.prototype.h=function(){ai.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var yi="closure_listenable_"+(1e6*Math.random()|0),sr=0;function Di(r,e,t,a,c){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!a,this.la=c,this.key=++sr,this.fa=this.ia=!1}function tr(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function ni(r,e,t){for(const a in r)e.call(t,r[a],a,r)}function Gr(r){const e={};for(const t in r)e[t]=r[t];return e}const ri="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sr(r,e){let t,a;for(let c=1;c<arguments.length;c++){for(t in a=arguments[c],a)r[t]=a[t];for(let p=0;p<ri.length;p++)t=ri[p],Object.prototype.hasOwnProperty.call(a,t)&&(r[t]=a[t])}}function _i(r){this.src=r,this.g={},this.h=0}function Ur(r,e){var t=e.type;if(t in r.g){var p,a=r.g[t],c=hn(a,e);(p=0<=c)&&Array.prototype.splice.call(a,c,1),p&&(tr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function Jr(r,e,t,a){for(var c=0;c<r.length;++c){var p=r[c];if(!p.fa&&p.listener==e&&p.capture==!!t&&p.la==a)return c}return-1}_i.prototype.add=function(r,e,t,a,c){var p=r.toString();(r=this.g[p])||(r=this.g[p]=[],this.h++);var E=Jr(r,e,a,c);return-1<E?(e=r[E],t||(e.ia=!1)):((e=new Di(e,this.src,p,!!a,c)).ia=t,r.push(e)),e};var Qe="closure_lm_"+(1e6*Math.random()|0),Be={};function he(r,e,t,a,c){if(a&&a.once)return lt(r,e,t,a,c);if(Array.isArray(e)){for(var p=0;p<e.length;p++)he(r,e[p],t,a,c);return null}return t=gn(t),r&&r[yi]?r.O(e,t,Ve(a)?!!a.capture:!!a,c):ye(r,e,t,!1,a,c)}function ye(r,e,t,a,c,p){if(!e)throw Error("Invalid event type");var E=Ve(c)?!!c.capture:!!c,O=xt(r);if(O||(r[Qe]=O=new _i(r)),(t=O.add(e,t,a,E,p)).proxy)return t;if(a=function de(){const e=et;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=a,a.src=r,a.listener=t,r.addEventListener)rn||(c=E),void 0===c&&(c=!1),r.addEventListener(e.toString(),a,c);else if(r.attachEvent)r.attachEvent(Ee(e.toString()),a);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(a)}return t}function lt(r,e,t,a,c){if(Array.isArray(e)){for(var p=0;p<e.length;p++)lt(r,e[p],t,a,c);return null}return t=gn(t),r&&r[yi]?r.P(e,t,Ve(a)?!!a.capture:!!a,c):ye(r,e,t,!0,a,c)}function Re(r,e,t,a,c){if(Array.isArray(e))for(var p=0;p<e.length;p++)Re(r,e[p],t,a,c);else a=Ve(a)?!!a.capture:!!a,t=gn(t),r&&r[yi]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=Jr(p=r.g[e],t,a,c))&&(tr(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete r.g[e],r.h--))):r&&(r=xt(r))&&(e=r.g[e.toString()],r=-1,e&&(r=Jr(e,t,a,c)),(t=-1<r?e[r]:null)&&Fe(t))}function Fe(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[yi])Ur(e.i,r);else{var t=r.type,a=r.proxy;e.removeEventListener?e.removeEventListener(t,a,r.capture):e.detachEvent?e.detachEvent(Ee(t),a):e.addListener&&e.removeListener&&e.removeListener(a),(t=xt(e))?(Ur(t,r),0==t.h&&(t.src=null,e[Qe]=null)):tr(r)}}}function Ee(r){return r in Be?Be[r]:Be[r]="on"+r}function et(r,e){if(r.fa)r=!0;else{e=new ai(e,this);var t=r.listener,a=r.la||r.src;r.ia&&Fe(r),r=t.call(a,e)}return r}function xt(r){return(r=r[Qe])instanceof _i?r:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(r){return"function"==typeof r?r:(r[Yt]||(r[Yt]=function(e){return r.handleEvent(e)}),r[Yt])}function mn(){St.call(this),this.i=new _i(this),this.S=this,this.J=null}function nr(r,e){var t,a=r.J;if(a)for(t=[];a;a=a.J)t.push(a);if(r=r.S,a=e.type||e,"string"==typeof e)e=new Rt(e,r);else if(e instanceof Rt)e.target=e.target||r;else{var c=e;Sr(e=new Rt(a,r),c)}if(c=!0,t)for(var p=t.length-1;0<=p;p--){var E=e.g=t[p];c=Wr(E,a,!0,e)&&c}if(c=Wr(E=e.g=r,a,!0,e)&&c,c=Wr(E,a,!1,e)&&c,t)for(p=0;p<t.length;p++)c=Wr(E=e.g=t[p],a,!1,e)&&c}function Wr(r,e,t,a){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,p=0;p<e.length;++p){var E=e[p];if(E&&!E.fa&&E.capture==t){var O=E.listener,G=E.la||E.src;E.ia&&Ur(r.i,E),c=!1!==O.call(G,a)&&c}}return c&&!a.defaultPrevented}mt(mn,St),mn.prototype[yi]=!0,mn.prototype.removeEventListener=function(r,e,t,a){Re(this,r,e,t,a)},mn.prototype.N=function(){if(mn.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],a=0;a<t.length;a++)tr(t[a]);delete r.g[e],r.h--}}this.J=null},mn.prototype.O=function(r,e,t,a){return this.i.add(String(r),e,!1,t,a)},mn.prototype.P=function(r,e,t,a){return this.i.add(String(r),e,!0,t,a)};var kt=Ue.JSON.stringify;function At(){var r=Wn;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var Fr,On=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new Jn,r=>r.reset());class Jn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function vr(r){Ue.setTimeout(()=>{throw r},0)}function Tn(r,e){Fr||function wr(){var r=Ue.Promise.resolve(void 0);Fr=function(){r.then(Ps)}}(),jn||(Fr(),jn=!0),Wn.add(r,e)}var jn=!1,Wn=new class nn{constructor(){this.h=this.g=null}add(e,t){const a=On.get();a.set(e,t),this.h?this.h.next=a:this.g=a,this.h=a}};function Ps(){for(var r;r=At();){try{r.h.call(r.g)}catch(t){vr(t)}var e=On;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}jn=!1}function ns(r,e){mn.call(this),this.h=r||1,this.g=e||Ue,this.j=Ge(this.qb,this),this.l=Date.now()}function as(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function li(r,e,t){if("function"==typeof r)t&&(r=Ge(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Ge(r.handleEvent,r)}return 2147483647<Number(e)?-1:Ue.setTimeout(r,e||0)}function _n(r){r.g=li(()=>{r.g=null,r.i&&(r.i=!1,_n(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}mt(ns,mn),(fe=ns.prototype).ga=!1,fe.T=null,fe.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),nr(this,"tick"),this.ga&&(as(this),this.start()))}},fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.N=function(){ns.$.N.call(this),as(this),delete this.g};class gr extends St{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_n(this)}N(){super.N(),this.g&&(Ue.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function si(r){St.call(this),this.h=r,this.g={}}mt(si,St);var Rr=[];function vi(r,e,t,a){Array.isArray(t)||(t&&(Rr[0]=t.toString()),t=Rr);for(var c=0;c<t.length;c++){var p=he(e,t[c],a||r.handleEvent,!1,r.h||r);if(!p)break;r.g[p.key]=p}}function ui(r){ni(r.g,function(e,t){this.g.hasOwnProperty(t)&&Fe(e)},r),r.g={}}function $i(){this.g=!0}function Me(r,e,t,a){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function be(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var a=t[r];if(!(2>a.length)){var c=a[1];if(Array.isArray(c)&&!(1>c.length)){var p=c[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var E=1;E<c.length;E++)c[E]=""}}}return kt(t)}catch{return e}}(r,t)+(a?" "+a:"")})}si.prototype.N=function(){si.$.N.call(this),ui(this)},si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$i.prototype.Ea=function(){this.g=!1},$i.prototype.info=function(){};var Je={},nt=null;function Lt(){return nt=nt||new mn}function $t(r){Rt.call(this,Je.Ta,r)}function Gt(r){const e=Lt();nr(e,new $t(e))}function Wt(r,e){Rt.call(this,Je.STAT_EVENT,r),this.stat=e}function cn(r){const e=Lt();nr(e,new Wt(e,r))}function Qn(r,e){Rt.call(this,Je.Ua,r),this.size=e}function Ln(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Ue.setTimeout(function(){r()},e)}Je.Ta="serverreachability",mt($t,Rt),Je.STAT_EVENT="statevent",mt(Wt,Rt),Je.Ua="timingevent",mt(Qn,Rt);var ar={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Fi={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Li(){}function st(){}Li.prototype.h=null;var rr,It={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Kt(){Rt.call(this,"d")}function en(){Rt.call(this,"c")}function Hn(){}function mr(r,e,t,a){this.l=r,this.j=e,this.m=t,this.W=a||1,this.U=new si(this),this.P=bs,this.V=new ns(r=Mi?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new qr}function qr(){this.i=null,this.g="",this.h=!1}mt(Kt,Rt),mt(en,Rt),mt(Hn,Li),Hn.prototype.g=function(){return new XMLHttpRequest},Hn.prototype.i=function(){return{}},rr=new Hn;var bs=45e3,Ws={},Yr={};function Ks(r,e,t){r.L=1,r.v=po(to(e)),r.s=t,r.S=!0,ho(r,null)}function ho(r,e){r.G=Date.now(),fo(r),r.A=to(r.v);var t=r.A,a=r.W;Array.isArray(a)||(a=[String(a)]),Yi(t.i,"t",a),r.C=0,t=r.l.I,r.h=new qr,r.g=hs(r.l,t?e:null,!r.s),0<r.O&&(r.M=new gr(Ge(r.Pa,r,r.g),r.O)),vi(r.U,r.g,"readystatechange",r.nb),e=r.I?Gr(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),Gt(),function ei(r,e,t,a,c,p){r.info(function(){if(r.g)if(p)for(var E="",O=p.split("&"),G=0;G<O.length;G++){var te=O[G].split("=");if(1<te.length){var pe=te[0];te=te[1];var tt=pe.split("_");E=2<=tt.length&&"type"==tt[1]?E+(pe+"=")+te+"&":E+(pe+"=redacted&")}}else E=null;else E=p;return"XMLHTTP REQ ("+a+") [attempt "+c+"]: "+e+"\n"+t+"\n"+E})}(r.j,r.u,r.A,r.m,r.W,r.s)}function No(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function ms(r,e,t){let c,a=!0;for(;!r.J&&r.C<t.length;){if(c=La(r,t),c==Yr){4==e&&(r.o=4,cn(14),a=!1),Me(r.j,r.m,null,"[Incomplete Response]");break}if(c==Ws){r.o=4,cn(15),Me(r.j,r.m,t,"[Invalid Chunk]"),a=!1;break}Me(r.j,r.m,c,null),Qo(r,c)}No(r)&&c!=Yr&&c!=Ws&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,cn(16),a=!1),r.i=r.i&&a,a?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Jo(e),e.L=!0,cn(11))):(Me(r.j,r.m,t,"[Invalid Chunked Response]"),Os(r),Fo(r))}function La(r,e){var t=r.C,a=e.indexOf("\n",t);return-1==a?Yr:(t=Number(e.substring(t,a)),isNaN(t)?Ws:(a+=1)+t>e.length?Yr:(e=e.substr(a,t),r.C=a+t,e))}function fo(r){r.Y=Date.now()+r.P,Zo(r,r.P)}function Zo(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Ln(Ge(r.lb,r),e)}function ko(r){r.B&&(Ue.clearTimeout(r.B),r.B=null)}function Fo(r){0==r.l.H||r.J||Ka(r.l,r)}function Os(r){ko(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,as(r.V),ui(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function Qo(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||K(t.h,r)))if(!r.K&&K(t.h,r)&&3==t.H){try{var a=t.Ja.g.parse(e)}catch{a=null}if(Array.isArray(a)&&3==a.length){var c=a;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;Wa(t),za(t)}yo(t),cn(18)}}else t.Fa=c[1],0<t.Fa-t.V&&37500>c[2]&&t.M&&0==t.A&&!t.v&&(t.v=Ln(Ge(t.ib,t),6e3));if(1>=D(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Hs(t,11)}else if((r.K||t.g==r)&&Wa(t),!Rn(e))for(c=t.Ja.g.parse(e),e=0;e<c.length;e++){let te=c[e];if(t.V=te[0],te=te[1],2==t.H)if("c"==te[0]){t.J=te[1],t.oa=te[2];const pe=te[3];null!=pe&&(t.qa=pe,t.j.info("VER="+t.qa));const tt=te[4];null!=tt&&(t.Ga=tt,t.j.info("SVER="+t.Ga));const Pt=te[5];null!=Pt&&"number"==typeof Pt&&0<Pt&&(t.K=a=1.5*Pt,t.j.info("backChannelRequestTimeoutMs_="+a)),a=t;const Jt=r.g;if(Jt){const bn=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bn){var p=a.h;p.g||-1==bn.indexOf("spdy")&&-1==bn.indexOf("quic")&&-1==bn.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(_e(p,p.h),p.h=null))}if(a.F){const Dn=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Dn&&(a.Da=Dn,pi(a.G,a.F,Dn))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var E=r;if((a=t).wa=hl(a,a.I?a.oa:null,a.Y),E.K){Qt(a.h,E);var O=E,G=a.K;G&&O.setTimeout(G),O.B&&(ko(O),fo(O)),a.g=E}else Ga(a);0<t.i.length&&dl(t)}else"stop"!=te[0]&&"close"!=te[0]||Hs(t,7);else 3==t.H&&("stop"==te[0]||"close"==te[0]?"stop"==te[0]?Hs(t,7):Uo(t):"noop"!=te[0]&&t.l&&t.l.Aa(te),t.A=0)}Gt()}catch{}}function ls(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(Et(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function Ea(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(Et(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const a in r)e[t++]=a;return e}}}(r),a=function Ba(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(Et(r)){for(var e=[],t=r.length,a=0;a<t;a++)e.push(r[a]);return e}for(a in e=[],t=0,r)e[t++]=r[a];return e}(r),c=a.length,p=0;p<c;p++)e.call(void 0,a[p],t&&t[p],r)}(fe=mr.prototype).setTimeout=function(r){this.P=r},fe.nb=function(r){r=r.target;const e=this.M;e&&3==Ns(r)?e.l():this.Pa(r)},fe.Pa=function(r){try{if(r==this.g)e:{const pe=Ns(this.g);var e=this.g.Ia();if(this.g.da(),!(3>pe)&&(3!=pe||Mi||this.g&&(this.h.h||this.g.ja()||Ha(this.g)))){this.J||4!=pe||7==e||Gt(),ko(this);var t=this.g.da();this.aa=t;t:if(No(this)){var a=Ha(this.g);r="";var c=a.length,p=4==Ns(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Os(this),Fo(this);var E="";break t}this.h.i=new Ue.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,r+=this.h.i.decode(a[e],{stream:p&&e==c-1});a.splice(0,c),this.h.g+=r,this.C=0,E=this.h.g}else E=this.g.ja();if(this.i=200==t,function ce(r,e,t,a,c,p,E){r.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+p+" "+E})}(this.j,this.u,this.A,this.m,this.W,pe,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var O,G=this.g;if((O=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rn(O)){var te=O;break t}}te=null}if(!(t=te)){this.i=!1,this.o=3,cn(12),Os(this),Fo(this);break e}Me(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qo(this,t)}this.S?(ms(this,pe,E),Mi&&this.i&&3==pe&&(vi(this.U,this.V,"tick",this.mb),this.V.start())):(Me(this.j,this.m,E,null),Qo(this,E)),4==pe&&Os(this),this.i&&!this.J&&(4==pe?Ka(this.l,this):(this.i=!1,fo(this)))}else 400==t&&0<E.indexOf("Unknown SID")?(this.o=3,cn(12)):(this.o=0,cn(13)),Os(this),Fo(this)}}}catch{}},fe.mb=function(){if(this.g){var r=Ns(this.g),e=this.g.ja();this.C<e.length&&(ko(this),ms(this,r,e),this.i&&4!=r&&fo(this))}},fe.cancel=function(){this.J=!0,Os(this)},fe.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function Ye(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Gt(),cn(17)),Os(this),this.o=2,Fo(this)):Zo(this,this.Y-r)};var So=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function us(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof us){this.h=void 0!==e?e:r.h,Vs(this,r.j),this.s=r.s,this.g=r.g,ys(this,r.m),this.l=r.l,e=r.i;var t=new go;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),js(this,t),this.o=r.o}else r&&(t=String(r).match(So))?(this.h=!!e,Vs(this,t[1]||"",!0),this.s=Lo(t[2]||""),this.g=Lo(t[3]||"",!0),ys(this,t[4]),this.l=Lo(t[5]||"",!0),js(this,t[6]||"",!0),this.o=Lo(t[7]||"")):(this.h=!!e,this.i=new go(null,this.h))}function to(r){return new us(r)}function Vs(r,e,t){r.j=t?Lo(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function ys(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function js(r,e,t){e instanceof go?(r.i=e,function Ao(r,e){e&&!r.j&&(Ei(r),r.i=null,r.g.forEach(function(t,a){var c=a.toLowerCase();a!=c&&(Xo(this,a),Yi(this,c,t))},r)),r.j=e}(r.i,r.h)):(t||(e=no(e,wa)),r.i=new go(e,r.h))}function pi(r,e,t){r.i.set(e,t)}function po(r){return pi(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Lo(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function no(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,hu),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function hu(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}us.prototype.toString=function(){var r=[],e=this.j;e&&r.push(no(e,Bo,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(no(e,Bo,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(no(t,"/"==t.charAt(0)?ua:Ua,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",no(t,$o)),r.join("")};var Bo=/[#\/\?@]/g,Ua=/[#\?:]/g,ua=/[#\?]/g,wa=/[#\?@]/g,$o=/#/g;function go(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function Ei(r){r.g||(r.g=new Map,r.h=0,r.i&&function $a(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var a=r[t].indexOf("="),c=null;if(0<=a){var p=r[t].substring(0,a);c=r[t].substring(a+1)}else p=r[t];e(p,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Xo(r,e){Ei(r),e=rs(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function _s(r,e){return Ei(r),e=rs(r,e),r.g.has(e)}function Yi(r,e,t){Xo(r,e),0<t.length&&(r.i=null,r.g.set(rs(r,e),Dt(t)),r.h+=t.length)}function rs(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Va(r){this.l=r||C,r=Ue.PerformanceNavigationTiming?0<(r=Ue.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Ue.g&&Ue.g.Ka&&Ue.g.Ka()&&Ue.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=go.prototype).add=function(r,e){Ei(this),this.i=null,r=rs(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},fe.forEach=function(r,e){Ei(this),this.g.forEach(function(t,a){t.forEach(function(c){r.call(e,c,a,this)},this)},this)},fe.sa=function(){Ei(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let a=0;a<e.length;a++){const c=r[a];for(let p=0;p<c.length;p++)t.push(e[a])}return t},fe.Z=function(r){Ei(this);let e=[];if("string"==typeof r)_s(this,r)&&(e=e.concat(this.g.get(rs(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},fe.set=function(r,e){return Ei(this),this.i=null,_s(this,r=rs(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},fe.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var a=e[t];const p=encodeURIComponent(String(a)),E=this.Z(a);for(a=0;a<E.length;a++){var c=p;""!==E[a]&&(c+="="+encodeURIComponent(String(E[a]))),r.push(c)}}return this.i=r.join("&")};var C=10;function Q(r){return!!r.h||!!r.g&&r.g.size>=r.j}function D(r){return r.h?1:r.g?r.g.size:0}function K(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function _e(r,e){r.g?r.g.add(e):r.h=e}function Qt(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Vn(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return Dt(r.i)}function Kn(){}function Ar(){this.g=new Kn}function Nn(r,e,t){const a=t||"";try{ls(r,function(c,p){let E=c;Ve(c)&&(E=kt(c)),e.push(a+p+"="+encodeURIComponent(E))})}catch(c){throw e.push(a+"type="+encodeURIComponent("_badmap")),c}}function W(r,e,t,a,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(a)}catch{}}function H(r){this.l=r.fc||null,this.j=r.ob||!1}function L(r,e){mn.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=ue,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Va.prototype.cancel=function(){if(this.i=Vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},Kn.prototype.stringify=function(r){return Ue.JSON.stringify(r,void 0)},Kn.prototype.parse=function(r){return Ue.JSON.parse(r,void 0)},mt(H,Li),H.prototype.g=function(){return new L(this.l,this.j)},H.prototype.i=function(r){return function(){return r}}({}),mt(L,mn);var ue=0;function Ft(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function Bn(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Oi(r)}function Oi(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(fe=L.prototype).open=function(r,e){if(this.readyState!=ue)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,Oi(this)},fe.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||Ue).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bn(this)),this.readyState=ue},fe.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ue.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ft(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},fe.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?Bn(this):Oi(this),3==this.readyState&&Ft(this)}},fe.Za=function(r){this.g&&(this.response=this.responseText=r,Bn(this))},fe.Ya=function(r){this.g&&(this.response=r,Bn(this))},fe.ka=function(){this.g&&Bn(this)},fe.setRequestHeader=function(r,e){this.v.append(r,e)},fe.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(L.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var Vt=Ue.JSON.parse;function $n(r){mn.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ia,this.L=this.M=!1}mt($n,mn);var Ia="",Dl=/^https?$/i,is=["POST","PUT"];function ja(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,ro(r),cl(r)}function ro(r){r.F||(r.F=!0,nr(r,"complete"),nr(r,"error"))}function Tl(r){if(r.h&&typeof Ct<"u"&&(!r.C[1]||4!=Ns(r)||2!=r.da()))if(r.v&&4==Ns(r))li(r.La,0,r);else if(nr(r,"readystatechange"),4==Ns(r)){r.h=!1;try{const O=r.da();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var a;if(a=0===O){var c=String(r.I).match(So)[1]||null;if(!c&&Ue.self&&Ue.self.location){var p=Ue.self.location.protocol;c=p.substr(0,p.length-1)}a=!Dl.test(c?c.toLowerCase():"")}t=a}if(t)nr(r,"complete"),nr(r,"success");else{r.m=6;try{var E=2<Ns(r)?r.g.statusText:""}catch{E=""}r.j=E+" ["+r.da()+"]",ro(r)}}finally{cl(r)}}}function cl(r,e){if(r.g){Sl(r);const t=r.g,a=r.C[0]?it:null;r.g=null,r.C=null,e||nr(r,"ready");try{t.onreadystatechange=a}catch{}}}function Sl(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(Ue.clearTimeout(r.A),r.A=null)}function Ns(r){return r.g?r.g.readyState:0}function Ha(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case Ia:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function ds(r){let e="";return ni(r,function(t,a){e+=a,e+=":",e+=t,e+="\r\n"}),e}function ks(r,e,t){e:{for(a in t){var a=!1;break e}a=!0}a||(t=ds(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):pi(r,e,t))}function io(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function mo(r){this.Ga=0,this.i=[],this.j=new $i,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=io("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=io("baseRetryDelayMs",5e3,r),this.hb=io("retryDelaySeedMs",1e4,r),this.eb=io("forwardChannelMaxRetries",2,r),this.xa=io("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new Va(r&&r.concurrentRequestLimit),this.Ja=new Ar,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Uo(r){if(ca(r),3==r.H){var e=r.W++,t=to(r.G);pi(t,"SID",r.J),pi(t,"RID",e),pi(t,"TYPE","terminate"),da(r,t),(e=new mr(r,r.j,e,void 0)).L=2,e.v=po(to(t)),t=!1,Ue.navigator&&Ue.navigator.sendBeacon&&(t=Ue.navigator.sendBeacon(e.v.toString(),"")),!t&&Ue.Image&&((new Image).src=e.v,t=!0),t||(e.g=hs(e.l,null),e.g.ha(e.v)),e.G=Date.now(),fo(e)}Xl(r)}function za(r){r.g&&(Jo(r),r.g.cancel(),r.g=null)}function ca(r){za(r),r.u&&(Ue.clearTimeout(r.u),r.u=null),Wa(r),r.h.cancel(),r.m&&("number"==typeof r.m&&Ue.clearTimeout(r.m),r.m=null)}function dl(r){Q(r.h)||r.m||(r.m=!0,Tn(r.Na,r),r.C=0)}function Qi(r,e){var t;t=e?e.m:r.W++;const a=to(r.G);pi(a,"SID",r.J),pi(a,"RID",t),pi(a,"AID",r.V),da(r,a),r.o&&r.s&&ks(a,r.o,r.s),t=new mr(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=ha(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),_e(r.h,t),Ks(t,a,e)}function da(r,e){r.ma&&ni(r.ma,function(t,a){pi(e,a,t)}),r.l&&ls({},function(t,a){pi(e,a,t)})}function ha(r,e,t){t=Math.min(r.i.length,t);var a=r.l?Ge(r.l.Va,r.l,r):null;e:{var c=r.i;let p=-1;for(;;){const E=["count="+t];-1==p?0<t?(p=c[0].h,E.push("ofs="+p)):p=0:E.push("ofs="+p);let O=!0;for(let G=0;G<t;G++){let te=c[G].h;const pe=c[G].g;if(te-=p,0>te)p=Math.max(0,c[G].h-100),O=!1;else try{Nn(pe,E,"req"+te+"_")}catch{a&&a(pe)}}if(O){a=E.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,a}function Ga(r){r.g||r.u||(r.ba=1,Tn(r.Ma,r),r.A=0)}function yo(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=Ln(Ge(r.Ma,r),ba(r,r.A)),r.A++,0))}function Jo(r){null!=r.B&&(Ue.clearTimeout(r.B),r.B=null)}function _o(r){r.g=new mr(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=to(r.wa);pi(e,"RID","rpc"),pi(e,"SID",r.J),pi(e,"CI",r.M?"0":"1"),pi(e,"AID",r.V),pi(e,"TYPE","xmlhttp"),da(r,e),r.o&&r.s&&ks(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=po(to(e)),t.s=null,t.S=!0,ho(t,r)}function Wa(r){null!=r.v&&(Ue.clearTimeout(r.v),r.v=null)}function Ka(r,e){var t=null;if(r.g==e){Wa(r),Jo(r),r.g=null;var a=2}else{if(!K(r.h,e))return;t=e.F,Qt(r.h,e),a=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==a){t=e.s?e.s.length:0,e=Date.now()-e.G;var c=r.C;nr(a=Lt(),new Qn(a,t)),dl(r)}else Ga(r);else if(3==(c=e.o)||0==c&&0<r.ta||!(1==a&&function Al(r,e){return!(D(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=Ln(Ge(r.Na,r,e),ba(r,r.C)),r.C++,0)))}(r,e)||2==a&&yo(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),c){case 1:Hs(r,5);break;case 4:Hs(r,10);break;case 3:Hs(r,6);break;default:Hs(r,2)}}function ba(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function Hs(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var a=Ge(r.pb,r);t||(t=new us("//www.google.com/images/cleardot.gif"),Ue.location&&"http"==Ue.location.protocol||Vs(t,"https"),po(t)),function ts(r,e){const t=new $i;if(Ue.Image){const a=new Image;a.onload=_t(W,t,a,"TestLoadImage: loaded",!0,e),a.onerror=_t(W,t,a,"TestLoadImage: error",!1,e),a.onabort=_t(W,t,a,"TestLoadImage: abort",!1,e),a.ontimeout=_t(W,t,a,"TestLoadImage: timeout",!1,e),Ue.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=r}else e(!1)}(t.toString(),a)}else cn(2);r.H=0,r.l&&r.l.za(e),Xl(r),ca(r)}function Xl(r){if(r.H=0,r.pa=[],r.l){const e=Vn(r.h);(0!=e.length||0!=r.i.length)&&(ut(r.pa,e),ut(r.pa,r.i),r.h.i.length=0,Dt(r.i),r.i.length=0),r.l.ya()}}function hl(r,e,t){var a=t instanceof us?to(t):new us(t,void 0);if(""!=a.g)e&&(a.g=e+"."+a.g),ys(a,a.m);else{var c=Ue.location;a=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var p=new us(null,void 0);a&&Vs(p,a),e&&(p.g=e),c&&ys(p,c),t&&(p.l=t),a=p}return e=r.Da,(t=r.F)&&e&&pi(a,t,e),pi(a,"VER",r.qa),da(r,a),a}function hs(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $n(t&&r.Ha&&!r.va?new H({ob:!0}):r.va)).Oa(r.I),e}function ss(){}function qs(){if(pn&&!(10<=Number(kr)))throw Error("Environmental error: no available transport.")}function Lr(r,e){mn.call(this),this.g=new mo(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!Rn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Rn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Mo(this)}function vs(r){Kt.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function qa(){en.call(this),this.status=1}function Mo(r){this.g=r}function Es(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Vo(r,e,t){t||(t=0);var a=Array(16);if("string"==typeof e)for(var c=0;16>c;++c)a[c]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(c=0;16>c;++c)a[c]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var p=r.g[3],E=(e=r.g[0])+(p^(t=r.g[1])&((c=r.g[2])^p))+a[0]+3614090360&4294967295;E=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=(t=(c=(p=(e=t+(E<<7&4294967295|E>>>25))+((E=p+(c^e&(t^c))+a[1]+3905402710&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^p&(e^t))+a[2]+606105819&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(p^e))+a[3]+3250441966&4294967295)<<22&4294967295|E>>>10))+((E=e+(p^t&(c^p))+a[4]+4118548399&4294967295)<<7&4294967295|E>>>25))+((E=p+(c^e&(t^c))+a[5]+1200080426&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^p&(e^t))+a[6]+2821735955&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(p^e))+a[7]+4249261313&4294967295)<<22&4294967295|E>>>10))+((E=e+(p^t&(c^p))+a[8]+1770035416&4294967295)<<7&4294967295|E>>>25))+((E=p+(c^e&(t^c))+a[9]+2336552879&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^p&(e^t))+a[10]+4294925233&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(p^e))+a[11]+2304563134&4294967295)<<22&4294967295|E>>>10))+((E=e+(p^t&(c^p))+a[12]+1804603682&4294967295)<<7&4294967295|E>>>25))+((E=p+(c^e&(t^c))+a[13]+4254626195&4294967295)<<12&4294967295|E>>>20))+((E=c+(t^p&(e^t))+a[14]+2792965006&4294967295)<<17&4294967295|E>>>15))+((E=t+(e^c&(p^e))+a[15]+1236535329&4294967295)<<22&4294967295|E>>>10))+((E=e+(c^p&(t^c))+a[1]+4129170786&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^c&(e^t))+a[6]+3225465664&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(p^e))+a[11]+643717713&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(c^p))+a[0]+3921069994&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^p&(t^c))+a[5]+3593408605&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^c&(e^t))+a[10]+38016083&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(p^e))+a[15]+3634488961&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(c^p))+a[4]+3889429448&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^p&(t^c))+a[9]+568446438&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^c&(e^t))+a[14]+3275163606&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(p^e))+a[3]+4107603335&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(c^p))+a[8]+1163531501&4294967295)<<20&4294967295|E>>>12))+((E=e+(c^p&(t^c))+a[13]+2850285829&4294967295)<<5&4294967295|E>>>27))+((E=p+(t^c&(e^t))+a[2]+4243563512&4294967295)<<9&4294967295|E>>>23))+((E=c+(e^t&(p^e))+a[7]+1735328473&4294967295)<<14&4294967295|E>>>18))+((E=t+(p^e&(c^p))+a[12]+2368359562&4294967295)<<20&4294967295|E>>>12))+((E=e+(t^c^p)+a[5]+4294588738&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^c)+a[8]+2272392833&4294967295)<<11&4294967295|E>>>21))+((E=c+(p^e^t)+a[11]+1839030562&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^p^e)+a[14]+4259657740&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^p)+a[1]+2763975236&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^c)+a[4]+1272893353&4294967295)<<11&4294967295|E>>>21))+((E=c+(p^e^t)+a[7]+4139469664&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^p^e)+a[10]+3200236656&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^p)+a[13]+681279174&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^c)+a[0]+3936430074&4294967295)<<11&4294967295|E>>>21))+((E=c+(p^e^t)+a[3]+3572445317&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^p^e)+a[6]+76029189&4294967295)<<23&4294967295|E>>>9))+((E=e+(t^c^p)+a[9]+3654602809&4294967295)<<4&4294967295|E>>>28))+((E=p+(e^t^c)+a[12]+3873151461&4294967295)<<11&4294967295|E>>>21))+((E=c+(p^e^t)+a[15]+530742520&4294967295)<<16&4294967295|E>>>16))+((E=t+(c^p^e)+a[2]+3299628645&4294967295)<<23&4294967295|E>>>9))+((E=e+(c^(t|~p))+a[0]+4096336452&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~c))+a[7]+1126891415&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(p|~t))+a[14]+2878612391&4294967295)<<15&4294967295|E>>>17))+((E=t+(p^(c|~e))+a[5]+4237533241&4294967295)<<21&4294967295|E>>>11))+((E=e+(c^(t|~p))+a[12]+1700485571&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~c))+a[3]+2399980690&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(p|~t))+a[10]+4293915773&4294967295)<<15&4294967295|E>>>17))+((E=t+(p^(c|~e))+a[1]+2240044497&4294967295)<<21&4294967295|E>>>11))+((E=e+(c^(t|~p))+a[8]+1873313359&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~c))+a[15]+4264355552&4294967295)<<10&4294967295|E>>>22))+((E=c+(e^(p|~t))+a[6]+2734768916&4294967295)<<15&4294967295|E>>>17))+((E=t+(p^(c|~e))+a[13]+1309151649&4294967295)<<21&4294967295|E>>>11))+((p=(e=t+((E=e+(c^(t|~p))+a[4]+4149444226&4294967295)<<6&4294967295|E>>>26))+((E=p+(t^(e|~c))+a[11]+3174756917&4294967295)<<10&4294967295|E>>>22))^((c=p+((E=c+(e^(p|~t))+a[2]+718787259&4294967295)<<15&4294967295|E>>>17))|~e))+a[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(c+(E<<21&4294967295|E>>>11))&4294967295,r.g[2]=r.g[2]+c&4294967295,r.g[3]=r.g[3]+p&4294967295}function ii(r,e){this.h=e;for(var t=[],a=!0,c=r.length-1;0<=c;c--){var p=0|r[c];a&&p==e||(t[c]=p,a=!1)}this.g=t}(fe=$n.prototype).Oa=function(r){this.M=r},fe.ha=function(r,e,t,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():rr.g(),this.C=function ct(r){return r.h||(r.h=r.i())}(this.u?this.u:rr),this.g.onreadystatechange=Ge(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(p){return void ja(this,p)}if(r=t||"",t=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var c in a)t.set(c,a[c]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const p of a.keys())t.set(p,a.get(p))}a=Array.from(t.keys()).find(p=>"content-type"==p.toLowerCase()),c=Ue.FormData&&r instanceof Ue.FormData,!(0<=hn(is,e))||a||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,E]of t)this.g.setRequestHeader(p,E);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Sl(this),0<this.B&&((this.L=function fu(r){return pn&&function Xr(){return cr(Nr,9,function(){let r=0;const e=Un(String(Dr)).split("."),t=Un("9").split("."),a=Math.max(e.length,t.length);for(let E=0;0==r&&E<a;E++){var c=e[E]||"",p=t[E]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==c[0].length&&0==p[0].length)break;r=fn(0==c[1].length?0:parseInt(c[1],10),0==p[1].length?0:parseInt(p[1],10))||fn(0==c[2].length,0==p[2].length)||fn(c[2],p[2]),c=c[3],p=p[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ge(this.ua,this)):this.A=li(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(p){ja(this,p)}},fe.ua=function(){typeof Ct<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nr(this,"timeout"),this.abort(8))},fe.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,nr(this,"complete"),nr(this,"abort"),cl(this))},fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cl(this,!0)),$n.$.N.call(this)},fe.La=function(){this.s||(this.G||this.v||this.l?Tl(this):this.kb())},fe.kb=function(){Tl(this)},fe.da=function(){try{return 2<Ns(this)?this.g.status:-1}catch{return-1}},fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),Vt(e)}},fe.Ia=function(){return this.m},fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=mo.prototype).qa=8,fe.H=1,fe.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const c=new mr(this,this.j,r,void 0);let p=this.s;if(this.U&&(p?(p=Gr(p),Sr(p,this.U)):p=this.U),null!==this.o||this.O||(c.I=p,p=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var a=this.i[t];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ha(this,c,e),pi(t=to(this.G),"RID",r),pi(t,"CVER",22),this.F&&pi(t,"X-HTTP-Session-Id",this.F),da(this,t),p&&(this.O?e="headers="+encodeURIComponent(String(ds(p)))+"&"+e:this.o&&ks(t,this.o,p)),_e(this.h,c),this.bb&&pi(t,"TYPE","init"),this.P?(pi(t,"$req",e),pi(t,"SID","null"),c.ba=!0,Ks(c,t,null)):Ks(c,t,e),this.H=2}}else 3==this.H&&(r?Qi(this,r):0==this.i.length||Q(this.h)||Qi(this))},fe.Ma=function(){if(this.u=null,_o(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=Ln(Ge(this.jb,this),r)}},fe.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,cn(10),za(this),_o(this))},fe.ib=function(){null!=this.v&&(this.v=null,za(this),yo(this),cn(19))},fe.pb=function(r){r?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))},(fe=ss.prototype).Ba=function(){},fe.Aa=function(){},fe.za=function(){},fe.ya=function(){},fe.Va=function(){},qs.prototype.g=function(r,e){return new Lr(r,e)},mt(Lr,mn),Lr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;cn(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=hl(r,null,r.Y),dl(r)},Lr.prototype.close=function(){Uo(this.g)},Lr.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=kt(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&dl(e)},Lr.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,Lr.$.N.call(this)},mt(vs,Kt),mt(qa,en),mt(Mo,ss),Mo.prototype.Ba=function(){nr(this.g,"a")},Mo.prototype.Aa=function(r){nr(this.g,new vs(r))},Mo.prototype.za=function(r){nr(this.g,new qa)},Mo.prototype.ya=function(){nr(this.g,"b")},mt(Es,function gc(){this.blockSize=-1}),Es.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Es.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,a=this.m,c=this.h,p=0;p<e;){if(0==c)for(;p<=t;)Vo(this,r,p),p+=this.blockSize;if("string"==typeof r){for(;p<e;)if(a[c++]=r.charCodeAt(p++),c==this.blockSize){Vo(this,a),c=0;break}}else for(;p<e;)if(a[c++]=r[p++],c==this.blockSize){Vo(this,a),c=0;break}}this.h=c,this.i+=e},Es.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var a=0;32>a;a+=8)r[t++]=this.g[e]>>>a&255;return r};var Vu={};function fa(r){return-128<=r&&128>r?cr(Vu,r,function(e){return new ii([0|e],0>e?-1:0)}):new ii([0|r],0>r?-1:0)}function F(r){if(isNaN(r)||!isFinite(r))return le;if(0>r)return Tr(F(-r));for(var e=[],t=1,a=0;r>=t;a++)e[a]=r/t|0,t*=V;return new ii(e,0)}var V=4294967296,le=fa(0),$e=fa(1),Ut=fa(16777216);function qt(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function kn(r){return-1==r.h}function Tr(r){for(var e=r.g.length,t=[],a=0;a<e;a++)t[a]=~r.g[a];return new ii(t,~r.h).add($e)}function Vr(r,e){return r.add(Tr(e))}function Br(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function Er(r,e){this.g=r,this.h=e}function zi(r,e){if(qt(e))throw Error("division by zero");if(qt(r))return new Er(le,le);if(kn(r))return e=zi(Tr(r),e),new Er(Tr(e.g),Tr(e.h));if(kn(e))return e=zi(r,Tr(e)),new Er(Tr(e.g),e.h);if(30<r.g.length){if(kn(r)||kn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=$e,a=e;0>=a.X(r);)t=gi(t),a=gi(a);var c=Gi(t,1),p=Gi(a,1);for(a=Gi(a,2),t=Gi(t,2);!qt(a);){var E=p.add(a);0>=E.X(r)&&(c=c.add(t),p=E),a=Gi(a,1),t=Gi(t,1)}return e=Vr(r,c.R(e)),new Er(c,e)}for(c=le;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),a=48>=(a=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,a-48),E=(p=F(t)).R(e);kn(E)||0<E.X(r);)E=(p=F(t-=a)).R(e);qt(p)&&(p=$e),c=c.add(p),r=Vr(r,E)}return new Er(c,r)}function gi(r){for(var e=r.g.length+1,t=[],a=0;a<e;a++)t[a]=r.D(a)<<1|r.D(a-1)>>>31;return new ii(t,r.h)}function Gi(r,e){var t=e>>5;e%=32;for(var a=r.g.length-t,c=[],p=0;p<a;p++)c[p]=0<e?r.D(p+t)>>>e|r.D(p+t+1)<<32-e:r.D(p+t);return new ii(c,r.h)}(fe=ii.prototype).ea=function(){if(kn(this))return-Tr(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var a=this.D(t);r+=(0<=a?a:V+a)*e,e*=V}return r},fe.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(qt(this))return"0";if(kn(this))return"-"+Tr(this).toString(r);for(var e=F(Math.pow(r,6)),t=this,a="";;){var c=zi(t,e).g,p=((0<(t=Vr(t,c.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(qt(t=c))return p+a;for(;6>p.length;)p="0"+p;a=p+a}},fe.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},fe.X=function(r){return kn(r=Vr(this,r))?-1:qt(r)?0:1},fe.abs=function(){return kn(this)?Tr(this):this},fe.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],a=0,c=0;c<=e;c++){var p=a+(65535&this.D(c))+(65535&r.D(c)),E=(p>>>16)+(this.D(c)>>>16)+(r.D(c)>>>16);a=E>>>16,t[c]=(E&=65535)<<16|(p&=65535)}return new ii(t,-2147483648&t[t.length-1]?-1:0)},fe.R=function(r){if(qt(this)||qt(r))return le;if(kn(this))return kn(r)?Tr(this).R(Tr(r)):Tr(Tr(this).R(r));if(kn(r))return Tr(this.R(Tr(r)));if(0>this.X(Ut)&&0>r.X(Ut))return F(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],a=0;a<2*e;a++)t[a]=0;for(a=0;a<this.g.length;a++)for(var c=0;c<r.g.length;c++){var p=this.D(a)>>>16,E=65535&this.D(a),O=r.D(c)>>>16,G=65535&r.D(c);t[2*a+2*c]+=E*G,Br(t,2*a+2*c),t[2*a+2*c+1]+=p*G,Br(t,2*a+2*c+1),t[2*a+2*c+1]+=E*O,Br(t,2*a+2*c+1),t[2*a+2*c+2]+=p*O,Br(t,2*a+2*c+2)}for(a=0;a<e;a++)t[a]=t[2*a+1]<<16|t[2*a];for(a=e;a<2*e;a++)t[a]=0;return new ii(t,0)},fe.gb=function(r){return zi(this,r).h},fe.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)&r.D(a);return new ii(t,this.h&r.h)},fe.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)|r.D(a);return new ii(t,this.h|r.h)},fe.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)^r.D(a);return new ii(t,this.h^r.h)},qs.prototype.createWebChannel=qs.prototype.g,Lr.prototype.send=Lr.prototype.u,Lr.prototype.open=Lr.prototype.m,Lr.prototype.close=Lr.prototype.close,ar.NO_ERROR=0,ar.TIMEOUT=8,ar.HTTP_ERROR=6,Fi.COMPLETE="complete",st.EventType=It,It.OPEN="a",It.CLOSE="b",It.ERROR="c",It.MESSAGE="d",mn.prototype.listen=mn.prototype.O,$n.prototype.listenOnce=$n.prototype.P,$n.prototype.getLastError=$n.prototype.Sa,$n.prototype.getLastErrorCode=$n.prototype.Ia,$n.prototype.getStatus=$n.prototype.da,$n.prototype.getResponseJson=$n.prototype.Wa,$n.prototype.getResponseText=$n.prototype.ja,$n.prototype.send=$n.prototype.ha,$n.prototype.setWithCredentials=$n.prototype.Oa,Es.prototype.digest=Es.prototype.l,Es.prototype.reset=Es.prototype.reset,Es.prototype.update=Es.prototype.j,ii.prototype.add=ii.prototype.add,ii.prototype.multiply=ii.prototype.R,ii.prototype.modulo=ii.prototype.gb,ii.prototype.compare=ii.prototype.X,ii.prototype.toNumber=ii.prototype.ea,ii.prototype.toString=ii.prototype.toString,ii.prototype.getBits=ii.prototype.D,ii.fromNumber=F,ii.fromString=function ee(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Tr(ee(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=F(Math.pow(e,8)),a=le,c=0;c<r.length;c+=8){var p=Math.min(8,r.length-c),E=parseInt(r.substring(c,c+p),e);8>p?(p=F(Math.pow(e,p)),a=a.R(p).add(F(E))):a=(a=a.R(t)).add(F(E))}return a};var so=Ke.createWebChannelTransport=function(){return new qs},Cs=Ke.getStatEventTarget=function(){return Lt()},Ys=Ke.ErrorCode=ar,Fs=Ke.EventType=Fi,vo=Ke.Event=Je,Eo=Ke.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},jo=Ke.FetchXmlHttpFactory=H,Ml=Ke.WebChannel=st,fl=Ke.XhrIo=$n,Yc=Ke.Md5=Es,Ca=Ke.Integer=ii;const Rl="@firebase/firestore";class Ds{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ds.UNAUTHENTICATED=new Ds(null),Ds.GOOGLE_CREDENTIALS=new Ds("google-credentials-uid"),Ds.FIRST_PARTY=new Ds("first-party-uid"),Ds.MOCK_USER=new Ds("mock-user");let Ls="9.21.0";const xl=new Ae.Yd("@firebase/firestore");function Jl(){return xl.logLevel}function dn(r,...e){if(xl.logLevel<=Ae.in.DEBUG){const t=e.map(pu);xl.debug(`Firestore (${Ls}): ${r}`,...t)}}function jr(r,...e){if(xl.logLevel<=Ae.in.ERROR){const t=e.map(pu);xl.error(`Firestore (${Ls}): ${r}`,...t)}}function Ts(r,...e){if(xl.logLevel<=Ae.in.WARN){const t=e.map(pu);xl.warn(`Firestore (${Ls}): ${r}`,...t)}}function pu(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function zn(r="Unexpected state"){const e=`FIRESTORE (${Ls}) INTERNAL ASSERTION FAILED: `+r;throw jr(e),new Error(e)}function or(r,e){r||zn()}function Fn(r,e){return r}const Ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class an extends Y.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ju{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ea{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ds.UNAUTHENTICATED))}shutdown(){}}class gu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Pl{constructor(e){this.t=e,this.currentUser=Ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var a=this;let c=this.i;const p=te=>this.i!==c?(c=this.i,t(te)):Promise.resolve();let E=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new Ir,e.enqueueRetryable(()=>p(this.currentUser))};const O=()=>{const te=E;e.enqueueRetryable((0,ae.Z)(function*(){yield te.promise,yield p(a.currentUser)}))},G=te=>{dn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=te,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(te=>G(te)),setTimeout(()=>{if(!this.auth){const te=this.t.getImmediate({optional:!0});te?G(te):(dn("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new Ir)}},0),O()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(dn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(or("string"==typeof a.accessToken),new ju(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return or(null===e||"string"==typeof e),new Ds(e)}}class Da{constructor(e,t,a){this.h=e,this.l=t,this.m=a,this.type="FirstParty",this.user=Ds.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class mu{constructor(e,t,a){this.h=e,this.l=t,this.m=a}getToken(){return Promise.resolve(new Da(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ds.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ya{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Od{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const a=p=>{null!=p.error&&dn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const E=p.token!==this.T;return this.T=p.token,dn("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>a(p))};const c=p=>{dn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.I.onInit(p=>c(p)),setTimeout(()=>{if(!this.appCheck){const p=this.I.getImmediate({optional:!0});p?c(p):dn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(or("string"==typeof t.token),this.T=t.token,new Ya(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yu(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let a=0;a<r;a++)t[a]=Math.floor(256*Math.random());return t}class pl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const c=yu(40);for(let p=0;p<c.length;++p)a.length<20&&c[p]<t&&(a+=e.charAt(c[p]%e.length))}return a}}function hr(r,e){return r<e?-1:r>e?1:0}function ta(r,e,t){return r.length===e.length&&r.every((a,c)=>t(a,e[c]))}function zu(r){return r+"\0"}class Xi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new an(Ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new an(Ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new an(Ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new an(Ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xi.fromMillis(Date.now())}static fromDate(e){return Xi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*t));return new Xi(t,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?hr(this.nanoseconds,e.nanoseconds):hr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qn(e)}static min(){return new qn(new Xi(0,0))}static max(){return new qn(new Xi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Za{constructor(e,t,a){void 0===t?t=0:t>e.length&&zn(),void 0===a?a=e.length-t:a>e.length-t&&zn(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return 0===Za.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Za?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let c=0;c<a;c++){const p=e.get(c),E=t.get(c);if(p<E)return-1;if(p>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ai extends Za{construct(e,t,a){return new Ai(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new an(Ot.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(c=>c.length>0))}return new Ai(t)}static emptyPath(){return new Ai([])}}const Zi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class os extends Za{construct(e,t,a){return new os(e,t,a)}static isValidIdentifier(e){return Zi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),os.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new os(["__name__"])}static fromServerFormat(e){const t=[];let a="",c=0;const p=()=>{if(0===a.length)throw new an(Ot.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let E=!1;for(;c<e.length;){const O=e[c];if("\\"===O){if(c+1===e.length)throw new an(Ot.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[c+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new an(Ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=G,c+=2}else"`"===O?(E=!E,c++):"."!==O||E?(a+=O,c++):(p(),c++)}if(p(),E)throw new an(Ot.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new os(t)}static emptyPath(){return new os([])}}class An{constructor(e){this.path=e}static fromPath(e){return new An(Ai.fromString(e))}static fromName(e){return new An(Ai.fromString(e).popFirst(5))}static empty(){return new An(Ai.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ai.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ai.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new An(new Ai(e.slice()))}}class mc{constructor(e,t,a,c){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=c}}function Ol(r){return r.fields.find(e=>2===e.kind)}function Qa(r){return r.fields.filter(e=>2!==e.kind)}mc.UNKNOWN_ID=-1;class Gu{constructor(e,t){this.fieldPath=e,this.kind=t}}class _u{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _u(0,zs.min())}}function Wu(r,e){const t=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,c=qn.fromTimestamp(1e9===a?new Xi(t+1,0):new Xi(t,a));return new zs(c,An.empty(),e)}function ps(r){return new zs(r.readTime,r.key,-1)}class zs{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new zs(qn.min(),An.empty(),-1)}static max(){return new zs(qn.max(),An.empty(),-1)}}function gl(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=An.comparator(r.documentKey,e.documentKey),0!==t?t:hr(r.largestBatchId,e.largestBatchId))}const vu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function S(r){return R.apply(this,arguments)}function R(){return R=(0,ae.Z)(function*(r){if(r.code!==Ot.FAILED_PRECONDITION||r.message!==vu)throw r;dn("LocalStore","Unexpectedly lost primary lease")}),R.apply(this,arguments)}class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new w((a,c)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(a,c)},this.catchCallback=p=>{this.wrapFailure(t,p).next(a,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof w?t:w.resolve(t)}catch(t){return w.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):w.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):w.reject(t)}static resolve(e){return new w((t,a)=>{t(e)})}static reject(e){return new w((t,a)=>{a(e)})}static waitFor(e){return new w((t,a)=>{let c=0,p=0,E=!1;e.forEach(O=>{++c,O.next(()=>{++p,E&&p===c&&t()},G=>a(G))}),E=!0,p===c&&t()})}static or(e){let t=w.resolve(!1);for(const a of e)t=t.next(c=>c?w.resolve(c):a());return t}static forEach(e,t){const a=[];return e.forEach((c,p)=>{a.push(t.call(this,c,p))}),this.waitFor(a)}static mapArray(e,t){return new w((a,c)=>{const p=e.length,E=new Array(p);let O=0;for(let G=0;G<p;G++){const te=G;t(e[te]).next(pe=>{E[te]=pe,++O,O===p&&a(E)},pe=>c(pe))}})}static doWhile(e,t){return new w((a,c)=>{const p=()=>{!0===e()?t().next(()=>{p()},c):a()};p()})}}class k{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Ir,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new se(e,t.error)):this.R.resolve()},this.transaction.onerror=a=>{const c=xn(a.target.error);this.R.reject(new se(e,c))}}static open(e,t,a,c){try{return new k(t,e.transaction(c,a))}catch(p){throw new se(t,p)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(dn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Tt(t)}}class z{constructor(e,t,a){this.name=e,this.version=t,this.V=a,12.2===z.S((0,Y.z$)())&&jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return dn("SimpleDb","Removing database:",e),un(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Y.hl)())return!1;if(z.C())return!0;const e=(0,Y.z$)(),t=z.S(e),a=0<t&&t<10,c=z.N(e),p=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||p)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static N(e){const t=e.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}O(e){var t=this;return(0,ae.Z)(function*(){return t.db||(dn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((a,c)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=E=>{a(E.target.result)},p.onblocked=()=>{c(new se(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=E=>{const O=E.target.error;c("VersionError"===O.name?new an(Ot.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new an(Ot.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new se(e,O))},p.onupgradeneeded=E=>{dn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.V.$(E.target.result,p.transaction,E.oldVersion,t.version).next(()=>{dn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=a=>t.F(a)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,a,c){var p=this;return(0,ae.Z)(function*(){const E="readonly"===t;let O=0;for(;;){++O;try{p.db=yield p.O(e);const G=k.open(p.db,e,E?"readonly":"readwrite",a),te=c(G).next(pe=>(G.P(),pe)).catch(pe=>(G.abort(pe),w.reject(pe))).toPromise();return te.catch(()=>{}),yield G.v,te}catch(G){const te=G,pe="FirebaseError"!==te.name&&O<3;if(dn("SimpleDb","Transaction failed with error:",te.message,"Retrying:",pe),p.close(),!pe)return Promise.reject(te)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class re{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return un(this.L.delete())}}class se extends an{constructor(e,t){super(Ot.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function rt(r){return"IndexedDbTransactionError"===r.name}class Tt{constructor(e){this.store=e}put(e,t){let a;return void 0!==t?(dn("SimpleDb","PUT",this.store.name,e,t),a=this.store.put(t,e)):(dn("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),un(a)}add(e){return dn("SimpleDb","ADD",this.store.name,e,e),un(this.store.add(e))}get(e){return un(this.store.get(e)).next(t=>(void 0===t&&(t=null),dn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return dn("SimpleDb","DELETE",this.store.name,e),un(this.store.delete(e))}count(){return dn("SimpleDb","COUNT",this.store.name),un(this.store.count())}j(e,t){const a=this.options(e,t);if(a.index||"function"!=typeof this.store.getAll){const c=this.cursor(a),p=[];return this.W(c,(E,O)=>{p.push(O)}).next(()=>p)}{const c=this.store.getAll(a.range);return new w((p,E)=>{c.onerror=O=>{E(O.target.error)},c.onsuccess=O=>{p(O.target.result)}})}}H(e,t){const a=this.store.getAll(e,null===t?void 0:t);return new w((c,p)=>{a.onerror=E=>{p(E.target.error)},a.onsuccess=E=>{c(E.target.result)}})}J(e,t){dn("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,t);a.Y=!1;const c=this.cursor(a);return this.W(c,(p,E,O)=>O.delete())}X(e,t){let a;t?a=e:(a={},t=e);const c=this.cursor(a);return this.W(c,t)}Z(e){const t=this.cursor({});return new w((a,c)=>{t.onerror=p=>{const E=xn(p.target.error);c(E)},t.onsuccess=p=>{const E=p.target.result;E?e(E.primaryKey,E.value).next(O=>{O?E.continue():a()}):a()}})}W(e,t){const a=[];return new w((c,p)=>{e.onerror=E=>{p(E.target.error)},e.onsuccess=E=>{const O=E.target.result;if(!O)return void c();const G=new re(O),te=t(O.primaryKey,O.value,G);if(te instanceof w){const pe=te.catch(tt=>(G.done(),w.reject(tt)));a.push(pe)}G.isDone?c():null===G.K?O.continue():O.continue(G.K)}}).next(()=>w.waitFor(a))}options(e,t){let a;return void 0!==e&&("string"==typeof e?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.Y?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function un(r){return new w((e,t)=>{r.onsuccess=a=>{e(a.target.result)},r.onerror=a=>{const c=xn(a.target.error);t(c)}})}let Gn=!1;function xn(r){const e=z.S((0,Y.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const a=new an("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gn||(Gn=!0,setTimeout(()=>{throw a},0)),a}}return r}class xi{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;dn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{dn("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(a){rt(a)?dn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield S(a)}yield t.et(6e4)}))}}class xr{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>t.st(a,e))})()}st(e,t){const a=new Set;let c=t,p=!0;return w.doWhile(()=>!0===p&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!a.has(E))return dn("IndexBackiller",`Processing collection: ${E}`),this.it(e,E,c).next(O=>{c-=O,a.add(E)});p=!1})).next(()=>t-c)}it(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,a).next(p=>{const E=p.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.rt(c,p)).next(O=>(dn("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,t,O))).next(()=>E.size)}))}rt(e,t){let a=e;return t.changes.forEach((c,p)=>{const E=ps(p);gl(E,a)>0&&(a=E)}),new zs(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ir=(()=>{class r{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=c=>this.ot(c),this.ut=c=>a.writeSequenceNumber(c))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function Wi(r){return null==r}function Ss(r){return 0===r&&1/r==-1/0}function Ro(r){return"number"==typeof r&&Number.isInteger(r)&&!Ss(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Ni(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Bs(e)),e=Ho(r.get(t),e);return Bs(e)}function Ho(r,e){let t=e;const a=r.length;for(let c=0;c<a;c++){const p=r.charAt(c);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function Bs(r){return r+"\x01\x01"}function na(r){const e=r.length;if(or(e>=2),2===e)return or("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Ai.emptyPath();const t=e-2,a=[];let c="";for(let p=0;p<e;){const E=r.indexOf("\x01",p);switch((E<0||E>t)&&zn(),r.charAt(E+1)){case"\x01":const O=r.substring(p,E);let G;0===c.length?G=O:(c+=O,G=c,c=""),a.push(G);break;case"\x10":c+=r.substring(p,E),c+="\0";break;case"\x11":c+=r.substring(p,E+1);break;default:zn()}p=E+2}return new Ai(a)}const kl=["userId","batchId"];function Xa(r,e){return[r,Ni(e)]}function Fl(r,e,t){return[r,Ni(e),t]}const Eu={},Nh=["prefixPath","collectionGroup","readTime","documentId"],Ta=["prefixPath","collectionGroup","documentId"],Nd=["collectionGroup","readTime","prefixPath","documentId"],Nf=["canonicalId","targetId"],yc=["targetId","path"],kd=["path","targetId"],pa=["collectionId","parent"],ci=["indexId","uid"],Zc=["uid","sequenceNumber"],Qc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fd=["indexId","uid","orderedDocumentKey"],Ja=["userId","collectionPath","documentId"],Xc=["userId","collectionPath","largestBatchId"],ga=["userId","collectionGroup","largestBatchId"],kh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ra=[...kh,"documentOverlays"],wu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_c=wu,Ld=[..._c,"indexConfiguration","indexState","indexEntries"];class vc extends wo{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function oo(r,e){const t=Fn(r);return z.M(t.at,e)}function Ku(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function el(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ll(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Ji{constructor(e,t){this.comparator=e,this.root=t||ao.EMPTY}insert(e,t){return new Ji(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ao.BLACK,null,null))}remove(e){return new Ji(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ao.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(0===a)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const c=this.comparator(e,a.key);if(0===c)return t+a.left.size;c<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tl(this.root,e,this.comparator,!0)}}class tl{constructor(e,t,a,c){this.isReverse=c,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?a(e.key,t):1,t&&c&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ao{constructor(e,t,a,c,p){this.key=e,this.value=t,this.color=null!=a?a:ao.RED,this.left=null!=c?c:ao.EMPTY,this.right=null!=p?p:ao.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,c,p){return new ao(null!=e?e:this.key,null!=t?t:this.value,null!=a?a:this.color,null!=c?c:this.left,null!=p?p:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let c=this;const p=a(e,c.key);return c=p<0?c.copy(null,null,null,c.left.insert(e,t,a),null):0===p?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,a)),c.fixUp()}removeMin(){if(this.left.isEmpty())return ao.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return ao.EMPTY;a=c.right.min(),c=c.copy(a.key,a.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ao.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ao.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zn();const e=this.left.check();if(e!==this.right.check())throw zn();return e+(this.isRed()?0:1)}}ao.EMPTY=null,ao.RED=!0,ao.BLACK=!1,ao.EMPTY=new class{constructor(){this.size=0}get key(){throw zn()}get value(){throw zn()}get color(){throw zn()}get left(){throw zn()}get right(){throw zn()}copy(r,e,t,a,c){return this}insert(r,e,t){return new ao(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class es{constructor(e){this.comparator=e,this.data=new Ji(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const c=a.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let a;for(a=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Iu(this.data.getIterator())}getIteratorFrom(e){return new Iu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof es)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=a.getNext().key;if(0!==this.comparator(c,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new es(this.comparator);return t.data=e,t}}class Iu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bi(r){return r.hasNext()?r.getNext():void 0}class zo{constructor(e){this.fields=e,e.sort(os.comparator)}static empty(){return new zo([])}unionWith(e){let t=new es(os.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new zo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ta(this.fields,e.fields,(t,a)=>t.isEqual(a))}}class Jc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Jc("Invalid base64 string: "+c):c}}(e);return new Zs(t)}static fromUint8Array(e){const t=function(a){let c="";for(let p=0;p<a.length;++p)c+=String.fromCharCode(a[p]);return c}(e);return new Zs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zs.EMPTY_BYTE_STRING=new Zs("");const Ec=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Io(r){if(or(!!r),"string"==typeof r){let e=0;const t=Ec.exec(r);if(or(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ki(r.seconds),nanos:Ki(r.nanos)}}function Ki(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function br(r){return"string"==typeof r?Zs.fromBase64String(r):Zs.fromUint8Array(r)}function qu(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==r?void 0:r.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ml(r){const e=r.mapValue.fields.__previous_value__;return qu(e)?ml(e):e}function ia(r){const e=Io(r.mapValue.fields.__local_write_time__.timestampValue);return new Xi(e.seconds,e.nanos)}class Ui{constructor(e,t,a,c,p,E,O,G){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=c,this.ssl=p,this.forceLongPolling=E,this.autoDetectLongPolling=O,this.useFetchStreams=G}}class yl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}const sa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bu={nullValue:"NULL_VALUE"};function _l(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qu(r)?4:zr(r)?9007199254740991:10:zn()}function xo(r,e){if(r===e)return!0;const t=_l(r);if(t!==_l(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ia(r).isEqual(ia(e));case 3:return function(a,c){if("string"==typeof a.timestampValue&&"string"==typeof c.timestampValue&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const p=Io(a.timestampValue),E=Io(c.timestampValue);return p.seconds===E.seconds&&p.nanos===E.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return c=e,br(r.bytesValue).isEqual(br(c.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(a,c){return Ki(a.geoPointValue.latitude)===Ki(c.geoPointValue.latitude)&&Ki(a.geoPointValue.longitude)===Ki(c.geoPointValue.longitude)}(r,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return Ki(a.integerValue)===Ki(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const p=Ki(a.doubleValue),E=Ki(c.doubleValue);return p===E?Ss(p)===Ss(E):isNaN(p)&&isNaN(E)}return!1}(r,e);case 9:return ta(r.arrayValue.values||[],e.arrayValue.values||[],xo);case 10:return function(a,c){const p=a.mapValue.fields||{},E=c.mapValue.fields||{};if(Ku(p)!==Ku(E))return!1;for(const O in p)if(p.hasOwnProperty(O)&&(void 0===E[O]||!xo(p[O],E[O])))return!1;return!0}(r,e);default:return zn()}var c}function Bl(r,e){return void 0!==(r.values||[]).find(t=>xo(t,e))}function Sa(r,e){if(r===e)return 0;const t=_l(r),a=_l(e);if(t!==a)return hr(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return hr(r.booleanValue,e.booleanValue);case 2:return function(c,p){const E=Ki(c.integerValue||c.doubleValue),O=Ki(p.integerValue||p.doubleValue);return E<O?-1:E>O?1:E===O?0:isNaN(E)?isNaN(O)?0:-1:1}(r,e);case 3:return Fh(r.timestampValue,e.timestampValue);case 4:return Fh(ia(r),ia(e));case 5:return hr(r.stringValue,e.stringValue);case 6:return function(c,p){const E=br(c),O=br(p);return E.compareTo(O)}(r.bytesValue,e.bytesValue);case 7:return function(c,p){const E=c.split("/"),O=p.split("/");for(let G=0;G<E.length&&G<O.length;G++){const te=hr(E[G],O[G]);if(0!==te)return te}return hr(E.length,O.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,p){const E=hr(Ki(c.latitude),Ki(p.latitude));return 0!==E?E:hr(Ki(c.longitude),Ki(p.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(c,p){const E=c.values||[],O=p.values||[];for(let G=0;G<E.length&&G<O.length;++G){const te=Sa(E[G],O[G]);if(te)return te}return hr(E.length,O.length)}(r.arrayValue,e.arrayValue);case 10:return function(c,p){if(c===sa.mapValue&&p===sa.mapValue)return 0;if(c===sa.mapValue)return 1;if(p===sa.mapValue)return-1;const E=c.fields||{},O=Object.keys(E),G=p.fields||{},te=Object.keys(G);O.sort(),te.sort();for(let pe=0;pe<O.length&&pe<te.length;++pe){const tt=hr(O[pe],te[pe]);if(0!==tt)return tt;const Pt=Sa(E[O[pe]],G[te[pe]]);if(0!==Pt)return Pt}return hr(O.length,te.length)}(r.mapValue,e.mapValue);default:throw zn()}}function Fh(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return hr(r,e);const t=Io(r),a=Io(e),c=hr(t.seconds,a.seconds);return 0!==c?c:hr(t.nanos,a.nanos)}function x(r){return $(r)}function $(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(a){const c=Io(a);return`time(${c.seconds},${c.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?br(r.bytesValue).toBase64():"referenceValue"in r?An.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(a){let c="[",p=!0;for(const E of a.values||[])p?p=!1:c+=",",c+=$(E);return c+"]"}(r.arrayValue):"mapValue"in r?function(a){const c=Object.keys(a.fields||{}).sort();let p="{",E=!0;for(const O of c)E?E=!1:p+=",",p+=`${O}:${$(a.fields[O])}`;return p+"}"}(r.mapValue):zn();var e}function Oe(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ft(r){return!!r&&"integerValue"in r}function bt(r){return!!r&&"arrayValue"in r}function Bt(r){return!!r&&"nullValue"in r}function Pn(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Sn(r){return!!r&&"mapValue"in r}function er(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return el(r.mapValue.fields,(t,a)=>e.mapValue.fields[t]=er(a)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=er(r.arrayValue.values[t]);return e}return Object.assign({},r)}function zr(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function $r(r){return"nullValue"in r?bu:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Oe(yl.empty(),An.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:zn()}function Go(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Oe(yl.empty(),An.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?sa:zn()}function As(r,e){const t=Sa(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function eu(r,e){const t=Sa(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Ms{constructor(e){this.value=e}static empty(){return new Ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Sn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=er(t)}setAll(e){let t=os.emptyPath(),a={},c=[];e.forEach((E,O)=>{if(!t.isImmediateParentOf(O)){const G=this.getFieldsMap(t);this.applyChanges(G,a,c),a={},c=[],t=O.popLast()}E?a[O.lastSegment()]=er(E):c.push(O.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,a,c)}delete(e){const t=this.field(e.popLast());Sn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let c=t.mapValue.fields[e.get(a)];Sn(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,a){el(t,(c,p)=>e[c]=p);for(const c of a)delete e[c]}clone(){return new Ms(er(this.value))}}function $l(r){const e=[];return el(r.fields,(t,a)=>{const c=new os([t]);if(Sn(a)){const p=$l(a.mapValue).fields;if(0===p.length)e.push(c);else for(const E of p)e.push(c.child(E))}else e.push(c)}),new zo(e)}class di{constructor(e,t,a,c,p,E,O){this.key=e,this.documentType=t,this.version=a,this.readTime=c,this.createTime=p,this.data=E,this.documentState=O}static newInvalidDocument(e){return new di(e,0,qn.min(),qn.min(),qn.min(),Ms.empty(),0)}static newFoundDocument(e,t,a,c){return new di(e,1,t,qn.min(),a,c,0)}static newNoDocument(e,t){return new di(e,2,t,qn.min(),qn.min(),Ms.empty(),0)}static newUnknownDocument(e,t){return new di(e,3,t,qn.min(),qn.min(),Ms.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof di&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new di(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qs{constructor(e,t){this.position=e,this.inclusive=t}}function Ul(r,e,t){let a=0;for(let c=0;c<r.position.length;c++){const p=e[c],E=r.position[c];if(a=p.field.isKeyField()?An.comparator(An.fromName(E.referenceValue),t.key):Sa(E,t.data.field(p.field)),"desc"===p.dir&&(a*=-1),0!==a)break}return a}function xp(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!xo(r.position[t],e.position[t]))return!1;return!0}class Cu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Lh(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class kf{}class wi extends kf{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,a):new bc(e,t,a):"array-contains"===t?new P(e,a):"in"===t?new ne(e,a):"not-in"===t?new ve(e,a):"array-contains-any"===t?new vt(e,a):new wi(e,t,a)}static createKeyFieldInFilter(e,t,a){return"in"===t?new M(e,a):new _(e,a)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Sa(t,this.value)):null!==t&&_l(this.value)===_l(t)&&this.matchesComparison(Sa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qi extends kf{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new qi(e,t)}matches(e){return bo(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function bo(r){return"and"===r.op}function tu(r){return"or"===r.op}function wc(r){return Bd(r)&&bo(r)}function Bd(r){for(const e of r.filters)if(e instanceof qi)return!1;return!0}function td(r){if(r instanceof wi)return r.field.canonicalString()+r.op.toString()+x(r.value);if(wc(r))return r.filters.map(e=>td(e)).join(",");{const e=r.filters.map(t=>td(t)).join(",");return`${r.op}(${e})`}}function Yu(r,e){return r instanceof wi?(t=r,(a=e)instanceof wi&&t.op===a.op&&t.field.isEqual(a.field)&&xo(t.value,a.value)):r instanceof qi?function(t,a){return a instanceof qi&&t.op===a.op&&t.filters.length===a.filters.length&&t.filters.reduce((c,p,E)=>c&&Yu(p,a.filters[E]),!0)}(r,e):void zn();var t,a}function Du(r,e){const t=r.filters.concat(e);return qi.create(t,r.op)}function Ic(r){return r instanceof wi?`${(e=r).field.canonicalString()} ${e.op} ${x(e.value)}`:r instanceof qi?function(e){return e.op.toString()+" {"+e.getFilters().map(Ic).join(" ,")+"}"}(r):"Filter";var e}class bc extends wi{constructor(e,t,a){super(e,t,a),this.key=An.fromName(a.referenceValue)}matches(e){const t=An.comparator(e.key,this.key);return this.matchesComparison(t)}}class M extends wi{constructor(e,t){super(e,"in",t),this.keys=b(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _ extends wi{constructor(e,t){super(e,"not-in",t),this.keys=b(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function b(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(a=>An.fromName(a.referenceValue))}class P extends wi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bt(t)&&Bl(t.arrayValue,this.value)}}class ne extends wi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bl(this.value.arrayValue,t)}}class ve extends wi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bl(this.value.arrayValue,t)}}class vt extends wi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Bl(this.value.arrayValue,a))}}class zt{constructor(e,t=null,a=[],c=[],p=null,E=null,O=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=c,this.limit=p,this.startAt=E,this.endAt=O,this.ft=null}}function In(r,e=null,t=[],a=[],c=null,p=null,E=null){return new zt(r,e,t,a,c,p,E)}function Mn(r){const e=Fn(r);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>td(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>{return(c=a).field.canonicalString()+c.dir;var c}).join(","),Wi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>x(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>x(a)).join(",")),e.ft=t}return e.ft}function lr(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Lh(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Yu(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!xp(r.startAt,e.startAt)&&xp(r.endAt,e.endAt)}function ti(r){return An.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function hi(r,e){return r.filters.filter(t=>t instanceof wi&&t.field.isEqual(e))}function lo(r,e,t){let a=bu,c=!0;for(const p of hi(r,e)){let E=bu,O=!0;switch(p.op){case"<":case"<=":E=$r(p.value);break;case"==":case"in":case">=":E=p.value;break;case">":E=p.value,O=!1;break;case"!=":case"not-in":E=bu}As({value:a,inclusive:c},{value:E,inclusive:O})<0&&(a=E,c=O)}if(null!==t)for(let p=0;p<r.orderBy.length;++p)if(r.orderBy[p].field.isEqual(e)){const E=t.position[p];As({value:a,inclusive:c},{value:E,inclusive:t.inclusive})<0&&(a=E,c=t.inclusive);break}return{value:a,inclusive:c}}function Tu(r,e,t){let a=sa,c=!0;for(const p of hi(r,e)){let E=sa,O=!0;switch(p.op){case">=":case">":E=Go(p.value),O=!1;break;case"==":case"in":case"<=":E=p.value;break;case"<":E=p.value,O=!1;break;case"!=":case"not-in":E=sa}eu({value:a,inclusive:c},{value:E,inclusive:O})>0&&(a=E,c=O)}if(null!==t)for(let p=0;p<r.orderBy.length;++p)if(r.orderBy[p].field.isEqual(e)){const E=t.position[p];eu({value:a,inclusive:c},{value:E,inclusive:t.inclusive})>0&&(a=E,c=t.inclusive);break}return{value:a,inclusive:c}}class Vl{constructor(e,t=null,a=[],c=[],p=null,E="F",O=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=c,this.limit=p,this.limitType=E,this.startAt=O,this.endAt=G,this.dt=null,this._t=null}}function Zu(r,e,t,a,c,p,E,O){return new Vl(r,e,t,a,c,p,E,O)}function Su(r){return new Vl(r)}function nu(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function Cc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function nl(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Qu(r){return null!==r.collectionGroup}function ma(r){const e=Fn(r);if(null===e.dt){e.dt=[];const t=nl(e),a=Cc(e);if(null!==t&&null===a)t.isKeyField()||e.dt.push(new Cu(t)),e.dt.push(new Cu(os.keyField(),"asc"));else{let c=!1;for(const p of e.explicitOrderBy)e.dt.push(p),p.field.isKeyField()&&(c=!0);if(!c){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Cu(os.keyField(),p))}}}return e.dt}function uo(r){const e=Fn(r);if(!e._t)if("F"===e.limitType)e._t=In(e.path,e.collectionGroup,ma(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of ma(e))t.push(new Cu(p.field,"desc"===p.dir?"asc":"desc"));const a=e.endAt?new Qs(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new Qs(e.startAt.position,e.startAt.inclusive):null;e._t=In(e.path,e.collectionGroup,t,e.filters,e.limit,a,c)}return e._t}function Au(r,e){e.getFirstInequalityField(),nl(r);const t=r.filters.concat([e]);return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Dc(r,e,t){return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Tc(r,e){return lr(uo(r),uo(e))&&r.limitType===e.limitType}function Pp(r){return`${Mn(uo(r))}|lt:${r.limitType}`}function Ff(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(a=>Ic(a)).join(", ")}]`),Wi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(a=>{return`${(c=a).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>x(a)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>x(a)).join(",")),`Target(${t})`}(uo(r))}; limitType=${r.limitType})`}function Sc(r,e){return e.isFoundDocument()&&function(t,a){const c=a.key.path;return null!==t.collectionGroup?a.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):An.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(r,e)&&function(t,a){for(const c of ma(t))if(!c.field.isKeyField()&&null===a.data.field(c.field))return!1;return!0}(r,e)&&function(t,a){for(const c of t.filters)if(!c.matches(a))return!1;return!0}(r,e)&&(a=e,!((t=r).startAt&&!function(c,p,E){const O=Ul(c,p,E);return c.inclusive?O<=0:O<0}(t.startAt,ma(t),a)||t.endAt&&!function(c,p,E){const O=Ul(c,p,E);return c.inclusive?O>=0:O>0}(t.endAt,ma(t),a)));var t,a}function py(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function rm(r){return(e,t)=>{let a=!1;for(const c of ma(r)){const p=gy(c,e,t);if(0!==p)return p;a=a||c.field.isKeyField()}return 0}}function gy(r,e,t){const a=r.field.isKeyField()?An.comparator(e.key,t.key):function(c,p,E){const O=p.data.field(c),G=E.data.field(c);return null!==O&&null!==G?Sa(O,G):zn()}(r.field,e,t);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return zn()}}class Xu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0!==a)for(const[c,p]of a)if(this.equalsFn(c,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const a=this.mapKeyFn(e),c=this.inner[a];if(void 0===c)return this.inner[a]=[[e,t]],void this.innerSize++;for(let p=0;p<c.length;p++)if(this.equalsFn(c[p][0],e))return void(c[p]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0===a)return!1;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return 1===a.length?delete this.inner[t]:a.splice(c,1),this.innerSize--,!0;return!1}forEach(e){el(this.inner,(t,a)=>{for(const[c,p]of a)e(c,p)})}isEmpty(){return Ll(this.inner)}size(){return this.innerSize}}const B_=new Ji(An.comparator);function rl(){return B_}const im=new Ji(An.comparator);function nd(...r){let e=im;for(const t of r)e=e.insert(t.key,t);return e}function Op(r){let e=im;return r.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function il(){return $d()}function Lf(){return $d()}function $d(){return new Xu(r=>r.toString(),(r,e)=>r.isEqual(e))}const $_=new Ji(An.comparator),Np=new es(An.comparator);function mi(...r){let e=Np;for(const t of r)e=e.add(t);return e}const sm=new es(hr);function Bf(){return sm}function Bh(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ss(e)?"-0":e}}function kp(r){return{integerValue:""+r}}function om(r,e){return Ro(e)?kp(e):Bh(r,e)}class $h{constructor(){this._=void 0}}function Fp(r,e,t){return r instanceof Uh?function(a,c){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&qu(c)&&(c=ml(c)),c&&(p.fields.__previous_value__=c),{mapValue:p}}(t,e):r instanceof Vd?am(r,e):r instanceof Ju?ru(r,e):function(a,c){const p=my(a,c),E=yy(p)+yy(a.wt);return ft(p)&&ft(a.wt)?kp(E):Bh(a.serializer,E)}(r,e)}function Ud(r,e,t){return r instanceof Vd?am(r,e):r instanceof Ju?ru(r,e):t}function my(r,e){return r instanceof iu?ft(t=e)||(a=t)&&"doubleValue"in a?e:{integerValue:0}:null;var a,t}class Uh extends $h{}class Vd extends $h{constructor(e){super(),this.elements=e}}function am(r,e){const t=lm(e);for(const a of r.elements)t.some(c=>xo(c,a))||t.push(a);return{arrayValue:{values:t}}}class Ju extends $h{constructor(e){super(),this.elements=e}}function ru(r,e){let t=lm(e);for(const a of r.elements)t=t.filter(c=>!xo(c,a));return{arrayValue:{values:t}}}class iu extends $h{constructor(e,t){super(),this.serializer=e,this.wt=t}}function yy(r){return Ki(r.integerValue||r.doubleValue)}function lm(r){return bt(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class jd{constructor(e,t){this.field=e,this.transform=t}}class V_{constructor(e,t){this.version=e,this.transformResults=t}}class Gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gs}static exists(e){return new Gs(void 0,e)}static updateTime(e){return new Gs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $f(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Lp{}function _y(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new Uf(r.key,Gs.none()):new Ru(r.key,r.data,Gs.none());{const t=r.data,a=Ms.empty();let c=new es(os.comparator);for(let p of e.fields)if(!c.has(p)){let E=t.field(p);null===E&&p.length>1&&(p=p.popLast(),E=t.field(p)),null===E?a.delete(p):a.set(p,E),c=c.add(p)}return new ec(r.key,a,new zo(c.toArray()),Gs.none())}}function j_(r,e,t){r instanceof Ru?function(a,c,p){const E=a.value.clone(),O=jh(a.fieldTransforms,c,p.transformResults);E.setAll(O),c.convertToFoundDocument(p.version,E).setHasCommittedMutations()}(r,e,t):r instanceof ec?function(a,c,p){if(!$f(a.precondition,c))return void c.convertToUnknownDocument(p.version);const E=jh(a.fieldTransforms,c,p.transformResults),O=c.data;O.setAll($p(a)),O.setAll(E),c.convertToFoundDocument(p.version,O).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Vh(r,e,t,a){return r instanceof Ru?function(c,p,E,O){if(!$f(c.precondition,p))return E;const G=c.value.clone(),te=vy(c.fieldTransforms,O,p);return G.setAll(te),p.convertToFoundDocument(p.version,G).setHasLocalMutations(),null}(r,e,t,a):r instanceof ec?function(c,p,E,O){if(!$f(c.precondition,p))return E;const G=vy(c.fieldTransforms,O,p),te=p.data;return te.setAll($p(c)),te.setAll(G),p.convertToFoundDocument(p.version,te).setHasLocalMutations(),null===E?null:E.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(pe=>pe.field))}(r,e,t,a):(E=t,$f(r.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):E);var p,E}function Bp(r,e){let t=null;for(const a of r.fieldTransforms){const c=e.data.field(a.field),p=my(a.transform,c||null);null!=p&&(null===t&&(t=Ms.empty()),t.set(a.field,p))}return t||null}function Mu(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===a||t&&a&&ta(t,a,(c,p)=>function U_(r,e){return r.field.isEqual(e.field)&&(a=e.transform,(t=r.transform)instanceof Vd&&a instanceof Vd||t instanceof Ju&&a instanceof Ju?ta(t.elements,a.elements,xo):t instanceof iu&&a instanceof iu?xo(t.wt,a.wt):t instanceof Uh&&a instanceof Uh);var t,a}(c,p))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,a}class Ru extends Lp{constructor(e,t,a,c=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class ec extends Lp{constructor(e,t,a,c,p=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=c,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function $p(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=r.data.field(t);e.set(t,a)}}),e}function jh(r,e,t){const a=new Map;or(r.length===t.length);for(let c=0;c<t.length;c++){const p=r[c],E=p.transform,O=e.data.field(p.field);a.set(p.field,Ud(E,O,t[c]))}return a}function vy(r,e,t){const a=new Map;for(const c of r){const p=c.transform,E=t.data.field(c.field);a.set(c.field,Fp(p,E,e))}return a}class Uf extends Lp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ey extends Lp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vf{constructor(e,t,a,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=c}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const p=this.mutations[c];p.key.isEqual(e.key)&&j_(p,e,a[c])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Vh(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Vh(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Lf();return this.mutations.forEach(c=>{const p=e.get(c.key),E=p.overlayedDocument;let O=this.applyToLocalView(E,p.mutatedFields);O=t.has(c.key)?null:O;const G=_y(E,O);null!==G&&a.set(c.key,G),E.isValidDocument()||E.convertToNoDocument(qn.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mi())}isEqual(e){return this.batchId===e.batchId&&ta(this.mutations,e.mutations,(t,a)=>Mu(t,a))&&ta(this.baseMutations,e.baseMutations,(t,a)=>Mu(t,a))}}class Hd{constructor(e,t,a,c){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=c}static from(e,t,a){or(e.mutations.length===a.length);let c=$_;const p=e.mutations;for(let E=0;E<p.length;E++)c=c.insert(p[E].key,a[E].version);return new Hd(e,t,a,c)}}class um{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class wy{constructor(e,t){this.count=e,this.unchangedNames=t}}var Co,Ti;function cm(r){switch(r){default:return zn();case Ot.CANCELLED:case Ot.UNKNOWN:case Ot.DEADLINE_EXCEEDED:case Ot.RESOURCE_EXHAUSTED:case Ot.INTERNAL:case Ot.UNAVAILABLE:case Ot.UNAUTHENTICATED:return!1;case Ot.INVALID_ARGUMENT:case Ot.NOT_FOUND:case Ot.ALREADY_EXISTS:case Ot.PERMISSION_DENIED:case Ot.FAILED_PRECONDITION:case Ot.ABORTED:case Ot.OUT_OF_RANGE:case Ot.UNIMPLEMENTED:case Ot.DATA_LOSS:return!0}}function dm(r){if(void 0===r)return jr("GRPC error has no .code"),Ot.UNKNOWN;switch(r){case Co.OK:return Ot.OK;case Co.CANCELLED:return Ot.CANCELLED;case Co.UNKNOWN:return Ot.UNKNOWN;case Co.DEADLINE_EXCEEDED:return Ot.DEADLINE_EXCEEDED;case Co.RESOURCE_EXHAUSTED:return Ot.RESOURCE_EXHAUSTED;case Co.INTERNAL:return Ot.INTERNAL;case Co.UNAVAILABLE:return Ot.UNAVAILABLE;case Co.UNAUTHENTICATED:return Ot.UNAUTHENTICATED;case Co.INVALID_ARGUMENT:return Ot.INVALID_ARGUMENT;case Co.NOT_FOUND:return Ot.NOT_FOUND;case Co.ALREADY_EXISTS:return Ot.ALREADY_EXISTS;case Co.PERMISSION_DENIED:return Ot.PERMISSION_DENIED;case Co.FAILED_PRECONDITION:return Ot.FAILED_PRECONDITION;case Co.ABORTED:return Ot.ABORTED;case Co.OUT_OF_RANGE:return Ot.OUT_OF_RANGE;case Co.UNIMPLEMENTED:return Ot.UNIMPLEMENTED;case Co.DATA_LOSS:return Ot.DATA_LOSS;default:return zn()}}(Ti=Co||(Co={}))[Ti.OK=0]="OK",Ti[Ti.CANCELLED=1]="CANCELLED",Ti[Ti.UNKNOWN=2]="UNKNOWN",Ti[Ti.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ti[Ti.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ti[Ti.NOT_FOUND=5]="NOT_FOUND",Ti[Ti.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ti[Ti.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ti[Ti.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ti[Ti.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ti[Ti.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ti[Ti.ABORTED=10]="ABORTED",Ti[Ti.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ti[Ti.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ti[Ti.INTERNAL=13]="INTERNAL",Ti[Ti.UNAVAILABLE=14]="UNAVAILABLE",Ti[Ti.DATA_LOSS=15]="DATA_LOSS";class xu{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return tc}static getOrCreateInstance(){return null===tc&&(tc=new xu),tc}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let tc=null;function Hh(){return new TextEncoder}const hm=new Ca([4294967295,4294967295],0);function Iy(r){const e=Hh().encode(r),t=new Yc;return t.update(e),new Uint8Array(t.digest())}function co(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),c=e.getUint32(8,!0),p=e.getUint32(12,!0);return[new Ca([t,a],0),new Ca([c,p],0)]}class Up{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new zd(`Invalid padding: ${t}`);if(a<0)throw new zd(`Invalid hash count: ${a}`);if(e.length>0&&0===this.hashCount)throw new zd(`Invalid hash count: ${a}`);if(0===e.length&&0!==t)throw new zd(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=Ca.fromNumber(this.yt)}Tt(e,t,a){let c=e.add(t.multiply(Ca.fromNumber(a)));return 1===c.compare(hm)&&(c=new Ca([c.getBits(0),c.getBits(1)],0)),c.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=Iy(e),[a,c]=co(t);for(let p=0;p<this.hashCount;p++){const E=this.Tt(a,c,p);if(!this.Et(E))return!1}return!0}static create(e,t,a){const c=e%8==0?0:8-e%8,p=new Uint8Array(Math.ceil(e/8)),E=new Up(p,c,t);return a.forEach(O=>E.insert(O)),E}insert(e){if(0===this.yt)return;const t=Iy(e),[a,c]=co(t);for(let p=0;p<this.hashCount;p++){const E=this.Tt(a,c,p);this.Rt(E)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class zd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zh{constructor(e,t,a,c,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=c,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const c=new Map;return c.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new zh(qn.min(),c,new Ji(hr),rl(),mi())}}class jl{constructor(e,t,a,c,p){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=c,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new jl(a,t,mi(),mi(),mi())}}class rd{constructor(e,t,a,c){this.vt=e,this.removedTargetIds=t,this.key=a,this.Pt=c}}class by{constructor(e,t){this.targetId=e,this.bt=t}}class Cy{constructor(e,t,a=Zs.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=c}}class Dy{constructor(){this.Vt=0,this.St=H_(),this.Dt=Zs.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=mi(),t=mi(),a=mi();return this.St.forEach((c,p)=>{switch(p){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:a=a.add(c);break;default:zn()}}),new jl(this.Dt,this.Ct,e,t,a)}$t(){this.xt=!1,this.St=H_()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class jf{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=rl(),this.jt=Ty(),this.zt=new Ji(hr)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const a=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&a.Mt(e.resumeToken);break;case 1:a.qt(),a.Nt||a.$t(),a.Mt(e.resumeToken);break;case 2:a.qt(),a.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(a.Ut(),a.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),a.Mt(e.resumeToken));break;default:zn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((a,c)=>{this.Zt(c)&&t(c)})}ee(e){var t;const a=e.targetId,c=e.bt.count,p=this.ne(a);if(p){const E=p.target;if(ti(E))if(0===c){const O=new An(E.path);this.Jt(a,O,di.newNoDocument(O,qn.min()))}else or(1===c);else{const O=this.se(a);if(O!==c){const G=this.ie(e,O);0!==G&&(this.te(a),this.zt=this.zt.insert(a,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=xu.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(te,pe,tt){var Pt,Jt,bn,Dn,fr,oi;const Hi={localCacheCount:pe,existenceFilterCount:tt.count},fi=tt.unchangedNames;return fi&&(Hi.bloomFilter={applied:0===te,hashCount:null!==(Pt=null==fi?void 0:fi.hashCount)&&void 0!==Pt?Pt:0,bitmapLength:null!==(Dn=null===(bn=null===(Jt=null==fi?void 0:fi.bits)||void 0===Jt?void 0:Jt.bitmap)||void 0===bn?void 0:bn.length)&&void 0!==Dn?Dn:0,padding:null!==(oi=null===(fr=null==fi?void 0:fi.bits)||void 0===fr?void 0:fr.padding)&&void 0!==oi?oi:0}),Hi}(G,O,e.bt))}}}}ie(e,t){const{unchangedNames:a,count:c}=e.bt;if(!a||!a.bits)return 1;const{bits:{bitmap:p="",padding:E=0},hashCount:O=0}=a;let G,te;try{G=br(p).toUint8Array()}catch(pe){if(pe instanceof Jc)return Ts("Decoding the base64 bloom filter in existence filter failed ("+pe.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw pe}try{te=new Up(G,E,O)}catch(pe){return Ts(pe instanceof zd?"BloomFilter error: ":"Applying bloom filter failed: ",pe),1}return 0===te.yt?1:c!==t-this.re(e.targetId,te)?2:0}re(e,t){const a=this.Kt.getRemoteKeysForTarget(e);let c=0;return a.forEach(p=>{const E=this.Kt.oe(),O=`projects/${E.projectId}/databases/${E.database}/documents/${p.path.canonicalString()}`;t.At(O)||(this.Jt(e,p,null),c++)}),c}ue(e){const t=new Map;this.Gt.forEach((p,E)=>{const O=this.ne(E);if(O){if(p.current&&ti(O.target)){const G=new An(O.target.path);null!==this.Qt.get(G)||this.ce(E,G)||this.Jt(E,G,di.newNoDocument(G,e))}p.kt&&(t.set(E,p.Ot()),p.$t())}});let a=mi();this.jt.forEach((p,E)=>{let O=!0;E.forEachWhile(G=>{const te=this.ne(G);return!te||"TargetPurposeLimboResolution"===te.purpose||(O=!1,!1)}),O&&(a=a.add(p))}),this.Qt.forEach((p,E)=>E.setReadTime(e));const c=new zh(e,t,this.zt,this.Qt,a);return this.Qt=rl(),this.jt=Ty(),this.zt=new Ji(hr),c}Ht(e,t){if(!this.Zt(e))return;const a=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,a),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,a){if(!this.Zt(e))return;const c=this.Xt(e);this.ce(e,t)?c.Ft(t,1):c.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),a&&(this.Qt=this.Qt.insert(t,a))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new Dy,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new es(hr),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||dn("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new Dy),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function Ty(){return new Ji(An.comparator)}function H_(){return new Ji(An.comparator)}const Gd={asc:"ASCENDING",desc:"DESCENDING"},Gh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sy={and:"AND",or:"OR"};class Wd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hf(r,e){return r.useProto3Json||Wi(e)?e:{value:e}}function Kd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vp(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Wh(r,e){return Kd(r,e.toTimestamp())}function $s(r){return or(!!r),qn.fromTimestamp(function(e){const t=Io(e);return new Xi(t.seconds,t.nanos)}(r))}function qd(r,e){return(t=r,new Ai(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function fm(r){const e=Ai.fromString(r);return or(Wp(e)),e}function Ac(r,e){return qd(r.databaseId,e.path)}function nc(r,e){const t=fm(e);if(t.get(1)!==r.databaseId.projectId)throw new an(Ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new an(Ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new An(id(t))}function Mc(r,e){return qd(r.databaseId,e)}function pm(r){const e=fm(r);return 4===e.length?Ai.emptyPath():id(e)}function Kh(r){return new Ai(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function id(r){return or(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function jp(r,e,t){return{name:Ac(r,e),fields:t.value.mapValue.fields}}function qh(r,e,t){const a=nc(r,e.name),c=$s(e.updateTime),p=e.createTime?$s(e.createTime):qn.min(),E=new Ms({mapValue:{fields:e.fields}}),O=di.newFoundDocument(a,c,p,E);return t&&O.setHasCommittedMutations(),t?O.setHasCommittedMutations():O}function Yd(r,e){let t;if(e instanceof Ru)t={update:jp(r,e.key,e.value)};else if(e instanceof Uf)t={delete:Ac(r,e.key)};else if(e instanceof ec)t={update:jp(r,e.key,e.data),updateMask:Zh(e.fieldMask)};else{if(!(e instanceof Ey))return zn();t={verify:Ac(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(c,p){const E=p.transform;if(E instanceof Uh)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof Vd)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof Ju)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof iu)return{fieldPath:p.field.canonicalString(),increment:E.wt};throw zn()}(0,a))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Wh(r,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:zn()),t;var c}function Yh(r,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?Gs.updateTime($s(c.updateTime)):void 0!==c.exists?Gs.exists(c.exists):Gs.none():Gs.none(),a=e.updateTransforms?e.updateTransforms.map(c=>function(p,E){let O=null;"setToServerValue"in E?(or("REQUEST_TIME"===E.setToServerValue),O=new Uh):"appendMissingElements"in E?O=new Vd(E.appendMissingElements.values||[]):"removeAllFromArray"in E?O=new Ju(E.removeAllFromArray.values||[]):"increment"in E?O=new iu(p,E.increment):zn();const G=os.fromServerFormat(E.fieldPath);return new jd(G,O)}(r,c)):[];var c;if(e.update){const c=nc(r,e.update.name),p=new Ms({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new zo((e.updateMask.fieldPaths||[]).map(te=>os.fromServerFormat(te)));return new ec(c,p,E,t,a)}return new Ru(c,p,t,a)}if(e.delete){const c=nc(r,e.delete);return new Uf(c,t)}if(e.verify){const c=nc(r,e.verify);return new Ey(c,t)}return zn()}function zf(r,e){return{documents:[Mc(r,e.path)]}}function Zd(r,e){const t={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(t.parent=Mc(r,a),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Mc(r,a.popLast()),t.structuredQuery.from=[{collectionId:a.lastSegment()}]);const c=function(G){if(0!==G.length)return Ry(qi.create(G,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const p=function(G){if(0!==G.length)return G.map(te=>{return{field:Pu((pe=te).field),direction:od(pe.dir)};var pe})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const E=Hf(r,e.limit);var O,G;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function zp(r){let e=pm(r.parent);const t=r.structuredQuery,a=t.from?t.from.length:0;let c=null;if(a>0){or(1===a);const pe=t.from[0];pe.allDescendants?c=pe.collectionId:e=e.child(pe.collectionId)}let p=[];t.where&&(p=function(pe){const tt=Rc(pe);return tt instanceof qi&&wc(tt)?tt.getFilters():[tt]}(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(pe=>{return new Cu(xc((tt=pe).field),function(Pt){switch(Pt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(tt.direction));var tt}));let O=null;t.limit&&(O=function(pe){let tt;return tt="object"==typeof pe?pe.value:pe,Wi(tt)?null:tt}(t.limit));let G=null;var pe;t.startAt&&(G=new Qs((pe=t.startAt).values||[],!!pe.before));let te=null;return t.endAt&&(te=function(pe){return new Qs(pe.values||[],!pe.before)}(t.endAt)),Zu(e,c,E,p,O,"F",G,te)}function Rc(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xc(e.unaryFilter.field);return wi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const a=xc(e.unaryFilter.field);return wi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=xc(e.unaryFilter.field);return wi.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=xc(e.unaryFilter.field);return wi.create(p,"!=",{nullValue:"NULL_VALUE"});default:return zn()}}(r):void 0!==r.fieldFilter?wi.create(xc((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return qi.create(e.compositeFilter.filters.map(t=>Rc(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return zn()}}(e.compositeFilter.op))}(r):zn();var e}function od(r){return Gd[r]}function My(r){return Gh[r]}function z_(r){return Sy[r]}function Pu(r){return{fieldPath:r.canonicalString()}}function xc(r){return os.fromServerFormat(r.fieldPath)}function Ry(r){return r instanceof wi?function(e){if("=="===e.op){if(Pn(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NAN"}};if(Bt(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Pn(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NOT_NAN"}};if(Bt(e.value))return{unaryFilter:{field:Pu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pu(e.field),op:My(e.op),value:e.value}}}(r):r instanceof qi?function(e){const t=e.getFilters().map(a=>Ry(a));return 1===t.length?t[0]:{compositeFilter:{op:z_(e.op),filters:t}}}(r):zn()}function Zh(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Wp(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class rc{constructor(e,t,a,c,p=qn.min(),E=qn.min(),O=Zs.EMPTY_BYTE_STRING,G=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=c,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=O,this.expectedCount=G}withSequenceNumber(e){return new rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class G_{constructor(e){this.le=e}}function ad(r,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Qd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Ac(c=r.le,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Kd(c,p.version.toTimestamp()),createTime:Kd(c,p.createTime.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:Hl(e.version)};else{if(!e.isUnknownDocument())return zn();a.unknownDocument={path:t.path.toArray(),version:Hl(e.version)}}var c,p;return a}function Qd(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Hl(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ou(r){const e=new Xi(r.seconds,r.nanoseconds);return qn.fromTimestamp(e)}function Nu(r,e){const t=(e.baseMutations||[]).map(p=>Yh(r.le,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const a=e.mutations.map(p=>Yh(r.le,p)),c=Xi.fromMillis(e.localWriteTimeMs);return new Vf(e.batchId,c,t,a)}function sl(r){const e=Ou(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Ou(r.lastLimboFreeSnapshotVersion):qn.min();let a;var c;return void 0!==r.query.documents?(or(1===(c=r.query).documents.length),a=uo(Su(pm(c.documents[0])))):a=uo(zp(r.query)),new rc(a,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Zs.fromBase64String(r.resumeToken))}function Qh(r,e){const t=Hl(e.snapshotVersion),a=Hl(e.lastLimboFreeSnapshotVersion);let c;c=ti(e.target)?zf(r.le,e.target):Zd(r.le,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mn(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:c}}function gm(r){const e=zp({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?Dc(e,e.limit,"L"):e}function Kp(r,e){return new um(e.largestBatchId,Yh(r.le,e.overlayMutation))}function Gf(r,e){const t=e.path.lastSegment();return[r,Ni(e.path.popLast()),t]}function Xd(r,e,t,a){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:Hl(a.readTime),documentKey:Ni(a.documentKey.path),largestBatchId:a.largestBatchId}}class Jd{getBundleMetadata(e,t){return qp(e).get(t).next(a=>{if(a)return{id:(c=a).bundleId,createTime:Ou(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return qp(e).put({bundleId:(a=t).id,createTime:Hl($s(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return zl(e).get(t).next(a=>{if(a)return{name:(c=a).name,query:gm(c.bundledQuery),readTime:Ou(c.readTime)};var c})}saveNamedQuery(e,t){return zl(e).put({name:(a=t).name,readTime:Hl($s(a.readTime)),bundledQuery:a.bundledQuery});var a}}function qp(r){return oo(r,"bundles")}function zl(r){return oo(r,"namedQueries")}class eh{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new eh(e,t.uid||"")}getOverlay(e,t){return Pc(e).get(Gf(this.userId,t)).next(a=>a?Kp(this.serializer,a):null)}getOverlays(e,t){const a=il();return w.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&a.set(c,p)})).next(()=>a)}saveOverlays(e,t,a){const c=[];return a.forEach((p,E)=>{const O=new um(t,E);c.push(this.de(e,O))}),w.waitFor(c)}removeOverlaysForBatchId(e,t,a){const c=new Set;t.forEach(E=>c.add(Ni(E.getCollectionPath())));const p=[];return c.forEach(E=>{const O=IDBKeyRange.bound([this.userId,E,a],[this.userId,E,a+1],!1,!0);p.push(Pc(e).J("collectionPathOverlayIndex",O))}),w.waitFor(p)}getOverlaysForCollection(e,t,a){const c=il(),p=Ni(t),E=IDBKeyRange.bound([this.userId,p,a],[this.userId,p,Number.POSITIVE_INFINITY],!0);return Pc(e).j("collectionPathOverlayIndex",E).next(O=>{for(const G of O){const te=Kp(this.serializer,G);c.set(te.getKey(),te)}return c})}getOverlaysForCollectionGroup(e,t,a,c){const p=il();let E;const O=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pc(e).X({index:"collectionGroupOverlayIndex",range:O},(G,te,pe)=>{const tt=Kp(this.serializer,te);p.size()<c||tt.largestBatchId===E?(p.set(tt.getKey(),tt),E=tt.largestBatchId):pe.done()}).next(()=>p)}de(e,t){return Pc(e).put(function(a,c,p){const[E,O,G]=Gf(c,p.mutation.key);return{userId:c,collectionPath:O,documentId:G,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:Yd(a.le,p.mutation)}}(this.serializer,this.userId,t))}}function Pc(r){return oo(r,"documentOverlays")}class ic{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Ki(e.integerValue));else if("doubleValue"in e){const a=Ki(e.doubleValue);isNaN(a)?this.ge(t,13):(this.ge(t,15),Ss(a)?t.ye(0):t.ye(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ge(t,20),"string"==typeof a?t.pe(a):(t.pe(`${a.seconds||""}`),t.ye(a.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(br(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.ge(t,45),t.ye(a.latitude||0),t.ye(a.longitude||0)}else"mapValue"in e?zr(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):zn()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const a=e.fields||{};this.ge(t,55);for(const c of Object.keys(a))this.Ie(c,t),this.we(a[c],t)}ve(e,t){const a=e.values||[];this.ge(t,50);for(const c of a)this.we(c,t)}Ae(e,t){this.ge(t,37),An.fromName(e).path.forEach(a=>{this.ge(t,60),this.Pe(a,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function xy(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function vl(r){const e=64-function(t){let a=0;for(let c=0;c<8;++c){const p=xy(255&t[c]);if(a+=p,8!==p)break}return a}(r);return Math.ceil(e/8)}ic.be=new ic;class Py{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Se(a.value),a=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.xe(a.value),a=t.next();this.Ne()}ke(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Se(a);else if(a<2048)this.Se(960|a>>>6),this.Se(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Se(480|a>>>12),this.Se(128|63&a>>>6),this.Se(128|63&a);else{const c=t.codePointAt(0);this.Se(240|c>>>18),this.Se(128|63&c>>>12),this.Se(128|63&c>>>6),this.Se(128|63&c)}}this.De()}Me(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.xe(a);else if(a<2048)this.xe(960|a>>>6),this.xe(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.xe(480|a>>>12),this.xe(128|63&a>>>6),this.xe(128|63&a);else{const c=t.codePointAt(0);this.xe(240|c>>>18),this.xe(128|63&c>>>12),this.xe(128|63&c>>>6),this.xe(128|63&c)}}this.Ne()}Oe(e){const t=this.$e(e),a=vl(t);this.Fe(1+a),this.buffer[this.position++]=255&a;for(let c=t.length-a;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Be(e){const t=this.$e(e),a=vl(t);this.Fe(1+a),this.buffer[this.position++]=~(255&a);for(let c=t.length-a;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(c){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,c,!1),new Uint8Array(p.buffer)}(e),a=0!=(128&t[0]);t[0]^=a?255:128;for(let c=1;c<t.length;++c)t[c]^=a?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const c=new Uint8Array(a);c.set(this.buffer),this.buffer=c}}class K_{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class Oy{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class Wf{constructor(){this.Qe=new Py,this.je=new K_(this.Qe),this.ze=new Oy(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class su{constructor(e,t,a,c){this.indexId=e,this.documentKey=t,this.arrayValue=a,this.directionalValue=c}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(t);return a.set(this.directionalValue,0),t!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new su(this.indexId,this.documentKey,this.arrayValue,a)}}function Aa(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=mm(r.arrayValue,e.arrayValue),0!==t?t:(t=mm(r.directionalValue,e.directionalValue),0!==t?t:An.comparator(r.documentKey,e.documentKey)))}function mm(r,e){for(let t=0;t<r.length&&t<e.length;++t){const a=r[t]-e[t];if(0!==a)return a}return r.length-e.length}class Kf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const a=t;a.isInequality()?this.Xe=a:this.Ye.push(a)}}Ze(e){or(e.collectionGroup===this.collectionId);const t=Ol(e);if(void 0!==t&&!this.tn(t))return!1;const a=Qa(e);let c=0,p=0;for(;c<a.length&&this.tn(a[c]);++c);if(c===a.length)return!0;if(void 0!==this.Xe){const E=a[c];if(!this.en(this.Xe,E)||!this.nn(this.Je[p++],E))return!1;++c}for(;c<a.length;++c)if(p>=this.Je.length||!this.nn(this.Je[p++],a[c]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ny(r){var e,t;if(or(r instanceof wi||r instanceof qi),r instanceof wi){if(r instanceof ne){const c=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(p=>wi.create(r.field,"==",p)))||[];return qi.create(c,"or")}return r}const a=r.filters.map(c=>Ny(c));return qi.create(a,r.op)}function q_(r){if(0===r.getFilters().length)return[];const e=Qp(Ny(r));return or(Xh(e)),Yp(e)||Zp(e)?[e]:e.getFilters()}function Yp(r){return r instanceof wi}function Zp(r){return r instanceof qi&&wc(r)}function Xh(r){return Yp(r)||Zp(r)||function(e){if(e instanceof qi&&tu(e)){for(const t of e.getFilters())if(!Yp(t)&&!Zp(t))return!1;return!0}return!1}(r)}function Qp(r){if(or(r instanceof wi||r instanceof qi),r instanceof wi)return r;if(1===r.filters.length)return Qp(r.filters[0]);const e=r.filters.map(a=>Qp(a));let t=qi.create(e,r.op);return t=Xp(t),Xh(t)?t:(or(t instanceof qi),or(bo(t)),or(t.filters.length>1),t.filters.reduce((a,c)=>qf(a,c)))}function qf(r,e){let t;return or(r instanceof wi||r instanceof qi),or(e instanceof wi||e instanceof qi),t=r instanceof wi?e instanceof wi?qi.create([r,e],"and"):ym(r,e):e instanceof wi?ym(e,r):function(a,c){if(or(a.filters.length>0&&c.filters.length>0),bo(a)&&bo(c))return Du(a,c.getFilters());const p=tu(a)?a:c,E=tu(a)?c:a,O=p.filters.map(G=>qf(G,E));return qi.create(O,"or")}(r,e),Xp(t)}function ym(r,e){if(bo(e))return Du(e,r.getFilters());{const t=e.filters.map(a=>qf(r,a));return qi.create(t,"or")}}function Xp(r){if(or(r instanceof wi||r instanceof qi),r instanceof wi)return r;const e=r.getFilters();if(1===e.length)return Xp(e[0]);if(Bd(r))return r;const t=e.map(c=>Xp(c)),a=[];return t.forEach(c=>{c instanceof wi?a.push(c):c instanceof qi&&(c.op===r.op?a.push(...c.filters):a.push(c))}),1===a.length?a[0]:qi.create(a,r.op)}class Y_{constructor(){this.sn=new El}addToCollectionParentIndex(e,t){return this.sn.add(t),w.resolve()}getCollectionParents(e,t){return w.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return w.resolve()}deleteFieldIndex(e,t){return w.resolve()}getDocumentsMatchingTarget(e,t){return w.resolve(null)}getIndexType(e,t){return w.resolve(0)}getFieldIndexes(e,t){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,t){return w.resolve(zs.min())}getMinOffsetFromCollectionGroup(e,t){return w.resolve(zs.min())}updateCollectionGroup(e,t,a){return w.resolve()}updateIndexEntries(e,t){return w.resolve()}}class El{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t]||new es(Ai.comparator),p=!c.has(a);return this.index[t]=c.add(a),p}has(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t];return c&&c.has(a)}getEntries(e){return(this.index[e]||new es(Ai.comparator)).toArray()}}const Jp=new Uint8Array(0);class ky{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new El,this.on=new Xu(a=>Mn(a),(a,c)=>lr(a,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const a=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const p={collectionId:a,parent:Ni(c)};return Fy(e).put(p)}return w.resolve()}getCollectionParents(e,t){const a=[],c=IDBKeyRange.bound([t,""],[zu(t),""],!1,!0);return Fy(e).j(c).next(p=>{for(const E of p){if(E.collectionId!==t)break;a.push(na(E.parent))}return a})}addFieldIndex(e,t){const a=Yf(e),c={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var E;delete c.indexId;const p=a.add(c);if(t.indexState){const E=Zf(e);return p.next(O=>{E.put(Xd(O,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const a=Yf(e),c=Zf(e),p=th(e);return a.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const a=th(e);let c=!0;const p=new Map;return w.forEach(this.un(t),E=>this.cn(e,E).next(O=>{c&&(c=!!O),p.set(E,O)})).next(()=>{if(c){let E=mi();const O=[];return w.forEach(p,(G,te)=>{var pe;dn("IndexedDbIndexManager",`Using index ${pe=G,`id=${pe.indexId}|cg=${pe.collectionGroup}|f=${pe.fields.map(fi=>`${fi.fieldPath}:${fi.kind}`).join(",")}`} to execute ${Mn(t)}`);const tt=function(fi,ka){const Us=Ol(ka);if(void 0===Us)return null;for(const Is of hi(fi,Us.fieldPath))switch(Is.op){case"array-contains-any":return Is.value.arrayValue.values||[];case"array-contains":return[Is.value]}return null}(te,G),Pt=function(fi,ka){const Us=new Map;for(const Is of Qa(ka))for(const Fa of hi(fi,Is.fieldPath))switch(Fa.op){case"==":case"in":Us.set(Is.fieldPath.canonicalString(),Fa.value);break;case"not-in":case"!=":return Us.set(Is.fieldPath.canonicalString(),Fa.value),Array.from(Us.values())}return null}(te,G),Jt=function(fi,ka){const Us=[];let Is=!0;for(const Fa of Qa(ka)){const Of=0===Fa.kind?lo(fi,Fa.fieldPath,fi.startAt):Tu(fi,Fa.fieldPath,fi.startAt);Us.push(Of.value),Is&&(Is=Of.inclusive)}return new Qs(Us,Is)}(te,G),bn=function(fi,ka){const Us=[];let Is=!0;for(const Fa of Qa(ka)){const Of=0===Fa.kind?Tu(fi,Fa.fieldPath,fi.endAt):lo(fi,Fa.fieldPath,fi.endAt);Us.push(Of.value),Is&&(Is=Of.inclusive)}return new Qs(Us,Is)}(te,G),Dn=this.an(G,te,Jt),fr=this.an(G,te,bn),oi=this.hn(G,te,Pt),Hi=this.ln(G.indexId,tt,Dn,Jt.inclusive,fr,bn.inclusive,oi);return w.forEach(Hi,fi=>a.H(fi,t.limit).next(ka=>{ka.forEach(Us=>{const Is=An.fromSegments(Us.documentKey);E.has(Is)||(E=E.add(Is),O.push(Is))})}))}).next(()=>O)}return w.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:q_(qi.create(e.filters,"and")).map(a=>In(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,a,c,p,E,O){const G=(null!=t?t.length:1)*Math.max(a.length,p.length),te=G/(null!=t?t.length:1),pe=[];for(let tt=0;tt<G;++tt){const Pt=t?this.fn(t[tt/te]):Jp,Jt=this.dn(e,Pt,a[tt%te],c),bn=this._n(e,Pt,p[tt%te],E),Dn=O.map(fr=>this.dn(e,Pt,fr,!0));pe.push(...this.createRange(Jt,bn,Dn))}return pe}dn(e,t,a,c){const p=new su(e,An.empty(),t,a);return c?p:p.He()}_n(e,t,a,c){const p=new su(e,An.empty(),t,a);return c?p.He():p}cn(e,t){const a=new Kf(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(p=>{let E=null;for(const O of p)a.Ze(O)&&(!E||O.fields.length>E.fields.length)&&(E=O);return E})}getIndexType(e,t){let a=2;const c=this.un(t);return w.forEach(c,p=>this.cn(e,p).next(E=>{E?0!==a&&E.fields.length<function(O){let G=new es(os.comparator),te=!1;for(const pe of O.filters)for(const tt of pe.getFlattenedFilters())tt.field.isKeyField()||("array-contains"===tt.op||"array-contains-any"===tt.op?te=!0:G=G.add(tt.field));for(const pe of O.orderBy)pe.field.isKeyField()||(G=G.add(pe.field));return G.size+(te?1:0)}(p)&&(a=1):a=0})).next(()=>null!==t.limit&&c.length>1&&2===a?1:a)}wn(e,t){const a=new Wf;for(const c of Qa(e)){const p=t.data.field(c.fieldPath);if(null==p)return null;const E=a.We(c.kind);ic.be._e(p,E)}return a.Ge()}fn(e){const t=new Wf;return ic.be._e(e,t.We(0)),t.Ge()}mn(e,t){const a=new Wf;return ic.be._e(Oe(this.databaseId,t),a.We(function(c){const p=Qa(c);return 0===p.length?0:p[p.length-1].kind}(e))),a.Ge()}hn(e,t,a){if(null===a)return[];let c=[];c.push(new Wf);let p=0;for(const E of Qa(e)){const O=a[p++];for(const G of c)if(this.gn(t,E.fieldPath)&&bt(O))c=this.yn(c,E,O);else{const te=G.We(E.kind);ic.be._e(O,te)}}return this.pn(c)}an(e,t,a){return this.hn(e,t,a.position)}pn(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].Ge();return t}yn(e,t,a){const c=[...e],p=[];for(const E of a.arrayValue.values||[])for(const O of c){const G=new Wf;G.seed(O.Ge()),ic.be._e(E,G.We(t.kind)),p.push(G)}return p}gn(e,t){return!!e.filters.find(a=>a instanceof wi&&a.field.isEqual(t)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,t){const a=Yf(e),c=Zf(e);return(t?a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):a.j()).next(p=>{const E=[];return w.forEach(p,O=>c.get([O.indexId,this.uid]).next(G=>{E.push(function(te,pe){const tt=pe?new _u(pe.sequenceNumber,new zs(Ou(pe.readTime),new An(na(pe.documentKey)),pe.largestBatchId)):_u.empty(),Pt=te.fields.map(([Jt,bn])=>new Gu(os.fromServerFormat(Jt),bn));return new mc(te.indexId,te.collectionGroup,Pt,tt)}(O,G))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((a,c)=>{const p=a.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==p?p:hr(a.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,a){const c=Yf(e),p=Zf(e);return this.In(e).next(E=>c.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(O=>w.forEach(O,G=>p.put(Xd(G.indexId,this.user,E,a)))))}updateIndexEntries(e,t){const a=new Map;return w.forEach(t,(c,p)=>{const E=a.get(c.collectionGroup);return(E?w.resolve(E):this.getFieldIndexes(e,c.collectionGroup)).next(O=>(a.set(c.collectionGroup,O),w.forEach(O,G=>this.Tn(e,c,G).next(te=>{const pe=this.En(p,G);return te.isEqual(pe)?w.resolve():this.An(e,p,G,te,pe)}))))})}Rn(e,t,a,c){return th(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.mn(a,t.key),documentKey:t.key.path.toArray()})}vn(e,t,a,c){return th(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.mn(a,t.key),t.key.path.toArray()])}Tn(e,t,a){const c=th(e);let p=new es(Aa);return c.X({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.mn(a,t)])},(E,O)=>{p=p.add(new su(a.indexId,t,O.arrayValue,O.directionalValue))}).next(()=>p)}En(e,t){let a=new es(Aa);const c=this.wn(t,e);if(null==c)return a;const p=Ol(t);if(null!=p){const E=e.data.field(p.fieldPath);if(bt(E))for(const O of E.arrayValue.values||[])a=a.add(new su(t.indexId,e.key,this.fn(O),c))}else a=a.add(new su(t.indexId,e.key,Jp,c));return a}An(e,t,a,c,p){dn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(O,G,te,pe,tt){const Pt=O.getIterator(),Jt=G.getIterator();let bn=Bi(Pt),Dn=Bi(Jt);for(;bn||Dn;){let fr=!1,oi=!1;if(bn&&Dn){const Hi=te(bn,Dn);Hi<0?oi=!0:Hi>0&&(fr=!0)}else null!=bn?oi=!0:fr=!0;fr?(pe(Dn),Dn=Bi(Jt)):oi?(tt(bn),bn=Bi(Pt)):(bn=Bi(Pt),Dn=Bi(Jt))}}(c,p,Aa,O=>{E.push(this.Rn(e,t,a,O))},O=>{E.push(this.vn(e,t,a,O))}),w.waitFor(E)}In(e){let t=1;return Zf(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,c,p)=>{p.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,a){a=a.sort((E,O)=>Aa(E,O)).filter((E,O,G)=>!O||0!==Aa(E,G[O-1]));const c=[];c.push(e);for(const E of a){const O=Aa(E,e),G=Aa(E,t);if(0===O)c[0]=e.He();else if(O>0&&G<0)c.push(E),c.push(E.He());else if(G>0)break}c.push(t);const p=[];for(let E=0;E<c.length;E+=2){if(this.Pn(c[E],c[E+1]))return[];p.push(IDBKeyRange.bound([c[E].indexId,this.uid,c[E].arrayValue,c[E].directionalValue,Jp,[]],[c[E+1].indexId,this.uid,c[E+1].arrayValue,c[E+1].directionalValue,Jp,[]]))}return p}Pn(e,t){return Aa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ld)}getMinOffset(e,t){return w.mapArray(this.un(t),a=>this.cn(e,a).next(c=>c||zn())).next(ld)}}function Fy(r){return oo(r,"collectionParents")}function th(r){return oo(r,"indexEntries")}function Yf(r){return oo(r,"indexConfiguration")}function Zf(r){return oo(r,"indexState")}function ld(r){or(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<r.length;a++){const c=r[a].indexState.offset;gl(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new zs(e.readTime,e.documentKey,t)}const Oc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ma{constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Ma(e,Ma.DEFAULT_COLLECTION_PERCENTILE,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eg(r,e,t){const a=r.store("mutations"),c=r.store("documentMutations"),p=[],E=IDBKeyRange.only(t.batchId);let O=0;const G=a.X({range:E},(pe,tt,Pt)=>(O++,Pt.delete()));p.push(G.next(()=>{or(1===O)}));const te=[];for(const pe of t.mutations){const tt=Fl(e,pe.key.path,t.batchId);p.push(c.delete(tt)),te.push(pe.key)}return w.waitFor(p).next(()=>te)}function Kr(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw zn();e=r.noDocument}return JSON.stringify(e).length}Ma.DEFAULT_COLLECTION_PERCENTILE=10,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ma.DEFAULT=new Ma(41943040,Ma.DEFAULT_COLLECTION_PERCENTILE,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ma.DISABLED=new Ma(-1,0,0);class Qf{constructor(e,t,a,c){this.userId=e,this.serializer=t,this.indexManager=a,this.referenceDelegate=c,this.bn={}}static fe(e,t,a,c){or(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new Qf(p,t,a,c)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nc(e).X({index:"userMutationsIndex",range:a},(c,p,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,a,c){const p=nh(e),E=Nc(e);return E.add({}).next(O=>{or("number"==typeof O);const G=new Vf(O,t,a,c),te=function(Pt,Jt,bn){const Dn=bn.baseMutations.map(oi=>Yd(Pt.le,oi)),fr=bn.mutations.map(oi=>Yd(Pt.le,oi));return{userId:Jt,batchId:bn.batchId,localWriteTimeMs:bn.localWriteTime.toMillis(),baseMutations:Dn,mutations:fr}}(this.serializer,this.userId,G),pe=[];let tt=new es((Pt,Jt)=>hr(Pt.canonicalString(),Jt.canonicalString()));for(const Pt of c){const Jt=Fl(this.userId,Pt.key.path,O);tt=tt.add(Pt.key.path.popLast()),pe.push(E.put(te)),pe.push(p.put(Jt,Eu))}return tt.forEach(Pt=>{pe.push(this.indexManager.addToCollectionParentIndex(e,Pt))}),e.addOnCommittedListener(()=>{this.bn[O]=G.keys()}),w.waitFor(pe).next(()=>G)})}lookupMutationBatch(e,t){return Nc(e).get(t).next(a=>a?(or(a.userId===this.userId),Nu(this.serializer,a)):null)}Vn(e,t){return this.bn[t]?w.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(a=>{if(a){const c=a.keys();return this.bn[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const a=t+1,c=IDBKeyRange.lowerBound([this.userId,a]);let p=null;return Nc(e).X({index:"userMutationsIndex",range:c},(E,O,G)=>{O.userId===this.userId&&(or(O.batchId>=a),p=Nu(this.serializer,O)),G.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Nc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(c,p,E)=>{a=p.batchId,E.done()}).next(()=>a)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nc(e).j("userMutationsIndex",t).next(a=>a.map(c=>Nu(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=Xa(this.userId,t.path),c=IDBKeyRange.lowerBound(a),p=[];return nh(e).X({range:c},(E,O,G)=>{const[te,pe,tt]=E,Pt=na(pe);if(te===this.userId&&t.path.isEqual(Pt))return Nc(e).get(tt).next(Jt=>{if(!Jt)throw zn();or(Jt.userId===this.userId),p.push(Nu(this.serializer,Jt))});G.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new es(hr);const c=[];return t.forEach(p=>{const E=Xa(this.userId,p.path),O=IDBKeyRange.lowerBound(E),G=nh(e).X({range:O},(te,pe,tt)=>{const[Pt,Jt,bn]=te,Dn=na(Jt);Pt===this.userId&&p.path.isEqual(Dn)?a=a.add(bn):tt.done()});c.push(G)}),w.waitFor(c).next(()=>this.Sn(e,a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,c=a.length+1,p=Xa(this.userId,a),E=IDBKeyRange.lowerBound(p);let O=new es(hr);return nh(e).X({range:E},(G,te,pe)=>{const[tt,Pt,Jt]=G,bn=na(Pt);tt===this.userId&&a.isPrefixOf(bn)?bn.length===c&&(O=O.add(Jt)):pe.done()}).next(()=>this.Sn(e,O))}Sn(e,t){const a=[],c=[];return t.forEach(p=>{c.push(Nc(e).get(p).next(E=>{if(null===E)throw zn();or(E.userId===this.userId),a.push(Nu(this.serializer,E))}))}),w.waitFor(c).next(()=>a)}removeMutationBatch(e,t){return eg(e.at,this.userId,t).next(a=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),w.forEach(a,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return w.resolve();const a=IDBKeyRange.lowerBound([this.userId]),c=[];return nh(e).X({range:a},(p,E,O)=>{if(p[0]===this.userId){const G=na(p[1]);c.push(G)}else O.done()}).next(()=>{or(0===c.length)})})}containsKey(e,t){return ud(e,this.userId,t)}Cn(e){return _m(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ud(r,e,t){const a=Xa(e,t.path),c=a[1],p=IDBKeyRange.lowerBound(a);let E=!1;return nh(r).X({range:p,Y:!0},(O,G,te)=>{const[pe,tt,Pt]=O;pe===e&&tt===c&&(E=!0),te.done()}).next(()=>E)}function Nc(r){return oo(r,"mutations")}function nh(r){return oo(r,"documentMutations")}function _m(r){return oo(r,"mutationQueues")}class kc{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new kc(0)}static kn(){return new kc(-1)}}class tg{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const a=new kc(t.highestTargetId);return t.highestTargetId=a.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>qn.fromTimestamp(new Xi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,a){return this.Mn(e).next(c=>(c.highestListenSequenceNumber=t,a&&(c.lastRemoteSnapshotVersion=a.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.On(e,c)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(a=>(a.targetCount+=1,this.Fn(t,a),this.On(e,a))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fc(e).delete(t.targetId)).next(()=>this.Mn(e)).next(a=>(or(a.targetCount>0),a.targetCount-=1,this.On(e,a)))}removeTargets(e,t,a){let c=0;const p=[];return Fc(e).X((E,O)=>{const G=sl(O);G.sequenceNumber<=t&&null===a.get(G.targetId)&&(c++,p.push(this.removeTargetData(e,G)))}).next(()=>w.waitFor(p)).next(()=>c)}forEachTarget(e,t){return Fc(e).X((a,c)=>{const p=sl(c);t(p)})}Mn(e){return ng(e).get("targetGlobalKey").next(t=>(or(null!==t),t))}On(e,t){return ng(e).put("targetGlobalKey",t)}$n(e,t){return Fc(e).put(Qh(this.serializer,t))}Fn(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const a=Mn(t),c=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let p=null;return Fc(e).X({range:c,index:"queryTargetsIndex"},(E,O,G)=>{const te=sl(O);lr(t,te.target)&&(p=te,G.done())}).next(()=>p)}addMatchingKeys(e,t,a){const c=[],p=cd(e);return t.forEach(E=>{const O=Ni(E.path);c.push(p.put({targetId:a,path:O})),c.push(this.referenceDelegate.addReference(e,a,E))}),w.waitFor(c)}removeMatchingKeys(e,t,a){const c=cd(e);return w.forEach(t,p=>{const E=Ni(p.path);return w.waitFor([c.delete([a,E]),this.referenceDelegate.removeReference(e,a,p)])})}removeMatchingKeysForTargetId(e,t){const a=cd(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(c)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),c=cd(e);let p=mi();return c.X({range:a,Y:!0},(E,O,G)=>{const te=na(E[1]),pe=new An(te);p=p.add(pe)}).next(()=>p)}containsKey(e,t){const a=Ni(t.path),c=IDBKeyRange.bound([a],[zu(a)],!1,!0);let p=0;return cd(e).X({index:"documentTargetsIndex",Y:!0,range:c},([E,O],G,te)=>{0!==E&&(p++,te.done())}).next(()=>p>0)}he(e,t){return Fc(e).get(t).next(a=>a?sl(a):null)}}function Fc(r){return oo(r,"targets")}function ng(r){return oo(r,"targetGlobal")}function cd(r){return oo(r,"targetDocuments")}function Z_([r,e],[t,a]){const c=hr(r,t);return 0===c?hr(e,a):c}class rg{constructor(e){this.Bn=e,this.buffer=new es(Z_),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Z_(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vm{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;dn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(a){rt(a)?dn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield S(a)}yield t.Gn(3e5)}))}}class dd{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(0===t)return w.resolve(ir.ct);const a=new rg(t);return this.Qn.forEachTarget(e,c=>a.Un(c.sequenceNumber)).next(()=>this.Qn.zn(e,c=>a.Un(c))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.Qn.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(dn("LruGarbageCollector","Garbage collection skipped; disabled"),w.resolve(Oc)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(dn("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Oc):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let a,c,p,E,O,G,te;const pe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(tt=>(tt>this.params.maximumSequenceNumbersToCollect?(dn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${tt}`),c=this.params.maximumSequenceNumbersToCollect):c=tt,E=Date.now(),this.nthSequenceNumber(e,c))).next(tt=>(a=tt,O=Date.now(),this.removeTargets(e,a,t))).next(tt=>(p=tt,G=Date.now(),this.removeOrphanedDocuments(e,a))).next(tt=>(te=Date.now(),Jl()<=Ae.in.DEBUG&&dn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-pe}ms\n\tDetermined least recently used ${c} in `+(O-E)+`ms\n\tRemoved ${p} targets in `+(G-O)+`ms\n\tRemoved ${tt} documents in `+(te-G)+`ms\nTotal Duration: ${te-pe}ms`),w.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:p,documentsRemoved:tt})))}}class ig{constructor(e,t){this.db=e,this.garbageCollector=function Ly(r,e){return new dd(r,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>t.next(c=>a+c))}Hn(e){let t=0;return this.zn(e,a=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(a,c)=>t(c))}addReference(e,t,a){return rh(e,a)}removeReference(e,t,a){return rh(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return rh(e,t)}Yn(e,t){return function(a,c){let p=!1;return _m(a).Z(E=>ud(a,E,c).next(O=>(O&&(p=!0),w.resolve(!O)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let p=0;return this.Jn(e,(E,O)=>{if(O<=t){const G=this.Yn(e,E).next(te=>{if(!te)return p++,a.getEntry(e,E).next(()=>(a.removeEntry(E,qn.min()),cd(e).delete([0,Ni(E.path)])))});c.push(G)}}).next(()=>w.waitFor(c)).next(()=>a.apply(e)).next(()=>p)}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return rh(e,t)}Jn(e,t){const a=cd(e);let c,p=ir.ct;return a.X({index:"documentTargetsIndex"},([E,O],{path:G,sequenceNumber:te})=>{0===E?(p!==ir.ct&&t(new An(na(c)),p),p=te,c=G):p=ir.ct}).next(()=>{p!==ir.ct&&t(new An(na(c)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rh(r,e){return cd(r).put((a=r.currentSequenceNumber,{targetId:0,path:Ni(e.path),sequenceNumber:a}));var a}class sg{constructor(){this.changes=new Xu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,di.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return void 0!==a?w.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Q_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return ku(e).put(a)}removeEntry(e,t,a){return ku(e).delete(function(c,p){const E=c.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],Qd(p),E[E.length-1]]}(t,a))}updateMetadata(e,t){return this.getMetadata(e).next(a=>(a.byteSize+=t,this.Xn(e,a)))}getEntry(e,t){let a=di.newInvalidDocument(t);return ku(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ol(t))},(c,p)=>{a=this.Zn(t,p)}).next(()=>a)}ts(e,t){let a={size:0,document:di.newInvalidDocument(t)};return ku(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ol(t))},(c,p)=>{a={document:this.Zn(t,p),size:Kr(p)}}).next(()=>a)}getEntries(e,t){let a=rl();return this.es(e,t,(c,p)=>{const E=this.Zn(c,p);a=a.insert(c,E)}).next(()=>a)}ns(e,t){let a=rl(),c=new Ji(An.comparator);return this.es(e,t,(p,E)=>{const O=this.Zn(p,E);a=a.insert(p,O),c=c.insert(p,Kr(E))}).next(()=>({documents:a,ss:c}))}es(e,t,a){if(t.isEmpty())return w.resolve();let c=new es(fd);t.forEach(G=>c=c.add(G));const p=IDBKeyRange.bound(ol(c.first()),ol(c.last())),E=c.getIterator();let O=E.getNext();return ku(e).X({index:"documentKeyIndex",range:p},(G,te,pe)=>{const tt=An.fromSegments([...te.prefixPath,te.collectionGroup,te.documentId]);for(;O&&fd(O,tt)<0;)a(O,null),O=E.getNext();O&&O.isEqual(tt)&&(a(O,te),O=E.hasNext()?E.getNext():null),O?pe.G(ol(O)):pe.done()}).next(()=>{for(;O;)a(O,null),O=E.hasNext()?E.getNext():null})}getDocumentsMatchingQuery(e,t,a,c){const p=t.path,E=[p.popLast().toArray(),p.lastSegment(),Qd(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],O=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ku(e).j(IDBKeyRange.bound(E,O,!0)).next(G=>{let te=rl();for(const pe of G){const tt=this.Zn(An.fromSegments(pe.prefixPath.concat(pe.collectionGroup,pe.documentId)),pe);tt.isFoundDocument()&&(Sc(t,tt)||c.has(tt.key))&&(te=te.insert(tt.key,tt))}return te})}getAllFromCollectionGroup(e,t,a,c){let p=rl();const E=hd(t,a),O=hd(t,zs.max());return ku(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,O,!0)},(G,te,pe)=>{const tt=this.Zn(An.fromSegments(te.prefixPath.concat(te.collectionGroup,te.documentId)),te);p=p.insert(tt.key,tt),p.size===c&&pe.done()}).next(()=>p)}newChangeBuffer(e){return new Em(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Lc(e).get("remoteDocumentGlobalKey").next(t=>(or(!!t),t))}Xn(e,t){return Lc(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const a=function W_(r,e){let t;if(e.document)t=qh(r.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=An.fromSegments(e.noDocument.path),c=Ou(e.noDocument.readTime);t=di.newNoDocument(a,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return zn();{const a=An.fromSegments(e.unknownDocument.path),c=Ou(e.unknownDocument.version);t=di.newUnknownDocument(a,c)}}return e.readTime&&t.setReadTime(function(a){const c=new Xi(a[0],a[1]);return qn.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!a.isNoDocument()||!a.version.isEqual(qn.min()))return a}return di.newInvalidDocument(e)}}function wl(r){return new Q_(r)}class Em extends sg{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new Xu(a=>a.toString(),(a,c)=>a.isEqual(c))}applyChanges(e){const t=[];let a=0,c=new es((p,E)=>hr(p.canonicalString(),E.canonicalString()));return this.changes.forEach((p,E)=>{const O=this.os.get(p);if(t.push(this.rs.removeEntry(e,p,O.readTime)),E.isValidDocument()){const G=ad(this.rs.serializer,E);c=c.add(p.path.popLast());const te=Kr(G);a+=te-O.size,t.push(this.rs.addEntry(e,p,G))}else if(a-=O.size,this.trackRemovals){const G=ad(this.rs.serializer,E.convertToNoDocument(qn.min()));t.push(this.rs.addEntry(e,p,G))}}),c.forEach(p=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.rs.updateMetadata(e,a)),w.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(a=>(this.os.set(t,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:a,ss:c})=>(c.forEach((p,E)=>{this.os.set(p,{size:E,readTime:a.get(p).readTime})}),a))}}function Lc(r){return oo(r,"remoteDocumentGlobal")}function ku(r){return oo(r,"remoteDocumentsV14")}function ol(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hd(r,e){const t=e.documentKey.path.toArray();return[r,Qd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fd(r,e){const t=r.path.toArray(),a=e.path.toArray();let c=0;for(let p=0;p<t.length-2&&p<a.length-2;++p)if(c=hr(t[p],a[p]),c)return c;return c=hr(t.length,a.length),c||(c=hr(t[t.length-2],a[a.length-2]),c||hr(t[t.length-1],a[a.length-1]))}class By{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bc{constructor(e,t,a,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=c}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(a=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(null!==a&&Vh(a.mutation,c,zo.empty(),Xi.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,mi()).next(()=>a))}getLocalViewOfDocuments(e,t,a=mi()){const c=il();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,a).next(p=>{let E=nd();return p.forEach((O,G)=>{E=E.insert(O,G.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const a=il();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,mi()))}populateOverlays(e,t,a){const c=[];return a.forEach(p=>{t.has(p)||c.push(p)}),this.documentOverlayCache.getOverlays(e,c).next(p=>{p.forEach((E,O)=>{t.set(E,O)})})}computeViews(e,t,a,c){let p=rl();const E=$d(),O=$d();return t.forEach((G,te)=>{const pe=a.get(te.key);c.has(te.key)&&(void 0===pe||pe.mutation instanceof ec)?p=p.insert(te.key,te):void 0!==pe?(E.set(te.key,pe.mutation.getFieldMask()),Vh(pe.mutation,te,pe.mutation.getFieldMask(),Xi.now())):E.set(te.key,zo.empty())}),this.recalculateAndSaveOverlays(e,p).next(G=>(G.forEach((te,pe)=>E.set(te,pe)),t.forEach((te,pe)=>{var tt;return O.set(te,new By(pe,null!==(tt=E.get(te))&&void 0!==tt?tt:null))}),O))}recalculateAndSaveOverlays(e,t){const a=$d();let c=new Ji((E,O)=>E-O),p=mi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const O of E)O.keys().forEach(G=>{const te=t.get(G);if(null===te)return;let pe=a.get(G)||zo.empty();pe=O.applyToLocalView(te,pe),a.set(G,pe);const tt=(c.get(O.batchId)||mi()).add(G);c=c.insert(O.batchId,tt)})}).next(()=>{const E=[],O=c.getReverseIterator();for(;O.hasNext();){const G=O.getNext(),te=G.key,pe=G.value,tt=Lf();pe.forEach(Pt=>{if(!p.has(Pt)){const Jt=_y(t.get(Pt),a.get(Pt));null!==Jt&&tt.set(Pt,Jt),p=p.add(Pt)}}),E.push(this.documentOverlayCache.saveOverlays(e,te,tt))}return w.waitFor(E)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a){return An.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Qu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a):this.getDocumentsMatchingCollectionQuery(e,t,a);var c}getNextDocuments(e,t,a,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,c).next(p=>{const E=c-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,c-p.size):w.resolve(il());let O=-1,G=p;return E.next(te=>w.forEach(te,(pe,tt)=>(O<tt.largestBatchId&&(O=tt.largestBatchId),p.get(pe)?w.resolve():this.remoteDocumentCache.getEntry(e,pe).next(Pt=>{G=G.insert(pe,Pt)}))).next(()=>this.populateOverlays(e,te,p)).next(()=>this.computeViews(e,G,te,mi())).next(pe=>({batchId:O,changes:Op(pe)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new An(t)).next(a=>{let c=nd();return a.isFoundDocument()&&(c=c.insert(a.key,a)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,a){const c=t.collectionGroup;let p=nd();return this.indexManager.getCollectionParents(e,c).next(E=>w.forEach(E,O=>{const G=(te=t,pe=O.child(c),new Vl(pe,null,te.explicitOrderBy.slice(),te.filters.slice(),te.limit,te.limitType,te.startAt,te.endAt));var te,pe;return this.getDocumentsMatchingCollectionQuery(e,G,a).next(te=>{te.forEach((pe,tt)=>{p=p.insert(pe,tt)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,c))).next(p=>{c.forEach((O,G)=>{const te=G.getKey();null===p.get(te)&&(p=p.insert(te,di.newInvalidDocument(te)))});let E=nd();return p.forEach((O,G)=>{const te=c.get(O);void 0!==te&&Vh(te.mutation,G,zo.empty(),Xi.now()),Sc(t,G)&&(E=E.insert(O,G))}),E})}}class wm{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return w.resolve(this.us.get(t))}saveBundleMetadata(e,t){var a;return this.us.set(t.id,{id:(a=t).id,version:a.version,createTime:$s(a.createTime)}),w.resolve()}getNamedQuery(e,t){return w.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(a=t).name,query:gm(a.bundledQuery),readTime:$s(a.readTime)}),w.resolve();var a}}class X_{constructor(){this.overlays=new Ji(An.comparator),this.hs=new Map}getOverlay(e,t){return w.resolve(this.overlays.get(t))}getOverlays(e,t){const a=il();return w.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&a.set(c,p)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((c,p)=>{this.de(e,t,p)}),w.resolve()}removeOverlaysForBatchId(e,t,a){const c=this.hs.get(a);return void 0!==c&&(c.forEach(p=>this.overlays=this.overlays.remove(p)),this.hs.delete(a)),w.resolve()}getOverlaysForCollection(e,t,a){const c=il(),p=t.length+1,E=new An(t.child("")),O=this.overlays.getIteratorFrom(E);for(;O.hasNext();){const G=O.getNext().value,te=G.getKey();if(!t.isPrefixOf(te.path))break;te.path.length===p&&G.largestBatchId>a&&c.set(G.getKey(),G)}return w.resolve(c)}getOverlaysForCollectionGroup(e,t,a,c){let p=new Ji((te,pe)=>te-pe);const E=this.overlays.getIterator();for(;E.hasNext();){const te=E.getNext().value;if(te.getKey().getCollectionGroup()===t&&te.largestBatchId>a){let pe=p.get(te.largestBatchId);null===pe&&(pe=il(),p=p.insert(te.largestBatchId,pe)),pe.set(te.getKey(),te)}}const O=il(),G=p.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((te,pe)=>O.set(te,pe)),!(O.size()>=c)););return w.resolve(O)}de(e,t,a){const c=this.overlays.get(a.key);if(null!==c){const E=this.hs.get(c.largestBatchId).delete(a.key);this.hs.set(c.largestBatchId,E)}this.overlays=this.overlays.insert(a.key,new um(t,a));let p=this.hs.get(t);void 0===p&&(p=mi(),this.hs.set(t,p)),this.hs.set(t,p.add(a.key))}}class og{constructor(){this.ls=new es(Po.fs),this.ds=new es(Po._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const a=new Po(e,t);this.ls=this.ls.add(a),this.ds=this.ds.add(a)}ws(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.gs(new Po(e,t))}ys(e,t){e.forEach(a=>this.removeReference(a,t))}ps(e){const t=new An(new Ai([])),a=new Po(t,e),c=new Po(t,e+1),p=[];return this.ds.forEachInRange([a,c],E=>{this.gs(E),p.push(E.key)}),p}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new An(new Ai([])),a=new Po(t,e),c=new Po(t,e+1);let p=mi();return this.ds.forEachInRange([a,c],E=>{p=p.add(E.key)}),p}containsKey(e){const t=new Po(e,0),a=this.ls.firstAfterOrEqual(t);return null!==a&&e.isEqual(a.key)}}class Po{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return An.comparator(e.key,t.key)||hr(e.Es,t.Es)}static _s(e,t){return hr(e.Es,t.Es)||An.comparator(e.key,t.key)}}class J_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new es(Po.fs)}checkEmpty(e){return w.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,a,c){const p=this.As;this.As++;const E=new Vf(p,t,a,c);this.mutationQueue.push(E);for(const O of c)this.Rs=this.Rs.add(new Po(O.key,p)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return w.resolve(E)}lookupMutationBatch(e,t){return w.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.Ps(t+1),p=c<0?0:c;return w.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Po(t,0),c=new Po(t,Number.POSITIVE_INFINITY),p=[];return this.Rs.forEachInRange([a,c],E=>{const O=this.vs(E.Es);p.push(O)}),w.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new es(hr);return t.forEach(c=>{const p=new Po(c,0),E=new Po(c,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([p,E],O=>{a=a.add(O.Es)})}),w.resolve(this.bs(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,c=a.length+1;let p=a;An.isDocumentKey(p)||(p=p.child(""));const E=new Po(new An(p),0);let O=new es(hr);return this.Rs.forEachWhile(G=>{const te=G.key.path;return!!a.isPrefixOf(te)&&(te.length===c&&(O=O.add(G.Es)),!0)},E),w.resolve(this.bs(O))}bs(e){const t=[];return e.forEach(a=>{const c=this.vs(a);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){or(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let a=this.Rs;return w.forEach(t.mutations,c=>{const p=new Po(c.key,t.batchId);return a=a.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Rs=a})}Dn(e){}containsKey(e,t){const a=new Po(t,0),c=this.Rs.firstAfterOrEqual(a);return w.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return w.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ev{constructor(e){this.Ss=e,this.docs=new Ji(An.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,c=this.docs.get(a),p=c?c.size:0,E=this.Ss(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:E}),this.size+=E-p,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return w.resolve(a?a.document.mutableCopy():di.newInvalidDocument(t))}getEntries(e,t){let a=rl();return t.forEach(c=>{const p=this.docs.get(c);a=a.insert(c,p?p.document.mutableCopy():di.newInvalidDocument(c))}),w.resolve(a)}getDocumentsMatchingQuery(e,t,a,c){let p=rl();const E=t.path,O=new An(E.child("")),G=this.docs.getIteratorFrom(O);for(;G.hasNext();){const{key:te,value:{document:pe}}=G.getNext();if(!E.isPrefixOf(te.path))break;te.path.length>E.length+1||gl(ps(pe),a)<=0||(c.has(pe.key)||Sc(t,pe))&&(p=p.insert(pe.key,pe.mutableCopy()))}return w.resolve(p)}getAllFromCollectionGroup(e,t,a,c){zn()}Ds(e,t){return w.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new tv(this)}getSize(e){return w.resolve(this.size)}}class tv extends sg{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((a,c)=>{c.isValidDocument()?t.push(this.rs.addEntry(e,c)):this.rs.removeEntry(a)}),w.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class nv{constructor(e){this.persistence=e,this.Cs=new Xu(t=>Mn(t),lr),this.lastRemoteSnapshotVersion=qn.min(),this.highestTargetId=0,this.xs=0,this.Ns=new og,this.targetCount=0,this.ks=kc.Nn()}forEachTarget(e,t){return this.Cs.forEach((a,c)=>t(c)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.xs&&(this.xs=t),w.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new kc(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,w.resolve()}updateTargetData(e,t){return this.$n(t),w.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,t,a){let c=0;const p=[];return this.Cs.forEach((E,O)=>{O.sequenceNumber<=t&&null===a.get(O.targetId)&&(this.Cs.delete(E),p.push(this.removeMatchingKeysForTargetId(e,O.targetId)),c++)}),w.waitFor(p).next(()=>c)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,t){const a=this.Cs.get(t)||null;return w.resolve(a)}addMatchingKeys(e,t,a){return this.Ns.ws(t,a),w.resolve()}removeMatchingKeys(e,t,a){this.Ns.ys(t,a);const c=this.persistence.referenceDelegate,p=[];return c&&t.forEach(E=>{p.push(c.markPotentiallyOrphaned(e,E))}),w.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),w.resolve()}getMatchingKeysForTargetId(e,t){const a=this.Ns.Ts(t);return w.resolve(a)}containsKey(e,t){return w.resolve(this.Ns.containsKey(t))}}class pd{constructor(e,t){this.Ms={},this.overlays={},this.Os=new ir(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new nv(this),this.indexManager=new Y_,this.remoteDocumentCache=new ev(a=>this.referenceDelegate.Bs(a)),this.serializer=new G_(t),this.Ls=new wm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new X_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.Ms[e.toKey()];return a||(a=new J_(t,this.referenceDelegate),this.Ms[e.toKey()]=a),a}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,a){dn("MemoryPersistence","Starting transaction:",e);const c=new ag(this.Os.next());return this.referenceDelegate.qs(),a(c).next(p=>this.referenceDelegate.Us(c).next(()=>p)).toPromise().then(p=>(c.raiseOnCommittedEvent(),p))}Ks(e,t){return w.or(Object.values(this.Ms).map(a=>()=>a.containsKey(e,t)))}}class ag extends wo{constructor(e){super(),this.currentSequenceNumber=e}}class $c{constructor(e){this.persistence=e,this.Gs=new og,this.Qs=null}static js(e){return new $c(e)}get zs(){if(this.Qs)return this.Qs;throw zn()}addReference(e,t,a){return this.Gs.addReference(a,t),this.zs.delete(a.toString()),w.resolve()}removeReference(e,t,a){return this.Gs.removeReference(a,t),this.zs.add(a.toString()),w.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),w.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(c=>this.zs.add(c.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(p=>this.zs.add(p.toString()))}).next(()=>a.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.zs,a=>{const c=An.fromPath(a);return this.Ws(e,c).next(p=>{p||t.removeEntry(c,qn.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(a=>{a?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return w.or([()=>w.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class lg{constructor(e){this.serializer=e}$(e,t,a,c){const p=new k("createOrUpgrade",t);var O;a<1&&c>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kl,{unique:!0}),O.createObjectStore("documentMutations"),$y(e),function(O){O.createObjectStore("remoteDocuments")}(e));let E=w.resolve();return a<3&&c>=3&&(0!==a&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),$y(e)),E=E.next(()=>function(O){const G=O.store("targetGlobal"),te={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qn.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",te)}(p))),a<4&&c>=4&&(0!==a&&(E=E.next(()=>function(O,G){return G.store("mutations").j().next(te=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kl,{unique:!0});const pe=G.store("mutations"),tt=te.map(Pt=>pe.put(Pt));return w.waitFor(tt)})}(e,p))),E=E.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&c>=5&&(E=E.next(()=>this.Js(p))),a<6&&c>=6&&(E=E.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(p)))),a<7&&c>=7&&(E=E.next(()=>this.Xs(p))),a<8&&c>=8&&(E=E.next(()=>this.Zs(e,p))),a<9&&c>=9&&(E=E.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&c>=10&&(E=E.next(()=>this.ti(p))),a<11&&c>=11&&(E=E.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&c>=12&&(E=E.next(()=>{!function(O){const G=O.createObjectStore("documentOverlays",{keyPath:Ja});G.createIndex("collectionPathOverlayIndex",Xc,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",ga,{unique:!1})}(e)})),a<13&&c>=13&&(E=E.next(()=>function(O){const G=O.createObjectStore("remoteDocumentsV14",{keyPath:Nh});G.createIndex("documentKeyIndex",Ta),G.createIndex("collectionGroupIndex",Nd)}(e)).next(()=>this.ei(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&c>=14&&(E=E.next(()=>this.ni(e,p))),a<15&&c>=15&&(E=E.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:ci}).createIndex("sequenceNumberIndex",Zc,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:Qc}).createIndex("documentKeyIndex",Fd,{unique:!1})}(e))),E}Ys(e){let t=0;return e.store("remoteDocuments").X((a,c)=>{t+=Kr(c)}).next(()=>{const a={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Js(e){const t=e.store("mutationQueues"),a=e.store("mutations");return t.j().next(c=>w.forEach(c,p=>{const E=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return a.j("userMutationsIndex",E).next(O=>w.forEach(O,G=>{or(G.userId===p.userId);const te=Nu(this.serializer,G);return eg(e,p.userId,te).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const p=[];return a.X((E,O)=>{const G=new Ai(E),te=[0,Ni(G)];p.push(t.get(te).next(pe=>pe?w.resolve():t.put({targetId:0,path:Ni(G),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>w.waitFor(p))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:pa});const a=t.store("collectionParents"),c=new El,p=E=>{if(c.add(E)){const O=E.lastSegment(),G=E.popLast();return a.put({collectionId:O,parent:Ni(G)})}};return t.store("remoteDocuments").X({Y:!0},(E,O)=>{const G=new Ai(E);return p(G.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([E,O,G],te)=>{const pe=na(O);return p(pe.popLast())}))}ti(e){const t=e.store("targets");return t.X((a,c)=>{const p=sl(c),E=Qh(this.serializer,p);return t.put(E)})}ei(e,t){const a=t.store("remoteDocuments"),c=[];return a.X((p,E)=>{const O=t.store("remoteDocumentsV14"),G=(te=E,te.document?new An(Ai.fromString(te.document.name).popFirst(5)):te.noDocument?An.fromSegments(te.noDocument.path):te.unknownDocument?An.fromSegments(te.unknownDocument.path):zn()).path.toArray();var te;const pe={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};c.push(O.put(pe))}).next(()=>w.waitFor(c))}ni(e,t){const a=t.store("mutations"),c=wl(this.serializer),p=new pd($c.js,this.serializer.le);return a.j().next(E=>{const O=new Map;return E.forEach(G=>{var te;let pe=null!==(te=O.get(G.userId))&&void 0!==te?te:mi();Nu(this.serializer,G).keys().forEach(tt=>pe=pe.add(tt)),O.set(G.userId,pe)}),w.forEach(O,(G,te)=>{const pe=new Ds(te),tt=eh.fe(this.serializer,pe),Pt=p.getIndexManager(pe),Jt=Qf.fe(pe,this.serializer,Pt,p.referenceDelegate);return new Bc(c,Jt,tt,Pt).recalculateAndSaveOverlaysForDocumentKeys(new vc(t,ir.ct),G).next()})})}}function $y(r){r.createObjectStore("targetDocuments",{keyPath:yc}).createIndex("documentTargetsIndex",kd,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Nf,{unique:!0}),r.createObjectStore("targetGlobal")}const Jh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ug{constructor(e,t,a,c,p,E,O,G,te,pe,tt=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.si=p,this.window=E,this.document=O,this.ii=te,this.ri=pe,this.oi=tt,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=Pt=>Promise.resolve(),!ug.D())throw new an(Ot.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ig(this,c),this.fi=t+"main",this.serializer=new G_(G),this.di=new z(this.fi,this.oi,new lg(this.serializer)),this.Fs=new tg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wl(this.serializer),this.Ls=new Jd,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===pe&&jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new an(Ot.FAILED_PRECONDITION,Jh);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ir(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var a=(0,ae.Z)(function*(c){if(t.started)return e(c)});return function(c){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,ae.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wo(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(rt(e))return dn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return dn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return Xf(e).get("owner").next(t=>w.resolve(this.Ri(t)))}vi(e){return Wo(e).delete(this.clientId)}Pi(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const c=oo(a,"clientMetadata");return c.j().next(p=>{const E=e.Vi(p,18e5),O=p.filter(G=>-1===E.indexOf(G));return w.forEach(O,G=>c.delete(G.clientId)).next(()=>O)})}).catch(()=>[]);if(e._i)for(const a of t)e._i.removeItem(e.Si(a.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?w.resolve(!0):Xf(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new an(Ot.FAILED_PRECONDITION,Jh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wo(e).j().next(a=>void 0===this.Vi(a,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(t=>(this.isPrimary!==t&&dn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const a=new vc(t,ir.ct);return e.Ei(a).next(()=>e.vi(a))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(a=>this.bi(a.updateTimeMs,t)&&!this.Di(a.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>Wo(e).j().next(t=>this.Vi(t,18e5).map(a=>a.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return Qf.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ky(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return eh.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,a){dn("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",p=15===(E=this.oi)?Ld:14===E?_c:13===E?wu:12===E?ra:11===E?kh:void zn();var E;let O;return this.di.runTransaction(e,c,p,G=>(O=new vc(G,this.Os?this.Os.next():ir.ct),"readwrite-primary"===t?this.Ii(O).next(te=>!!te||this.Ti(O)).next(te=>{if(!te)throw jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new an(Ot.FAILED_PRECONDITION,vu);return a(O)}).next(te=>this.Ai(O).next(()=>te)):this.Oi(O).next(()=>a(O)))).then(G=>(O.raiseOnCommittedEvent(),G))}Oi(e){return Xf(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new an(Ot.FAILED_PRECONDITION,Jh)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xf(e).put("owner",t)}static D(){return z.D()}Ei(e){const t=Xf(e);return t.get("owner").next(a=>this.Ri(a)?(dn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):w.resolve())}bi(e,t){const a=Date.now();return!(e<a-t||e>a&&(jr(`Detected an update time that is in the future: ${e} > ${a}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,Y.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const a=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return dn("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return jr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){jr("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xf(r){return oo(r,"owner")}function Wo(r){return oo(r,"clientMetadata")}function Jf(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Im{constructor(e,t,a,c){this.targetId=e,this.fromCache=t,this.$i=a,this.Fi=c}static Bi(e,t){let a=mi(),c=mi();for(const p of t.docChanges)switch(p.type){case 0:a=a.add(p.doc.key);break;case 1:c=c.add(p.doc.key)}return new Im(e,t.fromCache,a,c)}}class bm{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,a,c){return this.Ui(e,t).next(p=>p||this.Ki(e,t,c,a)).next(p=>p||this.Gi(e,t))}Ui(e,t){if(nu(t))return w.resolve(null);let a=uo(t);return this.indexManager.getIndexType(e,a).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=Dc(t,null,"F"),a=uo(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(p=>{const E=mi(...p);return this.qi.getDocuments(e,E).next(O=>this.indexManager.getMinOffset(e,a).next(G=>{const te=this.Qi(t,O);return this.ji(t,te,E,G.readTime)?this.Ui(e,Dc(t,null,"F")):this.zi(e,te,t,G)}))})))}Ki(e,t,a,c){return nu(t)||c.isEqual(qn.min())?this.Gi(e,t):this.qi.getDocuments(e,a).next(p=>{const E=this.Qi(t,p);return this.ji(t,E,a,c)?this.Gi(e,t):(Jl()<=Ae.in.DEBUG&&dn("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Ff(t)),this.zi(e,E,t,Wu(c,-1)))})}Qi(e,t){let a=new es(rm(e));return t.forEach((c,p)=>{Sc(e,p)&&(a=a.add(p))}),a}ji(e,t,a,c){if(null===e.limit)return!1;if(a.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(c)>0)}Gi(e,t){return Jl()<=Ae.in.DEBUG&&dn("QueryEngine","Using full collection scan to execute query:",Ff(t)),this.qi.getDocumentsMatchingQuery(e,t,zs.min())}zi(e,t,a,c){return this.qi.getDocumentsMatchingQuery(e,a,c).next(p=>(t.forEach(E=>{p=p.insert(E.key,E)}),p))}}class rv{constructor(e,t,a,c){this.persistence=e,this.Wi=t,this.serializer=c,this.Hi=new Ji(hr),this.Ji=new Xu(p=>Mn(p),lr),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(a)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bc(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function Cm(r,e,t,a){return new rv(r,e,t,a)}function ep(r,e){return gd.apply(this,arguments)}function gd(){return gd=(0,ae.Z)(function*(r,e){const t=Fn(r);return yield t.persistence.runTransaction("Handle user change","readonly",a=>{let c;return t.mutationQueue.getAllMutationBatches(a).next(p=>(c=p,t.Zi(e),t.mutationQueue.getAllMutationBatches(a))).next(p=>{const E=[],O=[];let G=mi();for(const te of c){E.push(te.batchId);for(const pe of te.mutations)G=G.add(pe.key)}for(const te of p){O.push(te.batchId);for(const pe of te.mutations)G=G.add(pe.key)}return t.localDocuments.getDocuments(a,G).next(te=>({tr:te,removedBatchIds:E,addedBatchIds:O}))})})}),gd.apply(this,arguments)}function ef(r){const e=Fn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function tp(r,e,t){let a=mi(),c=mi();return t.forEach(p=>a=a.add(p)),e.getEntries(r,a).next(p=>{let E=rl();return t.forEach((O,G)=>{const te=p.get(O);G.isFoundDocument()!==te.isFoundDocument()&&(c=c.add(O)),G.isNoDocument()&&G.version.isEqual(qn.min())?(e.removeEntry(O,G.readTime),E=E.insert(O,G)):!te.isValidDocument()||G.version.compareTo(te.version)>0||0===G.version.compareTo(te.version)&&te.hasPendingWrites?(e.addEntry(G),E=E.insert(O,G)):dn("LocalStore","Ignoring outdated watch update for ",O,". Current version:",te.version," Watch version:",G.version)}),{er:E,nr:c}})}function Uy(r,e){const t=Fn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function md(r,e){const t=Fn(r);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let c;return t.Fs.getTargetData(a,e).next(p=>p?(c=p,w.resolve(c)):t.Fs.allocateTargetId(a).next(E=>(c=new rc(e,E,"TargetPurposeListen",a.currentSequenceNumber),t.Fs.addTargetData(a,c).next(()=>c))))}).then(a=>{const c=t.Hi.get(a.targetId);return(null===c||a.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(a.targetId,a),t.Ji.set(e,a.targetId)),a})}function yd(r,e,t){return np.apply(this,arguments)}function np(){return np=(0,ae.Z)(function*(r,e,t){const a=Fn(r),c=a.Hi.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield a.persistence.runTransaction("Release target",p,E=>a.persistence.referenceDelegate.removeTarget(E,c)))}catch(E){if(!rt(E))throw E;dn("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}a.Hi=a.Hi.remove(e),a.Ji.delete(c.target)}),np.apply(this,arguments)}function rp(r,e,t){const a=Fn(r);let c=qn.min(),p=mi();return a.persistence.runTransaction("Execute query","readonly",E=>function(O,G,te){const pe=Fn(O),tt=pe.Ji.get(te);return void 0!==tt?w.resolve(pe.Hi.get(tt)):pe.Fs.getTargetData(G,te)}(a,E,uo(e)).next(O=>{if(O)return c=O.lastLimboFreeSnapshotVersion,a.Fs.getMatchingKeysForTargetId(E,O.targetId).next(G=>{p=G})}).next(()=>a.Wi.getDocumentsMatchingQuery(E,e,t?c:qn.min(),t?p:mi())).next(O=>(jy(a,py(e),O),{documents:O,sr:p})))}function cg(r,e){const t=Fn(r),a=Fn(t.Fs),c=t.Hi.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",p=>a.he(p,e).next(E=>E?E.target:null))}function Vy(r,e){const t=Fn(r),a=t.Yi.get(e)||qn.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Xi.getAllFromCollectionGroup(c,e,Wu(a,-1),Number.MAX_SAFE_INTEGER)).then(c=>(jy(t,e,c),c))}function jy(r,e,t){let a=r.Yi.get(e)||qn.min();t.forEach((c,p)=>{p.readTime.compareTo(a)>0&&(a=p.readTime)}),r.Yi.set(e,a)}function Sm(){return Sm=(0,ae.Z)(function*(r,e,t,a){const c=Fn(r);let p=mi(),E=rl();for(const te of t){const pe=e.ir(te.metadata.name);te.document&&(p=p.add(pe));const tt=e.rr(te);tt.setReadTime(e.ur(te.metadata.readTime)),E=E.insert(pe,tt)}const O=c.Xi.newChangeBuffer({trackRemovals:!0}),G=yield md(c,(te=a,uo(Su(Ai.fromString(`__bundle__/docs/${te}`)))));var te;return c.persistence.runTransaction("Apply bundle documents","readwrite",te=>tp(te,O,E).next(pe=>(O.apply(te),pe)).next(pe=>c.Fs.removeMatchingKeysForTargetId(te,G.targetId).next(()=>c.Fs.addMatchingKeys(te,p,G.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(te,pe.er,pe.nr)).next(()=>pe.er)))}),Sm.apply(this,arguments)}function zy(r,e){return Il.apply(this,arguments)}function Il(){return Il=(0,ae.Z)(function*(r,e,t=mi()){const a=yield md(r,uo(gm(e.bundledQuery))),c=Fn(r);return c.persistence.runTransaction("Save named query","readwrite",p=>{const E=$s(e.readTime);if(a.snapshotVersion.compareTo(E)>=0)return c.Ls.saveNamedQuery(p,e);const O=a.withResumeToken(Zs.EMPTY_BYTE_STRING,E);return c.Hi=c.Hi.insert(O.targetId,O),c.Fs.updateTargetData(p,O).next(()=>c.Fs.removeMatchingKeysForTargetId(p,a.targetId)).next(()=>c.Fs.addMatchingKeys(p,t,a.targetId)).next(()=>c.Ls.saveNamedQuery(p,e))})}),Il.apply(this,arguments)}function Gy(r,e){return`firestore_clients_${r}_${e}`}function dg(r,e,t){let a=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function Ra(r,e){return`firestore_targets_${r}_${e}`}class hg{constructor(e,t,a,c){this.user=e,this.batchId=t,this.state=a,this.error=c}static cr(e,t,a){const c=JSON.parse(a);let p,E="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return E&&c.error&&(E="string"==typeof c.error.message&&"string"==typeof c.error.code,E&&(p=new an(c.error.code,c.error.message))),E?new hg(e,t,c.state,p):(jr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${a}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tf{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static cr(e,t){const a=JSON.parse(t);let c,p="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(c=new an(a.error.code,a.error.message))),p?new tf(e,a.state,c):(jr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Am{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const a=JSON.parse(t);let c="object"==typeof a&&a.activeTargetIds instanceof Array,p=Bf();for(let E=0;c&&E<a.activeTargetIds.length;++E)c=Ro(a.activeTargetIds[E]),p=p.add(a.activeTargetIds[E]);return c?new Am(e,p):(jr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ip{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ip(t.clientId,t.onlineState):(jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class fg{constructor(){this.activeTargetIds=Bf()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mm{constructor(e,t,a,c,p){this.window=e,this.si=t,this.persistenceKey=a,this.dr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new Ji(hr),this.started=!1,this.gr=[];const E=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.yr=Gy(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new fg),this.Ir=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.Mi();for(const c of t){if(c===e.dr)continue;const p=e.getItem(Gy(e.persistenceKey,c));if(p){const E=Am.cr(c,p);E&&(e.mr=e.mr.insert(E.clientId,E))}}e.vr();const a=e.storage.getItem(e.Ar);if(a){const c=e.Pr(a);c&&e.br(c)}for(const c of e.gr)e.wr(c);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((a,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,a){this.Sr(e,t,a),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Ra(this.persistenceKey,e));if(a){const c=tf.cr(e,a);c&&(t=c.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ra(this.persistenceKey,e))}updateQueryState(e,t,a){this.Nr(e,t,a)}handleUserChange(e,t,a){t.forEach(c=>{this.Dr(c)}),this.currentUser=e,a.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return dn("SharedClientState","READ",e,t),t}setItem(e,t){dn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){dn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const a=e;if(a.storageArea===this.storage){if(dn("SharedClientState","EVENT",a.key,a.newValue),a.key===this.yr)return void jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==a.key)if(t.Ir.test(a.key)){if(null==a.newValue){const c=t.Or(a.key);return t.$r(c,null)}{const c=t.Fr(a.key,a.newValue);if(c)return t.$r(c.clientId,c)}}else if(t.Tr.test(a.key)){if(null!==a.newValue){const c=t.Br(a.key,a.newValue);if(c)return t.Lr(c)}}else if(t.Er.test(a.key)){if(null!==a.newValue){const c=t.qr(a.key,a.newValue);if(c)return t.Ur(c)}}else if(a.key===t.Ar){if(null!==a.newValue){const c=t.Pr(a.newValue);if(c)return t.br(c)}}else if(a.key===t.pr){const c=function(p){let E=ir.ct;if(null!=p)try{const O=JSON.parse(p);or("number"==typeof O),E=O}catch(O){jr("SharedClientState","Failed to read sequence number from WebStorage",O)}return E}(a.newValue);c!==ir.ct&&t.sequenceNumberHandler(c)}else if(a.key===t.Rr){const c=t.Kr(a.newValue);yield Promise.all(c.map(p=>t.syncEngine.Gr(p)))}}else t.gr.push(a)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,a){const c=new hg(this.currentUser,e,t,a),p=dg(this.persistenceKey,this.currentUser,e);this.setItem(p,c.ar())}Dr(e){const t=dg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,a){const c=Ra(this.persistenceKey,e),p=new tf(e,t,a);this.setItem(c,p.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const a=this.Or(e);return Am.cr(a,t)}Br(e,t){const a=this.Tr.exec(e),c=Number(a[1]);return hg.cr(new Ds(void 0!==a[2]?a[2]:null),c,t)}qr(e,t){const a=this.Er.exec(e),c=Number(a[1]);return tf.cr(c,t)}Pr(e){return ip.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);dn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const a=t?this.mr.insert(e,t):this.mr.remove(e),c=this.Vr(this.mr),p=this.Vr(a),E=[],O=[];return p.forEach(G=>{c.has(G)||E.push(G)}),c.forEach(G=>{p.has(G)||O.push(G)}),this.syncEngine.zr(E,O).then(()=>{this.mr=a})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=Bf();return e.forEach((a,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class Rm{constructor(){this.Wr=new fg,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,a){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new fg,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iv{Jr(e){}shutdown(){}}class xm{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){dn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){dn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Pm=null;function pg(){return null===Pm?Pm=268435456+Math.round(2147483648*Math.random()):Pm++,"0x"+Pm.toString(16)}const Om={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sv{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const xa="WebChannelConnection";class ov extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,a,c,p){const E=pg(),O=this.Io(e,t);dn("RestConnection",`Sending RPC '${e}' ${E}:`,O,a);const G={};return this.To(G,c,p),this.Eo(e,O,G,a).then(te=>(dn("RestConnection",`Received RPC '${e}' ${E}: `,te),te),te=>{throw Ts("RestConnection",`RPC '${e}' ${E} failed with error: `,te,"url: ",O,"request:",a),te})}Ao(e,t,a,c,p,E){return this.po(e,t,a,c,p)}To(e,t,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ls,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,p)=>e[p]=c),a&&a.headers.forEach((c,p)=>e[p]=c)}Io(e,t){return`${this.wo}/v1/${t}:${Om[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,a,c){const p=pg();return new Promise((E,O)=>{const G=new fl;G.setWithCredentials(!0),G.listenOnce(Fs.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Ys.NO_ERROR:const pe=G.getResponseJson();dn(xa,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(pe)),E(pe);break;case Ys.TIMEOUT:dn(xa,`RPC '${e}' ${p} timed out`),O(new an(Ot.DEADLINE_EXCEEDED,"Request time out"));break;case Ys.HTTP_ERROR:const tt=G.getStatus();if(dn(xa,`RPC '${e}' ${p} failed with status:`,tt,"response text:",G.getResponseText()),tt>0){let Pt=G.getResponseJson();Array.isArray(Pt)&&(Pt=Pt[0]);const Jt=null==Pt?void 0:Pt.error;if(Jt&&Jt.status&&Jt.message){const bn=function(Dn){const fr=Dn.toLowerCase().replace(/_/g,"-");return Object.values(Ot).indexOf(fr)>=0?fr:Ot.UNKNOWN}(Jt.status);O(new an(bn,Jt.message))}else O(new an(Ot.UNKNOWN,"Server responded with status "+G.getStatus()))}else O(new an(Ot.UNAVAILABLE,"Connection failed."));break;default:zn()}}finally{dn(xa,`RPC '${e}' ${p} completed.`)}});const te=JSON.stringify(c);dn(xa,`RPC '${e}' ${p} sending request:`,c),G.send(t,"POST",te,a,15)})}Ro(e,t,a){const c=pg(),p=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=so(),O=Cs(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(G.xmlHttpFactory=new jo({})),this.To(G.initMessageHeaders,t,a),G.encodeInitMessageHeaders=!0;const te=p.join("");dn(xa,`Creating RPC '${e}' stream ${c}: ${te}`,G);const pe=E.createWebChannel(te,G);let tt=!1,Pt=!1;const Jt=new sv({io:Dn=>{Pt?dn(xa,`Not sending because RPC '${e}' stream ${c} is closed:`,Dn):(tt||(dn(xa,`Opening RPC '${e}' stream ${c} transport.`),pe.open(),tt=!0),dn(xa,`RPC '${e}' stream ${c} sending:`,Dn),pe.send(Dn))},ro:()=>pe.close()}),bn=(Dn,fr,oi)=>{Dn.listen(fr,Hi=>{try{oi(Hi)}catch(fi){setTimeout(()=>{throw fi},0)}})};return bn(pe,Ml.EventType.OPEN,()=>{Pt||dn(xa,`RPC '${e}' stream ${c} transport opened.`)}),bn(pe,Ml.EventType.CLOSE,()=>{Pt||(Pt=!0,dn(xa,`RPC '${e}' stream ${c} transport closed`),Jt.fo())}),bn(pe,Ml.EventType.ERROR,Dn=>{Pt||(Pt=!0,Ts(xa,`RPC '${e}' stream ${c} transport errored:`,Dn),Jt.fo(new an(Ot.UNAVAILABLE,"The operation could not be completed")))}),bn(pe,Ml.EventType.MESSAGE,Dn=>{var fr;if(!Pt){const oi=Dn.data[0];or(!!oi);const fi=oi.error||(null===(fr=oi[0])||void 0===fr?void 0:fr.error);if(fi){dn(xa,`RPC '${e}' stream ${c} received error:`,fi);const ka=fi.status;let Us=function(Fa){const Of=Co[Fa];if(void 0!==Of)return dm(Of)}(ka),Is=fi.message;void 0===Us&&(Us=Ot.INTERNAL,Is="Unknown error status: "+ka+" with message "+fi.message),Pt=!0,Jt.fo(new an(Us,Is)),pe.close()}else dn(xa,`RPC '${e}' stream ${c} received:`,oi),Jt._o(oi)}}),bn(O,vo.STAT_EVENT,Dn=>{Dn.stat===Eo.PROXY?dn(xa,`RPC '${e}' stream ${c} detected buffering proxy`):Dn.stat===Eo.NOPROXY&&dn(xa,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{Jt.lo()},0),Jt}}function Wy(){return typeof window<"u"?window:null}function gg(){return typeof document<"u"?document:null}function bl(r){return new Wd(r,!0)}class sp{constructor(e,t,a=1e3,c=1.5,p=6e4){this.si=e,this.timerId=t,this.vo=a,this.Po=c,this.bo=p,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),a=Math.max(0,Date.now()-this.Do),c=Math.max(0,t-a);c>0&&dn("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,c,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class Ky{constructor(e,t,a,c,p,E,O,G){this.si=e,this.Mo=a,this.Oo=c,this.connection=p,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=O,this.listener=G,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new sp(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,ae.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,ae.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var a=this;return(0,ae.Z)(function*(){a.Wo(),a.Ho(),a.Lo.cancel(),a.$o++,4!==e?a.Lo.reset():t&&t.code===Ot.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),a.Lo.Co()):t&&t.code===Ot.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Jo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,c])=>{this.$o===t&&this.Xo(a,c)},a=>{e(()=>{const c=new an(Ot.UNKNOWN,"Fetching auth token failed: "+a.message);return this.Zo(c)})})}Xo(e,t){const a=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{a(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(c=>{a(()=>this.Zo(c))}),this.stream.onMessage(c=>{a(()=>this.onMessage(c))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,ae.Z)(function*(){e.state=0,e.start()}))}Zo(e){return dn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(dn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Uv extends Ky{constructor(e,t,a,c,p,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,c,E),this.serializer=p}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function Ay(r,e){let t;if("targetChange"in e){const a="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:zn(),c=e.targetChange.targetIds||[],p=function(G,te){return G.useProto3Json?(or(void 0===te||"string"==typeof te),Zs.fromBase64String(te||"")):(or(void 0===te||te instanceof Uint8Array),Zs.fromUint8Array(te||new Uint8Array))}(r,e.targetChange.resumeToken),E=e.targetChange.cause,O=E&&function(G){const te=void 0===G.code?Ot.UNKNOWN:dm(G.code);return new an(te,G.message||"")}(E);t=new Cy(a,c,p,O||null)}else if("documentChange"in e){const a=e.documentChange,c=nc(r,a.document.name),p=$s(a.document.updateTime),E=a.document.createTime?$s(a.document.createTime):qn.min(),O=new Ms({mapValue:{fields:a.document.fields}}),G=di.newFoundDocument(c,p,E,O);t=new rd(a.targetIds||[],a.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const a=e.documentDelete,c=nc(r,a.document),p=a.readTime?$s(a.readTime):qn.min(),E=di.newNoDocument(c,p);t=new rd([],a.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const a=e.documentRemove,c=nc(r,a.document);t=new rd([],a.removedTargetIds||[],c,null)}else{if(!("filter"in e))return zn();{const a=e.filter,{count:c=0,unchangedNames:p}=a,E=new wy(c,p);t=new by(a.targetId,E)}}var G;return t}(this.serializer,e),a=function(c){if(!("targetChange"in c))return qn.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?qn.min():p.readTime?$s(p.readTime):qn.min()}(e);return this.listener.eu(t,a)}nu(e){const t={};t.database=Kh(this.serializer),t.addTarget=function(c,p){let E;const O=p.target;if(E=ti(O)?{documents:zf(c,O)}:{query:Zd(c,O)},E.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){E.resumeToken=Vp(c,p.resumeToken);const G=Hf(c,p.expectedCount);null!==G&&(E.expectedCount=G)}else if(p.snapshotVersion.compareTo(qn.min())>0){E.readTime=Kd(c,p.snapshotVersion.toTimestamp());const G=Hf(c,p.expectedCount);null!==G&&(E.expectedCount=G)}return E}(this.serializer,e);const a=function Gp(r,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);a&&(t.labels=a),this.zo(t)}su(e){const t={};t.database=Kh(this.serializer),t.removeTarget=e,this.zo(t)}}class av extends Ky{constructor(e,t,a,c,p,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,c,E),this.serializer=p,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(or(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function sd(r,e){return r&&r.length>0?(or(void 0!==e),r.map(t=>function(a,c){let p=$s(a.updateTime?a.updateTime:c);return p.isEqual(qn.min())&&(p=$s(c)),new V_(p,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),a=$s(e.commitTime);return this.listener.uu(a,t)}return or(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=Kh(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>Yd(this.serializer,a))};this.zo(t)}}class lv extends class{}{constructor(e,t,a,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=c,this.hu=!1}lu(){if(this.hu)throw new an(Ot.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,a){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection.po(e,t,a,c,p)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new an(Ot.UNKNOWN,c.toString())})}Ao(e,t,a,c){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,E])=>this.connection.Ao(e,t,a,p,E,c)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new an(Ot.UNKNOWN,p.toString())})}terminate(){this.hu=!0}}class mg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(jr(t),this.wu=!1):dn("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class cv{constructor(e,t,a,c,p){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=p,this.vu.Jr(O=>{a.enqueueAndForget((0,ae.Z)(function*(){var G;Vc(E)&&(dn("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,ae.Z)(function*(te){const pe=Fn(te);pe.Au.add(4),yield Uc(pe),pe.Pu.set("Unknown"),pe.Au.delete(4),yield op(pe)}),function(te){return G.apply(this,arguments)})(E))}))}),this.Pu=new mg(a,c)}}function op(r){return nf.apply(this,arguments)}function nf(){return nf=(0,ae.Z)(function*(r){if(Vc(r))for(const e of r.Ru)yield e(!0)}),nf.apply(this,arguments)}function Uc(r){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,ae.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),Gl.apply(this,arguments)}function Ko(r,e){const t=Fn(r);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),_g(t)?yg(t):oh(t).Uo()&&rf(t,e))}function qo(r,e){const t=Fn(r),a=oh(t);t.Eu.delete(e),a.Uo()&&km(t,e),0===t.Eu.size&&(a.Uo()?a.Qo():Vc(t)&&t.Pu.set("Unknown"))}function rf(r,e){if(r.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oh(r).nu(e)}function km(r,e){r.bu.Lt(e),oh(r).su(e)}function yg(r){r.bu=new jf({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),he:e=>r.Eu.get(e)||null,oe:()=>r.datastore.serializer.databaseId}),oh(r).start(),r.Pu.mu()}function _g(r){return Vc(r)&&!oh(r).qo()&&r.Eu.size>0}function Vc(r){return 0===Fn(r).Au.size}function vg(r){r.bu=void 0}function jc(r){return sh.apply(this,arguments)}function sh(){return sh=(0,ae.Z)(function*(r){r.Eu.forEach((e,t)=>{rf(r,e)})}),sh.apply(this,arguments)}function ap(r,e){return _d.apply(this,arguments)}function _d(){return _d=(0,ae.Z)(function*(r,e){vg(r),_g(r)?(r.Pu.pu(e),yg(r)):r.Pu.set("Unknown")}),_d.apply(this,arguments)}function qy(r,e,t){return vd.apply(this,arguments)}function vd(){return vd=(0,ae.Z)(function*(r,e,t){if(r.Pu.set("Online"),e instanceof Cy&&2===e.state&&e.cause)try{yield(a=(0,ae.Z)(function*(c,p){const E=p.cause;for(const O of p.targetIds)c.Eu.has(O)&&(yield c.remoteSyncer.rejectListen(O,E),c.Eu.delete(O),c.bu.removeTarget(O))}),function(c,p){return a.apply(this,arguments)})(r,e)}catch(a){dn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield lp(r,a)}else if(e instanceof rd?r.bu.Wt(e):e instanceof by?r.bu.ee(e):r.bu.Yt(e),!t.isEqual(qn.min()))try{const a=yield ef(r.localStore);t.compareTo(a)>=0&&(yield function(c,p){const E=c.bu.ue(p);return E.targetChanges.forEach((O,G)=>{if(O.resumeToken.approximateByteSize()>0){const te=c.Eu.get(G);te&&c.Eu.set(G,te.withResumeToken(O.resumeToken,p))}}),E.targetMismatches.forEach((O,G)=>{const te=c.Eu.get(O);if(!te)return;c.Eu.set(O,te.withResumeToken(Zs.EMPTY_BYTE_STRING,te.snapshotVersion)),km(c,O);const pe=new rc(te.target,O,G,te.sequenceNumber);rf(c,pe)}),c.remoteSyncer.applyRemoteEvent(E)}(r,t))}catch(a){dn("RemoteStore","Failed to raise snapshot:",a),yield lp(r,a)}var a}),vd.apply(this,arguments)}function lp(r,e,t){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,ae.Z)(function*(r,e,t){if(!rt(e))throw e;r.Au.add(1),yield Uc(r),r.Pu.set("Offline"),t||(t=()=>ef(r.localStore)),r.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){dn("RemoteStore","Retrying IndexedDB access"),yield t(),r.Au.delete(1),yield op(r)}))}),Eg.apply(this,arguments)}function Yy(r,e){return e().catch(t=>lp(r,t,e))}function sc(r){return wg.apply(this,arguments)}function wg(){return wg=(0,ae.Z)(function*(r){const e=Fn(r),t=Ed(e);let a=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;dv(e);)try{const c=yield Uy(e.localStore,a);if(null===c){0===e.Tu.length&&t.Qo();break}a=c.batchId,Zy(e,c)}catch(c){yield lp(e,c)}Qy(e)&&Xy(e)}),wg.apply(this,arguments)}function dv(r){return Vc(r)&&r.Tu.length<10}function Zy(r,e){r.Tu.push(e);const t=Ed(r);t.Uo()&&t.ru&&t.ou(e.mutations)}function Qy(r){return Vc(r)&&!Ed(r).qo()&&r.Tu.length>0}function Xy(r){Ed(r).start()}function hv(r){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,ae.Z)(function*(r){Ed(r).au()}),Ig.apply(this,arguments)}function fv(r){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,ae.Z)(function*(r){const e=Ed(r);for(const t of r.Tu)e.ou(t.mutations)}),Fm.apply(this,arguments)}function Lm(r,e,t){return up.apply(this,arguments)}function up(){return up=(0,ae.Z)(function*(r,e,t){const a=r.Tu.shift(),c=Hd.from(a,e,t);yield Yy(r,()=>r.remoteSyncer.applySuccessfulWrite(c)),yield sc(r)}),up.apply(this,arguments)}function pv(r,e){return cp.apply(this,arguments)}function cp(){return cp=(0,ae.Z)(function*(r,e){var t;e&&Ed(r).ru&&(yield(t=(0,ae.Z)(function*(a,c){if(cm(p=c.code)&&p!==Ot.ABORTED){const E=a.Tu.shift();Ed(a).Go(),yield Yy(a,()=>a.remoteSyncer.rejectFailedWrite(E.batchId,c)),yield sc(a)}var p}),function(a,c){return t.apply(this,arguments)})(r,e)),Qy(r)&&Xy(r)}),cp.apply(this,arguments)}function Jy(r,e){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,ae.Z)(function*(r,e){const t=Fn(r);t.asyncQueue.verifyOperationInProgress(),dn("RemoteStore","RemoteStore received new credentials");const a=Vc(t);t.Au.add(3),yield Uc(t),a&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield op(t)}),Bm.apply(this,arguments)}function gs(r,e){return e_.apply(this,arguments)}function e_(){return e_=(0,ae.Z)(function*(r,e){const t=Fn(r);e?(t.Au.delete(2),yield op(t)):e||(t.Au.add(2),yield Uc(t),t.Pu.set("Unknown"))}),e_.apply(this,arguments)}function oh(r){return r.Vu||(r.Vu=function(e,t,a){const c=Fn(e);return c.lu(),new Uv(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(r.datastore,r.asyncQueue,{oo:jc.bind(null,r),co:ap.bind(null,r),eu:qy.bind(null,r)}),r.Ru.push(function(){var e=(0,ae.Z)(function*(t){t?(r.Vu.Go(),_g(r)?yg(r):r.Pu.set("Unknown")):(yield r.Vu.stop(),vg(r))});return function(t){return e.apply(this,arguments)}}())),r.Vu}function Ed(r){return r.Su||(r.Su=function(e,t,a){const c=Fn(e);return c.lu(),new av(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(r.datastore,r.asyncQueue,{oo:hv.bind(null,r),co:pv.bind(null,r),cu:fv.bind(null,r),uu:Lm.bind(null,r)}),r.Ru.push(function(){var e=(0,ae.Z)(function*(t){t?(r.Su.Go(),yield sc(r)):(yield r.Su.stop(),r.Tu.length>0&&(dn("RemoteStore",`Stopping write stream with ${r.Tu.length} pending writes`),r.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Su}class $m{constructor(e,t,a,c,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=c,this.removalCallback=p,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,a,c,p){const E=Date.now()+a,O=new $m(e,t,E,c,p);return O.start(a),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new an(Ot.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ah(r,e){if(jr("AsyncQueue",`${e}: ${r}`),rt(r))return new an(Ot.UNAVAILABLE,`${e}: ${r}`);throw r}class lh{constructor(e){this.comparator=e?(t,a)=>e(t,a)||An.comparator(t.key,a.key):(t,a)=>An.comparator(t.key,a.key),this.keyedMap=nd(),this.sortedSet=new Ji(this.comparator)}static emptySet(e){return new lh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=a.getNext().key;if(!c.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const a=new lh;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class t_{constructor(){this.Du=new Ji(An.comparator)}track(e){const t=e.doc.key,a=this.Du.get(t);a?0!==e.type&&3===a.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==a.type?this.Du=this.Du.insert(t,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Du=this.Du.remove(t):1===e.type&&2===a.type?this.Du=this.Du.insert(t,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):zn():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,a)=>{e.push(a)}),e}}class dp{constructor(e,t,a,c,p,E,O,G,te){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=c,this.mutatedKeys=p,this.fromCache=E,this.syncStateChanged=O,this.excludesMetadataChanges=G,this.hasCachedResults=te}static fromInitialDocuments(e,t,a,c,p){const E=[];return t.forEach(O=>{E.push({type:0,doc:O})}),new dp(e,t,lh.emptySet(t),E,a,c,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==a[c].type||!t[c].doc.isEqual(a[c].doc))return!1;return!0}}class n_{constructor(){this.xu=void 0,this.listeners=[]}}class Vv{constructor(){this.queries=new Xu(e=>Pp(e),Tc),this.onlineState="Unknown",this.Nu=new Set}}function sf(r,e){return Um.apply(this,arguments)}function Um(){return Um=(0,ae.Z)(function*(r,e){const t=Fn(r),a=e.query;let c=!1,p=t.queries.get(a);if(p||(c=!0,p=new n_),c)try{p.xu=yield t.onListen(a)}catch(E){const O=ah(E,`Initialization of query '${Ff(e.query)}' failed`);return void e.onError(O)}t.queries.set(a,p),p.listeners.push(e),e.ku(t.onlineState),p.xu&&e.Mu(p.xu)&&uh(t)}),Um.apply(this,arguments)}function r_(r,e){return hp.apply(this,arguments)}function hp(){return hp=(0,ae.Z)(function*(r,e){const t=Fn(r),a=e.query;let c=!1;const p=t.queries.get(a);if(p){const E=p.listeners.indexOf(e);E>=0&&(p.listeners.splice(E,1),c=0===p.listeners.length)}if(c)return t.queries.delete(a),t.onUnlisten(a)}),hp.apply(this,arguments)}function gv(r,e){const t=Fn(r);let a=!1;for(const c of e){const E=t.queries.get(c.query);if(E){for(const O of E.listeners)O.Mu(c)&&(a=!0);E.xu=c}}a&&uh(t)}function oc(r,e,t){const a=Fn(r),c=a.queries.get(e);if(c)for(const p of c.listeners)p.onError(t);a.queries.delete(e)}function uh(r){r.Nu.forEach(e=>{e.next()})}class oa{constructor(e,t,a){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=a||{}}Mu(e){if(!this.options.includeMetadataChanges){const a=[];for(const c of e.docChanges)3!==c.type&&a.push(c);e=new dp(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=dp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class ch{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class fp{constructor(e){this.serializer=e}ir(e){return nc(this.serializer,e)}rr(e){return e.metadata.exists?qh(this.serializer,e.document,!1):di.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return $s(e)}}class ou{constructor(e,t,a){this.Qu=e,this.localStore=t,this.serializer=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bg(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const a=Ai.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,a=new fp(this.serializer);for(const c of e)if(c.metadata.queries){const p=a.ir(c.metadata.name);for(const E of c.metadata.queries){const O=(t.get(E)||mi()).add(p);t.set(E,O)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function Hy(r,e,t,a){return Sm.apply(this,arguments)}(e.localStore,new fp(e.serializer),e.documents,e.Qu.id),a=e.zu(e.documents);for(const c of e.queries)yield zy(e.localStore,c,a.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function bg(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class dh{constructor(e){this.key=e}}class hh{constructor(e){this.key=e}}class fh{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=mi(),this.mutatedKeys=mi(),this.Zu=rm(e),this.tc=new lh(this.Zu)}get ec(){return this.Ju}nc(e,t){const a=t?t.sc:new t_,c=t?t.tc:this.tc;let p=t?t.mutatedKeys:this.mutatedKeys,E=c,O=!1;const G="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,te="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((pe,tt)=>{const Pt=c.get(pe),Jt=Sc(this.query,tt)?tt:null,bn=!!Pt&&this.mutatedKeys.has(Pt.key),Dn=!!Jt&&(Jt.hasLocalMutations||this.mutatedKeys.has(Jt.key)&&Jt.hasCommittedMutations);let fr=!1;Pt&&Jt?Pt.data.isEqual(Jt.data)?bn!==Dn&&(a.track({type:3,doc:Jt}),fr=!0):this.ic(Pt,Jt)||(a.track({type:2,doc:Jt}),fr=!0,(G&&this.Zu(Jt,G)>0||te&&this.Zu(Jt,te)<0)&&(O=!0)):!Pt&&Jt?(a.track({type:0,doc:Jt}),fr=!0):Pt&&!Jt&&(a.track({type:1,doc:Pt}),fr=!0,(G||te)&&(O=!0)),fr&&(Jt?(E=E.add(Jt),p=Dn?p.add(pe):p.delete(pe)):(E=E.delete(pe),p=p.delete(pe)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const pe="F"===this.query.limitType?E.last():E.first();E=E.delete(pe.key),p=p.delete(pe.key),a.track({type:1,doc:pe})}return{tc:E,sc:a,ji:O,mutatedKeys:p}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a){const c=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const p=e.sc.Cu();p.sort((te,pe)=>function(tt,Pt){const Jt=bn=>{switch(bn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zn()}};return Jt(tt)-Jt(Pt)}(te.type,pe.type)||this.Zu(te.doc,pe.doc)),this.rc(a);const E=t?this.oc():[],O=0===this.Xu.size&&this.current?1:0,G=O!==this.Yu;return this.Yu=O,0!==p.length||G?{snapshot:new dp(this.query,e.tc,c,p,e.mutatedKeys,0===O,G,!1,!!a&&a.resumeToken.approximateByteSize()>0),uc:E}:{uc:E}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new t_,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=mi(),this.tc.forEach(a=>{this.cc(a.key)&&(this.Xu=this.Xu.add(a.key))});const t=[];return e.forEach(a=>{this.Xu.has(a)||t.push(new hh(a))}),this.Xu.forEach(a=>{e.has(a)||t.push(new dh(a))}),t}ac(e){this.Ju=e.sr,this.Xu=mi();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return dp.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class af{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class lf{constructor(e){this.key=e,this.lc=!1}}class uf{constructor(e,t,a,c,p,E){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=c,this.currentUser=p,this.maxConcurrentLimboResolutions=E,this.fc={},this.dc=new Xu(O=>Pp(O),Tc),this._c=new Map,this.wc=new Set,this.mc=new Ji(An.comparator),this.gc=new Map,this.yc=new og,this.Ic={},this.Tc=new Map,this.Ec=kc.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function cf(r,e){return wd.apply(this,arguments)}function wd(){return wd=(0,ae.Z)(function*(r,e){const t=kg(r);let a,c;const p=t.dc.get(e);if(p)a=p.targetId,t.sharedClientState.addLocalQueryTarget(a),c=p.view.hc();else{const E=yield md(t.localStore,uo(e)),O=t.sharedClientState.addLocalQueryTarget(E.targetId);a=E.targetId,c=yield Id(t,e,a,"current"===O,E.resumeToken),t.isPrimaryClient&&Ko(t.remoteStore,E)}return c}),wd.apply(this,arguments)}function Id(r,e,t,a,c){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,ae.Z)(function*(r,e,t,a,c){r.Rc=(tt,Pt,Jt)=>{return(bn=(0,ae.Z)(function*(Dn,fr,oi,Hi){let fi=fr.view.nc(oi);fi.ji&&(fi=yield rp(Dn.localStore,fr.query,!1).then(({documents:Is})=>fr.view.nc(Is,fi)));const ka=Hi&&Hi.targetChanges.get(fr.targetId),Us=fr.view.applyChanges(fi,Dn.isPrimaryClient,ka);return a_(Dn,fr.targetId,Us.uc),Us.snapshot}),function(Dn,fr,oi,Hi){return bn.apply(this,arguments)})(r,tt,Pt,Jt);var bn};const p=yield rp(r.localStore,e,!0),E=new fh(e,p.sr),O=E.nc(p.documents),G=jl.createSynthesizedTargetChangeForCurrentChange(t,a&&"Offline"!==r.onlineState,c),te=E.applyChanges(O,r.isPrimaryClient,G);a_(r,t,te.uc);const pe=new af(e,t,E);return r.dc.set(e,pe),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),te.snapshot}),Cg.apply(this,arguments)}function i_(r,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,ae.Z)(function*(r,e){const t=Fn(r),a=t.dc.get(e),c=t._c.get(a.targetId);if(c.length>1)return t._c.set(a.targetId,c.filter(p=>!Tc(p,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(a.targetId),t.sharedClientState.isActiveQueryTarget(a.targetId)||(yield yd(t.localStore,a.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(a.targetId),qo(t.remoteStore,a.targetId),lc(t,a.targetId)}).catch(S))):(lc(t,a.targetId),yield yd(t.localStore,a.targetId,!0))}),Dg.apply(this,arguments)}function Vm(){return Vm=(0,ae.Z)(function*(r,e,t){const a=bd(r);try{const c=yield function(p,E){const O=Fn(p),G=Xi.now(),te=E.reduce((Pt,Jt)=>Pt.add(Jt.key),mi());let pe,tt;return O.persistence.runTransaction("Locally write mutations","readwrite",Pt=>{let Jt=rl(),bn=mi();return O.Xi.getEntries(Pt,te).next(Dn=>{Jt=Dn,Jt.forEach((fr,oi)=>{oi.isValidDocument()||(bn=bn.add(fr))})}).next(()=>O.localDocuments.getOverlayedDocuments(Pt,Jt)).next(Dn=>{pe=Dn;const fr=[];for(const oi of E){const Hi=Bp(oi,pe.get(oi.key).overlayedDocument);null!=Hi&&fr.push(new ec(oi.key,Hi,$l(Hi.value.mapValue),Gs.exists(!0)))}return O.mutationQueue.addMutationBatch(Pt,G,fr,E)}).next(Dn=>{tt=Dn;const fr=Dn.applyToLocalDocumentSet(pe,bn);return O.documentOverlayCache.saveOverlays(Pt,Dn.batchId,fr)})}).then(()=>({batchId:tt.batchId,changes:Op(pe)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(c.batchId),function(p,E,O){let G=p.Ic[p.currentUser.toKey()];G||(G=new Ji(hr)),G=G.insert(E,O),p.Ic[p.currentUser.toKey()]=G}(a,c.batchId,t),yield lu(a,c.changes),yield sc(a.remoteStore)}catch(c){const p=ah(c,"Failed to persist write");t.reject(p)}}),Vm.apply(this,arguments)}function jm(r,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,ae.Z)(function*(r,e){const t=Fn(r);try{const a=yield function Tm(r,e){const t=Fn(r),a=e.snapshotVersion;let c=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const E=t.Xi.newChangeBuffer({trackRemovals:!0});c=t.Hi;const O=[];e.targetChanges.forEach((pe,tt)=>{const Pt=c.get(tt);if(!Pt)return;O.push(t.Fs.removeMatchingKeys(p,pe.removedDocuments,tt).next(()=>t.Fs.addMatchingKeys(p,pe.addedDocuments,tt)));let Jt=Pt.withSequenceNumber(p.currentSequenceNumber);var bn,Dn,fr;null!==e.targetMismatches.get(tt)?Jt=Jt.withResumeToken(Zs.EMPTY_BYTE_STRING,qn.min()).withLastLimboFreeSnapshotVersion(qn.min()):pe.resumeToken.approximateByteSize()>0&&(Jt=Jt.withResumeToken(pe.resumeToken,a)),c=c.insert(tt,Jt),Dn=Jt,fr=pe,(0===(bn=Pt).resumeToken.approximateByteSize()||Dn.snapshotVersion.toMicroseconds()-bn.snapshotVersion.toMicroseconds()>=3e8||fr.addedDocuments.size+fr.modifiedDocuments.size+fr.removedDocuments.size>0)&&O.push(t.Fs.updateTargetData(p,Jt))});let G=rl(),te=mi();if(e.documentUpdates.forEach(pe=>{e.resolvedLimboDocuments.has(pe)&&O.push(t.persistence.referenceDelegate.updateLimboDocument(p,pe))}),O.push(tp(p,E,e.documentUpdates).next(pe=>{G=pe.er,te=pe.nr})),!a.isEqual(qn.min())){const pe=t.Fs.getLastRemoteSnapshotVersion(p).next(tt=>t.Fs.setTargetsMetadata(p,p.currentSequenceNumber,a));O.push(pe)}return w.waitFor(O).next(()=>E.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,G,te)).next(()=>G)}).then(p=>(t.Hi=c,p))}(t.localStore,e);e.targetChanges.forEach((c,p)=>{const E=t.gc.get(p);E&&(or(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?E.lc=!0:c.modifiedDocuments.size>0?or(E.lc):c.removedDocuments.size>0&&(or(E.lc),E.lc=!1))}),yield lu(t,a,e)}catch(a){yield S(a)}}),Tg.apply(this,arguments)}function Hm(r,e,t){const a=Fn(r);if(a.isPrimaryClient&&0===t||!a.isPrimaryClient&&1===t){const c=[];a.dc.forEach((p,E)=>{const O=E.view.ku(e);O.snapshot&&c.push(O.snapshot)}),function(p,E){const O=Fn(p);O.onlineState=E;let G=!1;O.queries.forEach((te,pe)=>{for(const tt of pe.listeners)tt.ku(E)&&(G=!0)}),G&&uh(O)}(a.eventManager,e),c.length&&a.fc.eu(c),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Sg(r,e,t){return ac.apply(this,arguments)}function ac(){return ac=(0,ae.Z)(function*(r,e,t){const a=Fn(r);a.sharedClientState.updateQueryState(e,"rejected",t);const c=a.gc.get(e),p=c&&c.key;if(p){let E=new Ji(An.comparator);E=E.insert(p,di.newNoDocument(p,qn.min()));const O=mi().add(p),G=new zh(qn.min(),new Map,new Ji(hr),E,O);yield jm(a,G),a.mc=a.mc.remove(p),a.gc.delete(e),au(a)}else yield yd(a.localStore,e,!1).then(()=>lc(a,e,t)).catch(S)}),ac.apply(this,arguments)}function o_(r,e){return df.apply(this,arguments)}function df(){return df=(0,ae.Z)(function*(r,e){const t=Fn(r),a=e.batch.batchId;try{const c=yield function Dm(r,e){const t=Fn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const c=e.batch.keys(),p=t.Xi.newChangeBuffer({trackRemovals:!0});return function(E,O,G,te){const pe=G.batch,tt=pe.keys();let Pt=w.resolve();return tt.forEach(Jt=>{Pt=Pt.next(()=>te.getEntry(O,Jt)).next(bn=>{const Dn=G.docVersions.get(Jt);or(null!==Dn),bn.version.compareTo(Dn)<0&&(pe.applyToRemoteDocument(bn,G),bn.isValidDocument()&&(bn.setReadTime(G.commitVersion),te.addEntry(bn)))})}),Pt.next(()=>E.mutationQueue.removeMutationBatch(O,pe))}(t,a,e,p).next(()=>p.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(E){let O=mi();for(let G=0;G<E.mutationResults.length;++G)E.mutationResults[G].transformResults.length>0&&(O=O.add(E.batch.mutations[G].key));return O}(e))).next(()=>t.localDocuments.getDocuments(a,c))})}(t.localStore,e);ph(t,a,null),pp(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),yield lu(t,c)}catch(c){yield S(c)}}),df.apply(this,arguments)}function zm(r,e,t){return hf.apply(this,arguments)}function hf(){return hf=(0,ae.Z)(function*(r,e,t){const a=Fn(r);try{const c=yield function(p,E){const O=Fn(p);return O.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let te;return O.mutationQueue.lookupMutationBatch(G,E).next(pe=>(or(null!==pe),te=pe.keys(),O.mutationQueue.removeMutationBatch(G,pe))).next(()=>O.mutationQueue.performConsistencyCheck(G)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(G,te,E)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,te)).next(()=>O.localDocuments.getDocuments(G,te))})}(a.localStore,e);ph(a,e,t),pp(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),yield lu(a,c)}catch(c){yield S(c)}}),hf.apply(this,arguments)}function ff(){return ff=(0,ae.Z)(function*(r,e){const t=Fn(r);Vc(t.remoteStore)||dn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(p){const E=Fn(p);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>E.mutationQueue.getHighestUnacknowledgedBatchId(O))}(t.localStore);if(-1===a)return void e.resolve();const c=t.Tc.get(a)||[];c.push(e),t.Tc.set(a,c)}catch(a){const c=ah(a,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),ff.apply(this,arguments)}function pp(r,e){(r.Tc.get(e)||[]).forEach(t=>{t.resolve()}),r.Tc.delete(e)}function ph(r,e,t){const a=Fn(r);let c=a.Ic[a.currentUser.toKey()];if(c){const p=c.get(e);p&&(t?p.reject(t):p.resolve(),c=c.remove(e)),a.Ic[a.currentUser.toKey()]=c}}function lc(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r._c.get(e))r.dc.delete(a),t&&r.fc.vc(a,t);r._c.delete(e),r.isPrimaryClient&&r.yc.ps(e).forEach(a=>{r.yc.containsKey(a)||pf(r,a)})}function pf(r,e){r.wc.delete(e.path.canonicalString());const t=r.mc.get(e);null!==t&&(qo(r.remoteStore,t),r.mc=r.mc.remove(e),r.gc.delete(t),au(r))}function a_(r,e,t){for(const a of t)a instanceof dh?(r.yc.addReference(a.key,e),Ag(r,a)):a instanceof hh?(dn("SyncEngine","Document no longer in limbo: "+a.key),r.yc.removeReference(a.key,e),r.yc.containsKey(a.key)||pf(r,a.key)):zn()}function Ag(r,e){const t=e.key,a=t.path.canonicalString();r.mc.get(t)||r.wc.has(a)||(dn("SyncEngine","New document in limbo: "+t),r.wc.add(a),au(r))}function au(r){for(;r.wc.size>0&&r.mc.size<r.maxConcurrentLimboResolutions;){const e=r.wc.values().next().value;r.wc.delete(e);const t=new An(Ai.fromString(e)),a=r.Ec.next();r.gc.set(a,new lf(t)),r.mc=r.mc.insert(t,a),Ko(r.remoteStore,new rc(uo(Su(t.path)),a,"TargetPurposeLimboResolution",ir.ct))}}function lu(r,e,t){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,ae.Z)(function*(r,e,t){const a=Fn(r),c=[],p=[],E=[];var O;a.dc.isEmpty()||(a.dc.forEach((O,G)=>{E.push(a.Rc(G,e,t).then(te=>{if((te||t)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(G.targetId,null!=te&&te.fromCache?"not-current":"current"),te){c.push(te);const pe=Im.Bi(G.targetId,te);p.push(pe)}}))}),yield Promise.all(E),a.fc.eu(c),yield(O=(0,ae.Z)(function*(G,te){const pe=Fn(G);try{yield pe.persistence.runTransaction("notifyLocalViewChanges","readwrite",tt=>w.forEach(te,Pt=>w.forEach(Pt.$i,Jt=>pe.persistence.referenceDelegate.addReference(tt,Pt.targetId,Jt)).next(()=>w.forEach(Pt.Fi,Jt=>pe.persistence.referenceDelegate.removeReference(tt,Pt.targetId,Jt)))))}catch(tt){if(!rt(tt))throw tt;dn("LocalStore","Failed to update sequence numbers: "+tt)}for(const tt of te){const Pt=tt.targetId;if(!tt.fromCache){const Jt=pe.Hi.get(Pt),Dn=Jt.withLastLimboFreeSnapshotVersion(Jt.snapshotVersion);pe.Hi=pe.Hi.insert(Pt,Dn)}}}),function(G,te){return O.apply(this,arguments)})(a.localStore,p))}),Mg.apply(this,arguments)}function l_(r,e){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,ae.Z)(function*(r,e){const t=Fn(r);if(!t.currentUser.isEqual(e)){dn("SyncEngine","User change. New user:",e.toKey());const a=yield ep(t.localStore,e);t.currentUser=e,(c=t).Tc.forEach(E=>{E.forEach(O=>{O.reject(new an(Ot.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Tc.clear(),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield lu(t,a.tr)}var c}),Rg.apply(this,arguments)}function Gm(r,e){const t=Fn(r),a=t.gc.get(e);if(a&&a.lc)return mi().add(a.key);{let c=mi();const p=t._c.get(e);if(!p)return c;for(const E of p){const O=t.dc.get(E);c=c.unionWith(O.view.ec)}return c}}function xg(r,e){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,ae.Z)(function*(r,e){const t=Fn(r),a=yield rp(t.localStore,e.query,!0),c=e.view.ac(a);return t.isPrimaryClient&&a_(t,e.targetId,c.uc),c}),Wm.apply(this,arguments)}function u_(r,e){return gf.apply(this,arguments)}function gf(){return gf=(0,ae.Z)(function*(r,e){const t=Fn(r);return Vy(t.localStore,e).then(a=>lu(t,a))}),gf.apply(this,arguments)}function c_(r,e,t,a){return gp.apply(this,arguments)}function gp(){return gp=(0,ae.Z)(function*(r,e,t,a){const c=Fn(r),p=yield function(E,O){const G=Fn(E),te=Fn(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",pe=>te.Vn(pe,O).next(tt=>tt?G.localDocuments.getDocuments(pe,tt):w.resolve(null)))}(c.localStore,e);var O;null!==p?("pending"===t?yield sc(c.remoteStore):"acknowledged"===t||"rejected"===t?(ph(c,e,a||null),pp(c,e),O=e,Fn(Fn(c.localStore).mutationQueue).Dn(O)):zn(),yield lu(c,p)):dn("SyncEngine","Cannot apply mutation batch with id: "+e)}),gp.apply(this,arguments)}function mp(){return mp=(0,ae.Z)(function*(r,e){const t=Fn(r);if(kg(t),bd(t),!0===e&&!0!==t.Ac){const a=t.sharedClientState.getAllActiveQueryTargets(),c=yield mf(t,a.toArray());t.Ac=!0,yield gs(t.remoteStore,!0);for(const p of c)Ko(t.remoteStore,p)}else if(!1===e&&!1!==t.Ac){const a=[];let c=Promise.resolve();t._c.forEach((p,E)=>{t.sharedClientState.isLocalQueryTarget(E)?a.push(E):c=c.then(()=>(lc(t,E),yd(t.localStore,E,!0))),qo(t.remoteStore,E)}),yield c,yield mf(t,a),function(p){const E=Fn(p);E.gc.forEach((O,G)=>{qo(E.remoteStore,G)}),E.yc.Is(),E.gc=new Map,E.mc=new Ji(An.comparator)}(t),t.Ac=!1,yield gs(t.remoteStore,!1)}}),mp.apply(this,arguments)}function mf(r,e,t){return gh.apply(this,arguments)}function gh(){return gh=(0,ae.Z)(function*(r,e,t){const a=Fn(r),c=[],p=[];for(const E of e){let O;const G=a._c.get(E);if(G&&0!==G.length){O=yield md(a.localStore,uo(G[0]));for(const te of G){const pe=a.dc.get(te),tt=yield xg(a,pe);tt.snapshot&&p.push(tt.snapshot)}}else{const te=yield cg(a.localStore,E);O=yield md(a.localStore,te),yield Id(a,yf(te),E,!1,O.resumeToken)}c.push(O)}return a.fc.eu(p),c}),gh.apply(this,arguments)}function yf(r){return Zu(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Pg(r){const e=Fn(r);return Fn(Fn(e.localStore).persistence).Mi()}function Og(r,e,t,a){return uu.apply(this,arguments)}function uu(){return uu=(0,ae.Z)(function*(r,e,t,a){const c=Fn(r);if(c.Ac)return void dn("SyncEngine","Ignoring unexpected query state notification.");const p=c._c.get(e);if(p&&p.length>0)switch(t){case"current":case"not-current":{const E=yield Vy(c.localStore,py(p[0])),O=zh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Zs.EMPTY_BYTE_STRING);yield lu(c,E,O);break}case"rejected":yield yd(c.localStore,e,!0),lc(c,e,a);break;default:zn()}}),uu.apply(this,arguments)}function Ng(r,e,t){return mh.apply(this,arguments)}function mh(){return mh=(0,ae.Z)(function*(r,e,t){const a=kg(r);if(a.Ac){for(const c of e){if(a._c.has(c)){dn("SyncEngine","Adding an already active target "+c);continue}const p=yield cg(a.localStore,c),E=yield md(a.localStore,p);yield Id(a,yf(p),E.targetId,!1,E.resumeToken),Ko(a.remoteStore,E)}for(const c of t)a._c.has(c)&&(yield yd(a.localStore,c,!1).then(()=>{qo(a.remoteStore,c),lc(a,c)}).catch(S))}}),mh.apply(this,arguments)}function kg(r){const e=Fn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=jm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sg.bind(null,e),e.fc.eu=gv.bind(null,e.eventManager),e.fc.vc=oc.bind(null,e.eventManager),e}function bd(r){const e=Fn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zm.bind(null,e),e}class _f{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.serializer=bl(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Cm(this.persistence,new bm,e.initialUser,this.serializer)}createPersistence(e){return new pd($c.js,this.serializer)}createSharedClientState(e){return new Rm}terminate(){var e=this;return(0,ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ya extends _f{constructor(e,t,a){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,a=this;return(0,ae.Z)(function*(){yield t().call(a,e),yield a.bc.initialize(a,e),yield bd(a.bc.syncEngine),yield sc(a.bc.remoteStore),yield a.persistence.pi(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Cm(this.persistence,new bm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new vm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const a=new xr(t,this.persistence);return new xi(e.asyncQueue,a)}createPersistence(e){const t=Jf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Ma.withCacheSize(this.cacheSizeBytes):Ma.DEFAULT;return new ug(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,Wy(),gg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Rm}}class qm extends ya{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,a=this;return(0,ae.Z)(function*(){yield t().call(a,e);const c=a.bc.syncEngine;a.sharedClientState instanceof Mm&&(a.sharedClientState.syncEngine={Qr:c_.bind(null,c),jr:Og.bind(null,c),zr:Ng.bind(null,c),Mi:Pg.bind(null,c),Gr:u_.bind(null,c)},yield a.sharedClientState.start()),yield a.persistence.pi(function(){var p=(0,ae.Z)(function*(E){yield function d_(r,e){return mp.apply(this,arguments)}(a.bc.syncEngine,E),a.gcScheduler&&(E&&!a.gcScheduler.started?a.gcScheduler.start():E||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(E&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():E||a.indexBackfillerScheduler.stop())});return function(E){return p.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Wy();if(!Mm.D(t))throw new an(Ot.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Jf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mm(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class yh{initialize(e,t){var a=this;return(0,ae.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(t),a.remoteStore=a.createRemoteStore(t),a.eventManager=a.createEventManager(t),a.syncEngine=a.createSyncEngine(t,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=c=>Hm(a.syncEngine,c,1),a.remoteStore.remoteSyncer.handleCredentialChange=l_.bind(null,a.syncEngine),yield gs(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Vv}createDatastore(e){const t=bl(e.databaseInfo.databaseId),a=new ov(e.databaseInfo);return new lv(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return t=this.localStore,a=this.datastore,c=e.asyncQueue,p=O=>Hm(this.syncEngine,O,0),E=xm.D()?new xm:new iv,new cv(t,a,c,p,E);var t,a,c,p,E}createSyncEngine(e,t){return function(a,c,p,E,O,G,te){const pe=new uf(a,c,p,E,O,G);return te&&(pe.Ac=!0),pe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ae.Z)(function*(t){const a=Fn(t);dn("RemoteStore","RemoteStore shutting down."),a.Au.add(5),yield Uc(a),a.vu.shutdown(),a.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Wl(r,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<r.byteLength){const a={value:r.slice(t,t+e),done:!1};return t+=e,a}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Pa{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class _h{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new Ir,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(a=>{a&&a.Gu()?this.metadata.resolve(a.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.Ku)}`))},a=>this.metadata.reject(a))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const a=e.Cc.decode(t),c=Number(a);isNaN(c)&&e.kc(`length string (${a}) is not valid number`);const p=yield e.Mc(c);return new ch(JSON.parse(p),t.length+c)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,ae.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),a})()}Mc(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const a=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),a})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const a=new Uint8Array(e.buffer.length+t.value.length);a.set(e.buffer),a.set(t.value,e.buffer.length),e.buffer=a}return t.done})()}}class mv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new an(Ot.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(c=(0,ae.Z)(function*(p,E){const O=Fn(p),G=Kh(O.serializer)+"/documents",te={documents:E.map(Jt=>Ac(O.serializer,Jt))},pe=yield O.Ao("BatchGetDocuments",G,te,E.length),tt=new Map;pe.forEach(Jt=>{const bn=function Hp(r,e){return"found"in e?function(t,a){or(!!a.found);const c=nc(t,a.found.name),p=$s(a.found.updateTime),E=a.found.createTime?$s(a.found.createTime):qn.min(),O=new Ms({mapValue:{fields:a.found.fields}});return di.newFoundDocument(c,p,E,O)}(r,e):"missing"in e?function(t,a){or(!!a.missing),or(!!a.readTime);const c=nc(t,a.missing),p=$s(a.readTime);return di.newNoDocument(c,p)}(r,e):zn()}(O.serializer,Jt);tt.set(bn.key.toString(),bn)});const Pt=[];return E.forEach(Jt=>{const bn=tt.get(Jt.toString());or(!!bn),Pt.push(bn)}),Pt}),function(p,E){return c.apply(this,arguments)})(t.datastore,e);var c;return a.forEach(c=>t.recordVersion(c)),a})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var a;e.mutations.forEach(a=>{t.delete(a.key.toString())}),t.forEach((a,c)=>{const p=An.fromPath(c);e.mutations.push(new Ey(p,e.precondition(p)))}),yield(a=(0,ae.Z)(function*(c,p){const E=Fn(c),O=Kh(E.serializer)+"/documents",G={writes:p.map(te=>Yd(E.serializer,te))};yield E.po("Commit",O,G)}),function(c,p){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zn();t=qn.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new an(Ot.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(qn.min())?Gs.exists(!1):Gs.updateTime(t):Gs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qn.min()))throw new an(Ot.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gs.updateTime(t)}return Gs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _p{constructor(e,t,a,c,p){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=c,this.deferred=p,this.Fc=a.maxAttempts,this.Lo=new sp(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,ae.Z)(function*(){const t=new mv(e.datastore),a=e.Lc(t);a&&a.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(p=>{e.qc(p)}))}).catch(c=>{e.qc(c)})}))}Lc(e){try{const t=this.updateFunction(e);return!Wi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!cm(t)}return!1}}class yv{constructor(e,t,a,c){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=c,this.user=Ds.UNAUTHENTICATED,this.clientId=pl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var E=(0,ae.Z)(function*(O){dn("FirestoreClient","Received user=",O.uid),yield p.authCredentialListener(O),p.user=O});return function(O){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(a,E=>(dn("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new an(Ot.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(a){const c=ah(a,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function vh(r,e){return vf.apply(this,arguments)}function vf(){return vf=(0,ae.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),dn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let a=t.initialUser;r.setCredentialChangeListener(function(){var c=(0,ae.Z)(function*(p){a.isEqual(p)||(yield ep(e.localStore,p),a=p)});return function(p){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),vf.apply(this,arguments)}function Ym(r,e){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,ae.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield Do(r);dn("FirestoreClient","Initializing OnlineComponentProvider");const a=yield r.getConfiguration();yield e.initialize(t,a),r.setCredentialChangeListener(c=>Jy(e.remoteStore,c)),r.setAppCheckTokenChangeListener((c,p)=>Jy(e.remoteStore,p)),r._onlineComponents=e}),Ef.apply(this,arguments)}function h_(r){return"FirebaseError"===r.name?r.code===Ot.FAILED_PRECONDITION||r.code===Ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function Do(r){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,ae.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){dn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield vh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!h_(t))throw t;Ts("Error using user provided cache. Falling back to memory cache: "+t),yield vh(r,new _f)}}else dn("FirestoreClient","Using default OfflineComponentProvider"),yield vh(r,new _f);return r._offlineComponents}),Fg.apply(this,arguments)}function Oa(r){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,ae.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(dn("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ym(r,r._uninitializedComponentsProvider._online)):(dn("FirestoreClient","Using default OnlineComponentProvider"),yield Ym(r,new yh))),r._onlineComponents}),Lg.apply(this,arguments)}function wf(r){return Do(r).then(e=>e.persistence)}function Eh(r){return Do(r).then(e=>e.localStore)}function Zm(r){return Oa(r).then(e=>e.remoteStore)}function Bg(r){return Oa(r).then(e=>e.syncEngine)}function vp(r){return f_.apply(this,arguments)}function f_(){return f_=(0,ae.Z)(function*(r){const e=yield Oa(r),t=e.eventManager;return t.onListen=cf.bind(null,e.syncEngine),t.onUnlisten=i_.bind(null,e.syncEngine),t}),f_.apply(this,arguments)}function vv(r,e,t={}){const a=new Ir;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(c,p,E,O,G){const te=new Pa({next:tt=>{p.enqueueAndForget(()=>r_(c,pe));const Pt=tt.docs.has(E);!Pt&&tt.fromCache?G.reject(new an(Ot.UNAVAILABLE,"Failed to get document because the client is offline.")):Pt&&tt.fromCache&&O&&"server"===O.source?G.reject(new an(Ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(tt)},error:tt=>G.reject(tt)}),pe=new oa(Su(E.path),te,{includeMetadataChanges:!0,Uu:!0});return sf(c,pe)}(yield vp(r),r.asyncQueue,e,t,a)})),a.promise}function Ih(r,e,t={}){const a=new Ir;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(c,p,E,O,G){const te=new Pa({next:tt=>{p.enqueueAndForget(()=>r_(c,pe)),tt.fromCache&&"server"===O.source?G.reject(new an(Ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(tt)},error:tt=>G.reject(tt)}),pe=new oa(E,te,{includeMetadataChanges:!0,Uu:!0});return sf(c,pe)}(yield vp(r),r.asyncQueue,e,t,a)})),a.promise}const Kl=new Map;function ql(r,e,t){if(!t)throw new an(Ot.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Qm(r,e,t,a){if(!0===e&&!0===a)throw new an(Ot.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Xm(r){if(!An.isDocumentKey(r))throw new an(Ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function y_(r){if(An.isDocumentKey(r))throw new an(Ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $g(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":zn()}function Vi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new an(Ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$g(r);throw new an(Ot.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Cd(r,e){if(e<=0)throw new an(Ot.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class bf{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new an(Ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new an(Ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lu{constructor(e,t,a,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new an(Ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new an(Ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ea;switch(t.type){case"firstParty":return new mu(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new an(Ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kl.get(e);t&&(dn("ComponentProvider","Removing Datastore"),Kl.delete(e),t.terminate())}(this),Promise.resolve()}}class Rs{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rs(this.firestore,e,this._key)}}class _a{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new _a(this.firestore,e,this._query)}}class uc extends _a{constructor(e,t,a){super(e,t,Su(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rs(this.firestore,null,new An(e))}withConverter(e){return new uc(this.firestore,e,this._path)}}function Jm(r,e,...t){if(r=(0,Y.m9)(r),ql("collection","path",e),r instanceof Lu){const a=Ai.fromString(e,...t);return y_(a),new uc(r,null,a)}{if(!(r instanceof Rs||r instanceof uc))throw new an(Ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Ai.fromString(e,...t));return y_(a),new uc(r.firestore,null,a)}}function Hc(r,e,...t){if(r=(0,Y.m9)(r),1===arguments.length&&(e=pl.A()),ql("doc","path",e),r instanceof Lu){const a=Ai.fromString(e,...t);return Xm(a),new Rs(r,null,new An(a))}{if(!(r instanceof Rs||r instanceof uc))throw new an(Ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Ai.fromString(e,...t));return Xm(a),new Rs(r.firestore,r instanceof uc?r.converter:null,new An(a))}}function v_(r,e){return r=(0,Y.m9)(r),e=(0,Y.m9)(e),(r instanceof Rs||r instanceof uc)&&(e instanceof Rs||e instanceof uc)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function bh(r,e){return r=(0,Y.m9)(r),e=(0,Y.m9)(e),r instanceof _a&&e instanceof _a&&r.firestore===e.firestore&&Tc(r._query,e._query)&&r.converter===e.converter}class Ug{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new sp(this,"async_queue_retry"),this.Yc=()=>{const t=gg();t&&dn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=gg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=gg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new Ir;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,ae.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!rt(t))throw t;dn("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(a=>{throw this.zc=a,this.Wc=!1,jr("INTERNAL UNHANDLED ERROR: ",function(p){let E=p.message||"";return p.stack&&(E=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),E}(a)),a}).then(a=>(this.Wc=!1,a))));return this.Kc=t,t}enqueueAfterDelay(e,t,a){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const c=$m.createAndSchedule(this,e,t,a,p=>this.ea(p));return this.jc.push(c),c}Xc(){this.zc&&zn()}verifyOperationInProgress(){}na(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function Dd(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const a=e;for(const c of["next","error","complete"])if(c in a&&"function"==typeof a[c])return!0;return!1}(r)}class Vg{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,a){this._progressObserver={next:e,error:t,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xs extends Lu{constructor(e,t,a,c){super(e,t,a,c),this.type="firestore",this._queue=new Ug,this._persistenceKey=(null==c?void 0:c.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ny(this),this._firestoreClient.terminate()}}function To(r){return r._firestoreClient||ny(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function ny(r){var e,t,a;const c=r._freezeSettings(),p=(O=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Ui(r._databaseId,O,r._persistenceKey,(te=c).host,te.ssl,te.experimentalForceLongPolling,te.experimentalAutoDetectLongPolling,te.useFetchStreams));var O,te;r._firestoreClient=new yv(r._authCredentials,r._appCheckCredentials,r._queue,p),null!==(t=c.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(a=c.cache)&&void 0!==a&&a._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.cache.kind,_offline:c.cache._offlineComponentProvider,_online:c.cache._onlineComponentProvider})}function jg(r,e,t){const a=new Ir;return r.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield vh(r,t),yield Ym(r,e),a.resolve()}catch(c){const p=c;if(!h_(p))throw p;Ts("Error enabling indexeddb cache. Falling back to memory cache: "+p),a.reject(p)}})).then(()=>a.promise)}function I_(r){if(r._initialized||r._terminated)throw new an(Ot.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cc(Zs.fromBase64String(e))}catch(t){throw new an(Ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cc(Zs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new an(Ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new os(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zc{constructor(e){this._methodName=e}}class Hg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new an(Ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new an(Ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return hr(this._lat,e._lat)||hr(this._long,e._long)}}const Dv=/^__.*__$/;class Tv{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return null!==this.fieldMask?new ec(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ru(e,this.data,t,this.fieldTransforms)}}class iy{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new ec(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zg(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zn()}}class Ip{constructor(e,t,a,c,p,E){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=c,void 0===p&&this.oa(),this.fieldTransforms=p||[],this.fieldMask=E||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new Ip(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:a,ha:!1});return c.la(e),c}fa(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ca({path:a,ha:!1});return c.oa(),c}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return Wg(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(zg(this.ua)&&Dv.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Yl{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||bl(e)}ga(e,t,a,c=!1){return new Ip({ua:e,methodName:t,ma:a,path:os.emptyPath(),ha:!1,wa:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hc(r){const e=r._freezeSettings(),t=bl(r._databaseId);return new Yl(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Gc(r,e,t,a,c,p={}){const E=r.ga(p.merge||p.mergeFields?2:0,e,t,c);Wc("Data must be an object, but it was:",E,a);const O=Cp(a,E);let G,te;if(p.merge)G=new zo(E.fieldMask),te=E.fieldTransforms;else if(p.mergeFields){const pe=[];for(const tt of p.mergeFields){const Pt=Tf(e,tt,t);if(!E.contains(Pt))throw new an(Ot.INVALID_ARGUMENT,`Field '${Pt}' is specified in your field mask but missing from your input data.`);ay(pe,Pt)||pe.push(Pt)}G=new zo(pe),te=E.fieldTransforms.filter(tt=>G.covers(tt.field))}else G=null,te=E.fieldTransforms;return new Tv(new Ms(O),G,te)}class Td extends zc{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Td}}function sy(r,e,t){return new Ip({ua:3,ma:e.settings.ma,methodName:r._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Gg extends zc{_toFieldTransform(e){return new jd(e.path,new Uh)}isEqual(e){return e instanceof Gg}}class bp extends zc{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=sy(this,e,!0),a=this.ya.map(p=>Dh(p,t)),c=new Vd(a);return new jd(e.path,c)}isEqual(e){return this===e}}class b_ extends zc{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=sy(this,e,!0),a=this.ya.map(p=>Dh(p,t)),c=new Ju(a);return new jd(e.path,c)}isEqual(e){return this===e}}class Ch extends zc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new iu(e.serializer,om(e.serializer,this.pa));return new jd(e.path,t)}isEqual(e){return this===e}}function Df(r,e,t,a){const c=r.ga(1,e,t);Wc("Data must be an object, but it was:",c,a);const p=[],E=Ms.empty();el(a,(G,te)=>{const pe=Pr(e,G,t);te=(0,Y.m9)(te);const tt=c.fa(pe);if(te instanceof Td)p.push(pe);else{const Pt=Dh(te,tt);null!=Pt&&(p.push(pe),E.set(pe,Pt))}});const O=new zo(p);return new iy(E,O,c.fieldTransforms)}function oy(r,e,t,a,c,p){const E=r.ga(1,e,t),O=[Tf(e,a,t)],G=[c];if(p.length%2!=0)throw new an(Ot.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Pt=0;Pt<p.length;Pt+=2)O.push(Tf(e,p[Pt])),G.push(p[Pt+1]);const te=[],pe=Ms.empty();for(let Pt=O.length-1;Pt>=0;--Pt)if(!ay(te,O[Pt])){const Jt=O[Pt];let bn=G[Pt];bn=(0,Y.m9)(bn);const Dn=E.fa(Jt);if(bn instanceof Td)te.push(Jt);else{const fr=Dh(bn,Dn);null!=fr&&(te.push(Jt),pe.set(Jt,fr))}}const tt=new zo(te);return new iy(pe,tt,E.fieldTransforms)}function Sd(r,e,t,a=!1){return Dh(t,r.ga(a?4:3,e))}function Dh(r,e){if(du(r=(0,Y.m9)(r)))return Wc("Unsupported field value:",e,r),Cp(r,e);if(r instanceof zc)return function(t,a){if(!zg(a.ua))throw a._a(`${t._methodName}() can only be used with update() and set()`);if(!a.path)throw a._a(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,a){const c=[];let p=0;for(const E of t){let O=Dh(E,a.da(p));null==O&&(O={nullValue:"NULL_VALUE"}),c.push(O),p++}return{arrayValue:{values:c}}}(r,e)}return function(t,a){if(null===(t=(0,Y.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return om(a.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=Xi.fromDate(t);return{timestampValue:Kd(a.serializer,c)}}if(t instanceof Xi){const c=new Xi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kd(a.serializer,c)}}if(t instanceof Hg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof cc)return{bytesValue:Vp(a.serializer,t._byteString)};if(t instanceof Rs){const c=a.databaseId,p=t.firestore._databaseId;if(!p.isEqual(c))throw a._a(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:qd(t.firestore._databaseId||a.databaseId,t._key.path)}}throw a._a(`Unsupported field value: ${$g(t)}`)}(r,e)}function Cp(r,e){const t={};return Ll(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):el(r,(a,c)=>{const p=Dh(c,e.aa(a));null!=p&&(t[a]=p)}),{mapValue:{fields:t}}}function du(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Xi||r instanceof Hg||r instanceof cc||r instanceof Rs||r instanceof zc)}function Wc(r,e,t){if(!du(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=$g(t);throw e._a("an object"===a?r+" a custom object":r+" "+a)}var a}function Tf(r,e,t){if((e=(0,Y.m9)(e))instanceof dc)return e._internalPath;if("string"==typeof e)return Pr(r,e);throw Wg("Field path arguments must be of type string or ",r,!1,void 0,t)}const Wv=new RegExp("[~\\*/\\[\\]]");function Pr(r,e,t){if(e.search(Wv)>=0)throw Wg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new dc(...e.split("."))._internalPath}catch{throw Wg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Wg(r,e,t,a,c){const p=a&&!a.isEmpty(),E=void 0!==c;let O=`Function ${e}() called with invalid data`;t&&(O+=" (via `toFirestore()`)"),O+=". ";let G="";return(p||E)&&(G+=" (found",p&&(G+=` in field ${a}`),E&&(G+=` in document ${c}`),G+=")"),new an(Ot.INVALID_ARGUMENT,O+r+G)}function ay(r,e){return r.some(t=>t.isEqual(e))}class Ad{constructor(e,t,a,c,p){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=c,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new Rs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Sf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Sf extends Ad{data(){return super.data()}}function Kg(r,e){return"string"==typeof e?Pr(r,e):e instanceof dc?e._internalPath:e._delegate._internalPath}function Th(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new an(Ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Af{}class ws extends Af{}function Sh(r,e,...t){let a=[];e instanceof Af&&a.push(e),a=a.concat(t),function(c){const p=c.filter(O=>O instanceof Mf).length,E=c.filter(O=>O instanceof Ah).length;if(p>1||p>0&&E>0)throw new an(Ot.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const c of a)r=c._apply(r);return r}class Ah extends ws{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Ah(e,t,a)}_apply(e){const t=this._parse(e);return Tp(e._query,t),new _a(e.firestore,e.converter,Au(e._query,t))}_parse(e){const t=hc(e.firestore);return function(c,p,E,O,G,te,pe){let tt;if(G.isKeyField()){if("array-contains"===te||"array-contains-any"===te)throw new an(Ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${te}' queries on documentId().`);if("in"===te||"not-in"===te){S_(pe,te);const Pt=[];for(const Jt of pe)Pt.push(Qg(O,c,Jt));tt={arrayValue:{values:Pt}}}else tt=Qg(O,c,pe)}else"in"!==te&&"not-in"!==te&&"array-contains-any"!==te||S_(pe,te),tt=Sd(E,"where",pe,"in"===te||"not-in"===te);return wi.create(G,te,tt)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Mf extends Af{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mf(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return 1===t.length?t[0]:qi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,c){let p=a;const E=c.getFlattenedFilters();for(const O of E)Tp(p,O),p=Au(p,O)}(e._query,t),new _a(e.firestore,e.converter,Au(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Mh extends ws{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Mh(e,t)}_apply(e){const t=function(a,c,p){if(null!==a.startAt)throw new an(Ot.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new an(Ot.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new Cu(c,p);return function(O,G){if(null===Cc(O)){const te=nl(O);null!==te&&Sp(0,te,G.field)}}(a,E),E}(e._query,this._field,this._direction);return new _a(e.firestore,e.converter,function(a,c){const p=a.explicitOrderBy.concat([c]);return new Vl(a.path,a.collectionGroup,p,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class qg extends ws{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new qg(e,t,a)}_apply(e){return new _a(e.firestore,e.converter,Dc(e._query,this._limit,this._limitType))}}class Md extends ws{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new Md(e,t,a)}_apply(e){const t=Dp(e,this.type,this._docOrFields,this._inclusive);return new _a(e.firestore,e.converter,(c=t,new Vl((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,c,a.endAt)));var a,c}}class Yg extends ws{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new Yg(e,t,a)}_apply(e){const t=Dp(e,this.type,this._docOrFields,this._inclusive);return new _a(e.firestore,e.converter,(c=t,new Vl((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,c)));var a,c}}function Dp(r,e,t,a){if(t[0]=(0,Y.m9)(t[0]),t[0]instanceof Ad)return function(c,p,E,O,G){if(!O)throw new an(Ot.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const te=[];for(const pe of ma(c))if(pe.field.isKeyField())te.push(Oe(p,O.key));else{const tt=O.data.field(pe.field);if(qu(tt))throw new an(Ot.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+pe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===tt){const Pt=pe.field.canonicalString();throw new an(Ot.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Pt}' (used as the orderBy) does not exist.`)}te.push(tt)}return new Qs(te,G)}(r._query,r.firestore._databaseId,e,t[0]._document,a);{const c=hc(r.firestore);return function(p,E,O,G,te,pe){const tt=p.explicitOrderBy;if(te.length>tt.length)throw new an(Ot.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Pt=[];for(let Jt=0;Jt<te.length;Jt++){const bn=te[Jt];if(tt[Jt].field.isKeyField()){if("string"!=typeof bn)throw new an(Ot.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof bn}`);if(!Qu(p)&&-1!==bn.indexOf("/"))throw new an(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${bn}' contains a slash.`);const Dn=p.path.child(Ai.fromString(bn));if(!An.isDocumentKey(Dn))throw new an(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Dn}' is not because it contains an odd number of segments.`);const fr=new An(Dn);Pt.push(Oe(E,fr))}else{const Dn=Sd(O,G,bn);Pt.push(Dn)}}return new Qs(Pt,pe)}(r._query,r.firestore._databaseId,c,e,t,a)}}function Qg(r,e,t){if("string"==typeof(t=(0,Y.m9)(t))){if(""===t)throw new an(Ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qu(e)&&-1!==t.indexOf("/"))throw new an(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Ai.fromString(t));if(!An.isDocumentKey(a))throw new an(Ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Oe(r,new An(a))}if(t instanceof Rs)return Oe(r,t._key);throw new an(Ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$g(t)}.`)}function S_(r,e){if(!Array.isArray(r)||0===r.length)throw new an(Ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tp(r,e){if(e.isInequality()){const a=nl(r),c=e.field;if(null!==a&&!a.isEqual(c))throw new an(Ot.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${a.toString()}' and '${c.toString()}'`);const p=Cc(r);null!==p&&Sp(0,c,p)}const t=function(a,c){for(const p of a)for(const E of p.getFlattenedFilters())if(c.indexOf(E.op)>=0)return E.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new an(Ot.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Sp(r,e,t){if(!t.isEqual(e))throw new an(Ot.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class u{convertValue(e,t="none"){switch(_l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ki(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return el(e,(c,p)=>{a[c]=this.convertValue(p,t)}),a}convertGeoPoint(e){return new Hg(Ki(e.latitude),Ki(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=ml(e);return null==a?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){const t=Io(e);return new Xi(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Ai.fromString(e);or(Wp(a));const c=new yl(a.get(1),a.get(3)),p=new An(a.popFirst(5));return c.isEqual(t)||jr(`Document ${p} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}function i(r,e,t){let a;return a=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,a}class o extends u{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rs(this.firestore,null,t)}}class Z{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ie extends Ad{constructor(e,t,a,c,p,E){super(e,t,a,c,E),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ze(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Kg("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class Ze extends ie{data(e={}){return super.data(e)}}class ot{constructor(e,t,a,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new Z(c.hasPendingWrites,c.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new Ze(this._firestore,this._userDataWriter,a.key,a,new Z(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new an(Ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let p=0;return a._snapshot.docChanges.map(E=>({type:"added",doc:new Ze(a._firestore,a._userDataWriter,E.doc.key,E.doc,new Z(a._snapshot.mutatedKeys.has(E.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:p++}))}{let p=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(E=>c||3!==E.type).map(E=>{const O=new Ze(a._firestore,a._userDataWriter,E.doc.key,E.doc,new Z(a._snapshot.mutatedKeys.has(E.doc.key),a._snapshot.fromCache),a.query.converter);let G=-1,te=-1;return 0!==E.type&&(G=p.indexOf(E.doc.key),p=p.delete(E.doc.key)),1!==E.type&&(p=p.add(E.doc),te=p.indexOf(E.doc.key)),{type:Mt(E.type),doc:O,oldIndex:G,newIndex:te}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Mt(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zn()}}function Zt(r,e){return r instanceof ie&&e instanceof ie?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof ot&&e instanceof ot&&r._firestore===e._firestore&&bh(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class vn extends u{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rs(this.firestore,null,t)}}function ll(r,e,t){r=Vi(r,Rs);const a=Vi(r.firestore,xs),c=i(r.converter,e,t);return pc(a,[Gc(hc(a),"setDoc",r._key,c,null!==r.converter,t).toMutation(r._key,Gs.none())])}function Na(r,e,t,...a){r=Vi(r,Rs);const c=Vi(r.firestore,xs),p=hc(c);let E;return E="string"==typeof(e=(0,Y.m9)(e))||e instanceof dc?oy(p,"updateDoc",r._key,e,t,a):Df(p,"updateDoc",r._key,e),pc(c,[E.toMutation(r._key,Gs.exists(!0))])}function fc(r,...e){var t,a,c;r=(0,Y.m9)(r);let p={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||Dd(e[E])||(p=e[E],E++);const O={includeMetadataChanges:p.includeMetadataChanges};if(Dd(e[E])){const tt=e[E];e[E]=null===(t=tt.next)||void 0===t?void 0:t.bind(tt),e[E+1]=null===(a=tt.error)||void 0===a?void 0:a.bind(tt),e[E+2]=null===(c=tt.complete)||void 0===c?void 0:c.bind(tt)}let G,te,pe;if(r instanceof Rs)te=Vi(r.firestore,xs),pe=Su(r._key.path),G={next:tt=>{e[E]&&e[E]($u(te,r,tt))},error:e[E+1],complete:e[E+2]};else{const tt=Vi(r,_a);te=Vi(tt.firestore,xs),pe=tt._query;const Pt=new vn(te);G={next:Jt=>{e[E]&&e[E](new ot(te,Pt,tt,Jt))},error:e[E+1],complete:e[E+2]},Th(r._query)}return function(tt,Pt,Jt,bn){const Dn=new Pa(bn),fr=new oa(Pt,Dn,Jt);return tt.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return sf(yield vp(tt),fr)})),()=>{Dn.Sc(),tt.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return r_(yield vp(tt),fr)}))}}(To(te),pe,O,G)}function pc(r,e){return function(t,a){const c=new Ir;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function s_(r,e,t){return Vm.apply(this,arguments)}(yield Bg(t),a,c)})),c.promise}(To(r),e)}function $u(r,e,t){const a=t.docs.get(e._key),c=new vn(r);return new ie(r,c,e._key,a,new Z(t.hasPendingWrites,t.fromCache),e.converter)}const la={maxAttempts:5};class Rd{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hc(e)}set(e,t,a){this._verifyNotCommitted();const c=Oo(e,this._firestore),p=i(c.converter,t,a),E=Gc(this._dataReader,"WriteBatch.set",c._key,p,null!==c.converter,a);return this._mutations.push(E.toMutation(c._key,Gs.none())),this}update(e,t,a,...c){this._verifyNotCommitted();const p=Oo(e,this._firestore);let E;return E="string"==typeof(t=(0,Y.m9)(t))||t instanceof dc?oy(this._dataReader,"WriteBatch.update",p._key,t,a,c):Df(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(E.toMutation(p._key,Gs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Oo(e,this._firestore);return this._mutations=this._mutations.concat(new Uf(t._key,Gs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new an(Ot.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oo(r,e){if((r=(0,Y.m9)(r)).firestore!==e)throw new an(Ot.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class Jg extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hc(e)}get(e){const t=Oo(e,this._firestore),a=new o(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return zn();const p=c[0];if(p.isFoundDocument())return new Ad(this._firestore,a,p.key,p,t.converter);if(p.isNoDocument())return new Ad(this._firestore,a,t._key,null,t.converter);throw zn()})}set(e,t,a){const c=Oo(e,this._firestore),p=i(c.converter,t,a),E=Gc(this._dataReader,"Transaction.set",c._key,p,null!==c.converter,a);return this._transaction.set(c._key,E),this}update(e,t,a,...c){const p=Oo(e,this._firestore);let E;return E="string"==typeof(t=(0,Y.m9)(t))||t instanceof dc?oy(this._dataReader,"Transaction.update",p._key,t,a,c):Df(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,E),this}delete(e){const t=Oo(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Oo(e,this._firestore),a=new vn(this._firestore);return super.get(e).then(c=>new ie(this._firestore,a,t._key,c._document,new Z(!1,!1),t.converter))}}!function(r,e=!0){Ls=dt.SDK_VERSION,(0,dt._registerComponent)(new ze.wA("firestore",(t,{instanceIdentifier:a,options:c})=>{const p=t.getProvider("app").getImmediate(),E=new xs(new Pl(t.getProvider("auth-internal")),new Od(t.getProvider("app-check-internal")),function(O,G){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new an(Ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(O.options.projectId,G)}(p,a),p);return c=Object.assign({useFetchStreams:e},c),E._setSettings(c),E},"PUBLIC").setMultipleInstances(!0)),(0,dt.registerVersion)(Rl,"3.11.0",r),(0,dt.registerVersion)(Rl,"3.11.0","esm2017")}();function R_(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new an("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function qv(){if(typeof Uint8Array>"u")throw new an("unimplemented","Uint8Arrays are not available in this environment.")}function Yv(){if(!function ed(){return typeof atob<"u"}())throw new an("unimplemented","Blobs are unavailable in Firestore in this environment.")}class dy{constructor(e){this._delegate=e}static fromBase64String(e){return Yv(),new dy(cc.fromBase64String(e))}static fromUint8Array(e){return qv(),new dy(cc.fromUint8Array(e))}toBase64(){return Yv(),this._delegate.toBase64()}toUint8Array(){return qv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hy(r){return function Ov(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const a of e)if(a in t&&"function"==typeof t[a])return!0;return!1}(r,["next","error","complete"])}class Zv{enableIndexedDbPersistence(e,t){return function E_(r,e){I_(r=Vi(r,xs));const t=To(r);if(t._uninitializedComponentsProvider)throw new an(Ot.FAILED_PRECONDITION,"SDK cache is already specified.");Ts("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const a=r._freezeSettings(),c=new yh;return jg(t,c,new ya(c,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ry(r){I_(r=Vi(r,xs));const e=To(r);if(e._uninitializedComponentsProvider)throw new an(Ot.FAILED_PRECONDITION,"SDK cache is already specified.");Ts("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),a=new yh;return jg(e,a,new qm(a,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function w_(r){if(r._initialized&&!r._terminated)throw new an(Ot.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ir;return r._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(a){if(!z.D())return Promise.resolve();const c=a+"main";yield z.delete(c)}),function(a){return t.apply(this,arguments)})(Jf(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class x_{constructor(e,t,a){this._delegate=t,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof yl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ts("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,a={}){!function wp(r,e,t,a={}){var c;const p=(r=Vi(r,Lu))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&Ts("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${t}`,ssl:!1})),a.mockUserToken){let E,O;if("string"==typeof a.mockUserToken)E=a.mockUserToken,O=Ds.MOCK_USER;else{E=(0,Y.Sg)(a.mockUserToken,null===(c=r._app)||void 0===c?void 0:c.options.projectId);const G=a.mockUserToken.sub||a.mockUserToken.user_id;if(!G)throw new an(Ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new Ds(G)}r._authCredentials=new gu(new ju(E,O))}}(this._delegate,e,t,a)}enableNetwork(){return function Ev(r){return function Ep(r){return r.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield wf(r),t=yield Zm(r);return e.setNetworkEnabled(!0),function(a){const c=Fn(a);return c.Au.delete(0),op(c)}(t)}))}(To(r=Vi(r,xs)))}(this._delegate)}disableNetwork(){return function wv(r){return function _v(r){return r.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield wf(r),t=yield Zm(r);return e.setNetworkEnabled(!1),(a=(0,ae.Z)(function*(c){const p=Fn(c);p.Au.add(0),yield Uc(p),p.Pu.set("Offline")}),function(c){return a.apply(this,arguments)})(t);var a}))}(To(r=Vi(r,xs)))}(this._delegate)}enablePersistence(e){let t=!1,a=!1;return e&&(t=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,Qm("synchronizeTabs",t,"experimentalForceOwningTab",a)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hv(r){return function(e){const t=new Ir;return e.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function al(r,e){return ff.apply(this,arguments)}(yield Bg(e),t)})),t.promise}(To(r=Vi(r,xs)))}(this._delegate)}onSnapshotsInSync(e){return function Bu(r,e){return function Fu(r,e){const t=new Pa(e);return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return a=yield vp(r),c=t,Fn(a).Nu.add(c),void c.next();var a,c})),()=>{t.Sc(),r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return a=yield vp(r),c=t,void Fn(a).Nu.delete(c);var a,c}))}}(To(r=Vi(r,xs)),Dd(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new an("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Mp(this,Jm(this._delegate,e))}catch(t){throw Cl(t,"collection()","Firestore.collection()")}}doc(e){try{return new ul(this,Hc(this._delegate,e))}catch(t){throw Cl(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ql(this,function __(r,e){if(r=Vi(r,Lu),ql("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new an(Ot.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _a(r,null,(t=e,new Vl(Ai.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Cl(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cy(r,e,t){r=Vi(r,xs);const a=Object.assign(Object.assign({},la),t);return function(c){if(c.maxAttempts<1)throw new an(Ot.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(c,p,E){const O=new Ir;return c.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const G=yield function wh(r){return Oa(r).then(e=>e.datastore)}(c);new _p(c.asyncQueue,G,E,p,O).run()})),O.promise}(To(r),c=>e(new Jg(r,c)),a)}(this._delegate,t=>e(new O_(this,t)))}batch(){return To(this._delegate),new Qv(new Rd(this._delegate,e=>pc(this._delegate,e)))}loadBundle(e){return function Iv(r,e){const t=To(r=Vi(r,xs)),a=new Vg;return function g_(r,e,t,a){const c=function(p,E){let O;return O="string"==typeof p?Hh().encode(p):p,G=function(G,te){if(G instanceof Uint8Array)return Wl(G,void 0);if(G instanceof ArrayBuffer)return Wl(new Uint8Array(G),void 0);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new _h(G,E);var G}(t,bl(e));r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function Km(r,e,t){const a=Fn(r);var c;(c=(0,ae.Z)(function*(p,E,O){try{const G=yield E.getMetadata();if(yield function(Pt,Jt){const bn=Fn(Pt),Dn=$s(Jt.createTime);return bn.persistence.runTransaction("hasNewerBundle","readonly",fr=>bn.Ls.getBundleMetadata(fr,Jt.id)).then(fr=>!!fr&&fr.createTime.compareTo(Dn)>=0)}(p.localStore,G))return yield E.close(),O._completeWith({taskState:"Success",documentsLoaded:(Pt=G).totalDocuments,bytesLoaded:Pt.totalBytes,totalDocuments:Pt.totalDocuments,totalBytes:Pt.totalBytes}),Promise.resolve(new Set);O._updateProgress(bg(G));const te=new ou(G,p.localStore,E.serializer);let pe=yield E.Pc();for(;pe;){const Pt=yield te.ju(pe);Pt&&O._updateProgress(Pt),pe=yield E.Pc()}const tt=yield te.complete();return yield lu(p,tt.Hu,void 0),yield function(Pt,Jt){const bn=Fn(Pt);return bn.persistence.runTransaction("Save bundle","readwrite",Dn=>bn.Ls.saveBundleMetadata(Dn,Jt))}(p.localStore,G),O._completeWith(tt.progress),Promise.resolve(tt.Wu)}catch(G){return Ts("SyncEngine",`Loading bundle failed with ${G}`),O._failWith(G),Promise.resolve(new Set)}var Pt}),function(p,E,O){return c.apply(this,arguments)})(a,e,t).then(c=>{a.sharedClientState.notifyBundleLoaded(c)})}(yield Bg(r),c,a)}))}(t,r._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function bv(r,e){return function m_(r,e){return r.asyncQueue.enqueue((0,ae.Z)(function*(){return function(t,a){const c=Fn(t);return c.persistence.runTransaction("Get named query","readonly",p=>c.Ls.getNamedQuery(p,a))}(yield Eh(r),e)}))}(To(r=Vi(r,xs)),e).then(t=>t?new _a(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Ql(this,t):null)}}class P_ extends u{constructor(e){super(),this.firestore=e}convertBytes(e){return new dy(new cc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ul.forKey(t,this.firestore,null)}}class O_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new P_(e)}get(e){const t=xh(e);return this._delegate.get(t).then(a=>new em(this._firestore,new ie(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,t.converter)))}set(e,t,a){const c=xh(e);return a?(R_("Transaction.set",a),this._delegate.set(c,t,a)):this._delegate.set(c,t),this}update(e,t,a,...c){const p=xh(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,a,...c),this}delete(e){const t=xh(e);return this._delegate.delete(t),this}}class Qv{constructor(e){this._delegate=e}set(e,t,a){const c=xh(e);return a?(R_("WriteBatch.set",a),this._delegate.set(c,t,a)):this._delegate.set(c,t),this}update(e,t,a,...c){const p=xh(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,a,...c),this}delete(e){const t=xh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rf{constructor(e,t,a){this._firestore=e,this._userDataWriter=t,this._delegate=a}fromFirestore(e,t){const a=new Ze(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ap(this._firestore,a),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const a=Rf.INSTANCES;let c=a.get(e);c||(c=new WeakMap,a.set(e,c));let p=c.get(t);return p||(p=new Rf(e,new P_(e),t),c.set(t,p)),p}}Rf.INSTANCES=new WeakMap;class ul{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new P_(e)}static forPath(e,t,a){if(e.length%2!=0)throw new an("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ul(t,new Rs(t._delegate,a,new An(e)))}static forKey(e,t,a){return new ul(t,new Rs(t._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new Mp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Mp(this.firestore,Jm(this._delegate,e))}catch(t){throw Cl(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Y.m9)(e))instanceof Rs&&v_(this._delegate,e)}set(e,t){t=R_("DocumentReference.set",t);try{return t?ll(this._delegate,e,t):ll(this._delegate,e)}catch(a){throw Cl(a,"setDoc()","DocumentReference.set()")}}update(e,t,...a){try{return 1===arguments.length?Na(this._delegate,e):Na(this._delegate,e,t,...a)}catch(c){throw Cl(c,"updateDoc()","DocumentReference.update()")}}delete(){return function va(r){return pc(Vi(r.firestore,xs),[new Uf(r._key,Gs.none())])}(this._delegate)}onSnapshot(...e){const t=Xv(e),a=A0(e,c=>new em(this.firestore,new ie(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return fc(this._delegate,t,a)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ur(r){r=Vi(r,Rs);const e=Vi(r.firestore,xs),t=To(e),a=new vn(e);return function p_(r,e){const t=new Ir;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(a=(0,ae.Z)(function*(c,p,E){try{const O=yield function(G,te){const pe=Fn(G);return pe.persistence.runTransaction("read document","readonly",tt=>pe.localDocuments.getDocument(tt,te))}(c,p);O.isFoundDocument()?E.resolve(O):O.isNoDocument()?E.resolve(null):E.reject(new an(Ot.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const G=ah(O,`Failed to get document '${p} from cache`);E.reject(G)}}),function(c,p,E){return a.apply(this,arguments)})(yield Eh(r),e,t);var a})),t.promise}(t,r._key).then(c=>new ie(e,a,r._key,c,new Z(null!==c&&c.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Zr(r){r=Vi(r,Rs);const e=Vi(r.firestore,xs);return vv(To(e),r._key,{source:"server"}).then(t=>$u(e,r,t))}(this._delegate):function Xt(r){r=Vi(r,Rs);const e=Vi(r.firestore,xs);return vv(To(e),r._key).then(t=>$u(e,r,t))}(this._delegate),t.then(a=>new em(this.firestore,new ie(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new ul(this.firestore,this._delegate.withConverter(e?Rf.getInstance(this.firestore,e):null))}}function Cl(r,e,t){return r.message=r.message.replace(e,t),r}function Xv(r){for(const e of r)if("object"==typeof e&&!hy(e))return e;return{}}function A0(r,e){var t,a;let c;return c=hy(r[0])?r[0]:hy(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:p=>{c.next&&c.next(e(p))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(a=c.complete)||void 0===a?void 0:a.bind(c)}}class em{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ul(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Zt(this._delegate,e._delegate)}}class Ap extends em{data(e){const t=this._delegate.data(e);return function Pd(r,e){r||zn()}(void 0!==t),t}}class Ql{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new P_(e)}where(e,t,a){try{return new Ql(this.firestore,Sh(this._delegate,function C_(r,e,t){const a=e,c=Kg("where",r);return Ah._create(c,a,t)}(e,t,a)))}catch(c){throw Cl(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ql(this.firestore,Sh(this._delegate,function ly(r,e="asc"){const t=e,a=Kg("orderBy",r);return Mh._create(a,t)}(e,t)))}catch(a){throw Cl(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ql(this.firestore,Sh(this._delegate,function T_(r){return Cd("limit",r),qg._create("limit",r,"F")}(e)))}catch(t){throw Cl(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ql(this.firestore,Sh(this._delegate,function Av(r){return Cd("limitToLast",r),qg._create("limitToLast",r,"L")}(e)))}catch(t){throw Cl(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ql(this.firestore,Sh(this._delegate,function Mv(...r){return Md._create("startAt",r,!0)}(...e)))}catch(t){throw Cl(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ql(this.firestore,Sh(this._delegate,function Rv(...r){return Md._create("startAfter",r,!1)}(...e)))}catch(t){throw Cl(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ql(this.firestore,Sh(this._delegate,function Zg(...r){return Yg._create("endBefore",r,!1)}(...e)))}catch(t){throw Cl(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ql(this.firestore,Sh(this._delegate,function uy(...r){return Yg._create("endAt",r,!0)}(...e)))}catch(t){throw Cl(t,"endAt()","Query.endAt()")}}isEqual(e){return bh(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Pi(r){r=Vi(r,_a);const e=Vi(r.firestore,xs),t=To(e),a=new vn(e);return function If(r,e){const t=new Ir;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(a=(0,ae.Z)(function*(c,p,E){try{const O=yield rp(c,p,!0),G=new fh(p,O.sr),te=G.nc(O.documents),pe=G.applyChanges(te,!1);E.resolve(pe.snapshot)}catch(O){const G=ah(O,`Failed to execute query '${p} against cache`);E.reject(G)}}),function(c,p,E){return a.apply(this,arguments)})(yield Eh(r),e,t);var a})),t.promise}(t,r._query).then(c=>new ot(e,a,r,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function ki(r){r=Vi(r,_a);const e=Vi(r.firestore,xs),t=To(e),a=new vn(e);return Ih(t,r._query,{source:"server"}).then(c=>new ot(e,a,r,c))}(this._delegate):function Si(r){r=Vi(r,_a);const e=Vi(r.firestore,xs),t=To(e),a=new vn(e);return Th(r._query),Ih(t,r._query).then(c=>new ot(e,a,r,c))}(this._delegate),t.then(a=>new kv(this.firestore,new ot(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const t=Xv(e),a=A0(e,c=>new kv(this.firestore,new ot(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return fc(this._delegate,t,a)}withConverter(e){return new Ql(this.firestore,this._delegate.withConverter(e?Rf.getInstance(this.firestore,e):null))}}class Nv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ap(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ql(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ap(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Nv(this._firestore,t))}forEach(e,t){this._delegate.forEach(a=>{e.call(t,new Ap(this._firestore,a))})}isEqual(e){return Zt(this._delegate,e._delegate)}}class Mp extends Ql{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ul(this.firestore,e):null}doc(e){try{return new ul(this.firestore,void 0===e?Hc(this._delegate):Hc(this._delegate,e))}catch(t){throw Cl(t,"doc()","CollectionReference.doc()")}}add(e){return function aa(r,e){const t=Vi(r.firestore,xs),a=Hc(r),c=i(r.converter,e);return pc(t,[Gc(hc(r.firestore),"addDoc",a._key,c,null!==r.converter,{}).toMutation(a._key,Gs.exists(!1))]).then(()=>a)}(this._delegate,e).then(t=>new ul(this.firestore,t))}isEqual(e){return v_(this._delegate,e._delegate)}withConverter(e){return new Mp(this.firestore,this._delegate.withConverter(e?Rf.getInstance(this.firestore,e):null))}}function xh(r){return Vi(r,Rs)}class N_{constructor(...e){this._delegate=new dc(...e)}static documentId(){return new N_(os.keyField().canonicalString())}isEqual(e){return(e=(0,Y.m9)(e))instanceof dc&&this._delegate._internalPath.isEqual(e._internalPath)}}class xf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function E0(){return new Gg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new xf(e)}static delete(){const e=function v0(){return new Td("deleteField")}();return e._methodName="FieldValue.delete",new xf(e)}static arrayUnion(...e){const t=function w0(...r){return new bp("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new xf(t)}static arrayRemove(...e){const t=function I0(...r){return new b_("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new xf(t)}static increment(e){const t=function b0(r){return new Ch("increment",r)}(e);return t._methodName="FieldValue.increment",new xf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Jv={Firestore:x_,GeoPoint:Hg,Timestamp:Xi,Blob:dy,Transaction:O_,WriteBatch:Qv,DocumentReference:ul,DocumentSnapshot:em,Query:Ql,QueryDocumentSnapshot:Ap,QuerySnapshot:kv,CollectionReference:Mp,FieldPath:N_,FieldValue:xf,setLogLevel:function S0(r){!function fs(r){xl.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function M0(r){(function e0(r,e){r.INTERNAL.registerComponent(new ze.wA("firestore-compat",t=>{const a=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(a,c)},"PUBLIC").setServiceProps(Object.assign({},Jv)))})(r,(e,t)=>new x_(e,t,new Zv)),r.registerVersion("@firebase/firestore-compat","0.3.8")}(Ie.Z);var Pf=B(1205),R0=B(6217),x0=B(9260);function P0(r,e){return function t0(r,e=m.z){return new q.y(t=>{let a;return null!=e?e.schedule(()=>{a=r.onSnapshot({includeMetadataChanges:!0},t)}):a=r.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=a&&a()}})}(r,e)}function Fv(r,e){return P0(r,e).pipe((0,me.U)(t=>({payload:t,type:"query"})))}function k_(r,e){return Fv(r,e).pipe((0,Ce.O)(void 0),Se(),(0,me.U)(([t,a])=>{const c=a.payload.docChanges(),p=c.map(E=>({type:E.type,payload:E}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((E,O)=>{const G=c.find(pe=>pe.doc.ref.isEqual(E.ref)),te=null==t?void 0:t.payload.docs.find(pe=>pe.ref.isEqual(E.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(E.metadata)||!G&&te&&JSON.stringify(te.metadata)===JSON.stringify(E.metadata)||p.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:E}})}),p}))}function O0(r,e,t){return k_(r,t).pipe((0,De.R)((a,c)=>function N0(r,e,t){return e.forEach(a=>{t.indexOf(a.type)>-1&&(r=function k0(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Lv(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Lv(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Lv(r,e.oldIndex,1)}return r}(r,a))}),r}(a,c.map(p=>p.payload),e),[]),(0,ke.x)(),(0,me.U)(a=>a.map(c=>({type:c.type,payload:c}))))}function Lv(r,e,t,...a){const c=r.slice();return c.splice(e,t,...a),c}function r0(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class s0{constructor(e,t,a){this.ref=e,this.query=t,this.afs=a}stateChanges(e){let t=k_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,me.U)(a=>a.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,Ce.O)(void 0),Se(),(0,je.h)(([a,c])=>c.length>0||!a),(0,me.U)(([a,c])=>c),Pe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,De.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=r0(e);return O0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return Fv(this.query,this.afs.schedulers.outsideAngular).pipe((0,me.U)(t=>t.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),Pe.iC)}get(e){return(0,oe.D)(this.query.get(e)).pipe(Pe.iC)}add(e){return this.ref.add(e)}doc(e){return new o0(this.ref.doc(e),this.afs)}}class o0{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const a=this.ref.collection(e),{ref:c,query:p}=u0(a,t);return new s0(c,p,this.afs)}snapshotChanges(){return function n0(r,e){return P0(r,e).pipe((0,Ce.O)(void 0),Se(),(0,me.U)(([t,a])=>a.exists?null!=t&&t.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,me.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,oe.D)(this.ref.get(e)).pipe(Pe.iC)}}class F0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?k_(this.query,this.afs.schedulers.outsideAngular).pipe((0,me.U)(t=>t.filter(a=>e.indexOf(a.type)>-1)),(0,je.h)(t=>t.length>0),Pe.iC):k_(this.query,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,De.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=r0(e);return O0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return Fv(this.query,this.afs.schedulers.outsideAngular).pipe((0,me.U)(a=>a.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),Pe.iC)}get(e){return(0,oe.D)(this.query.get(e)).pipe(Pe.iC)}}const a0=new y.OlP("angularfire2.enableFirestorePersistence"),l0=new y.OlP("angularfire2.firestore.persistenceSettings"),L0=new y.OlP("angularfire2.firestore.settings"),B0=new y.OlP("angularfire2.firestore.use-emulator");function u0(r,e=(t=>t)){return{query:e(r),ref:r}}let tm=(()=>{class r{constructor(t,a,c,p,E,O,G,te,pe,tt,Pt,Jt,bn,Dn,fr,oi,Hi){this.schedulers=G;const fi=(0,Le.on)(t,O,a),ka=pe;tt&&(0,Pf.nw)(fi,O,Pt,bn,Dn,fr,Jt,oi),[this.firestore,this.persistenceEnabled$]=(0,Le.cc)(`${fi.name}.firestore`,"AngularFirestore",fi.name,()=>{const Us=O.runOutsideAngular(()=>fi.firestore());if(p&&Us.settings(p),ka&&Us.useEmulator(...ka),c&&!(0,Xe.PM)(E)){const Is=()=>{try{return(0,oe.D)(Us.enablePersistence(te||void 0).then(()=>!0,()=>!1))}catch(Fa){return typeof console<"u"&&console.warn(Fa),(0,xe.of)(!1)}};return[Us,O.runOutsideAngular(Is)]}return[Us,(0,xe.of)(!1)]},[p,ka,c])}collection(t,a){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:p,query:E}=u0(c,a),O=this.schedulers.ngZone.run(()=>p);return new s0(O,E,this)}collectionGroup(t,a){const c=a||(E=>E),p=this.firestore.collectionGroup(t);return new F0(c(p),this)}doc(t){let a;a="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>a);return new o0(c,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(y.LFG(Le.Dh),y.LFG(Le.xv,8),y.LFG(a0,8),y.LFG(L0,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Pe.HU),y.LFG(l0,8),y.LFG(B0,8),y.LFG(Pf.zQ,8),y.LFG(Pf.Qv,8),y.LFG(Pf.L6,8),y.LFG(Pf._Q,8),y.LFG(Pf.rT,8),y.LFG(Pf.lh,8),y.LFG(Pf.f7,8),y.LFG(R0.nm,8))},r.\u0275prov=y.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),c0=(()=>{class r{constructor(){x0.Z.registerVersion("angularfire",Pe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:a0,useValue:!0},{provide:l0,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=y.oAB({type:r}),r.\u0275inj=y.cJS({providers:[tm]}),r})()},2011:(ln,at,B)=>{"use strict";B.d(at,{Dh:()=>we,GT:()=>Pe,cc:()=>je,hO:()=>ke,on:()=>Se,pX:()=>xe,xv:()=>He});var y=B(4650),m=B(9260),q=B(4976);ln=B.hmd(ln);const oe=["ngOnDestroy"],xe=(Ie,ae,dt,ze={})=>new Proxy(Ie,{get:(Ae,Y)=>dt.runOutsideAngular(()=>{var ht;if(Ie[Y])return!(null===(ht=null==ze?void 0:ze.spy)||void 0===ht)&&ht.get&&ze.spy.get(Y,Ie[Y]),Ie[Y];if(oe.indexOf(Y)>-1)return()=>{};const Ke=ae.toPromise().then(fe=>{const Ct=fe&&fe[Y];return"function"==typeof Ct?Ct.bind(fe):Ct&&Ct.then?Ct.then(Ue=>dt.run(()=>Ue)):dt.run(()=>Ct)});return new Proxy(()=>{},{get:(fe,Ct)=>Ke[Ct],apply:(fe,Ct,Ue)=>Ke.then(it=>{var Et;const Ve=it&&it(...Ue);return!(null===(Et=null==ze?void 0:ze.spy)||void 0===Et)&&Et.apply&&ze.spy.apply(Y,Ue,Ve),Ve})})})}),Pe=(Ie,ae)=>{ae.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(ze=>{Object.defineProperty(Ie.prototype,ze,Object.getOwnPropertyDescriptor(dt.prototype||dt,ze))})})};class Ce{constructor(ae){return ae}}const we=new y.OlP("angularfire2.app.options"),He=new y.OlP("angularfire2.app.name");function Se(Ie,ae,dt){const Ae="object"==typeof dt&&dt||{};Ae.name=Ae.name||"string"==typeof dt&&dt||"[DEFAULT]";const ht=m.Z.apps.filter(Ke=>Ke&&Ke.name===Ae.name)[0]||ae.runOutsideAngular(()=>m.Z.initializeApp(Ie,Ae));try{JSON.stringify(Ie)!==JSON.stringify(ht.options)&&me("error",`${ht.name} Firebase App already initialized with different options${ln.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(ht)}const me=(Ie,...ae)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Ie](...ae)},De={provide:Ce,useFactory:Se,deps:[we,y.R0b,[new y.FiY,He]]};let ke=(()=>{class Ie{constructor(dt){m.Z.registerVersion("angularfire",q.q4.full,"core"),m.Z.registerVersion("angularfire",q.q4.full,"app-compat"),m.Z.registerVersion("angular",y.q4F.full,dt.toString())}static initializeApp(dt,ze){return{ngModule:Ie,providers:[{provide:we,useValue:dt},{provide:He,useValue:ze}]}}}return Ie.\u0275fac=function(dt){return new(dt||Ie)(y.LFG(y.Lbi))},Ie.\u0275mod=y.oAB({type:Ie}),Ie.\u0275inj=y.cJS({providers:[De]}),Ie})();function je(Ie,ae,dt,ze,Ae){const[,Y,ht]=globalThis.\u0275AngularfireInstanceCache.find(Ke=>Ke[0]===Ie)||[];if(Y)return function Le(Ie,ae){try{return Ie.toString()===ae.toString()}catch{return Ie===ae}}(Ae,ht)||(Te("error",`${ae} was already initialized on the ${dt} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),Te("warn",{is:Ae,was:ht})),Y;{const Ke=ze();return globalThis.\u0275AngularfireInstanceCache.push([Ie,Ke,Ae]),Ke}}const Xe=!!ln.hot,Te=(Ie,...ae)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Ie](...ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(ln,at,B)=>{"use strict";B.d(at,{q4:()=>Ji,iC:()=>xo,fc:()=>bu,HU:()=>ia,vb:()=>Ki,JM:()=>Io});var y=B(4650),m=B(259),q=B(5861),oe=B(6881),xe=B(2090),Pe=B(4859),Ce=B(1877);const we=(x,$)=>$.some(J=>x instanceof J);let He,Se;const ke=new WeakMap,je=new WeakMap,Le=new WeakMap,Xe=new WeakMap,Te=new WeakMap;let dt={get(x,$,J){if(x instanceof IDBTransaction){if("done"===$)return je.get(x);if("objectStoreNames"===$)return x.objectStoreNames||Le.get(x);if("store"===$)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return ht(x[$])},set:(x,$,J)=>(x[$]=J,!0),has:(x,$)=>x instanceof IDBTransaction&&("done"===$||"store"===$)||$ in x};function Y(x){return"function"==typeof x?function Ae(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return Se||(Se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...$){return x.apply(Ke(this),$),ht(ke.get(this))}:function(...$){return ht(x.apply(Ke(this),$))}:function($,...J){const Oe=x.call(Ke(this),$,...J);return Le.set(Oe,$.sort?$.sort():[$]),ht(Oe)}}(x):(x instanceof IDBTransaction&&function ae(x){if(je.has(x))return;const $=new Promise((J,Oe)=>{const ft=()=>{x.removeEventListener("complete",bt),x.removeEventListener("error",Bt),x.removeEventListener("abort",Bt)},bt=()=>{J(),ft()},Bt=()=>{Oe(x.error||new DOMException("AbortError","AbortError")),ft()};x.addEventListener("complete",bt),x.addEventListener("error",Bt),x.addEventListener("abort",Bt)});je.set(x,$)}(x),we(x,function me(){return He||(He=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,dt):x)}function ht(x){if(x instanceof IDBRequest)return function Ie(x){const $=new Promise((J,Oe)=>{const ft=()=>{x.removeEventListener("success",bt),x.removeEventListener("error",Bt)},bt=()=>{J(ht(x.result)),ft()},Bt=()=>{Oe(x.error),ft()};x.addEventListener("success",bt),x.addEventListener("error",Bt)});return $.then(J=>{J instanceof IDBCursor&&ke.set(J,x)}).catch(()=>{}),Te.set($,x),$}(x);if(Xe.has(x))return Xe.get(x);const $=Y(x);return $!==x&&(Xe.set(x,$),Te.set($,x)),$}const Ke=x=>Te.get(x),Ue=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],Et=new Map;function Ve(x,$){if(!(x instanceof IDBDatabase)||$ in x||"string"!=typeof $)return;if(Et.get($))return Et.get($);const J=$.replace(/FromIndex$/,""),Oe=$!==J,ft=it.includes(J);if(!(J in(Oe?IDBIndex:IDBObjectStore).prototype)||!ft&&!Ue.includes(J))return;const bt=function(){var Bt=(0,q.Z)(function*(Pn,...Sn){const er=this.transaction(Pn,ft?"readwrite":"readonly");let zr=er.store;return Oe&&(zr=zr.index(Sn.shift())),(yield Promise.all([zr[J](...Sn),ft&&er.done]))[0]});return function(Sn){return Bt.apply(this,arguments)}}();return Et.set($,bt),bt}!function ze(x){dt=x(dt)}(x=>({...x,get:($,J,Oe)=>Ve($,J)||x.get($,J,Oe),has:($,J)=>!!Ve($,J)||x.has($,J)}));const gt="@firebase/installations",wt="0.6.4",yt=1e4,qe=`w:${wt}`,We="FIS_v2",Ge="https://firebaseinstallations.googleapis.com/v1",_t=36e5,hn=new xe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Dt(x){return x instanceof xe.ZR&&x.code.includes("request-failed")}function ut({projectId:x}){return`${Ge}/projects/${x}/installations`}function Rt(x){return{token:x.token,requestStatus:2,expiresIn:Ht(x.expiresIn),creationTime:Date.now()}}function rn(x,$){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,q.Z)(function*(x,$){const Oe=(yield $.json()).error;return hn.create("request-failed",{requestName:x,serverCode:Oe.code,serverMessage:Oe.message,serverStatus:Oe.status})})).apply(this,arguments)}function Un({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function tn(x){return En.apply(this,arguments)}function En(){return(En=(0,q.Z)(function*(x){const $=yield x();return $.status>=500&&$.status<600?x():$})).apply(this,arguments)}function Ht(x){return Number(x.replace("s","000"))}function pn(){return(pn=(0,q.Z)(function*({appConfig:x,heartbeatServiceProvider:$},{fid:J}){const Oe=ut(x),ft=Un(x),bt=$.getImmediate({optional:!0});if(bt){const er=yield bt.getHeartbeatsHeader();er&&ft.append("x-firebase-client",er)}const Pn={method:"POST",headers:ft,body:JSON.stringify({fid:J,authVersion:We,appId:x.appId,sdkVersion:qe})},Sn=yield tn(()=>fetch(Oe,Pn));if(Sn.ok){const er=yield Sn.json();return{fid:er.fid||J,registrationStatus:2,refreshToken:er.refreshToken,authToken:Rt(er.authToken)}}throw yield rn("Create Installation",Sn)})).apply(this,arguments)}function dr(x){return new Promise($=>{setTimeout($,x)})}const Mr=/^[cdef][\w-]{21}$/,Ri="";function bi(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const J=function Dr(x){return function Mi(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return Mr.test(J)?J:Ri}catch{return Ri}}function Xn(x){return`${x.appName}!${x.appId}`}const wn=new Map;function sn(x,$){const J=Xn(x);pr(J,$),function Ci(x,$){const J=function ai(){return!kr&&"BroadcastChannel"in self&&(kr=new BroadcastChannel("[Firebase] FID Change"),kr.onmessage=x=>{pr(x.data.key,x.data.fid)}),kr}();J&&J.postMessage({key:x,fid:$}),function _r(){0===wn.size&&kr&&(kr.close(),kr=null)}()}(J,$)}function pr(x,$){const J=wn.get(x);if(J)for(const Oe of J)Oe($)}let kr=null;const yi="firebase-installations-database",sr=1,Di="firebase-installations-store";let tr=null;function ni(){return tr||(tr=function fe(x,$,{blocked:J,upgrade:Oe,blocking:ft,terminated:bt}={}){const Bt=indexedDB.open(x,$),Pn=ht(Bt);return Oe&&Bt.addEventListener("upgradeneeded",Sn=>{Oe(ht(Bt.result),Sn.oldVersion,Sn.newVersion,ht(Bt.transaction))}),J&&Bt.addEventListener("blocked",()=>J()),Pn.then(Sn=>{bt&&Sn.addEventListener("close",()=>bt()),ft&&Sn.addEventListener("versionchange",()=>ft())}).catch(()=>{}),Pn}(yi,sr,{upgrade:(x,$)=>{0===$&&x.createObjectStore(Di)}})),tr}function Gr(x,$){return ri.apply(this,arguments)}function ri(){return(ri=(0,q.Z)(function*(x,$){const J=Xn(x),ft=(yield ni()).transaction(Di,"readwrite"),bt=ft.objectStore(Di),Bt=yield bt.get(J);return yield bt.put($,J),yield ft.done,(!Bt||Bt.fid!==$.fid)&&sn(x,$.fid),$})).apply(this,arguments)}function Sr(x){return _i.apply(this,arguments)}function _i(){return(_i=(0,q.Z)(function*(x){const $=Xn(x),Oe=(yield ni()).transaction(Di,"readwrite");yield Oe.objectStore(Di).delete($),yield Oe.done})).apply(this,arguments)}function Ur(x,$){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,q.Z)(function*(x,$){const J=Xn(x),ft=(yield ni()).transaction(Di,"readwrite"),bt=ft.objectStore(Di),Bt=yield bt.get(J),Pn=$(Bt);return void 0===Pn?yield bt.delete(J):yield bt.put(Pn,J),yield ft.done,Pn&&(!Bt||Bt.fid!==Pn.fid)&&sn(x,Pn.fid),Pn})).apply(this,arguments)}function Qe(x){return Be.apply(this,arguments)}function Be(){return Be=(0,q.Z)(function*(x){let $;const J=yield Ur(x.appConfig,Oe=>{const ft=function he(x){return et(x||{fid:bi(),registrationStatus:0})}(Oe),bt=function ye(x,$){if(0===$.registrationStatus){if(!navigator.onLine)return{installationEntry:$,registrationPromise:Promise.reject(hn.create("app-offline"))};const J={fid:$.fid,registrationStatus:1,registrationTime:Date.now()},Oe=function de(x,$){return lt.apply(this,arguments)}(x,J);return{installationEntry:J,registrationPromise:Oe}}return 1===$.registrationStatus?{installationEntry:$,registrationPromise:Re(x)}:{installationEntry:$}}(x,ft);return $=bt.registrationPromise,bt.installationEntry});return J.fid===Ri?{installationEntry:yield $}:{installationEntry:J,registrationPromise:$}}),Be.apply(this,arguments)}function lt(){return lt=(0,q.Z)(function*(x,$){try{const J=yield function Zn(x,$){return pn.apply(this,arguments)}(x,$);return Gr(x.appConfig,J)}catch(J){throw Dt(J)&&409===J.customData.serverCode?yield Sr(x.appConfig):yield Gr(x.appConfig,{fid:$.fid,registrationStatus:0}),J}}),lt.apply(this,arguments)}function Re(x){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,q.Z)(function*(x){let $=yield Ee(x.appConfig);for(;1===$.registrationStatus;)yield dr(100),$=yield Ee(x.appConfig);if(0===$.registrationStatus){const{installationEntry:J,registrationPromise:Oe}=yield Qe(x);return Oe||J}return $})).apply(this,arguments)}function Ee(x){return Ur(x,$=>{if(!$)throw hn.create("installation-not-found");return et($)})}function et(x){return function xt(x){return 1===x.registrationStatus&&x.registrationTime+yt<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function gn(){return(gn=(0,q.Z)(function*({appConfig:x,heartbeatServiceProvider:$},J){const Oe=function mn(x,{fid:$}){return`${ut(x)}/${$}/authTokens:generate`}(x,J),ft=function fn(x,{refreshToken:$}){const J=Un(x);return J.append("Authorization",function cr(x){return`${We} ${x}`}($)),J}(x,J),bt=$.getImmediate({optional:!0});if(bt){const er=yield bt.getHeartbeatsHeader();er&&ft.append("x-firebase-client",er)}const Pn={method:"POST",headers:ft,body:JSON.stringify({installation:{sdkVersion:qe,appId:x.appId}})},Sn=yield tn(()=>fetch(Oe,Pn));if(Sn.ok)return Rt(yield Sn.json());throw yield rn("Generate Auth Token",Sn)})).apply(this,arguments)}function nr(x){return Wr.apply(this,arguments)}function Wr(){return Wr=(0,q.Z)(function*(x,$=!1){let J;const Oe=yield Ur(x.appConfig,bt=>{if(!vr(bt))throw hn.create("not-registered");const Bt=bt.authToken;if(!$&&function Tn(x){return 2===x.requestStatus&&!function Fr(x){const $=Date.now();return $<x.creationTime||x.creationTime+x.expiresIn<$+_t}(x)}(Bt))return bt;if(1===Bt.requestStatus)return J=function kt(x,$){return At.apply(this,arguments)}(x,$),bt;{if(!navigator.onLine)throw hn.create("app-offline");const Pn=function wr(x){const $={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:$})}(bt);return J=function On(x,$){return Jn.apply(this,arguments)}(x,Pn),Pn}});return J?yield J:Oe.authToken}),Wr.apply(this,arguments)}function At(){return(At=(0,q.Z)(function*(x,$){let J=yield nn(x.appConfig);for(;1===J.authToken.requestStatus;)yield dr(100),J=yield nn(x.appConfig);const Oe=J.authToken;return 0===Oe.requestStatus?nr(x,$):Oe})).apply(this,arguments)}function nn(x){return Ur(x,$=>{if(!vr($))throw hn.create("not-registered");return function jn(x){return 1===x.requestStatus&&x.requestTime+yt<Date.now()}($.authToken)?Object.assign(Object.assign({},$),{authToken:{requestStatus:0}}):$})}function Jn(){return Jn=(0,q.Z)(function*(x,$){try{const J=yield function Yt(x,$){return gn.apply(this,arguments)}(x,$),Oe=Object.assign(Object.assign({},$),{authToken:J});return yield Gr(x.appConfig,Oe),J}catch(J){if(!Dt(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const Oe=Object.assign(Object.assign({},$),{authToken:{requestStatus:0}});yield Gr(x.appConfig,Oe)}else yield Sr(x.appConfig);throw J}}),Jn.apply(this,arguments)}function vr(x){return void 0!==x&&2===x.registrationStatus}function Ps(){return(Ps=(0,q.Z)(function*(x){const $=x,{installationEntry:J,registrationPromise:Oe}=yield Qe($);return Oe?Oe.catch(console.error):nr($).catch(console.error),J.fid})).apply(this,arguments)}function as(){return as=(0,q.Z)(function*(x,$=!1){const J=x;return yield function li(x){return _n.apply(this,arguments)}(J),(yield nr(J,$)).token}),as.apply(this,arguments)}function _n(){return(_n=(0,q.Z)(function*(x){const{registrationPromise:$}=yield Qe(x);$&&(yield $)})).apply(this,arguments)}function Me(x){return hn.create("missing-app-config-values",{valueName:x})}const Ye="installations",Je=x=>{const $=x.getProvider("app").getImmediate(),J=function ce(x){if(!x||!x.options)throw Me("App Configuration");if(!x.name)throw Me("App Name");const $=["projectId","apiKey","appId"];for(const J of $)if(!x.options[J])throw Me(J);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}($);return{app:$,appConfig:J,heartbeatServiceProvider:(0,oe._getProvider)($,"heartbeat"),_delete:()=>Promise.resolve()}},nt=x=>{const $=x.getProvider("app").getImmediate(),J=(0,oe._getProvider)($,Ye).getImmediate();return{getId:()=>function Wn(x){return Ps.apply(this,arguments)}(J),getToken:ft=>function ns(x){return as.apply(this,arguments)}(J,ft)}};(function Lt(){(0,oe._registerComponent)(new Pe.wA(Ye,Je,"PUBLIC")),(0,oe._registerComponent)(new Pe.wA("installations-internal",nt,"PRIVATE"))})(),(0,oe.registerVersion)(gt,wt),(0,oe.registerVersion)(gt,wt,"esm2017");const $t="@firebase/remote-config",Ln=new xe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class La{constructor($,J,Oe,ft){this.client=$,this.storage=J,this.storageCache=Oe,this.logger=ft}isCachedDataFresh($,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Oe=Date.now()-J,ft=Oe<=$;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Oe}. Cache max age millis (minimumFetchIntervalMillis setting): ${$}. Is cache hit: ${ft}.`),ft}fetch($){var J=this;return(0,q.Z)(function*(){const[Oe,ft]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(ft&&J.isCachedDataFresh($.cacheMaxAgeMillis,Oe))return ft;$.eTag=ft&&ft.eTag;const bt=yield J.client.fetch($),Bt=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===bt.status&&Bt.push(J.storage.setLastSuccessfulFetchResponse(bt)),yield Promise.all(Bt),bt})()}}function fo(x=navigator){return x.languages&&x.languages[0]||x.language}class Zo{constructor($,J,Oe,ft,bt,Bt){this.firebaseInstallations=$,this.sdkVersion=J,this.namespace=Oe,this.projectId=ft,this.apiKey=bt,this.appId=Bt}fetch($){var J=this;return(0,q.Z)(function*(){const[Oe,ft]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),Bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,Pn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":$.eTag||"*"},Sn={sdk_version:J.sdkVersion,app_instance_id:Oe,app_instance_id_token:ft,app_id:J.appId,language_code:fo()},er={method:"POST",headers:Pn,body:JSON.stringify(Sn)},zr=fetch(Bt,er),$r=new Promise((di,Qs)=>{$.signal.addEventListener(()=>{const Ul=new Error("The operation was aborted.");Ul.name="AbortError",Qs(Ul)})});let Go;try{yield Promise.race([zr,$r]),Go=yield zr}catch(di){let Qs="fetch-client-network";throw"AbortError"===(null==di?void 0:di.name)&&(Qs="fetch-timeout"),Ln.create(Qs,{originalErrorMessage:null==di?void 0:di.message})}let As=Go.status;const eu=Go.headers.get("ETag")||void 0;let Ms,$l;if(200===Go.status){let di;try{di=yield Go.json()}catch(Qs){throw Ln.create("fetch-client-parse",{originalErrorMessage:null==Qs?void 0:Qs.message})}Ms=di.entries,$l=di.state}if("INSTANCE_STATE_UNSPECIFIED"===$l?As=500:"NO_CHANGE"===$l?As=304:("NO_TEMPLATE"===$l||"EMPTY_CONFIG"===$l)&&(Ms={}),304!==As&&200!==As)throw Ln.create("fetch-status",{httpStatus:As});return{status:As,eTag:eu,config:Ms}})()}}class Os{constructor($,J){this.client=$,this.storage=J}fetch($){var J=this;return(0,q.Z)(function*(){const Oe=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch($,Oe)})()}attemptFetch($,{throttleEndTimeMillis:J,backoffCount:Oe}){var ft=this;return(0,q.Z)(function*(){yield function ko(x,$){return new Promise((J,Oe)=>{const ft=Math.max($-Date.now(),0),bt=setTimeout(J,ft);x.addEventListener(()=>{clearTimeout(bt),Oe(Ln.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}($.signal,J);try{const bt=yield ft.client.fetch($);return yield ft.storage.deleteThrottleMetadata(),bt}catch(bt){if(!function Fo(x){if(!(x instanceof xe.ZR&&x.customData))return!1;const $=Number(x.customData.httpStatus);return 429===$||500===$||503===$||504===$}(bt))throw bt;const Bt={throttleEndTimeMillis:Date.now()+(0,xe.$s)(Oe),backoffCount:Oe+1};return yield ft.storage.setThrottleMetadata(Bt),ft.attemptFetch($,Bt)}})()}}class Ea{constructor($,J,Oe,ft,bt){this.app=$,this._client=J,this._storageCache=Oe,this._storage=ft,this._logger=bt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ls(x,$){const J=x.target.error||void 0;return Ln.create($,{originalErrorMessage:J&&(null==J?void 0:J.message)})}const So="app_namespace_store";class Vs{constructor($,J,Oe,ft=function to(){return new Promise((x,$)=>{try{const J=indexedDB.open("firebase_remote_config",1);J.onerror=Oe=>{$(ls(Oe,"storage-open"))},J.onsuccess=Oe=>{x(Oe.target.result)},J.onupgradeneeded=Oe=>{0===Oe.oldVersion&&Oe.target.result.createObjectStore(So,{keyPath:"compositeKey"})}}catch(J){$(Ln.create("storage-open",{originalErrorMessage:null==J?void 0:J.message}))}})}()){this.appId=$,this.appName=J,this.namespace=Oe,this.openDbPromise=ft}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus($){return this.set("last_fetch_status",$)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis($){return this.set("last_successful_fetch_timestamp_millis",$)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse($){return this.set("last_successful_fetch_response",$)}getActiveConfig(){return this.get("active_config")}setActiveConfig($){return this.set("active_config",$)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag($){return this.set("active_config_etag",$)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata($){return this.set("throttle_metadata",$)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get($){var J=this;return(0,q.Z)(function*(){const Oe=yield J.openDbPromise;return new Promise((ft,bt)=>{const Pn=Oe.transaction([So],"readonly").objectStore(So),Sn=J.createCompositeKey($);try{const er=Pn.get(Sn);er.onerror=zr=>{bt(ls(zr,"storage-get"))},er.onsuccess=zr=>{const $r=zr.target.result;ft($r?$r.value:void 0)}}catch(er){bt(Ln.create("storage-get",{originalErrorMessage:null==er?void 0:er.message}))}})})()}set($,J){var Oe=this;return(0,q.Z)(function*(){const ft=yield Oe.openDbPromise;return new Promise((bt,Bt)=>{const Sn=ft.transaction([So],"readwrite").objectStore(So),er=Oe.createCompositeKey($);try{const zr=Sn.put({compositeKey:er,value:J});zr.onerror=$r=>{Bt(ls($r,"storage-set"))},zr.onsuccess=()=>{bt()}}catch(zr){Bt(Ln.create("storage-set",{originalErrorMessage:null==zr?void 0:zr.message}))}})})()}delete($){var J=this;return(0,q.Z)(function*(){const Oe=yield J.openDbPromise;return new Promise((ft,bt)=>{const Pn=Oe.transaction([So],"readwrite").objectStore(So),Sn=J.createCompositeKey($);try{const er=Pn.delete(Sn);er.onerror=zr=>{bt(ls(zr,"storage-delete"))},er.onsuccess=()=>{ft()}}catch(er){bt(Ln.create("storage-delete",{originalErrorMessage:null==er?void 0:er.message}))}})})()}createCompositeKey($){return[this.appId,this.appName,this.namespace,$].join()}}class ys{constructor($){this.storage=$}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var $=this;return(0,q.Z)(function*(){const J=$.storage.getLastFetchStatus(),Oe=$.storage.getLastSuccessfulFetchTimestampMillis(),ft=$.storage.getActiveConfig(),bt=yield J;bt&&($.lastFetchStatus=bt);const Bt=yield Oe;Bt&&($.lastSuccessfulFetchTimestampMillis=Bt);const Pn=yield ft;Pn&&($.activeConfig=Pn)})()}setLastFetchStatus($){return this.lastFetchStatus=$,this.storage.setLastFetchStatus($)}setLastSuccessfulFetchTimestampMillis($){return this.lastSuccessfulFetchTimestampMillis=$,this.storage.setLastSuccessfulFetchTimestampMillis($)}setActiveConfig($){return this.activeConfig=$,this.storage.setActiveConfig($)}}function Lo(){return no.apply(this,arguments)}function no(){return(no=(0,q.Z)(function*(){if(!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch{return!1}})).apply(this,arguments)}!function js(){(0,oe._registerComponent)(new Pe.wA("remote-config",function x($,{instanceIdentifier:J}){const Oe=$.getProvider("app").getImmediate(),ft=$.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ln.create("registration-window");if(!(0,xe.hl)())throw Ln.create("indexed-db-unavailable");const{projectId:bt,apiKey:Bt,appId:Pn}=Oe.options;if(!bt)throw Ln.create("registration-project-id");if(!Bt)throw Ln.create("registration-api-key");if(!Pn)throw Ln.create("registration-app-id");const Sn=new Vs(Pn,Oe.name,J=J||"firebase"),er=new ys(Sn),zr=new Ce.Yd($t);zr.logLevel=Ce.in.ERROR;const $r=new Zo(ft,oe.SDK_VERSION,J,bt,Bt,Pn),Go=new Os($r,Sn),As=new La(Go,Sn,er,zr),eu=new Ea(Oe,As,er,Sn,zr);return function Hn(x){const $=(0,xe.m9)(x);$._initializePromise||($._initializePromise=$._storageCache.loadFromStorage().then(()=>{$._isInitializationComplete=!0}))}(eu),eu},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)($t,"0.4.4"),(0,oe.registerVersion)($t,"0.4.4","esm2017")}();const hu=(x,$)=>$.some(J=>x instanceof J);let Bo,Ua;const $o=new WeakMap,go=new WeakMap,Ei=new WeakMap,Xo=new WeakMap,_s=new WeakMap;let Ao={get(x,$,J){if(x instanceof IDBTransaction){if("done"===$)return go.get(x);if("objectStoreNames"===$)return x.objectStoreNames||Ei.get(x);if("store"===$)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Q(x[$])},set:(x,$,J)=>(x[$]=J,!0),has:(x,$)=>x instanceof IDBTransaction&&("done"===$||"store"===$)||$ in x};function C(x){return"function"==typeof x?function Va(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function wa(){return Ua||(Ua=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...$){return x.apply(D(this),$),Q($o.get(this))}:function(...$){return Q(x.apply(D(this),$))}:function($,...J){const Oe=x.call(D(this),$,...J);return Ei.set(Oe,$.sort?$.sort():[$]),Q(Oe)}}(x):(x instanceof IDBTransaction&&function rs(x){if(go.has(x))return;const $=new Promise((J,Oe)=>{const ft=()=>{x.removeEventListener("complete",bt),x.removeEventListener("error",Bt),x.removeEventListener("abort",Bt)},bt=()=>{J(),ft()},Bt=()=>{Oe(x.error||new DOMException("AbortError","AbortError")),ft()};x.addEventListener("complete",bt),x.addEventListener("error",Bt),x.addEventListener("abort",Bt)});go.set(x,$)}(x),hu(x,function ua(){return Bo||(Bo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,Ao):x)}function Q(x){if(x instanceof IDBRequest)return function Yi(x){const $=new Promise((J,Oe)=>{const ft=()=>{x.removeEventListener("success",bt),x.removeEventListener("error",Bt)},bt=()=>{J(Q(x.result)),ft()},Bt=()=>{Oe(x.error),ft()};x.addEventListener("success",bt),x.addEventListener("error",Bt)});return $.then(J=>{J instanceof IDBCursor&&$o.set(J,x)}).catch(()=>{}),_s.set($,x),$}(x);if(Xo.has(x))return Xo.get(x);const $=C(x);return $!==x&&(Xo.set(x,$),_s.set($,x)),$}const D=x=>_s.get(x);function K(x,$,{blocked:J,upgrade:Oe,blocking:ft,terminated:bt}={}){const Bt=indexedDB.open(x,$),Pn=Q(Bt);return Oe&&Bt.addEventListener("upgradeneeded",Sn=>{Oe(Q(Bt.result),Sn.oldVersion,Sn.newVersion,Q(Bt.transaction))}),J&&Bt.addEventListener("blocked",()=>J()),Pn.then(Sn=>{bt&&Sn.addEventListener("close",()=>bt()),ft&&Sn.addEventListener("versionchange",()=>ft())}).catch(()=>{}),Pn}function _e(x,{blocked:$}={}){const J=indexedDB.deleteDatabase(x);return $&&J.addEventListener("blocked",()=>$()),Q(J).then(()=>{})}const Qt=["get","getKey","getAll","getAllKeys","count"],Vn=["put","add","delete","clear"],Kn=new Map;function Ar(x,$){if(!(x instanceof IDBDatabase)||$ in x||"string"!=typeof $)return;if(Kn.get($))return Kn.get($);const J=$.replace(/FromIndex$/,""),Oe=$!==J,ft=Vn.includes(J);if(!(J in(Oe?IDBIndex:IDBObjectStore).prototype)||!ft&&!Qt.includes(J))return;const bt=function(){var Bt=(0,q.Z)(function*(Pn,...Sn){const er=this.transaction(Pn,ft?"readwrite":"readonly");let zr=er.store;return Oe&&(zr=zr.index(Sn.shift())),(yield Promise.all([zr[J](...Sn),ft&&er.done]))[0]});return function(Sn){return Bt.apply(this,arguments)}}();return Kn.set($,bt),bt}!function cs(x){Ao=x(Ao)}(x=>({...x,get:($,J,Oe)=>Ar($,J)||x.get($,J,Oe),has:($,J)=>!!Ar($,J)||x.has($,J)}));const Nn="/firebase-messaging-sw.js",ts="/firebase-cloud-messaging-push-scope",W="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",H="https://fcmregistrations.googleapis.com/v1",L="google.c.a.c_id",ue="google.c.a.c_l",Ft="google.c.a.ts",Bn="google.c.a.e";var Vt=(()=>{return(x=Vt||(Vt={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",Vt;var x})();function $n(x){const $=new Uint8Array(x);return btoa(String.fromCharCode(...$)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ia(x){const J=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Oe=atob(J),ft=new Uint8Array(Oe.length);for(let bt=0;bt<Oe.length;++bt)ft[bt]=Oe.charCodeAt(bt);return ft}const Dl="fcm_token_details_db",is=5,fu="fcm_token_object_Store";function ro(){return ro=(0,q.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(bt=>bt.name).includes(Dl))return null;let $=null;return(yield K(Dl,is,{upgrade:(Oe=(0,q.Z)(function*(ft,bt,Bt,Pn){var Sn;if(bt<2||!ft.objectStoreNames.contains(fu))return;const er=Pn.objectStore(fu),zr=yield er.index("fcmSenderId").get(x);if(yield er.clear(),zr)if(2===bt){const $r=zr;if(!$r.auth||!$r.p256dh||!$r.endpoint)return;$={token:$r.fcmToken,createTime:null!==(Sn=$r.createTime)&&void 0!==Sn?Sn:Date.now(),subscriptionOptions:{auth:$r.auth,p256dh:$r.p256dh,endpoint:$r.endpoint,swScope:$r.swScope,vapidKey:"string"==typeof $r.vapidKey?$r.vapidKey:$n($r.vapidKey)}}}else if(3===bt){const $r=zr;$={token:$r.fcmToken,createTime:$r.createTime,subscriptionOptions:{auth:$n($r.auth),p256dh:$n($r.p256dh),endpoint:$r.endpoint,swScope:$r.swScope,vapidKey:$n($r.vapidKey)}}}else if(4===bt){const $r=zr;$={token:$r.fcmToken,createTime:$r.createTime,subscriptionOptions:{auth:$n($r.auth),p256dh:$n($r.p256dh),endpoint:$r.endpoint,swScope:$r.swScope,vapidKey:$n($r.vapidKey)}}}}),function(bt,Bt,Pn,Sn){return Oe.apply(this,arguments)})})).close(),yield _e(Dl),yield _e("fcm_vapid_details_db"),yield _e("undefined"),function Tl(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:$}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof $.auth&&$.auth.length>0&&"string"==typeof $.p256dh&&$.p256dh.length>0&&"string"==typeof $.endpoint&&$.endpoint.length>0&&"string"==typeof $.swScope&&$.swScope.length>0&&"string"==typeof $.vapidKey&&$.vapidKey.length>0}($)?$:null;var Oe}),ro.apply(this,arguments)}const cl="firebase-messaging-database",Sl=1,Ns="firebase-messaging-store";let Ha=null;function ds(){return Ha||(Ha=K(cl,Sl,{upgrade:(x,$)=>{0===$&&x.createObjectStore(Ns)}})),Ha}function ks(x){return io.apply(this,arguments)}function io(){return io=(0,q.Z)(function*(x){const $=dl(x),Oe=yield(yield ds()).transaction(Ns).objectStore(Ns).get($);if(Oe)return Oe;{const ft=yield function ja(x){return ro.apply(this,arguments)}(x.appConfig.senderId);if(ft)return yield mo(x,ft),ft}}),io.apply(this,arguments)}function mo(x,$){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,q.Z)(function*(x,$){const J=dl(x),ft=(yield ds()).transaction(Ns,"readwrite");return yield ft.objectStore(Ns).put($,J),yield ft.done,$})).apply(this,arguments)}function ca(){return(ca=(0,q.Z)(function*(x){const $=dl(x),Oe=(yield ds()).transaction(Ns,"readwrite");yield Oe.objectStore(Ns).delete($),yield Oe.done})).apply(this,arguments)}function dl({appConfig:x}){return x.appId}const Qi=new xe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function da(x,$){return ha.apply(this,arguments)}function ha(){return(ha=(0,q.Z)(function*(x,$){const J=yield Ka(x),Oe=Hs($),ft={method:"POST",headers:J,body:JSON.stringify(Oe)};let bt;try{bt=yield(yield fetch(Wa(x.appConfig),ft)).json()}catch(Bt){throw Qi.create("token-subscribe-failed",{errorInfo:null==Bt?void 0:Bt.toString()})}if(bt.error)throw Qi.create("token-subscribe-failed",{errorInfo:bt.error.message});if(!bt.token)throw Qi.create("token-subscribe-no-token");return bt.token})).apply(this,arguments)}function yo(){return(yo=(0,q.Z)(function*(x,$){const J=yield Ka(x),Oe=Hs($.subscriptionOptions),ft={method:"PATCH",headers:J,body:JSON.stringify(Oe)};let bt;try{bt=yield(yield fetch(`${Wa(x.appConfig)}/${$.token}`,ft)).json()}catch(Bt){throw Qi.create("token-update-failed",{errorInfo:null==Bt?void 0:Bt.toString()})}if(bt.error)throw Qi.create("token-update-failed",{errorInfo:bt.error.message});if(!bt.token)throw Qi.create("token-update-no-token");return bt.token})).apply(this,arguments)}function Jo(x,$){return _o.apply(this,arguments)}function _o(){return(_o=(0,q.Z)(function*(x,$){const Oe={method:"DELETE",headers:yield Ka(x)};try{const bt=yield(yield fetch(`${Wa(x.appConfig)}/${$}`,Oe)).json();if(bt.error)throw Qi.create("token-unsubscribe-failed",{errorInfo:bt.error.message})}catch(ft){throw Qi.create("token-unsubscribe-failed",{errorInfo:null==ft?void 0:ft.toString()})}})).apply(this,arguments)}function Wa({projectId:x}){return`${H}/projects/${x}/registrations`}function Ka(x){return ba.apply(this,arguments)}function ba(){return(ba=(0,q.Z)(function*({appConfig:x,installations:$}){const J=yield $.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function Hs({p256dh:x,auth:$,endpoint:J,vapidKey:Oe}){const ft={web:{endpoint:J,auth:$,p256dh:x}};return Oe!==W&&(ft.web.applicationPubKey=Oe),ft}const Xl=6048e5;function hs(){return hs=(0,q.Z)(function*(x){const $=yield function gc(x,$){return Es.apply(this,arguments)}(x.swRegistration,x.vapidKey),J={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:$.endpoint,auth:$n($.getKey("auth")),p256dh:$n($.getKey("p256dh"))},Oe=yield ks(x.firebaseDependencies);if(Oe){if(function Vo(x,$){return $.vapidKey===x.vapidKey&&$.endpoint===x.endpoint&&$.auth===x.auth&&$.p256dh===x.p256dh}(Oe.subscriptionOptions,J))return Date.now()>=Oe.createTime+Xl?function Lr(x,$){return vs.apply(this,arguments)}(x,{token:Oe.token,createTime:Date.now(),subscriptionOptions:J}):Oe.token;try{yield Jo(x.firebaseDependencies,Oe.token)}catch(ft){console.warn(ft)}return qa(x.firebaseDependencies,J)}return qa(x.firebaseDependencies,J)}),hs.apply(this,arguments)}function qs(){return qs=(0,q.Z)(function*(x){const $=yield ks(x.firebaseDependencies);$&&(yield Jo(x.firebaseDependencies,$.token),yield function za(x){return ca.apply(this,arguments)}(x.firebaseDependencies));const J=yield x.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()}),qs.apply(this,arguments)}function vs(){return vs=(0,q.Z)(function*(x,$){try{const J=yield function Ga(x,$){return yo.apply(this,arguments)}(x.firebaseDependencies,$),Oe=Object.assign(Object.assign({},$),{token:J,createTime:Date.now()});return yield mo(x.firebaseDependencies,Oe),J}catch(J){throw yield function ss(x){return qs.apply(this,arguments)}(x),J}}),vs.apply(this,arguments)}function qa(x,$){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,q.Z)(function*(x,$){const Oe={token:yield da(x,$),createTime:Date.now(),subscriptionOptions:$};return yield mo(x,Oe),Oe.token})).apply(this,arguments)}function Es(){return(Es=(0,q.Z)(function*(x,$){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ia($)})})).apply(this,arguments)}function ii(x){const $={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function Vu(x,$){if(!$.notification)return;x.notification={};const J=$.notification.title;J&&(x.notification.title=J);const Oe=$.notification.body;Oe&&(x.notification.body=Oe);const ft=$.notification.image;ft&&(x.notification.image=ft);const bt=$.notification.icon;bt&&(x.notification.icon=bt)}($,x),function fa(x,$){$.data&&(x.data=$.data)}($,x),function F(x,$){var J,Oe,ft,bt,Bt;if(!($.fcmOptions||null!==(J=$.notification)&&void 0!==J&&J.click_action))return;x.fcmOptions={};const Pn=null!==(ft=null===(Oe=$.fcmOptions)||void 0===Oe?void 0:Oe.link)&&void 0!==ft?ft:null===(bt=$.notification)||void 0===bt?void 0:bt.click_action;Pn&&(x.fcmOptions.link=Pn);const Sn=null===(Bt=$.fcmOptions)||void 0===Bt?void 0:Bt.analytics_label;Sn&&(x.fcmOptions.analyticsLabel=Sn)}($,x),$}function V(x,$){const J=[];for(let Oe=0;Oe<x.length;Oe++)J.push(x.charAt(Oe)),Oe<$.length&&J.push($.charAt(Oe));return J.join("")}function $e(x){return Qi.create("missing-app-config-values",{valueName:x})}V("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),V("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ut{constructor($,J,Oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ft=function le(x){if(!x||!x.options)throw $e("App Configuration Object");if(!x.name)throw $e("App Name");const $=["projectId","apiKey","appId","messagingSenderId"],{options:J}=x;for(const Oe of $)if(!J[Oe])throw $e(Oe);return{appName:x.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}($);this.firebaseDependencies={app:$,appConfig:ft,installations:J,analyticsProvider:Oe}}_delete(){return Promise.resolve()}}function qt(x){return kn.apply(this,arguments)}function kn(){return(kn=(0,q.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(Nn,{scope:ts}),x.swRegistration.update().catch(()=>{})}catch($){throw Qi.create("failed-service-worker-registration",{browserErrorMessage:null==$?void 0:$.message})}})).apply(this,arguments)}function Vr(){return(Vr=(0,q.Z)(function*(x,$){if(!$&&!x.swRegistration&&(yield qt(x)),$||!x.swRegistration){if(!($ instanceof ServiceWorkerRegistration))throw Qi.create("invalid-sw-registration");x.swRegistration=$}})).apply(this,arguments)}function Er(){return(Er=(0,q.Z)(function*(x,$){$?x.vapidKey=$:x.vapidKey||(x.vapidKey=W)})).apply(this,arguments)}function gi(){return gi=(0,q.Z)(function*(x,$){if(!navigator)throw Qi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qi.create("permission-blocked");return yield function Br(x,$){return Er.apply(this,arguments)}(x,null==$?void 0:$.vapidKey),yield function Tr(x,$){return Vr.apply(this,arguments)}(x,null==$?void 0:$.serviceWorkerRegistration),function hl(x){return hs.apply(this,arguments)}(x)}),gi.apply(this,arguments)}function so(){return(so=(0,q.Z)(function*(x,$,J){const Oe=function Cs(x){switch(x){case Vt.NOTIFICATION_CLICKED:return"notification_open";case Vt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}($);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(Oe,{message_id:J[L],message_name:J[ue],message_time:J[Ft],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fs(){return Fs=(0,q.Z)(function*(x,$){const J=$.data;if(!J.isFirebaseMessaging)return;x.onMessageHandler&&J.messageType===Vt.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(ii(J)):x.onMessageHandler.next(ii(J)));const Oe=J.data;(function ee(x){return"object"==typeof x&&!!x&&L in x})(Oe)&&"1"===Oe[Bn]&&(yield function Gi(x,$,J){return so.apply(this,arguments)}(x,J.messageType,Oe))}),Fs.apply(this,arguments)}const vo="@firebase/messaging",jo=x=>{const $=new Ut(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function Ys(x,$){return Fs.apply(this,arguments)}($,J)),$},Ml=x=>{const $=x.getProvider("messaging").getImmediate();return{getToken:Oe=>function zi(x,$){return gi.apply(this,arguments)}($,Oe)}};function Yc(){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,q.Z)(function*(){try{yield(0,xe.eu)()}catch{return!1}return typeof window<"u"&&(0,xe.hl)()&&(0,xe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function fl(){(0,oe._registerComponent)(new Pe.wA("messaging",jo,"PUBLIC")),(0,oe._registerComponent)(new Pe.wA("messaging-internal",Ml,"PRIVATE")),(0,oe.registerVersion)(vo,"0.12.4"),(0,oe.registerVersion)(vo,"0.12.4","esm2017")}();const Ts="analytics",pu="firebase_id",zn="origin",or=6e4,Pd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fn="https://www.googletagmanager.com/gtag/js",Ot=new Ce.Yd("@firebase/analytics"),Ir=new xe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ju(x){if(!x.startsWith(Fn)){const $=Ir.create("invalid-gtag-resource",{gtagURL:x});return Ot.warn($.message),""}return x}function ea(x){return Promise.all(x.map($=>$.catch(J=>J)))}function Ya(){return(Ya=(0,q.Z)(function*(x,$,J,Oe,ft,bt){const Bt=Oe[ft];try{if(Bt)yield $[Bt];else{const Sn=(yield ea(J)).find(er=>er.measurementId===ft);Sn&&(yield $[Sn.appId])}}catch(Pn){Ot.error(Pn)}x("config",ft,bt)})).apply(this,arguments)}function Hu(){return(Hu=(0,q.Z)(function*(x,$,J,Oe,ft){try{let bt=[];if(ft&&ft.send_to){let Bt=ft.send_to;Array.isArray(Bt)||(Bt=[Bt]);const Pn=yield ea(J);for(const Sn of Bt){const er=Pn.find($r=>$r.measurementId===Sn),zr=er&&$[er.appId];if(!zr){bt=[];break}bt.push(zr)}}0===bt.length&&(bt=Object.values($)),yield Promise.all(bt),x("event",Oe,ft||{})}catch(bt){Ot.error(bt)}})).apply(this,arguments)}const ta=30,qn=new class Xi{constructor($={},J=1e3){this.throttleMetadata=$,this.intervalMillis=J}getThrottleMetadata($){return this.throttleMetadata[$]}setThrottleMetadata($,J){this.throttleMetadata[$]=J}deleteThrottleMetadata($){delete this.throttleMetadata[$]}};function Za(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function Zi(){return(Zi=(0,q.Z)(function*(x){var $;const{appId:J,apiKey:Oe}=x,ft={method:"GET",headers:Za(Oe)},bt=Pd.replace("{app-id}",J),Bt=yield fetch(bt,ft);if(200!==Bt.status&&304!==Bt.status){let Pn="";try{const Sn=yield Bt.json();null!==($=Sn.error)&&void 0!==$&&$.message&&(Pn=Sn.error.message)}catch{}throw Ir.create("config-fetch-failed",{httpStatus:Bt.status,responseMessage:Pn})}return Bt.json()})).apply(this,arguments)}function An(){return(An=(0,q.Z)(function*(x,$=qn,J){const{appId:Oe,apiKey:ft,measurementId:bt}=x.options;if(!Oe)throw Ir.create("no-app-id");if(!ft){if(bt)return{measurementId:bt,appId:Oe};throw Ir.create("no-api-key")}const Bt=$.getThrottleMetadata(Oe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pn=new Gu;return setTimeout((0,q.Z)(function*(){Pn.abort()}),void 0!==J?J:or),mc({appId:Oe,apiKey:ft,measurementId:bt},Bt,Pn,$)})).apply(this,arguments)}function mc(x,$,J){return Ol.apply(this,arguments)}function Ol(){return Ol=(0,q.Z)(function*(x,{throttleEndTimeMillis:$,backoffCount:J},Oe,ft=qn){var bt;const{appId:Bt,measurementId:Pn}=x;try{yield function Qa(x,$){return new Promise((J,Oe)=>{const ft=Math.max($-Date.now(),0),bt=setTimeout(J,ft);x.addEventListener(()=>{clearTimeout(bt),Oe(Ir.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}(Oe,$)}catch(Sn){if(Pn)return Ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pn} provided in the "measurementId" field in the local Firebase config. [${null==Sn?void 0:Sn.message}]`),{appId:Bt,measurementId:Pn};throw Sn}try{const Sn=yield function Ai(x){return Zi.apply(this,arguments)}(x);return ft.deleteThrottleMetadata(Bt),Sn}catch(Sn){const er=Sn;if(!function Oh(x){if(!(x instanceof xe.ZR&&x.customData))return!1;const $=Number(x.customData.httpStatus);return 429===$||500===$||503===$||504===$}(er)){if(ft.deleteThrottleMetadata(Bt),Pn)return Ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pn} provided in the "measurementId" field in the local Firebase config. [${null==er?void 0:er.message}]`),{appId:Bt,measurementId:Pn};throw Sn}const zr=503===Number(null===(bt=null==er?void 0:er.customData)||void 0===bt?void 0:bt.httpStatus)?(0,xe.$s)(J,ft.intervalMillis,ta):(0,xe.$s)(J,ft.intervalMillis),$r={throttleEndTimeMillis:Date.now()+zr,backoffCount:J+1};return ft.setThrottleMetadata(Bt,$r),Ot.debug(`Calling attemptFetch again in ${zr} millis`),mc(x,$r,Oe,ft)}}),Ol.apply(this,arguments)}class Gu{constructor(){this.listeners=[]}addEventListener($){this.listeners.push($)}abort(){this.listeners.forEach($=>$())}}let Nl,re;function Wu(){return(Wu=(0,q.Z)(function*(x,$,J,Oe,ft){if(ft&&ft.global)x("event",J,Oe);else{const bt=yield $;x("event",J,Object.assign(Object.assign({},Oe),{send_to:bt}))}})).apply(this,arguments)}function un(){return(un=(0,q.Z)(function*(){if(!(0,xe.hl)())return Ot.warn(Ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,xe.eu)()}catch(x){return Ot.warn(Ir.create("indexeddb-unavailable",{errorInfo:null==x?void 0:x.toString()}).message),!1}return!0})).apply(this,arguments)}function xn(){return xn=(0,q.Z)(function*(x,$,J,Oe,ft,bt,Bt){var Pn;const Sn=function os(x){return An.apply(this,arguments)}(x);Sn.then(As=>{J[As.measurementId]=As.appId,x.options.measurementId&&As.measurementId!==x.options.measurementId&&Ot.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${As.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(As=>Ot.error(As)),$.push(Sn);const er=function Tt(){return un.apply(this,arguments)}().then(As=>{if(As)return Oe.getId()}),[zr,$r]=yield Promise.all([Sn,er]);(function hr(x){const $=window.document.getElementsByTagName("script");for(const J of Object.values($))if(J.src&&J.src.includes(Fn)&&J.src.includes(x))return J;return null})(bt)||function Pl(x,$){const J=function gu(x,$){let J;return window.trustedTypes&&(J=window.trustedTypes.createPolicy(x,$)),J}("firebase-js-sdk-policy",{createScriptURL:ju}),Oe=document.createElement("script"),ft=`${Fn}?l=${x}&id=${$}`;Oe.src=J?null==J?void 0:J.createScriptURL(ft):ft,Oe.async=!0,document.head.appendChild(Oe)}(bt,zr.measurementId),re&&(ft("consent","default",re),function se(x){re=x}(void 0)),ft("js",new Date);const Go=null!==(Pn=null==Bt?void 0:Bt.config)&&void 0!==Pn?Pn:{};return Go[zn]="firebase",Go.update=!0,null!=$r&&(Go[pu]=$r),ft("config",zr.measurementId,Go),Nl&&(ft("set",Nl),function rt(x){Nl=x}(void 0)),zr.measurementId}),xn.apply(this,arguments)}class xi{constructor($){this.app=$}_delete(){return delete xr[this.app.options.appId],Promise.resolve()}}let xr={},ir=[];const Wi={};let Ni,Ho,Ss="dataLayer",Ro="gtag",Bs=!1;function Xa(x,$,J){!function kl(){const x=[];if((0,xe.ru)()&&x.push("This is a browser extension environment."),(0,xe.zI)()||x.push("Cookies are not available."),x.length>0){const $=x.map((Oe,ft)=>`(${ft+1}) ${Oe}`).join(" "),J=Ir.create("invalid-analytics-context",{errorInfo:$});Ot.warn(J.message)}}();const Oe=x.options.appId;if(!Oe)throw Ir.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw Ir.create("no-api-key");Ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=xr[Oe])throw Ir.create("already-exists",{id:Oe});if(!Bs){!function Da(x){let $=[];Array.isArray(window[x])?$=window[x]:window[x]=$}(Ss);const{wrappedGtag:bt,gtagCore:Bt}=function pl(x,$,J,Oe,ft){let bt=function(...Bt){window[Oe].push(arguments)};return window[ft]&&"function"==typeof window[ft]&&(bt=window[ft]),window[ft]=function yu(x,$,J,Oe){function bt(){return bt=(0,q.Z)(function*(Bt,...Pn){try{if("event"===Bt){const[Sn,er]=Pn;yield function Od(x,$,J,Oe,ft){return Hu.apply(this,arguments)}(x,$,J,Sn,er)}else if("config"===Bt){const[Sn,er]=Pn;yield function mu(x,$,J,Oe,ft,bt){return Ya.apply(this,arguments)}(x,$,J,Oe,Sn,er)}else if("consent"===Bt){const[Sn]=Pn;x("consent","update",Sn)}else if("get"===Bt){const[Sn,er,zr]=Pn;x("get",Sn,er,zr)}else if("set"===Bt){const[Sn]=Pn;x("set",Sn)}else x(Bt,...Pn)}catch(Sn){Ot.error(Sn)}}),bt.apply(this,arguments)}return function ft(Bt){return bt.apply(this,arguments)}}(bt,x,$,J),{gtagCore:bt,wrappedGtag:window[ft]}}(xr,ir,Wi,Ss,Ro);Ho=bt,Ni=Bt,Bs=!0}return xr[Oe]=function Gn(x,$,J,Oe,ft,bt,Bt){return xn.apply(this,arguments)}(x,ir,Wi,$,Ni,Ss,J),new xi(x)}function Nh(){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,q.Z)(function*(){if((0,xe.ru)()||!(0,xe.zI)()||!(0,xe.hl)())return!1;try{return yield(0,xe.eu)()}catch{return!1}})).apply(this,arguments)}const Ja="@firebase/analytics";!function ga(){(0,oe._registerComponent)(new Pe.wA(Ts,($,{options:J})=>Xa($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,oe._registerComponent)(new Pe.wA("analytics-internal",function x($){try{const J=$.getProvider(Ts).getImmediate();return{logEvent:(Oe,ft,bt)=>function Qc(x,$,J,Oe){x=(0,xe.m9)(x),function _u(x,$,J,Oe,ft){return Wu.apply(this,arguments)}(Ho,xr[x.app.options.appId],$,J,Oe).catch(ft=>Ot.error(ft))}(J,Oe,ft,bt)}}catch(J){throw Ir.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,oe.registerVersion)(Ja,"0.10.0"),(0,oe.registerVersion)(Ja,"0.10.0","esm2017")}();var kh=B(4408),wu=B(7565);const Ld=new class _c extends wu.v{}(class ra extends kh.o{constructor($,J){super($,J),this.scheduler=$,this.work=J}schedule($,J=0){return J>0?super.schedule($,J):(this.delay=J,this.state=$,this.scheduler.flush(this),this)}execute($,J){return J>0||this.closed?super.execute($,J):this._execute($,J)}requestAsyncId($,J,Oe=0){return null!=Oe&&Oe>0||null==Oe&&this.delay>0?super.requestAsyncId($,J,Oe):($.flush(this),0)}});var oo=B(4986),Ku=B(8505),el=B(5363),Ll=B(9468);const Ji=new y.GfV("7.5.0"),tl="__angularfire_symbol__analyticsIsSupportedValue",ao="__angularfire_symbol__analyticsIsSupported",es="__angularfire_symbol__remoteConfigIsSupportedValue",Iu="__angularfire_symbol__remoteConfigIsSupported",Bi="__angularfire_symbol__messagingIsSupportedValue",zo="__angularfire_symbol__messagingIsSupported";function Io(x,$,J){if($){if(1===$.length)return $[0];const bt=$.filter(Bt=>Bt.app===J);if(1===bt.length)return bt[0]}return J.container.getProvider(x).getImmediate({optional:!0})}globalThis[ao]||(globalThis[ao]=Nh().then(x=>globalThis[tl]=x).catch(()=>globalThis[tl]=!1)),globalThis[zo]||(globalThis[zo]=Yc().then(x=>globalThis[Bi]=x).catch(()=>globalThis[Bi]=!1)),globalThis[Iu]||(globalThis[Iu]=Lo().then(x=>globalThis[es]=x).catch(()=>globalThis[es]=!1));const Ki=(x,$)=>{const J=$?[$]:(0,m.C6)(),Oe=[];return J.forEach(ft=>{ft.container.getProvider(x).instances.forEach(Bt=>{Oe.includes(Bt)||Oe.push(Bt)})}),Oe};function br(){}class qu{constructor($,J=Ld){this.zone=$,this.delegate=J}now(){return this.delegate.now()}schedule($,J,Oe){const ft=this.zone;return this.delegate.schedule(function(Bt){ft.runGuarded(()=>{$.apply(this,[Bt])})},J,Oe)}}class ml{constructor($){this.zone=$,this.task=null}call($,J){const Oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",br,{},br,br)),J.pipe((0,Ku.b)({next:Oe,complete:Oe,error:Oe})).subscribe($).add(Oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ia=(()=>{class x{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new qu(Zone.current)),this.insideAngular=J.run(()=>new qu(Zone.current,oo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(J){return new(J||x)(y.LFG(y.R0b))},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function Ui(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function bu(x){return x.pipe((0,el.Q)(Ui().outsideAngular))}function xo(x){return Ui(),function Bl(x){return function(J){return(J=J.lift(new ml(x.ngZone))).pipe((0,Ll.R)(x.outsideAngular),(0,el.Q)(x.insideAngular))}}(Ui())(x)}},8502:(ln,at,B)=>{"use strict";B.d(at,{$:()=>Nn,A:()=>me,D:()=>je,I:()=>ei,J:()=>Je,L:()=>ms,N:()=>Ur,P:()=>Gn,Q:()=>Vs,R:()=>gl,U:()=>po,V:()=>Lo,W:()=>no,X:()=>pi,Y:()=>ua,Z:()=>wa,_:()=>_s,a:()=>Ls,a0:()=>W,a1:()=>L,a2:()=>Oi,a3:()=>fu,a4:()=>ro,a5:()=>cl,a6:()=>Ns,a7:()=>ds,a8:()=>io,a9:()=>Uo,aA:()=>fe,aB:()=>es,aC:()=>Sr,aD:()=>Jr,aE:()=>el,aF:()=>Zc,aG:()=>ci,aH:()=>Rr,aL:()=>fs,aO:()=>Bo,aa:()=>za,ab:()=>dl,ac:()=>Al,ad:()=>Ga,ae:()=>Jo,af:()=>Wa,ai:()=>Xl,aj:()=>hs,ak:()=>ss,an:()=>Va,ao:()=>Vu,aq:()=>Er,ar:()=>vo,as:()=>Ue,at:()=>et,au:()=>Re,av:()=>ze,aw:()=>Go,ax:()=>Jc,ay:()=>xt,az:()=>Ae,b:()=>Rl,c:()=>Ho,d:()=>Xa,e:()=>na,f:()=>Ja,g:()=>_c,h:()=>kh,i:()=>zu,j:()=>oo,k:()=>di,l:()=>w,m:()=>xp,p:()=>we,r:()=>z,s:()=>S,u:()=>Tt});var y=B(5861),m=B(2090),q=B(6881),oe=B(655),xe=B(1877),Pe=B(4859);const we={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},me={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const je=function De(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Le=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Xe=new m.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ie=new xe.Yd("@firebase/auth");function dt(M,..._){Ie.logLevel<=xe.in.ERROR&&Ie.error(`Auth (${q.SDK_VERSION}): ${M}`,..._)}function ze(M,..._){throw Ke(M,..._)}function Ae(M,..._){return Ke(M,..._)}function Y(M,_,b){const P=Object.assign(Object.assign({},Le()),{[_]:b});return new m.LL("auth","Firebase",P).create(_,{appName:M.name})}function ht(M,_,b){if(!(_ instanceof b))throw b.name!==_.constructor.name&&ze(M,"argument-error"),Y(M,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(M,..._){if("string"!=typeof M){const b=_[0],P=[..._.slice(1)];return P[0]&&(P[0].appName=M.name),M._errorFactory.create(b,...P)}return Xe.create(M,..._)}function fe(M,_,...b){if(!M)throw Ke(_,...b)}function Ct(M){const _="INTERNAL ASSERTION FAILED: "+M;throw dt(_),new Error(_)}function Ue(M,_){M||Ct(_)}function it(){var M;return typeof self<"u"&&(null===(M=self.location)||void 0===M?void 0:M.href)||""}function Et(){return"http:"===Ve()||"https:"===Ve()}function Ve(){var M;return typeof self<"u"&&(null===(M=self.location)||void 0===M?void 0:M.protocol)||null}class yt{constructor(_,b){this.shortDelay=_,this.longDelay=b,Ue(b>_,"Short delay should be less than long delay!"),this.isMobile=(0,m.uI)()||(0,m.b$)()}get(){return function gt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Et()||(0,m.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qe(M,_){Ue(M.emulator,"Emulator should always be set here");const{url:b}=M.emulator;return _?`${b}${_.startsWith("/")?_.slice(1):_}`:b}class We{static initialize(_,b,P){this.fetchImpl=_,b&&(this.headersImpl=b),P&&(this.responseImpl=P)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_t=new yt(3e4,6e4);function mt(M,_){return M.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:M.tenantId}):_}function St(M,_,b,P){return jt.apply(this,arguments)}function jt(){return(jt=(0,y.Z)(function*(M,_,b,P,ne={}){return hn(M,ne,(0,y.Z)(function*(){let ve={},vt={};P&&("GET"===_?vt=P:ve={body:JSON.stringify(P)});const zt=(0,m.xO)(Object.assign({key:M.config.apiKey},vt)).slice(1),In=yield M._getAdditionalHeaders();return In["Content-Type"]="application/json",M.languageCode&&(In["X-Firebase-Locale"]=M.languageCode),We.fetch()(rn(M,M.config.apiHost,b,zt),Object.assign({method:_,headers:In,referrerPolicy:"no-referrer"},ve))}))})).apply(this,arguments)}function hn(M,_,b){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,y.Z)(function*(M,_,b){M._canInitEmulator=!1;const P=Object.assign(Object.assign({},Ge),_);try{const ne=new Rn(M),ve=yield Promise.race([b(),ne.promise]);ne.clearNetworkTimeout();const vt=yield ve.json();if("needConfirmation"in vt)throw Un(M,"account-exists-with-different-credential",vt);if(ve.ok&&!("errorMessage"in vt))return vt;{const zt=ve.ok?vt.errorMessage:vt.error.message,[In,Mn]=zt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===In)throw Un(M,"credential-already-in-use",vt);if("EMAIL_EXISTS"===In)throw Un(M,"email-already-in-use",vt);if("USER_DISABLED"===In)throw Un(M,"user-disabled",vt);const lr=P[In]||In.toLowerCase().replace(/[_\s]+/g,"-");if(Mn)throw Y(M,lr,Mn);ze(M,lr)}}catch(ne){if(ne instanceof m.ZR)throw ne;ze(M,"network-request-failed",{message:String(ne)})}})).apply(this,arguments)}function ut(M,_,b,P){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,y.Z)(function*(M,_,b,P,ne={}){const ve=yield St(M,_,b,P,ne);return"mfaPendingCredential"in ve&&ze(M,"multi-factor-auth-required",{_serverResponse:ve}),ve})).apply(this,arguments)}function rn(M,_,b,P){const ne=`${_}${b}?${P}`;return M.config.emulator?qe(M.config,ne):`${M.config.apiScheme}://${ne}`}class Rn{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((b,P)=>{this.timer=setTimeout(()=>P(Ae(this.auth,"network-request-failed")),_t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(M,_,b){const P={appName:M.name};b.email&&(P.email=b.email),b.phoneNumber&&(P.phoneNumber=b.phoneNumber);const ne=Ae(M,_,P);return ne.customData._tokenResponse=b,ne}function tn(){return(tn=(0,y.Z)(function*(M,_){return St(M,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function Ht(){return(Ht=(0,y.Z)(function*(M,_){return St(M,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Zn(){return(Zn=(0,y.Z)(function*(M,_){return St(M,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function pn(M){if(M)try{const _=new Date(Number(M));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function Mr(){return(Mr=(0,y.Z)(function*(M,_=!1){const b=(0,m.m9)(M),P=yield b.getIdToken(_),ne=bi(P);fe(ne&&ne.exp&&ne.auth_time&&ne.iat,b.auth,"internal-error");const ve="object"==typeof ne.firebase?ne.firebase:void 0,vt=null==ve?void 0:ve.sign_in_provider;return{claims:ne,token:P,authTime:pn(Ri(ne.auth_time)),issuedAtTime:pn(Ri(ne.iat)),expirationTime:pn(Ri(ne.exp)),signInProvider:vt||null,signInSecondFactor:(null==ve?void 0:ve.sign_in_second_factor)||null}})).apply(this,arguments)}function Ri(M){return 1e3*Number(M)}function bi(M){const[_,b,P]=M.split(".");if(void 0===_||void 0===b||void 0===P)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const ne=(0,m.tV)(b);return ne?JSON.parse(ne):(dt("Failed to decode base64 JWT payload"),null)}catch(ne){return dt("Caught error parsing JWT payload as JSON",null==ne?void 0:ne.toString()),null}}function Xn(M,_){return wn.apply(this,arguments)}function wn(){return(wn=(0,y.Z)(function*(M,_,b=!1){if(b)return _;try{return yield _}catch(P){throw P instanceof m.ZR&&function sn({code:M}){return"auth/user-disabled"===M||"auth/user-token-expired"===M}(P)&&M.auth.currentUser===M&&(yield M.auth.signOut()),P}})).apply(this,arguments)}class Nr{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var b;if(_){const P=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),P}{this.errorBackoff=3e4;const ne=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,ne)}}schedule(_=!1){var b=this;if(!this.isRunning)return;const P=this.getInterval(_);this.timerId=setTimeout((0,y.Z)(function*(){yield b.iteration()}),P)}iteration(){var _=this;return(0,y.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null==b?void 0:b.code)&&_.schedule(!0))}_.schedule()})()}}class Xr{constructor(_,b){this.createdAt=_,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=pn(this.lastLoginAt),this.creationTime=pn(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function pr(M){return Ci.apply(this,arguments)}function Ci(){return Ci=(0,y.Z)(function*(M){var _;const b=M.auth,P=yield M.getIdToken(),ne=yield Xn(M,function cr(M,_){return Zn.apply(this,arguments)}(b,{idToken:P}));fe(null==ne?void 0:ne.users.length,b,"internal-error");const ve=ne.users[0];M._notifyReloadListener(ve);const vt=null!==(_=ve.providerUserInfo)&&void 0!==_&&_.length?function yi(M){return M.map(_=>{var{providerId:b}=_,P=(0,oe._T)(_,["providerId"]);return{providerId:b,uid:P.rawId||"",displayName:P.displayName||null,email:P.email||null,phoneNumber:P.phoneNumber||null,photoURL:P.photoUrl||null}})}(ve.providerUserInfo):[],zt=function _r(M,_){return[...M.filter(P=>!_.some(ne=>ne.providerId===P.providerId)),..._]}(M.providerData,vt),lr=!!M.isAnonymous&&!(M.email&&ve.passwordHash||null!=zt&&zt.length),ti={uid:ve.localId,displayName:ve.displayName||null,photoURL:ve.photoUrl||null,email:ve.email||null,emailVerified:ve.emailVerified||!1,phoneNumber:ve.phoneNumber||null,tenantId:ve.tenantId||null,providerData:zt,metadata:new Xr(ve.createdAt,ve.lastLoginAt),isAnonymous:lr};Object.assign(M,ti)}),Ci.apply(this,arguments)}function ai(){return(ai=(0,y.Z)(function*(M){const _=(0,m.m9)(M);yield pr(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function Di(){return(Di=(0,y.Z)(function*(M,_){const b=yield hn(M,{},(0,y.Z)(function*(){const P=(0,m.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:ne,apiKey:ve}=M.config,vt=rn(M,ne,"/v1/token",`key=${ve}`),zt=yield M._getAdditionalHeaders();return zt["Content-Type"]="application/x-www-form-urlencoded",We.fetch()(vt,{method:"POST",headers:zt,body:P})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){fe(_.idToken,"internal-error"),fe(typeof _.idToken<"u","internal-error"),fe(typeof _.refreshToken<"u","internal-error");const b="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function Dr(M){const _=bi(M);return fe(_,"internal-error"),fe(typeof _.exp<"u","internal-error"),fe(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,b)}getToken(_,b=!1){var P=this;return(0,y.Z)(function*(){return fe(!P.accessToken||P.refreshToken,_,"user-token-expired"),b||!P.accessToken||P.isExpired?P.refreshToken?(yield P.refresh(_,P.refreshToken),P.accessToken):null:P.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,b){var P=this;return(0,y.Z)(function*(){const{accessToken:ne,refreshToken:ve,expiresIn:vt}=yield function sr(M,_){return Di.apply(this,arguments)}(_,b);P.updateTokensAndExpiration(ne,ve,Number(vt))})()}updateTokensAndExpiration(_,b,P){this.refreshToken=b||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*P}static fromJSON(_,b){const{refreshToken:P,accessToken:ne,expirationTime:ve}=b,vt=new tr;return P&&(fe("string"==typeof P,"internal-error",{appName:_}),vt.refreshToken=P),ne&&(fe("string"==typeof ne,"internal-error",{appName:_}),vt.accessToken=ne),ve&&(fe("number"==typeof ve,"internal-error",{appName:_}),vt.expirationTime=ve),vt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new tr,this.toJSON())}_performRefresh(){return Ct("not implemented")}}function ni(M,_){fe("string"==typeof M||typeof M>"u","internal-error",{appName:_})}class Gr{constructor(_){var{uid:b,auth:P,stsTokenManager:ne}=_,ve=(0,oe._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=P,this.stsTokenManager=ne,this.accessToken=ne.accessToken,this.displayName=ve.displayName||null,this.email=ve.email||null,this.emailVerified=ve.emailVerified||!1,this.phoneNumber=ve.phoneNumber||null,this.photoURL=ve.photoURL||null,this.isAnonymous=ve.isAnonymous||!1,this.tenantId=ve.tenantId||null,this.providerData=ve.providerData?[...ve.providerData]:[],this.metadata=new Xr(ve.createdAt||void 0,ve.lastLoginAt||void 0)}getIdToken(_){var b=this;return(0,y.Z)(function*(){const P=yield Xn(b,b.stsTokenManager.getToken(b.auth,_));return fe(P,b.auth,"internal-error"),b.accessToken!==P&&(b.accessToken=P,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),P})()}getIdTokenResult(_){return function Mi(M){return Mr.apply(this,arguments)}(this,_)}reload(){return function kr(M){return ai.apply(this,arguments)}(this)}_assign(_){this!==_&&(fe(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(b=>Object.assign({},b)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){const b=new Gr(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}));return b.metadata._copy(this.metadata),b}_onReload(_){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,b=!1){var P=this;return(0,y.Z)(function*(){let ne=!1;_.idToken&&_.idToken!==P.stsTokenManager.accessToken&&(P.stsTokenManager.updateFromServerResponse(_),ne=!0),b&&(yield pr(P)),yield P.auth._persistUserIfCurrent(P),ne&&P.auth._notifyListenersIfCurrent(P)})()}delete(){var _=this;return(0,y.Z)(function*(){const b=yield _.getIdToken();return yield Xn(_,function fn(M,_){return tn.apply(this,arguments)}(_.auth,{idToken:b})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,b){var P,ne,ve,vt,zt,In,Mn,lr;const ti=null!==(P=b.displayName)&&void 0!==P?P:void 0,hi=null!==(ne=b.email)&&void 0!==ne?ne:void 0,lo=null!==(ve=b.phoneNumber)&&void 0!==ve?ve:void 0,Tu=null!==(vt=b.photoURL)&&void 0!==vt?vt:void 0,Vl=null!==(zt=b.tenantId)&&void 0!==zt?zt:void 0,Zu=null!==(In=b._redirectEventId)&&void 0!==In?In:void 0,Su=null!==(Mn=b.createdAt)&&void 0!==Mn?Mn:void 0,nu=null!==(lr=b.lastLoginAt)&&void 0!==lr?lr:void 0,{uid:Cc,emailVerified:nl,isAnonymous:Qu,providerData:ma,stsTokenManager:uo}=b;fe(Cc&&uo,_,"internal-error");const Au=tr.fromJSON(this.name,uo);fe("string"==typeof Cc,_,"internal-error"),ni(ti,_.name),ni(hi,_.name),fe("boolean"==typeof nl,_,"internal-error"),fe("boolean"==typeof Qu,_,"internal-error"),ni(lo,_.name),ni(Tu,_.name),ni(Vl,_.name),ni(Zu,_.name),ni(Su,_.name),ni(nu,_.name);const Dc=new Gr({uid:Cc,auth:_,email:hi,emailVerified:nl,displayName:ti,isAnonymous:Qu,photoURL:Tu,phoneNumber:lo,tenantId:Vl,stsTokenManager:Au,createdAt:Su,lastLoginAt:nu});return ma&&Array.isArray(ma)&&(Dc.providerData=ma.map(Tc=>Object.assign({},Tc))),Zu&&(Dc._redirectEventId=Zu),Dc}static _fromIdTokenResponse(_,b,P=!1){return(0,y.Z)(function*(){const ne=new tr;ne.updateFromServerResponse(b);const ve=new Gr({uid:b.localId,auth:_,stsTokenManager:ne,isAnonymous:P});return yield pr(ve),ve})()}}const ri=new Map;function Sr(M){Ue(M instanceof Function,"Expected a class definition");let _=ri.get(M);return _?(Ue(_ instanceof M,"Instance stored in cache mismatched with class"),_):(_=new M,ri.set(M,_),_)}const Ur=(()=>{class M{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(b,P){var ne=this;return(0,y.Z)(function*(){ne.storage[b]=P})()}_get(b){var P=this;return(0,y.Z)(function*(){const ne=P.storage[b];return void 0===ne?null:ne})()}_remove(b){var P=this;return(0,y.Z)(function*(){delete P.storage[b]})()}_addListener(b,P){}_removeListener(b,P){}}return M.type="NONE",M})();function Jr(M,_,b){return`firebase:${M}:${_}:${b}`}class Qe{constructor(_,b,P){this.persistence=_,this.auth=b,this.userKey=P;const{config:ne,name:ve}=this.auth;this.fullUserKey=Jr(this.userKey,ne.apiKey,ve),this.fullPersistenceKey=Jr("persistence",ne.apiKey,ve),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,y.Z)(function*(){const b=yield _.persistence._get(_.fullUserKey);return b?Gr._fromJSON(_.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var b=this;return(0,y.Z)(function*(){if(b.persistence===_)return;const P=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=_,P?b.setCurrentUser(P):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,b,P="authUser"){return(0,y.Z)(function*(){if(!b.length)return new Qe(Sr(Ur),_,P);const ne=(yield Promise.all(b.map(function(){var Mn=(0,y.Z)(function*(lr){if(yield lr._isAvailable())return lr});return function(lr){return Mn.apply(this,arguments)}}()))).filter(Mn=>Mn);let ve=ne[0]||Sr(Ur);const vt=Jr(P,_.config.apiKey,_.name);let zt=null;for(const Mn of b)try{const lr=yield Mn._get(vt);if(lr){const ti=Gr._fromJSON(_,lr);Mn!==ve&&(zt=ti),ve=Mn;break}}catch{}const In=ne.filter(Mn=>Mn._shouldAllowMigration);return ve._shouldAllowMigration&&In.length?(ve=In[0],zt&&(yield ve._set(vt,zt.toJSON())),yield Promise.all(b.map(function(){var Mn=(0,y.Z)(function*(lr){if(lr!==ve)try{yield lr._remove(vt)}catch{}});return function(lr){return Mn.apply(this,arguments)}}())),new Qe(ve,_,P)):new Qe(ve,_,P)})()}}function Be(M){const _=M.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(lt(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(he(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(Fe(_))return"Blackberry";if(Ee(_))return"Webos";if(ye(_))return"Safari";if((_.includes("chrome/")||de(_))&&!_.includes("edge/"))return"Chrome";if(Re(_))return"Android";{const P=M.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==P?void 0:P.length))return P[1]}return"Other"}function he(M=(0,m.z$)()){return/firefox\//i.test(M)}function ye(M=(0,m.z$)()){const _=M.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function de(M=(0,m.z$)()){return/crios\//i.test(M)}function lt(M=(0,m.z$)()){return/iemobile/i.test(M)}function Re(M=(0,m.z$)()){return/android/i.test(M)}function Fe(M=(0,m.z$)()){return/blackberry/i.test(M)}function Ee(M=(0,m.z$)()){return/webos/i.test(M)}function et(M=(0,m.z$)()){return/iphone|ipad|ipod/i.test(M)||/macintosh/i.test(M)&&/mobile/i.test(M)}function xt(M=(0,m.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(M)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(M)}function mn(M=(0,m.z$)()){return et(M)||Re(M)||Ee(M)||Fe(M)||/windows phone/i.test(M)||lt(M)}function Wr(M,_=[]){let b;switch(M){case"Browser":b=Be((0,m.z$)());break;case"Worker":b=`${Be((0,m.z$)())}-${M}`;break;default:b=M}const P=_.length?_.join(","):"FirebaseCore-web";return`${b}/JsCore/${q.SDK_VERSION}/${P}`}function At(){return(At=(0,y.Z)(function*(M){return(yield St(M,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function nn(M,_){return On.apply(this,arguments)}function On(){return(On=(0,y.Z)(function*(M,_){return St(M,"GET","/v2/recaptchaConfig",mt(M,_))})).apply(this,arguments)}function Jn(M){return void 0!==M&&void 0!==M.getResponse}function vr(M){return void 0!==M&&void 0!==M.enterprise}class Tn{constructor(_){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===_.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=_.recaptchaKey.split("/")[3],this.emailPasswordEnabled=_.recaptchaEnforcementState.some(b=>"EMAIL_PASSWORD_PROVIDER"===b.provider&&"OFF"!==b.enforcementState)}}function wr(M){return new Promise((_,b)=>{const P=document.createElement("script");P.setAttribute("src",M),P.onload=_,P.onerror=ne=>{const ve=Ae("internal-error");ve.customData=ne,b(ve)},P.type="text/javascript",P.charset="UTF-8",function Fr(){var M,_;return null!==(_=null===(M=document.getElementsByTagName("head"))||void 0===M?void 0:M[0])&&void 0!==_?_:document}().appendChild(P)})}function jn(M){return`__${M}${Math.floor(1e6*Math.random())}`}const ns="NO_RECAPTCHA";class as{constructor(_){this.type="recaptcha-enterprise",this.auth=Rr(_)}verify(_="verify",b=!1){var P=this;return(0,y.Z)(function*(){function ve(){return ve=(0,y.Z)(function*(zt){if(!b){if(null==zt.tenantId&&null!=zt._agentRecaptchaConfig)return zt._agentRecaptchaConfig.siteKey;if(null!=zt.tenantId&&void 0!==zt._tenantRecaptchaConfigs[zt.tenantId])return zt._tenantRecaptchaConfigs[zt.tenantId].siteKey}return new Promise(function(){var In=(0,y.Z)(function*(Mn,lr){nn(zt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ti=>{if(void 0!==ti.recaptchaKey){const hi=new Tn(ti);return null==zt.tenantId?zt._agentRecaptchaConfig=hi:zt._tenantRecaptchaConfigs[zt.tenantId]=hi,Mn(hi.siteKey)}lr(new Error("recaptcha Enterprise site key undefined"))}).catch(ti=>{lr(ti)})});return function(Mn,lr){return In.apply(this,arguments)}}())}),ve.apply(this,arguments)}function vt(zt,In,Mn){const lr=window.grecaptcha;vr(lr)?lr.enterprise.ready(()=>{lr.enterprise.execute(zt,{action:_}).then(ti=>{In(ti)}).catch(()=>{In(ns)})}):Mn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((zt,In)=>{(function ne(zt){return ve.apply(this,arguments)})(P.auth).then(Mn=>{if(!b&&vr(window.grecaptcha))vt(Mn,zt,In);else{if(typeof window>"u")return void In(new Error("RecaptchaVerifier is only supported in browser"));wr("https://www.google.com/recaptcha/enterprise.js?render="+Mn).then(()=>{vt(Mn,zt,In)}).catch(lr=>{In(lr)})}}).catch(Mn=>{In(Mn)})})})()}}function li(M,_,b){return _n.apply(this,arguments)}function _n(){return(_n=(0,y.Z)(function*(M,_,b,P=!1){const ne=new as(M);let ve;try{ve=yield ne.verify(b)}catch{ve=yield ne.verify(b,!0)}const vt=Object.assign({},_);return Object.assign(vt,P?{captchaResp:ve}:{captchaResponse:ve}),Object.assign(vt,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(vt,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),vt})).apply(this,arguments)}class gr{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,b){const P=ve=>new Promise((vt,zt)=>{try{vt(_(ve))}catch(In){zt(In)}});P.onAbort=b,this.queue.push(P);const ne=this.queue.length-1;return()=>{this.queue[ne]=()=>Promise.resolve()}}runMiddleware(_){var b=this;return(0,y.Z)(function*(){if(b.auth.currentUser===_)return;const P=[];try{for(const ne of b.queue)yield ne(_),ne.onAbort&&P.push(ne.onAbort)}catch(ne){P.reverse();for(const ve of P)try{ve()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:null==ne?void 0:ne.message})}})()}}class si{constructor(_,b,P,ne){this.app=_,this.heartbeatServiceProvider=b,this.appCheckServiceProvider=P,this.config=ne,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vi(this),this.idTokenSubscription=new vi(this),this.beforeStateQueue=new gr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=ne.sdkClientVersion}_initializeWithPersistence(_,b){var P=this;return b&&(this._popupRedirectResolver=Sr(b)),this._initializationPromise=this.queue((0,y.Z)(function*(){var ne,ve;if(!P._deleted&&(P.persistenceManager=yield Qe.create(P,_),!P._deleted)){if(null!==(ne=P._popupRedirectResolver)&&void 0!==ne&&ne._shouldInitProactively)try{yield P._popupRedirectResolver._initialize(P)}catch{}yield P.initializeCurrentUser(b),P.lastNotifiedUid=(null===(ve=P.currentUser)||void 0===ve?void 0:ve.uid)||null,!P._deleted&&(P._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,y.Z)(function*(){if(_._deleted)return;const b=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||b){if(_.currentUser&&b&&_.currentUser.uid===b.uid)return _._currentUser._assign(b),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(b,!0)}})()}initializeCurrentUser(_){var b=this;return(0,y.Z)(function*(){var P;const ne=yield b.assertedPersistence.getCurrentUser();let ve=ne,vt=!1;if(_&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const zt=null===(P=b.redirectUser)||void 0===P?void 0:P._redirectEventId,In=null==ve?void 0:ve._redirectEventId,Mn=yield b.tryRedirectSignIn(_);(!zt||zt===In)&&null!=Mn&&Mn.user&&(ve=Mn.user,vt=!0)}if(!ve)return b.directlySetCurrentUser(null);if(!ve._redirectEventId){if(vt)try{yield b.beforeStateQueue.runMiddleware(ve)}catch(zt){ve=ne,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(zt))}return ve?b.reloadAndSetCurrentUserOrClear(ve):b.directlySetCurrentUser(null)}return fe(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===ve._redirectEventId?b.directlySetCurrentUser(ve):b.reloadAndSetCurrentUserOrClear(ve)})()}tryRedirectSignIn(_){var b=this;return(0,y.Z)(function*(){let P=null;try{P=yield b._popupRedirectResolver._completeRedirectFn(b,_,!0)}catch{yield b._setRedirectUser(null)}return P})()}reloadAndSetCurrentUserOrClear(_){var b=this;return(0,y.Z)(function*(){try{yield pr(_)}catch(P){if("auth/network-request-failed"!==(null==P?void 0:P.code))return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function wt(){if(typeof navigator>"u")return null;const M=navigator;return M.languages&&M.languages[0]||M.language||null}()}_delete(){var _=this;return(0,y.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var b=this;return(0,y.Z)(function*(){const P=_?(0,m.m9)(_):null;return P&&fe(P.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(P&&P._clone(b))})()}_updateCurrentUser(_,b=!1){var P=this;return(0,y.Z)(function*(){if(!P._deleted)return _&&fe(P.tenantId===_.tenantId,P,"tenant-id-mismatch"),b||(yield P.beforeStateQueue.runMiddleware(_)),P.queue((0,y.Z)(function*(){yield P.directlySetCurrentUser(_),P.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,y.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var b=this;return this.queue((0,y.Z)(function*(){yield b.assertedPersistence.setPersistence(Sr(_))}))}initializeRecaptchaConfig(){var _=this;return(0,y.Z)(function*(){const b=yield nn(_,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),P=new Tn(b);null==_.tenantId?_._agentRecaptchaConfig=P:_._tenantRecaptchaConfigs[_.tenantId]=P,P.emailPasswordEnabled&&new as(_).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new m.LL("auth","Firebase",_())}onAuthStateChanged(_,b,P){return this.registerStateListener(this.authStateSubscription,_,b,P)}beforeAuthStateChanged(_,b){return this.beforeStateQueue.pushCallback(_,b)}onIdTokenChanged(_,b,P){return this.registerStateListener(this.idTokenSubscription,_,b,P)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,b){var P=this;return(0,y.Z)(function*(){const ne=yield P.getOrInitRedirectPersistenceManager(b);return null===_?ne.removeCurrentUser():ne.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var b=this;return(0,y.Z)(function*(){if(!b.redirectPersistenceManager){const P=_&&Sr(_)||b._popupRedirectResolver;fe(P,b,"argument-error"),b.redirectPersistenceManager=yield Qe.create(b,[Sr(P._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(_){var b=this;return(0,y.Z)(function*(){var P,ne;return b._isInitialized&&(yield b.queue((0,y.Z)(function*(){}))),(null===(P=b._currentUser)||void 0===P?void 0:P._redirectEventId)===_?b._currentUser:(null===(ne=b.redirectUser)||void 0===ne?void 0:ne._redirectEventId)===_?b.redirectUser:null})()}_persistUserIfCurrent(_){var b=this;return(0,y.Z)(function*(){if(_===b.currentUser)return b.queue((0,y.Z)(function*(){return b.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const P=null!==(b=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==P&&(this.lastNotifiedUid=P,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,b,P,ne){if(this._deleted)return()=>{};const ve="function"==typeof b?b:b.next.bind(b),vt=this._isInitialized?Promise.resolve():this._initializationPromise;return fe(vt,this,"internal-error"),vt.then(()=>ve(this.currentUser)),"function"==typeof b?_.addObserver(b,P,ne):_.addObserver(b)}directlySetCurrentUser(_){var b=this;return(0,y.Z)(function*(){b.currentUser&&b.currentUser!==_&&b._currentUser._stopProactiveRefresh(),_&&b.isProactiveRefreshEnabled&&_._startProactiveRefresh(),b.currentUser=_,_?yield b.assertedPersistence.setCurrentUser(_):yield b.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=Wr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,y.Z)(function*(){var b;const P={"X-Client-Version":_.clientVersion};_.app.options.appId&&(P["X-Firebase-gmpid"]=_.app.options.appId);const ne=yield null===(b=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();ne&&(P["X-Firebase-Client"]=ne);const ve=yield _._getAppCheckToken();return ve&&(P["X-Firebase-AppCheck"]=ve),P})()}_getAppCheckToken(){var _=this;return(0,y.Z)(function*(){var b;const P=yield null===(b=_.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getToken();return null!=P&&P.error&&function ae(M,..._){Ie.logLevel<=xe.in.WARN&&Ie.warn(`Auth (${q.SDK_VERSION}): ${M}`,..._)}(`Error while retrieving App Check token: ${P.error}`),null==P?void 0:P.token})()}}function Rr(M){return(0,m.m9)(M)}class vi{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,m.ne)(b=>this.observer=b)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ei(M,_,b){const P=Rr(M);fe(P._canInitEmulator,P,"emulator-config-failed"),fe(/^https?:\/\//.test(_),P,"invalid-emulator-scheme");const ne=!(null==b||!b.disableWarnings),ve=ce(_),{host:vt,port:zt}=function Me(M){const _=ce(M),b=/(\/\/)?([^?#/]+)/.exec(M.substr(_.length));if(!b)return{host:"",port:null};const P=b[2].split("@").pop()||"",ne=/^(\[[^\]]+\])(:|$)/.exec(P);if(ne){const ve=ne[1];return{host:ve,port:Ye(P.substr(ve.length+1))}}{const[ve,vt]=P.split(":");return{host:ve,port:Ye(vt)}}}(_);P.config.emulator={url:`${ve}//${vt}${null===zt?"":`:${zt}`}/`},P.settings.appVerificationDisabledForTesting=!0,P.emulatorConfig=Object.freeze({host:vt,port:zt,protocol:ve.replace(":",""),options:Object.freeze({disableWarnings:ne})}),ne||function be(){function M(){const _=document.createElement("p"),b=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",M):M())}()}function ce(M){const _=M.indexOf(":");return _<0?"":M.substr(0,_+1)}function Ye(M){if(!M)return null;const _=Number(M);return isNaN(_)?null:_}class Je{constructor(_,b){this.providerId=_,this.signInMethod=b}toJSON(){return Ct("not implemented")}_getIdTokenResponse(_){return Ct("not implemented")}_linkToIdToken(_,b){return Ct("not implemented")}_getReauthenticationResolver(_){return Ct("not implemented")}}function nt(M,_){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,y.Z)(function*(M,_){return St(M,"POST","/v1/accounts:resetPassword",mt(M,_))})).apply(this,arguments)}function $t(M,_){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,y.Z)(function*(M,_){return St(M,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function cn(){return(cn=(0,y.Z)(function*(M,_){return St(M,"POST","/v1/accounts:update",mt(M,_))})).apply(this,arguments)}function Qn(M,_){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,y.Z)(function*(M,_){return ut(M,"POST","/v1/accounts:signInWithPassword",mt(M,_))})).apply(this,arguments)}function ar(M,_){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,y.Z)(function*(M,_){return St(M,"POST","/v1/accounts:sendOobCode",mt(M,_))})).apply(this,arguments)}function ct(){return(ct=(0,y.Z)(function*(M,_){return ar(M,_)})).apply(this,arguments)}function st(M,_){return It.apply(this,arguments)}function It(){return(It=(0,y.Z)(function*(M,_){return ar(M,_)})).apply(this,arguments)}function Kt(M,_){return en.apply(this,arguments)}function en(){return(en=(0,y.Z)(function*(M,_){return ar(M,_)})).apply(this,arguments)}function Hn(){return(Hn=(0,y.Z)(function*(M,_){return ar(M,_)})).apply(this,arguments)}function qr(){return(qr=(0,y.Z)(function*(M,_){return ut(M,"POST","/v1/accounts:signInWithEmailLink",mt(M,_))})).apply(this,arguments)}function Ws(){return(Ws=(0,y.Z)(function*(M,_){return ut(M,"POST","/v1/accounts:signInWithEmailLink",mt(M,_))})).apply(this,arguments)}class Yr extends Je{constructor(_,b,P,ne=null){super("password",P),this._email=_,this._password=b,this._tenantId=ne}static _fromEmailAndPassword(_,b){return new Yr(_,b,"password")}static _fromEmailAndCode(_,b,P=null){return new Yr(_,b,"emailLink",P)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const b="string"==typeof _?JSON.parse(_):_;if(null!=b&&b.email&&null!=b&&b.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(_){var b=this;return(0,y.Z)(function*(){var P;switch(b.signInMethod){case"password":const ne={returnSecureToken:!0,email:b._email,password:b._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(P=_._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const ve=yield li(_,ne,"signInWithPassword");return Qn(_,ve)}return Qn(_,ne).catch(function(){var ve=(0,y.Z)(function*(vt){if("auth/missing-recaptcha-token"===vt.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const zt=yield li(_,ne,"signInWithPassword");return Qn(_,zt)}return Promise.reject(vt)});return function(vt){return ve.apply(this,arguments)}}());case"emailLink":return function mr(M,_){return qr.apply(this,arguments)}(_,{email:b._email,oobCode:b._password});default:ze(_,"internal-error")}})()}_linkToIdToken(_,b){var P=this;return(0,y.Z)(function*(){switch(P.signInMethod){case"password":return $t(_,{idToken:b,returnSecureToken:!0,email:P._email,password:P._password});case"emailLink":return function bs(M,_){return Ws.apply(this,arguments)}(_,{idToken:b,email:P._email,oobCode:P._password});default:ze(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Ks(M,_){return ho.apply(this,arguments)}function ho(){return(ho=(0,y.Z)(function*(M,_){return ut(M,"POST","/v1/accounts:signInWithIdp",mt(M,_))})).apply(this,arguments)}class ms extends Je{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const b=new ms(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(b.idToken=_.idToken),_.accessToken&&(b.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(b.nonce=_.nonce),_.pendingToken&&(b.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(b.accessToken=_.oauthToken,b.secret=_.oauthTokenSecret):ze("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const b="string"==typeof _?JSON.parse(_):_,{providerId:P,signInMethod:ne}=b,ve=(0,oe._T)(b,["providerId","signInMethod"]);if(!P||!ne)return null;const vt=new ms(P,ne);return vt.idToken=ve.idToken||void 0,vt.accessToken=ve.accessToken||void 0,vt.secret=ve.secret,vt.nonce=ve.nonce,vt.pendingToken=ve.pendingToken||null,vt}_getIdTokenResponse(_){return Ks(_,this.buildRequest())}_linkToIdToken(_,b){const P=this.buildRequest();return P.idToken=b,Ks(_,P)}_getReauthenticationResolver(_){const b=this.buildRequest();return b.autoCreate=!1,Ks(_,b)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),_.postBody=(0,m.xO)(b)}return _}}function fo(){return(fo=(0,y.Z)(function*(M,_){return St(M,"POST","/v1/accounts:sendVerificationCode",mt(M,_))})).apply(this,arguments)}function ko(){return(ko=(0,y.Z)(function*(M,_){return ut(M,"POST","/v1/accounts:signInWithPhoneNumber",mt(M,_))})).apply(this,arguments)}function Os(){return(Os=(0,y.Z)(function*(M,_){const b=yield ut(M,"POST","/v1/accounts:signInWithPhoneNumber",mt(M,_));if(b.temporaryProof)throw Un(M,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const Qo={USER_NOT_FOUND:"user-not-found"};function Ea(){return(Ea=(0,y.Z)(function*(M,_){return ut(M,"POST","/v1/accounts:signInWithPhoneNumber",mt(M,Object.assign(Object.assign({},_),{operation:"REAUTH"})),Qo)})).apply(this,arguments)}class ls extends Je{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,b){return new ls({verificationId:_,verificationCode:b})}static _fromTokenResponse(_,b){return new ls({phoneNumber:_,temporaryProof:b})}_getIdTokenResponse(_){return function Zo(M,_){return ko.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,b){return function Fo(M,_){return Os.apply(this,arguments)}(_,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Ba(M,_){return Ea.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:b,verificationId:P,verificationCode:ne}=this.params;return _&&b?{temporaryProof:_,phoneNumber:b}:{sessionInfo:P,code:ne}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:b,verificationCode:P,phoneNumber:ne,temporaryProof:ve}=_;return P||b||ne||ve?new ls({verificationId:b,verificationCode:P,phoneNumber:ne,temporaryProof:ve}):null}}class us{constructor(_){var b,P,ne,ve,vt,zt;const In=(0,m.zd)((0,m.pd)(_)),Mn=null!==(b=In.apiKey)&&void 0!==b?b:null,lr=null!==(P=In.oobCode)&&void 0!==P?P:null,ti=function So(M){switch(M){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ne=In.mode)&&void 0!==ne?ne:null);fe(Mn&&lr&&ti,"argument-error"),this.apiKey=Mn,this.operation=ti,this.code=lr,this.continueUrl=null!==(ve=In.continueUrl)&&void 0!==ve?ve:null,this.languageCode=null!==(vt=In.languageCode)&&void 0!==vt?vt:null,this.tenantId=null!==(zt=In.tenantId)&&void 0!==zt?zt:null}static parseLink(_){const b=function $a(M){const _=(0,m.zd)((0,m.pd)(M)).link,b=_?(0,m.zd)((0,m.pd)(_)).deep_link_id:null,P=(0,m.zd)((0,m.pd)(M)).deep_link_id;return(P?(0,m.zd)((0,m.pd)(P)).link:null)||P||b||_||M}(_);try{return new us(b)}catch{return null}}}let Vs=(()=>{class M{constructor(){this.providerId=M.PROVIDER_ID}static credential(b,P){return Yr._fromEmailAndPassword(b,P)}static credentialWithLink(b,P){const ne=us.parseLink(P);return fe(ne,"argument-error"),Yr._fromEmailAndCode(b,ne.code,ne.tenantId)}}return M.PROVIDER_ID="password",M.EMAIL_PASSWORD_SIGN_IN_METHOD="password",M.EMAIL_LINK_SIGN_IN_METHOD="emailLink",M})();class ys{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class js extends ys{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class pi extends js{static credentialFromJSON(_){const b="string"==typeof _?JSON.parse(_):_;return fe("providerId"in b&&"signInMethod"in b,"argument-error"),ms._fromParams(b)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return fe(_.idToken||_.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return pi.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return pi.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:P,oauthTokenSecret:ne,pendingToken:ve,nonce:vt,providerId:zt}=_;if(!P&&!ne&&!b&&!ve||!zt)return null;try{return new pi(zt)._credential({idToken:b,accessToken:P,nonce:vt,pendingToken:ve})}catch{return null}}}let po=(()=>{class M extends js{constructor(){super("facebook.com")}static credential(b){return ms._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return M.credentialFromTaggedObject(b)}static credentialFromError(b){return M.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return M.credential(b.oauthAccessToken)}catch{return null}}}return M.FACEBOOK_SIGN_IN_METHOD="facebook.com",M.PROVIDER_ID="facebook.com",M})(),Lo=(()=>{class M extends js{constructor(){super("google.com"),this.addScope("profile")}static credential(b,P){return ms._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:P})}static credentialFromResult(b){return M.credentialFromTaggedObject(b)}static credentialFromError(b){return M.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:P,oauthAccessToken:ne}=b;if(!P&&!ne)return null;try{return M.credential(P,ne)}catch{return null}}}return M.GOOGLE_SIGN_IN_METHOD="google.com",M.PROVIDER_ID="google.com",M})(),no=(()=>{class M extends js{constructor(){super("github.com")}static credential(b){return ms._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return M.credentialFromTaggedObject(b)}static credentialFromError(b){return M.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return M.credential(b.oauthAccessToken)}catch{return null}}}return M.GITHUB_SIGN_IN_METHOD="github.com",M.PROVIDER_ID="github.com",M})();class Bo extends Je{constructor(_,b){super(_,_),this.pendingToken=b}_getIdTokenResponse(_){return Ks(_,this.buildRequest())}_linkToIdToken(_,b){const P=this.buildRequest();return P.idToken=b,Ks(_,P)}_getReauthenticationResolver(_){const b=this.buildRequest();return b.autoCreate=!1,Ks(_,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const b="string"==typeof _?JSON.parse(_):_,{providerId:P,signInMethod:ne,pendingToken:ve}=b;return P&&ne&&ve&&P===ne?new Bo(P,ve):null}static _create(_,b){return new Bo(_,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ua extends ys{constructor(_){fe(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return ua.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return ua.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const b=Bo.fromJSON(_);return fe(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:b,providerId:P}=_;if(!b||!P)return null;try{return Bo._create(P,b)}catch{return null}}}let wa=(()=>{class M extends js{constructor(){super("twitter.com")}static credential(b,P){return ms._fromParams({providerId:M.PROVIDER_ID,signInMethod:M.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:P})}static credentialFromResult(b){return M.credentialFromTaggedObject(b)}static credentialFromError(b){return M.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:P,oauthTokenSecret:ne}=b;if(!P||!ne)return null;try{return M.credential(P,ne)}catch{return null}}}return M.TWITTER_SIGN_IN_METHOD="twitter.com",M.PROVIDER_ID="twitter.com",M})();function $o(M,_){return go.apply(this,arguments)}function go(){return(go=(0,y.Z)(function*(M,_){return ut(M,"POST","/v1/accounts:signUp",mt(M,_))})).apply(this,arguments)}class Ei{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,b,P,ne=!1){return(0,y.Z)(function*(){const ve=yield Gr._fromIdTokenResponse(_,P,ne),vt=Xo(P);return new Ei({user:ve,providerId:vt,_tokenResponse:P,operationType:b})})()}static _forOperation(_,b,P){return(0,y.Z)(function*(){yield _._updateTokensIfNecessary(P,!0);const ne=Xo(P);return new Ei({user:_,providerId:ne,_tokenResponse:P,operationType:b})})()}}function Xo(M){return M.providerId?M.providerId:"phoneNumber"in M?"phone":null}function _s(M){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,y.Z)(function*(M){var _;const b=Rr(M);if(yield b._initializationPromise,null!==(_=b.currentUser)&&void 0!==_&&_.isAnonymous)return new Ei({user:b.currentUser,providerId:null,operationType:"signIn"});const P=yield $o(b,{returnSecureToken:!0}),ne=yield Ei._fromIdTokenResponse(b,"signIn",P,!0);return yield b._updateCurrentUser(ne.user),ne})).apply(this,arguments)}class rs extends m.ZR{constructor(_,b,P,ne){var ve;super(b.code,b.message),this.operationType=P,this.user=ne,Object.setPrototypeOf(this,rs.prototype),this.customData={appName:_.name,tenantId:null!==(ve=_.tenantId)&&void 0!==ve?ve:void 0,_serverResponse:b.customData._serverResponse,operationType:P}}static _fromErrorAndOperation(_,b,P,ne){return new rs(_,b,P,ne)}}function Ao(M,_,b,P){return("reauthenticate"===_?b._getReauthenticationResolver(M):b._getIdTokenResponse(M)).catch(ve=>{throw"auth/multi-factor-auth-required"===ve.code?rs._fromErrorAndOperation(M,ve,_,P):ve})}function cs(M){return new Set(M.map(({providerId:_})=>_).filter(_=>!!_))}function Va(M,_){return C.apply(this,arguments)}function C(){return C=(0,y.Z)(function*(M,_){const b=(0,m.m9)(M);yield K(!0,b,_);const{providerUserInfo:P}=yield function En(M,_){return Ht.apply(this,arguments)}(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[_]}),ne=cs(P||[]);return b.providerData=b.providerData.filter(ve=>ne.has(ve.providerId)),ne.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b}),C.apply(this,arguments)}function Q(M,_){return D.apply(this,arguments)}function D(){return(D=(0,y.Z)(function*(M,_,b=!1){const P=yield Xn(M,_._linkToIdToken(M.auth,yield M.getIdToken()),b);return Ei._forOperation(M,"link",P)})).apply(this,arguments)}function K(M,_,b){return _e.apply(this,arguments)}function _e(){return(_e=(0,y.Z)(function*(M,_,b){yield pr(_);const ne=!1===M?"provider-already-linked":"no-such-provider";fe(cs(_.providerData).has(b)===M,_.auth,ne)})).apply(this,arguments)}function Qt(M,_){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,y.Z)(function*(M,_,b=!1){const{auth:P}=M,ne="reauthenticate";try{const ve=yield Xn(M,Ao(P,ne,_,M),b);fe(ve.idToken,P,"internal-error");const vt=bi(ve.idToken);fe(vt,P,"internal-error");const{sub:zt}=vt;return fe(M.uid===zt,P,"user-mismatch"),Ei._forOperation(M,ne,ve)}catch(ve){throw"auth/user-not-found"===(null==ve?void 0:ve.code)&&ze(P,"user-mismatch"),ve}})).apply(this,arguments)}function Kn(M,_){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,y.Z)(function*(M,_,b=!1){const P="signIn",ne=yield Ao(M,P,_),ve=yield Ei._fromIdTokenResponse(M,P,ne);return b||(yield M._updateCurrentUser(ve.user)),ve})).apply(this,arguments)}function Nn(M,_){return ts.apply(this,arguments)}function ts(){return(ts=(0,y.Z)(function*(M,_){return Kn(Rr(M),_)})).apply(this,arguments)}function W(M,_){return H.apply(this,arguments)}function H(){return(H=(0,y.Z)(function*(M,_){const b=(0,m.m9)(M);return yield K(!1,b,_.providerId),Q(b,_)})).apply(this,arguments)}function L(M,_){return ue.apply(this,arguments)}function ue(){return(ue=(0,y.Z)(function*(M,_){return Qt((0,m.m9)(M),_)})).apply(this,arguments)}function Bn(){return(Bn=(0,y.Z)(function*(M,_){return ut(M,"POST","/v1/accounts:signInWithCustomToken",mt(M,_))})).apply(this,arguments)}function Oi(M,_){return Vt.apply(this,arguments)}function Vt(){return Vt=(0,y.Z)(function*(M,_){const b=Rr(M),P=yield function Ft(M,_){return Bn.apply(this,arguments)}(b,{token:_,returnSecureToken:!0}),ne=yield Ei._fromIdTokenResponse(b,"signIn",P);return yield b._updateCurrentUser(ne.user),ne}),Vt.apply(this,arguments)}class $n{constructor(_,b){this.factorId=_,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(_,b){return"phoneInfo"in b?Ia._fromServerResponse(_,b):"totpInfo"in b?Dl._fromServerResponse(_,b):ze(_,"internal-error")}}class Ia extends $n{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,b){return new Ia(b)}}class Dl extends $n{constructor(_){super("totp",_)}static _fromServerResponse(_,b){return new Dl(b)}}function is(M,_,b){var P;fe((null===(P=b.url)||void 0===P?void 0:P.length)>0,M,"invalid-continue-uri"),fe(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,M,"invalid-dynamic-link-domain"),_.continueUrl=b.url,_.dynamicLinkDomain=b.dynamicLinkDomain,_.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(fe(b.iOS.bundleId.length>0,M,"missing-ios-bundle-id"),_.iOSBundleId=b.iOS.bundleId),b.android&&(fe(b.android.packageName.length>0,M,"missing-android-pkg-name"),_.androidInstallApp=b.android.installApp,_.androidMinimumVersionCode=b.android.minimumVersion,_.androidPackageName=b.android.packageName)}function fu(M,_,b){return ja.apply(this,arguments)}function ja(){return ja=(0,y.Z)(function*(M,_,b){var P;const ne=Rr(M),ve={requestType:"PASSWORD_RESET",email:_,clientType:"CLIENT_TYPE_WEB"};if(null!==(P=ne._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const vt=yield li(ne,ve,"getOobCode",!0);b&&is(ne,vt,b),yield st(ne,vt)}else b&&is(ne,ve,b),yield st(ne,ve).catch(function(){var vt=(0,y.Z)(function*(zt){if("auth/missing-recaptcha-token"!==zt.code)return Promise.reject(zt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const In=yield li(ne,ve,"getOobCode",!0);b&&is(ne,In,b),yield st(ne,In)}});return function(zt){return vt.apply(this,arguments)}}())}),ja.apply(this,arguments)}function ro(M,_,b){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,y.Z)(function*(M,_,b){yield nt((0,m.m9)(M),{oobCode:_,newPassword:b})})).apply(this,arguments)}function cl(M,_){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,y.Z)(function*(M,_){yield function Wt(M,_){return cn.apply(this,arguments)}((0,m.m9)(M),{oobCode:_})}),Sl.apply(this,arguments)}function Ns(M,_){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,y.Z)(function*(M,_){const b=(0,m.m9)(M),P=yield nt(b,{oobCode:_}),ne=P.requestType;switch(fe(ne,b,"internal-error"),ne){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(P.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(P.mfaInfo,b,"internal-error");default:fe(P.email,b,"internal-error")}let ve=null;return P.mfaInfo&&(ve=$n._fromServerResponse(Rr(b),P.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.newEmail:P.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.email:P.newEmail)||null,multiFactorInfo:ve},operation:ne}})).apply(this,arguments)}function ds(M,_){return ks.apply(this,arguments)}function ks(){return(ks=(0,y.Z)(function*(M,_){const{data:b}=yield Ns((0,m.m9)(M),_);return b.email})).apply(this,arguments)}function io(M,_,b){return mo.apply(this,arguments)}function mo(){return mo=(0,y.Z)(function*(M,_,b){var P;const ne=Rr(M),ve={returnSecureToken:!0,email:_,password:b,clientType:"CLIENT_TYPE_WEB"};let vt;if(null!==(P=ne._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const Mn=yield li(ne,ve,"signUpPassword");vt=$o(ne,Mn)}else vt=$o(ne,ve).catch(function(){var Mn=(0,y.Z)(function*(lr){if("auth/missing-recaptcha-token"===lr.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ti=yield li(ne,ve,"signUpPassword");return $o(ne,ti)}return Promise.reject(lr)});return function(lr){return Mn.apply(this,arguments)}}());const zt=yield vt.catch(Mn=>Promise.reject(Mn)),In=yield Ei._fromIdTokenResponse(ne,"signIn",zt);return yield ne._updateCurrentUser(In.user),In}),mo.apply(this,arguments)}function Uo(M,_,b){return Nn((0,m.m9)(M),Vs.credential(_,b))}function za(M,_,b){return ca.apply(this,arguments)}function ca(){return ca=(0,y.Z)(function*(M,_,b){var P;const ne=Rr(M),ve={requestType:"EMAIL_SIGNIN",email:_,clientType:"CLIENT_TYPE_WEB"};function vt(zt,In){fe(In.handleCodeInApp,ne,"argument-error"),In&&is(ne,zt,In)}if(null!==(P=ne._getRecaptchaConfig())&&void 0!==P&&P.emailPasswordEnabled){const zt=yield li(ne,ve,"getOobCode",!0);vt(zt,b),yield Kt(ne,zt)}else vt(ve,b),yield Kt(ne,ve).catch(function(){var zt=(0,y.Z)(function*(In){if("auth/missing-recaptcha-token"!==In.code)return Promise.reject(In);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Mn=yield li(ne,ve,"getOobCode",!0);vt(Mn,b),yield Kt(ne,Mn)}});return function(In){return zt.apply(this,arguments)}}())}),ca.apply(this,arguments)}function dl(M,_){const b=us.parseLink(_);return"EMAIL_SIGNIN"===(null==b?void 0:b.operation)}function Al(M,_,b){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,y.Z)(function*(M,_,b){const P=(0,m.m9)(M),ne=Vs.credentialWithLink(_,b||it());return fe(ne._tenantId===(P.tenantId||null),P,"tenant-id-mismatch"),Nn(P,ne)})).apply(this,arguments)}function ha(){return(ha=(0,y.Z)(function*(M,_){return St(M,"POST","/v1/accounts:createAuthUri",mt(M,_))})).apply(this,arguments)}function Ga(M,_){return yo.apply(this,arguments)}function yo(){return yo=(0,y.Z)(function*(M,_){const P={identifier:_,continueUri:Et()?it():"http://localhost"},{signinMethods:ne}=yield function da(M,_){return ha.apply(this,arguments)}((0,m.m9)(M),P);return ne||[]}),yo.apply(this,arguments)}function Jo(M,_){return _o.apply(this,arguments)}function _o(){return _o=(0,y.Z)(function*(M,_){const b=(0,m.m9)(M),ne={requestType:"VERIFY_EMAIL",idToken:yield M.getIdToken()};_&&is(b.auth,ne,_);const{email:ve}=yield function Li(M,_){return ct.apply(this,arguments)}(b.auth,ne);ve!==M.email&&(yield M.reload())}),_o.apply(this,arguments)}function Wa(M,_,b){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,y.Z)(function*(M,_,b){const P=(0,m.m9)(M),ve={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield M.getIdToken(),newEmail:_};b&&is(P.auth,ve,b);const{email:vt}=yield function rr(M,_){return Hn.apply(this,arguments)}(P.auth,ve);vt!==M.email&&(yield M.reload())}),Ka.apply(this,arguments)}function Hs(){return(Hs=(0,y.Z)(function*(M,_){return St(M,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Xl(M,_){return hl.apply(this,arguments)}function hl(){return hl=(0,y.Z)(function*(M,{displayName:_,photoURL:b}){if(void 0===_&&void 0===b)return;const P=(0,m.m9)(M),ve={idToken:yield P.getIdToken(),displayName:_,photoUrl:b,returnSecureToken:!0},vt=yield Xn(P,function ba(M,_){return Hs.apply(this,arguments)}(P.auth,ve));P.displayName=vt.displayName||null,P.photoURL=vt.photoUrl||null;const zt=P.providerData.find(({providerId:In})=>"password"===In);zt&&(zt.displayName=P.displayName,zt.photoURL=P.photoURL),yield P._updateTokensIfNecessary(vt)}),hl.apply(this,arguments)}function hs(M,_){return qs((0,m.m9)(M),_,null)}function ss(M,_){return qs((0,m.m9)(M),null,_)}function qs(M,_,b){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,y.Z)(function*(M,_,b){const{auth:P}=M,ve={idToken:yield M.getIdToken(),returnSecureToken:!0};_&&(ve.email=_),b&&(ve.password=b);const vt=yield Xn(M,$t(P,ve));yield M._updateTokensIfNecessary(vt,!0)})).apply(this,arguments)}class qa{constructor(_,b,P={}){this.isNewUser=_,this.providerId=b,this.profile=P}}class Mo extends qa{constructor(_,b,P,ne){super(_,b,P),this.username=ne}}class gc extends qa{constructor(_,b){super(_,"facebook.com",b)}}class Es extends Mo{constructor(_,b){super(_,"github.com",b,"string"==typeof(null==b?void 0:b.login)?null==b?void 0:b.login:null)}}class Vo extends qa{constructor(_,b){super(_,"google.com",b)}}class ii extends Mo{constructor(_,b,P){super(_,"twitter.com",b,P)}}function Vu(M){const{user:_,_tokenResponse:b}=M;return _.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function vs(M){var _,b;if(!M)return null;const{providerId:P}=M,ne=M.rawUserInfo?JSON.parse(M.rawUserInfo):{},ve=M.isNewUser||"identitytoolkit#SignupNewUserResponse"===M.kind;if(!P&&null!=M&&M.idToken){const vt=null===(b=null===(_=bi(M.idToken))||void 0===_?void 0:_.firebase)||void 0===b?void 0:b.sign_in_provider;if(vt)return new qa(ve,"anonymous"!==vt&&"custom"!==vt?vt:null)}if(!P)return null;switch(P){case"facebook.com":return new gc(ve,ne);case"github.com":return new Es(ve,ne);case"google.com":return new Vo(ve,ne);case"twitter.com":return new ii(ve,ne,M.screenName||null);case"custom":case"anonymous":return new qa(ve,null);default:return new qa(ve,P,ne)}}(b)}class Vr{constructor(_,b,P){this.type=_,this.credential=b,this.auth=P}static _fromIdtoken(_,b){return new Vr("enroll",_,b)}static _fromMfaPendingCredential(_){return new Vr("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var b,P;if(null!=_&&_.multiFactorSession){if(null!==(b=_.multiFactorSession)&&void 0!==b&&b.pendingCredential)return Vr._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(P=_.multiFactorSession)&&void 0!==P&&P.idToken)return Vr._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Br{constructor(_,b,P){this.session=_,this.hints=b,this.signInResolver=P}static _fromError(_,b){const P=Rr(_),ne=b.customData._serverResponse,ve=(ne.mfaInfo||[]).map(zt=>$n._fromServerResponse(P,zt));fe(ne.mfaPendingCredential,P,"internal-error");const vt=Vr._fromMfaPendingCredential(ne.mfaPendingCredential);return new Br(vt,ve,function(){var zt=(0,y.Z)(function*(In){const Mn=yield In._process(P,vt);delete ne.mfaInfo,delete ne.mfaPendingCredential;const lr=Object.assign(Object.assign({},ne),{idToken:Mn.idToken,refreshToken:Mn.refreshToken});switch(b.operationType){case"signIn":const ti=yield Ei._fromIdTokenResponse(P,b.operationType,lr);return yield P._updateCurrentUser(ti.user),ti;case"reauthenticate":return fe(b.user,P,"internal-error"),Ei._forOperation(b.user,b.operationType,lr);default:ze(P,"internal-error")}});return function(In){return zt.apply(this,arguments)}}())}resolveSignIn(_){var b=this;return(0,y.Z)(function*(){return b.signInResolver(_)})()}}function Er(M,_){var b;const P=(0,m.m9)(M),ne=_;return fe(_.customData.operationType,P,"argument-error"),fe(null===(b=ne.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,P,"argument-error"),Br._fromError(P,ne)}class Ys{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(P=>$n._fromServerResponse(_.auth,P)))})}static _fromUser(_){return new Ys(_)}getSession(){var _=this;return(0,y.Z)(function*(){return Vr._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,b){var P=this;return(0,y.Z)(function*(){const ne=_,ve=yield P.getSession(),vt=yield Xn(P.user,ne._process(P.user.auth,ve,b));return yield P.user._updateTokensIfNecessary(vt),P.user.reload()})()}unenroll(_){var b=this;return(0,y.Z)(function*(){const P="string"==typeof _?_:_.uid,ne=yield b.user.getIdToken();try{const ve=yield Xn(b.user,function Cs(M,_){return St(M,"POST","/v2/accounts/mfaEnrollment:withdraw",mt(M,_))}(b.user.auth,{idToken:ne,mfaEnrollmentId:P}));b.enrolledFactors=b.enrolledFactors.filter(({uid:vt})=>vt!==P),yield b.user._updateTokensIfNecessary(ve),yield b.user.reload()}catch(ve){throw ve}})()}}const Fs=new WeakMap;function vo(M){const _=(0,m.m9)(M);return Fs.has(_)||Fs.set(_,Ys._fromUser(_)),Fs.get(_)}const Eo="__sak";class jo{constructor(_,b){this.storageRetriever=_,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(Eo,"1"),this.storage.removeItem(Eo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,b){return this.storage.setItem(_,JSON.stringify(b)),Promise.resolve()}_get(_){const b=this.storage.getItem(_);return Promise.resolve(b?JSON.parse(b):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rl=(()=>{class M extends jo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,P)=>this.onStorageEvent(b,P),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ml(){const M=(0,m.z$)();return ye(M)||et(M)}()&&function nr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=mn(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const P of Object.keys(this.listeners)){const ne=this.storage.getItem(P),ve=this.localCache[P];ne!==ve&&b(P,ve,ne)}}onStorageEvent(b,P=!1){if(!b.key)return void this.forAllChangedKeys((zt,In,Mn)=>{this.notifyListeners(zt,Mn)});const ne=b.key;if(P?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const zt=this.storage.getItem(ne);if(b.newValue!==zt)null!==b.newValue?this.storage.setItem(ne,b.newValue):this.storage.removeItem(ne);else if(this.localCache[ne]===b.newValue&&!P)return}const ve=()=>{const zt=this.storage.getItem(ne);!P&&this.localCache[ne]===zt||this.notifyListeners(ne,zt)},vt=this.storage.getItem(ne);!function gn(){return(0,m.w1)()&&10===document.documentMode}()||vt===b.newValue||b.newValue===b.oldValue?ve():setTimeout(ve,10)}notifyListeners(b,P){this.localCache[b]=P;const ne=this.listeners[b];if(ne)for(const ve of Array.from(ne))ve(P&&JSON.parse(P))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,P,ne)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:P,newValue:ne}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,P){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(P)}_removeListener(b,P){this.listeners[b]&&(this.listeners[b].delete(P),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,P){var ne=()=>super._set,ve=this;return(0,y.Z)(function*(){yield ne().call(ve,b,P),ve.localCache[b]=JSON.stringify(P)})()}_get(b){var P=()=>super._get,ne=this;return(0,y.Z)(function*(){const ve=yield P().call(ne,b);return ne.localCache[b]=JSON.stringify(ve),ve})()}_remove(b){var P=()=>super._remove,ne=this;return(0,y.Z)(function*(){yield P().call(ne,b),delete ne.localCache[b]})()}}return M.type="LOCAL",M})(),Ls=(()=>{class M extends jo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,P){}_removeListener(b,P){}}return M.type="SESSION",M})();let Jl=(()=>{class M{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const P=this.receivers.find(ve=>ve.isListeningto(b));if(P)return P;const ne=new M(b);return this.receivers.push(ne),ne}isListeningto(b){return this.eventTarget===b}handleEvent(b){var P=this;return(0,y.Z)(function*(){const ne=b,{eventId:ve,eventType:vt,data:zt}=ne.data,In=P.handlersMap[vt];if(null==In||!In.size)return;ne.ports[0].postMessage({status:"ack",eventId:ve,eventType:vt});const Mn=Array.from(In).map(function(){var ti=(0,y.Z)(function*(hi){return hi(ne.origin,zt)});return function(hi){return ti.apply(this,arguments)}}()),lr=yield function xl(M){return Promise.all(M.map(function(){var _=(0,y.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(P){return{fulfilled:!1,reason:P}}});return function(b){return _.apply(this,arguments)}}()))}(Mn);ne.ports[0].postMessage({status:"done",eventId:ve,eventType:vt,response:lr})})()}_subscribe(b,P){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(P)}_unsubscribe(b,P){this.handlersMap[b]&&P&&this.handlersMap[b].delete(P),(!P||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return M.receivers=[],M})();function fs(M="",_=10){let b="";for(let P=0;P<_;P++)b+=Math.floor(10*Math.random());return M+b}class dn{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,b,P=50){var ne=this;return(0,y.Z)(function*(){const ve=typeof MessageChannel<"u"?new MessageChannel:null;if(!ve)throw new Error("connection_unavailable");let vt,zt;return new Promise((In,Mn)=>{const lr=fs("",20);ve.port1.start();const ti=setTimeout(()=>{Mn(new Error("unsupported_event"))},P);zt={messageChannel:ve,onMessage(hi){const lo=hi;if(lo.data.eventId===lr)switch(lo.data.status){case"ack":clearTimeout(ti),vt=setTimeout(()=>{Mn(new Error("timeout"))},3e3);break;case"done":clearTimeout(vt),In(lo.data.response);break;default:clearTimeout(ti),clearTimeout(vt),Mn(new Error("invalid_response"))}}},ne.handlers.add(zt),ve.port1.addEventListener("message",zt.onMessage),ne.target.postMessage({eventType:_,eventId:lr,data:b},[ve.port2])}).finally(()=>{zt&&ne.removeMessageHandler(zt)})})()}}function jr(){return window}function pu(){return typeof jr().WorkerGlobalScope<"u"&&"function"==typeof jr().importScripts}function or(){return(or=(0,y.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ot="firebaseLocalStorageDb",an=1,Ir="firebaseLocalStorage",ju="fbase_key";class ea{constructor(_){this.request=_}toPromise(){return new Promise((_,b)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function gu(M,_){return M.transaction([Ir],_?"readwrite":"readonly").objectStore(Ir)}function Da(){const M=indexedDB.open(Ot,an);return new Promise((_,b)=>{M.addEventListener("error",()=>{b(M.error)}),M.addEventListener("upgradeneeded",()=>{const P=M.result;try{P.createObjectStore(Ir,{keyPath:ju})}catch(ne){b(ne)}}),M.addEventListener("success",(0,y.Z)(function*(){const P=M.result;P.objectStoreNames.contains(Ir)?_(P):(P.close(),yield function Pl(){const M=indexedDB.deleteDatabase(Ot);return new ea(M).toPromise()}(),_(yield Da()))}))})}function mu(M,_,b){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,y.Z)(function*(M,_,b){const P=gu(M,!0).put({[ju]:_,value:b});return new ea(P).toPromise()})).apply(this,arguments)}function Hu(){return(Hu=(0,y.Z)(function*(M,_){const b=gu(M,!1).get(_),P=yield new ea(b).toPromise();return void 0===P?null:P.value})).apply(this,arguments)}function yu(M,_){const b=gu(M,!0).delete(_);return new ea(b).toPromise()}const zu=(()=>{class M{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,y.Z)(function*(){return b.db||(b.db=yield Da()),b.db})()}_withRetries(b){var P=this;return(0,y.Z)(function*(){let ne=0;for(;;)try{const ve=yield P._openDb();return yield b(ve)}catch(ve){if(ne++>3)throw ve;P.db&&(P.db.close(),P.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,y.Z)(function*(){return pu()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,y.Z)(function*(){b.receiver=Jl._getInstance(function Fn(){return pu()?self:null}()),b.receiver._subscribe("keyChanged",function(){var P=(0,y.Z)(function*(ne,ve){return{keyProcessed:(yield b._poll()).includes(ve.key)}});return function(ne,ve){return P.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var P=(0,y.Z)(function*(ne,ve){return["keyChanged"]});return function(ne,ve){return P.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,y.Z)(function*(){var P,ne;if(b.activeServiceWorker=yield function zn(){return or.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new dn(b.activeServiceWorker);const ve=yield b.sender._send("ping",{},800);ve&&null!==(P=ve[0])&&void 0!==P&&P.fulfilled&&null!==(ne=ve[0])&&void 0!==ne&&ne.value.includes("keyChanged")&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var P=this;return(0,y.Z)(function*(){if(P.sender&&P.activeServiceWorker&&function Pd(){var M;return(null===(M=null==navigator?void 0:navigator.serviceWorker)||void 0===M?void 0:M.controller)||null}()===P.activeServiceWorker)try{yield P.sender._send("keyChanged",{key:b},P.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const b=yield Da();return yield mu(b,Eo,"1"),yield yu(b,Eo),!0}catch{}return!1})()}_withPendingWrite(b){var P=this;return(0,y.Z)(function*(){P.pendingWrites++;try{yield b()}finally{P.pendingWrites--}})()}_set(b,P){var ne=this;return(0,y.Z)(function*(){return ne._withPendingWrite((0,y.Z)(function*(){return yield ne._withRetries(ve=>mu(ve,b,P)),ne.localCache[b]=P,ne.notifyServiceWorker(b)}))})()}_get(b){var P=this;return(0,y.Z)(function*(){const ne=yield P._withRetries(ve=>function Od(M,_){return Hu.apply(this,arguments)}(ve,b));return P.localCache[b]=ne,ne})()}_remove(b){var P=this;return(0,y.Z)(function*(){return P._withPendingWrite((0,y.Z)(function*(){return yield P._withRetries(ne=>yu(ne,b)),delete P.localCache[b],P.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,y.Z)(function*(){const P=yield b._withRetries(vt=>{const zt=gu(vt,!1).getAll();return new ea(zt).toPromise()});if(!P)return[];if(0!==b.pendingWrites)return[];const ne=[],ve=new Set;for(const{fbase_key:vt,value:zt}of P)ve.add(vt),JSON.stringify(b.localCache[vt])!==JSON.stringify(zt)&&(b.notifyListeners(vt,zt),ne.push(vt));for(const vt of Object.keys(b.localCache))b.localCache[vt]&&!ve.has(vt)&&(b.notifyListeners(vt,null),ne.push(vt));return ne})()}notifyListeners(b,P){this.localCache[b]=P;const ne=this.listeners[b];if(ne)for(const ve of Array.from(ne))ve(P)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,P){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(P)}_removeListener(b,P){this.listeners[b]&&(this.listeners[b].delete(P),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return M.type="LOCAL",M})(),os=1e12;class An{constructor(_){this.auth=_,this.counter=os,this._widgets=new Map}render(_,b){const P=this.counter;return this._widgets.set(P,new mc(_,this.auth.name,b||{})),this.counter++,P}reset(_){var b;const P=_||os;null===(b=this._widgets.get(P))||void 0===b||b.delete(),this._widgets.delete(P)}getResponse(_){var b;return(null===(b=this._widgets.get(_||os))||void 0===b?void 0:b.getResponse())||""}execute(_){var b=this;return(0,y.Z)(function*(){var P;return null===(P=b._widgets.get(_||os))||void 0===P||P.execute(),""})()}}class mc{constructor(_,b,P){this.params=P,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ne="string"==typeof _?document.getElementById(_):_;fe(ne,"argument-error",{appName:b}),this.container=ne,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ol(M){const _=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<M;P++)_.push(b.charAt(Math.floor(Math.random()*b.length)));return _.join("")}(50);const{callback:_,"expired-callback":b}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qa=jn("rcb"),Oh=new yt(3e4,6e4);class Nl{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=jr().grecaptcha)||void 0===_||!_.render)}load(_,b=""){return fe(function _u(M){return M.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(M)}(b),_,"argument-error"),this.shouldResolveImmediately(b)&&Jn(jr().grecaptcha)?Promise.resolve(jr().grecaptcha):new Promise((P,ne)=>{const ve=jr().setTimeout(()=>{ne(Ae(_,"network-request-failed"))},Oh.get());jr()[Qa]=()=>{jr().clearTimeout(ve),delete jr()[Qa];const zt=jr().grecaptcha;if(!zt||!Jn(zt))return void ne(Ae(_,"internal-error"));const In=zt.render;zt.render=(Mn,lr)=>{const ti=In(Mn,lr);return this.counter++,ti},this.hostLanguage=b,P(zt)},wr(`https://www.google.com/recaptcha/api.js??${(0,m.xO)({onload:Qa,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(ve),ne(Ae(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var b;return!(null===(b=jr().grecaptcha)||void 0===b||!b.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wu{load(_){return(0,y.Z)(function*(){return new An(_)})()}clearedOneInstance(){}}const ps="recaptcha",zs={theme:"light",type:"image"};class gl{constructor(_,b=Object.assign({},zs),P){this.parameters=b,this.type=ps,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rr(P),this.isInvisible="invisible"===this.parameters.size,fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const ne="string"==typeof _?document.getElementById(_):_;fe(ne,this.auth,"argument-error"),this.container=ne,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wu:new Nl,this.validateStartingState()}verify(){var _=this;return(0,y.Z)(function*(){_.assertNotDestroyed();const b=yield _.render(),P=_.getAssertedRecaptcha();return P.getResponse(b)||new Promise(ve=>{const vt=zt=>{zt&&(_.tokenChangeListeners.delete(vt),ve(zt))};_.tokenChangeListeners.add(vt),_.isInvisible&&P.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return b=>{if(this.tokenChangeListeners.forEach(P=>P(b)),"function"==typeof _)_(b);else if("string"==typeof _){const P=jr()[_];"function"==typeof P&&P(b)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,y.Z)(function*(){if(yield _.init(),!_.widgetId){let b=_.container;if(!_.isInvisible){const P=document.createElement("div");b.appendChild(P),b=P}_.widgetId=_.getAssertedRecaptcha().render(b,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,y.Z)(function*(){fe(Et()&&!pu(),_.auth,"internal-error"),yield function vu(){let M=null;return new Promise(_=>{"complete"!==document.readyState?(M=()=>_(),window.addEventListener("load",M)):_()}).catch(_=>{throw M&&window.removeEventListener("load",M),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const b=yield function kt(M){return At.apply(this,arguments)}(_.auth);fe(b,_.auth,"internal-error"),_.parameters.sitekey=b})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wo{constructor(_,b){this.verificationId=_,this.onConfirmation=b}confirm(_){const b=ls._fromVerification(this.verificationId,_);return this.onConfirmation(b)}}function S(M,_,b){return R.apply(this,arguments)}function R(){return(R=(0,y.Z)(function*(M,_,b){const P=Rr(M),ne=yield se(P,_,(0,m.m9)(b));return new wo(ne,ve=>Nn(P,ve))})).apply(this,arguments)}function w(M,_,b){return k.apply(this,arguments)}function k(){return(k=(0,y.Z)(function*(M,_,b){const P=(0,m.m9)(M);yield K(!1,P,"phone");const ne=yield se(P.auth,_,(0,m.m9)(b));return new wo(ne,ve=>W(P,ve))})).apply(this,arguments)}function z(M,_,b){return re.apply(this,arguments)}function re(){return(re=(0,y.Z)(function*(M,_,b){const P=(0,m.m9)(M),ne=yield se(P.auth,_,(0,m.m9)(b));return new wo(ne,ve=>L(P,ve))})).apply(this,arguments)}function se(M,_,b){return rt.apply(this,arguments)}function rt(){return rt=(0,y.Z)(function*(M,_,b){var P;const ne=yield b.verify();try{let ve;if(fe("string"==typeof ne,M,"argument-error"),fe(b.type===ps,M,"argument-error"),ve="string"==typeof _?{phoneNumber:_}:_,"session"in ve){const vt=ve.session;if("phoneNumber"in ve)return fe("enroll"===vt.type,M,"internal-error"),(yield function zi(M,_){return St(M,"POST","/v2/accounts/mfaEnrollment:start",mt(M,_))}(M,{idToken:vt.credential,phoneEnrollmentInfo:{phoneNumber:ve.phoneNumber,recaptchaToken:ne}})).phoneSessionInfo.sessionInfo;{fe("signin"===vt.type,M,"internal-error");const zt=(null===(P=ve.multiFactorHint)||void 0===P?void 0:P.uid)||ve.multiFactorUid;return fe(zt,M,"missing-multi-factor-info"),(yield function Xi(M,_){return St(M,"POST","/v2/accounts/mfaSignIn:start",mt(M,_))}(M,{mfaPendingCredential:vt.credential,mfaEnrollmentId:zt,phoneSignInInfo:{recaptchaToken:ne}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:vt}=yield function La(M,_){return fo.apply(this,arguments)}(M,{phoneNumber:ve.phoneNumber,recaptchaToken:ne});return vt}}finally{b._reset()}}),rt.apply(this,arguments)}function Tt(M,_){return un.apply(this,arguments)}function un(){return(un=(0,y.Z)(function*(M,_){yield Q((0,m.m9)(M),_)})).apply(this,arguments)}let Gn=(()=>{class M{constructor(b){this.providerId=M.PROVIDER_ID,this.auth=Rr(b)}verifyPhoneNumber(b,P){return se(this.auth,b,(0,m.m9)(P))}static credential(b,P){return ls._fromVerification(b,P)}static credentialFromResult(b){return M.credentialFromTaggedObject(b)}static credentialFromError(b){return M.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:P,temporaryProof:ne}=b;return P&&ne?ls._fromTokenResponse(P,ne):null}}return M.PROVIDER_ID="phone",M.PHONE_SIGN_IN_METHOD="phone",M})();function xn(M,_){return _?Sr(_):(fe(M._popupRedirectResolver,M,"argument-error"),M._popupRedirectResolver)}class xi extends Je{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Ks(_,this._buildIdpRequest())}_linkToIdToken(_,b){return Ks(_,this._buildIdpRequest(b))}_getReauthenticationResolver(_){return Ks(_,this._buildIdpRequest())}_buildIdpRequest(_){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(b.idToken=_),b}}function xr(M){return Kn(M.auth,new xi(M),M.bypassAuthState)}function ir(M){const{auth:_,user:b}=M;return fe(b,_,"internal-error"),Qt(b,new xi(M),M.bypassAuthState)}function Wi(M){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,y.Z)(function*(M){const{auth:_,user:b}=M;return fe(b,_,"internal-error"),Q(b,new xi(M),M.bypassAuthState)})).apply(this,arguments)}class Ro{constructor(_,b,P,ne,ve=!1){this.auth=_,this.resolver=P,this.user=ne,this.bypassAuthState=ve,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var _=this;return new Promise(function(){var b=(0,y.Z)(function*(P,ne){_.pendingPromise={resolve:P,reject:ne};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(ve){_.reject(ve)}});return function(P,ne){return b.apply(this,arguments)}}())}onAuthEvent(_){var b=this;return(0,y.Z)(function*(){const{urlResponse:P,sessionId:ne,postBody:ve,tenantId:vt,error:zt,type:In}=_;if(zt)return void b.reject(zt);const Mn={auth:b.auth,requestUri:P,sessionId:ne,tenantId:vt||void 0,postBody:ve||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(In)(Mn))}catch(lr){b.reject(lr)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return xr;case"linkViaPopup":case"linkViaRedirect":return Wi;case"reauthViaPopup":case"reauthViaRedirect":return ir;default:ze(this.auth,"internal-error")}}resolve(_){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ni=new yt(2e3,1e4);function Ho(M,_,b){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,y.Z)(function*(M,_,b){const P=Rr(M);ht(M,_,ys);const ne=xn(P,b);return new Eu(P,"signInViaPopup",_,ne).executeNotNull()})).apply(this,arguments)}function na(M,_,b){return kl.apply(this,arguments)}function kl(){return(kl=(0,y.Z)(function*(M,_,b){const P=(0,m.m9)(M);ht(P.auth,_,ys);const ne=xn(P.auth,b);return new Eu(P.auth,"reauthViaPopup",_,ne,P).executeNotNull()})).apply(this,arguments)}function Xa(M,_,b){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,y.Z)(function*(M,_,b){const P=(0,m.m9)(M);ht(P.auth,_,ys);const ne=xn(P.auth,b);return new Eu(P.auth,"linkViaPopup",_,ne,P).executeNotNull()})).apply(this,arguments)}let Eu=(()=>{class M extends Ro{constructor(b,P,ne,ve,vt){super(b,P,ve,vt),this.provider=ne,this.authWindow=null,this.pollId=null,M.currentPopupAction&&M.currentPopupAction.cancel(),M.currentPopupAction=this}executeNotNull(){var b=this;return(0,y.Z)(function*(){const P=yield b.execute();return fe(P,b.auth,"internal-error"),P})()}onExecution(){var b=this;return(0,y.Z)(function*(){Ue(1===b.filter.length,"Popup operations only handle one event");const P=fs();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],P),b.authWindow.associatedEvent=P,b.resolver._originValidation(b.auth).catch(ne=>{b.reject(ne)}),b.resolver._isIframeWebStorageSupported(b.auth,ne=>{ne||b.reject(Ae(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(Ae(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,M.currentPopupAction=null}pollUserCancellation(){const b=()=>{var P,ne;this.pollId=null!==(ne=null===(P=this.authWindow)||void 0===P?void 0:P.window)&&void 0!==ne&&ne.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ae(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(b,Ni.get())};b()}}return M.currentPopupAction=null,M})();const Nh="pendingRedirect",Ta=new Map;class Nd extends Ro{constructor(_,b,P=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,P),this.eventId=null}execute(){var _=()=>super.execute,b=this;return(0,y.Z)(function*(){let P=Ta.get(b.auth._key());if(!P){try{const ve=(yield function Nf(M,_){return yc.apply(this,arguments)}(b.resolver,b.auth))?yield _().call(b):null;P=()=>Promise.resolve(ve)}catch(ne){P=()=>Promise.reject(ne)}Ta.set(b.auth._key(),P)}return b.bypassAuthState||Ta.set(b.auth._key(),()=>Promise.resolve(null)),P()})()}onAuthEvent(_){var b=()=>super.onAuthEvent,P=this;return(0,y.Z)(function*(){if("signInViaRedirect"===_.type)return b().call(P,_);if("unknown"!==_.type){if(_.eventId){const ne=yield P.auth._redirectUserForId(_.eventId);if(ne)return P.user=ne,b().call(P,_);P.resolve(null)}}else P.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function yc(){return(yc=(0,y.Z)(function*(M,_){const b=Fd(_),P=Qc(M);if(!(yield P._isAvailable()))return!1;const ne="true"===(yield P._get(b));return yield P._remove(b),ne})).apply(this,arguments)}function kd(M,_){return pa.apply(this,arguments)}function pa(){return(pa=(0,y.Z)(function*(M,_){return Qc(M)._set(Fd(_),"true")})).apply(this,arguments)}function ci(){Ta.clear()}function Zc(M,_){Ta.set(M._key(),_)}function Qc(M){return Sr(M._redirectPersistence)}function Fd(M){return Jr(Nh,M.config.apiKey,M.name)}function Ja(M,_,b){return function Xc(M,_,b){return ga.apply(this,arguments)}(M,_,b)}function ga(){return(ga=(0,y.Z)(function*(M,_,b){const P=Rr(M);ht(M,_,ys),yield P._initializationPromise;const ne=xn(P,b);return yield kd(ne,P),ne._openRedirect(P,_,"signInViaRedirect")})).apply(this,arguments)}function kh(M,_,b){return function ra(M,_,b){return wu.apply(this,arguments)}(M,_,b)}function wu(){return(wu=(0,y.Z)(function*(M,_,b){const P=(0,m.m9)(M);ht(P.auth,_,ys),yield P.auth._initializationPromise;const ne=xn(P.auth,b);yield kd(ne,P.auth);const ve=yield Ji(P);return ne._openRedirect(P.auth,_,"reauthViaRedirect",ve)})).apply(this,arguments)}function _c(M,_,b){return function Ld(M,_,b){return vc.apply(this,arguments)}(M,_,b)}function vc(){return(vc=(0,y.Z)(function*(M,_,b){const P=(0,m.m9)(M);ht(P.auth,_,ys),yield P.auth._initializationPromise;const ne=xn(P.auth,b);yield K(!1,P,_.providerId),yield kd(ne,P.auth);const ve=yield Ji(P);return ne._openRedirect(P.auth,_,"linkViaRedirect",ve)})).apply(this,arguments)}function oo(M,_){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,y.Z)(function*(M,_){return yield Rr(M)._initializationPromise,el(M,_,!1)})).apply(this,arguments)}function el(M,_){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,y.Z)(function*(M,_,b=!1){const P=Rr(M),ne=xn(P,_),vt=yield new Nd(P,ne,b).execute();return vt&&!b&&(delete vt.user._redirectEventId,yield P._persistUserIfCurrent(vt.user),yield P._setRedirectUser(null,_)),vt})).apply(this,arguments)}function Ji(M){return tl.apply(this,arguments)}function tl(){return(tl=(0,y.Z)(function*(M){const _=fs(`${M.uid}:::`);return M._redirectEventId=_,yield M.auth._setRedirectUser(M),yield M.auth._persistUserIfCurrent(M),_})).apply(this,arguments)}class es{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let b=!1;return this.consumers.forEach(P=>{this.isEventForConsumer(_,P)&&(b=!0,this.sendToConsumer(_,P),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function zo(M){switch(M.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bi(M);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=_,b=!0)),b}sendToConsumer(_,b){var P;if(_.error&&!Bi(_)){const ne=(null===(P=_.error.code)||void 0===P?void 0:P.split("auth/")[1])||"internal-error";b.onError(Ae(this.auth,ne))}else b.onAuthEvent(_)}isEventForConsumer(_,b){const P=null===b.eventId||!!_.eventId&&_.eventId===b.eventId;return b.filter.includes(_.type)&&P}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iu(_))}saveEventToCache(_){this.cachedEventUids.add(Iu(_)),this.lastProcessedEventTime=Date.now()}}function Iu(M){return[M.type,M.eventId,M.sessionId,M.tenantId].filter(_=>_).join("-")}function Bi({type:M,error:_}){return"unknown"===M&&"auth/no-auth-event"===(null==_?void 0:_.code)}function Jc(M){return ed.apply(this,arguments)}function ed(){return(ed=(0,y.Z)(function*(M,_={}){return St(M,"GET","/v1/projects",_)})).apply(this,arguments)}const Zs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ec=/^https?/;function Ki(){return(Ki=(0,y.Z)(function*(M){if(M.config.emulator)return;const{authorizedDomains:_}=yield Jc(M);for(const b of _)try{if(br(b))return}catch{}ze(M,"unauthorized-domain")})).apply(this,arguments)}function br(M){const _=it(),{protocol:b,hostname:P}=new URL(_);if(M.startsWith("chrome-extension://")){const vt=new URL(M);return""===vt.hostname&&""===P?"chrome-extension:"===b&&M.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===b&&vt.hostname===P}if(!Ec.test(b))return!1;if(Zs.test(M))return P===M;const ne=M.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ne+"|"+ne+")$","i").test(P)}const qu=new yt(3e4,6e4);function ml(){const M=jr().___jsl;if(null!=M&&M.H)for(const _ of Object.keys(M.H))if(M.H[_].r=M.H[_].r||[],M.H[_].L=M.H[_].L||[],M.H[_].r=[...M.H[_].L],M.CP)for(let b=0;b<M.CP.length;b++)M.CP[b]=null}let Ui=null;const sa=new yt(5e3,15e3),bu="__/auth/iframe",_l="emulator/auth/iframe",xo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sa(M){const _=M.config;fe(_.authDomain,M,"auth-domain-config-required");const b=_.emulator?qe(_,_l):`https://${M.config.authDomain}/${bu}`,P={apiKey:_.apiKey,appName:M.name,v:q.SDK_VERSION},ne=Bl.get(M.config.apiHost);ne&&(P.eid=ne);const ve=M._getFrameworks();return ve.length&&(P.fw=ve.join(",")),`${b}?${(0,m.xO)(P).slice(1)}`}function x(){return x=(0,y.Z)(function*(M){const _=yield function yl(M){return Ui=Ui||function ia(M){return new Promise((_,b)=>{var P,ne,ve;function vt(){ml(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{ml(),b(Ae(M,"network-request-failed"))},timeout:qu.get()})}if(null!==(ne=null===(P=jr().gapi)||void 0===P?void 0:P.iframes)&&void 0!==ne&&ne.Iframe)_(gapi.iframes.getContext());else{if(null===(ve=jr().gapi)||void 0===ve||!ve.load){const zt=jn("iframefcb");return jr()[zt]=()=>{gapi.load?vt():b(Ae(M,"network-request-failed"))},wr(`https://apis.google.com/js/api.js?onload=${zt}`).catch(In=>b(In))}vt()}}).catch(_=>{throw Ui=null,_})}(M),Ui}(M),b=jr().gapi;return fe(b,M,"internal-error"),_.open({where:document.body,url:Sa(M),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xo,dontclear:!0},P=>new Promise(function(){var ne=(0,y.Z)(function*(ve,vt){yield P.restyle({setHideOnLeave:!1});const zt=Ae(M,"network-request-failed"),In=jr().setTimeout(()=>{vt(zt)},sa.get());function Mn(){jr().clearTimeout(In),ve(P)}P.ping(Mn).then(Mn,()=>{vt(zt)})});return function(ve,vt){return ne.apply(this,arguments)}}()))}),x.apply(this,arguments)}const $={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J=500,Oe=600,ft="_blank",bt="http://localhost";class Bt{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const er="__/auth/handler",zr="emulator/auth/handler",$r=encodeURIComponent("fac");function Go(M,_,b,P,ne,ve){return As.apply(this,arguments)}function As(){return(As=(0,y.Z)(function*(M,_,b,P,ne,ve){fe(M.config.authDomain,M,"auth-domain-config-required"),fe(M.config.apiKey,M,"invalid-api-key");const vt={apiKey:M.config.apiKey,appName:M.name,authType:b,redirectUrl:P,v:q.SDK_VERSION,eventId:ne};if(_ instanceof ys){_.setDefaultLanguage(M.languageCode),vt.providerId=_.providerId||"",(0,m.xb)(_.getCustomParameters())||(vt.customParameters=JSON.stringify(_.getCustomParameters()));for(const[lr,ti]of Object.entries(ve||{}))vt[lr]=ti}if(_ instanceof js){const lr=_.getScopes().filter(ti=>""!==ti);lr.length>0&&(vt.scopes=lr.join(","))}M.tenantId&&(vt.tid=M.tenantId);const zt=vt;for(const lr of Object.keys(zt))void 0===zt[lr]&&delete zt[lr];const In=yield M._getAppCheckToken(),Mn=In?`#${$r}=${encodeURIComponent(In)}`:"";return`${function eu({config:M}){return M.emulator?qe(M,zr):`https://${M.authDomain}/${er}`}(M)}?${(0,m.xO)(zt).slice(1)}${Mn}`})).apply(this,arguments)}const Ms="webStorageSupport",di=class $l{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ls,this._completeRedirectFn=el,this._overrideRedirectResult=Zc}_openPopup(_,b,P,ne){var ve=this;return(0,y.Z)(function*(){var vt;Ue(null===(vt=ve.eventManagers[_._key()])||void 0===vt?void 0:vt.manager,"_initialize() not called before _openPopup()");const zt=yield Go(_,b,P,it(),ne);return function Pn(M,_,b,P=J,ne=Oe){const ve=Math.max((window.screen.availHeight-ne)/2,0).toString(),vt=Math.max((window.screen.availWidth-P)/2,0).toString();let zt="";const In=Object.assign(Object.assign({},$),{width:P.toString(),height:ne.toString(),top:ve,left:vt}),Mn=(0,m.z$)().toLowerCase();b&&(zt=de(Mn)?ft:b),he(Mn)&&(_=_||bt,In.scrollbars="yes");const lr=Object.entries(In).reduce((hi,[lo,Tu])=>`${hi}${lo}=${Tu},`,"");if(function Yt(M=(0,m.z$)()){var _;return et(M)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(Mn)&&"_self"!==zt)return function Sn(M,_){const b=document.createElement("a");b.href=M,b.target=_;const P=document.createEvent("MouseEvent");P.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(P)}(_||"",zt),new Bt(null);const ti=window.open(_||"",zt,lr);fe(ti,M,"popup-blocked");try{ti.focus()}catch{}return new Bt(ti)}(_,zt,fs())})()}_openRedirect(_,b,P,ne){var ve=this;return(0,y.Z)(function*(){return yield ve._originValidation(_),function Ts(M){jr().location.href=M}(yield Go(_,b,P,it(),ne)),new Promise(()=>{})})()}_initialize(_){const b=_._key();if(this.eventManagers[b]){const{manager:ne,promise:ve}=this.eventManagers[b];return ne?Promise.resolve(ne):(Ue(ve,"If manager is not set, promise should be"),ve)}const P=this.initAndGetManager(_);return this.eventManagers[b]={promise:P},P.catch(()=>{delete this.eventManagers[b]}),P}initAndGetManager(_){var b=this;return(0,y.Z)(function*(){const P=yield function Fh(M){return x.apply(this,arguments)}(_),ne=new es(_);return P.register("authEvent",ve=>(fe(null==ve?void 0:ve.authEvent,_,"invalid-auth-event"),{status:ne.onEvent(ve.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[_._key()]={manager:ne},b.iframes[_._key()]=P,ne})()}_isIframeWebStorageSupported(_,b){this.iframes[_._key()].send(Ms,{type:Ms},ne=>{var ve;const vt=null===(ve=null==ne?void 0:ne[0])||void 0===ve?void 0:ve[Ms];void 0!==vt&&b(!!vt),ze(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const b=_._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Io(M){return Ki.apply(this,arguments)}(_)),this.originValidationPromises[b]}get _shouldInitProactively(){return mn()||ye()||et()}};class Qs{constructor(_){this.factorId=_}_process(_,b,P){switch(b.type){case"enroll":return this._finalizeEnroll(_,b.credential,P);case"signin":return this._finalizeSignIn(_,b.credential);default:return Ct("unexpected MultiFactorSessionType")}}}class Ul extends Qs{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new Ul(_)}_finalizeEnroll(_,b,P){return function gi(M,_){return St(M,"POST","/v2/accounts/mfaEnrollment:finalize",mt(M,_))}(_,{idToken:b,displayName:P,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,b){return function qn(M,_){return St(M,"POST","/v2/accounts/mfaSignIn:finalize",mt(M,_))}(_,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let xp=(()=>{class M{constructor(){}static assertion(b){return Ul._fromCredential(b)}}return M.FACTOR_ID="phone",M})();var qi="@firebase/auth";class tu{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var b=this;return(0,y.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const b=this.auth.onIdTokenChanged(P=>{_((null==P?void 0:P.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,b),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const b=this.internalListeners.get(_);b&&(this.internalListeners.delete(_),b(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,m.Pz)("authIdTokenMaxAge"),function Bd(M){(0,q._registerComponent)(new Pe.wA("auth",(_,{options:b})=>{const P=_.getProvider("app").getImmediate(),ne=_.getProvider("heartbeat"),ve=_.getProvider("app-check-internal"),{apiKey:vt,authDomain:zt}=P.options;fe(vt&&!vt.includes(":"),"invalid-api-key",{appName:P.name}),fe(!(null!=zt&&zt.includes(":")),"argument-error",{appName:P.name});const In={apiKey:vt,authDomain:zt,clientPlatform:M,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wr(M)},Mn=new si(P,ne,ve,In);return function $i(M,_){const b=(null==_?void 0:_.persistence)||[],P=(Array.isArray(b)?b:[b]).map(Sr);null!=_&&_.errorMap&&M._updateErrorMap(_.errorMap),M._initializeWithPersistence(P,null==_?void 0:_.popupRedirectResolver)}(Mn,b),Mn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,b,P)=>{_.getProvider("auth-internal").initialize()})),(0,q._registerComponent)(new Pe.wA("auth-internal",_=>{const b=Rr(_.getProvider("auth").getImmediate());return new tu(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,q.registerVersion)(qi,"0.23.1",function wc(M){switch(M){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(M)),(0,q.registerVersion)(qi,"0.23.1","esm2017")}("Browser")},2090:(ln,at,B)=>{"use strict";B.d(at,{$s:()=>Sr,BH:()=>Y,DV:()=>Ht,Dv:()=>pr,G6:()=>qe,GJ:()=>tn,L:()=>He,LL:()=>jt,Pz:()=>Ae,Sg:()=>ht,UG:()=>Ct,UI:()=>Zn,US:()=>Pe,Wj:()=>ai,Wl:()=>Rt,Yr:()=>yt,ZB:()=>De,ZR:()=>St,aH:()=>ze,b$:()=>Et,cI:()=>ut,dS:()=>yi,eu:()=>Ge,g5:()=>q,gK:()=>Ci,gQ:()=>Dr,h$:()=>we,hl:()=>We,hu:()=>m,jU:()=>Ue,lb:()=>_r,m9:()=>Jr,ne:()=>Xn,p$:()=>me,pd:()=>bi,r3:()=>En,ru:()=>it,tV:()=>Se,uI:()=>fe,ug:()=>sr,vZ:()=>pn,w1:()=>gt,w9:()=>fn,xO:()=>Mr,xb:()=>cr,z$:()=>Ke,zI:()=>_t,zd:()=>Ri});const y={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},m=function(Qe,Be){if(!Qe)throw q(Be)},q=function(Qe){return new Error("Firebase Database ("+y.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Qe)},oe=function(Qe){const Be=[];let he=0;for(let ye=0;ye<Qe.length;ye++){let de=Qe.charCodeAt(ye);de<128?Be[he++]=de:de<2048?(Be[he++]=de>>6|192,Be[he++]=63&de|128):55296==(64512&de)&&ye+1<Qe.length&&56320==(64512&Qe.charCodeAt(ye+1))?(de=65536+((1023&de)<<10)+(1023&Qe.charCodeAt(++ye)),Be[he++]=de>>18|240,Be[he++]=de>>12&63|128,Be[he++]=de>>6&63|128,Be[he++]=63&de|128):(Be[he++]=de>>12|224,Be[he++]=de>>6&63|128,Be[he++]=63&de|128)}return Be},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Qe,Be){if(!Array.isArray(Qe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const he=Be?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let de=0;de<Qe.length;de+=3){const lt=Qe[de],Re=de+1<Qe.length,Fe=Re?Qe[de+1]:0,Ee=de+2<Qe.length,et=Ee?Qe[de+2]:0;let gn=(15&Fe)<<2|et>>6,mn=63&et;Ee||(mn=64,Re||(gn=64)),ye.push(he[lt>>2],he[(3&lt)<<4|Fe>>4],he[gn],he[mn])}return ye.join("")},encodeString(Qe,Be){return this.HAS_NATIVE_SUPPORT&&!Be?btoa(Qe):this.encodeByteArray(oe(Qe),Be)},decodeString(Qe,Be){return this.HAS_NATIVE_SUPPORT&&!Be?atob(Qe):function(Qe){const Be=[];let he=0,ye=0;for(;he<Qe.length;){const de=Qe[he++];if(de<128)Be[ye++]=String.fromCharCode(de);else if(de>191&&de<224){const lt=Qe[he++];Be[ye++]=String.fromCharCode((31&de)<<6|63&lt)}else if(de>239&&de<365){const Ee=((7&de)<<18|(63&Qe[he++])<<12|(63&Qe[he++])<<6|63&Qe[he++])-65536;Be[ye++]=String.fromCharCode(55296+(Ee>>10)),Be[ye++]=String.fromCharCode(56320+(1023&Ee))}else{const lt=Qe[he++],Re=Qe[he++];Be[ye++]=String.fromCharCode((15&de)<<12|(63&lt)<<6|63&Re)}}return Be.join("")}(this.decodeStringToByteArray(Qe,Be))},decodeStringToByteArray(Qe,Be){this.init_();const he=Be?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let de=0;de<Qe.length;){const lt=he[Qe.charAt(de++)],Fe=de<Qe.length?he[Qe.charAt(de)]:0;++de;const et=de<Qe.length?he[Qe.charAt(de)]:64;++de;const Yt=de<Qe.length?he[Qe.charAt(de)]:64;if(++de,null==lt||null==Fe||null==et||null==Yt)throw new Ce;ye.push(lt<<2|Fe>>4),64!==et&&(ye.push(Fe<<4&240|et>>2),64!==Yt&&ye.push(et<<6&192|Yt))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Qe=0;Qe<this.ENCODED_VALS.length;Qe++)this.byteToCharMap_[Qe]=this.ENCODED_VALS.charAt(Qe),this.charToByteMap_[this.byteToCharMap_[Qe]]=Qe,this.byteToCharMapWebSafe_[Qe]=this.ENCODED_VALS_WEBSAFE.charAt(Qe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Qe]]=Qe,Qe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Qe)]=Qe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Qe)]=Qe)}}};class Ce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const we=function(Qe){const Be=oe(Qe);return Pe.encodeByteArray(Be,!0)},He=function(Qe){return we(Qe).replace(/\./g,"")},Se=function(Qe){try{return Pe.decodeString(Qe,!0)}catch(Be){console.error("base64Decode failed: ",Be)}return null};function me(Qe){return De(void 0,Qe)}function De(Qe,Be){if(!(Be instanceof Object))return Be;switch(Be.constructor){case Date:return new Date(Be.getTime());case Object:void 0===Qe&&(Qe={});break;case Array:Qe=[];break;default:return Be}for(const he in Be)!Be.hasOwnProperty(he)||!ke(he)||(Qe[he]=De(Qe[he],Be[he]));return Qe}function ke(Qe){return"__proto__"!==Qe}const Ie=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Qe=process.env.__FIREBASE_DEFAULTS__;return Qe?JSON.parse(Qe):void 0})()||(()=>{if(typeof document>"u")return;let Qe;try{Qe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Be=Qe&&Se(Qe[1]);return Be&&JSON.parse(Be)})()}catch(Qe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Qe}`)}},ze=()=>{var Qe;return null===(Qe=Ie())||void 0===Qe?void 0:Qe.config},Ae=Qe=>{var Be;return null===(Be=Ie())||void 0===Be?void 0:Be[`_${Qe}`]};class Y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Be,he)=>{this.resolve=Be,this.reject=he})}wrapCallback(Be){return(he,ye)=>{he?this.reject(he):this.resolve(ye),"function"==typeof Be&&(this.promise.catch(()=>{}),1===Be.length?Be(he):Be(he,ye))}}}function ht(Qe,Be){if(Qe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=Be||"demo-project",de=Qe.iat||0,lt=Qe.sub||Qe.user_id;if(!lt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:de,exp:de+3600,auth_time:de,sub:lt,user_id:lt,firebase:{sign_in_provider:"custom",identities:{}}},Qe);return[He(JSON.stringify({alg:"none",type:"JWT"})),He(JSON.stringify(Re)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function Ct(){var Qe;const Be=null===(Qe=Ie())||void 0===Qe?void 0:Qe.forceEnvironment;if("node"===Be)return!0;if("browser"===Be)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function it(){const Qe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Qe&&void 0!==Qe.id}function Et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function gt(){const Qe=Ke();return Qe.indexOf("MSIE ")>=0||Qe.indexOf("Trident/")>=0}function yt(){return!0===y.NODE_CLIENT||!0===y.NODE_ADMIN}function qe(){return!Ct()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function We(){try{return"object"==typeof indexedDB}catch{return!1}}function Ge(){return new Promise((Qe,Be)=>{try{let he=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",de=self.indexedDB.open(ye);de.onsuccess=()=>{de.result.close(),he||self.indexedDB.deleteDatabase(ye),Qe(!0)},de.onupgradeneeded=()=>{he=!1},de.onerror=()=>{var lt;Be((null===(lt=de.error)||void 0===lt?void 0:lt.message)||"")}}catch(he){Be(he)}})}function _t(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class St extends Error{constructor(Be,he,ye){super(he),this.code=Be,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,St.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}}class jt{constructor(Be,he,ye){this.service=Be,this.serviceName=he,this.errors=ye}create(Be,...he){const ye=he[0]||{},de=`${this.service}/${Be}`,lt=this.errors[Be],Re=lt?function hn(Qe,Be){return Qe.replace(Dt,(he,ye)=>{const de=Be[ye];return null!=de?String(de):`<${ye}?>`})}(lt,ye):"Error";return new St(de,`${this.serviceName}: ${Re} (${de}).`,ye)}}const Dt=/\{\$([^}]+)}/g;function ut(Qe){return JSON.parse(Qe)}function Rt(Qe){return JSON.stringify(Qe)}const rn=function(Qe){let Be={},he={},ye={},de="";try{const lt=Qe.split(".");Be=ut(Se(lt[0])||""),he=ut(Se(lt[1])||""),de=lt[2],ye=he.d||{},delete he.d}catch{}return{header:Be,claims:he,data:ye,signature:de}},fn=function(Qe){const he=rn(Qe).claims;return!!he&&"object"==typeof he&&he.hasOwnProperty("iat")},tn=function(Qe){const Be=rn(Qe).claims;return"object"==typeof Be&&!0===Be.admin};function En(Qe,Be){return Object.prototype.hasOwnProperty.call(Qe,Be)}function Ht(Qe,Be){if(Object.prototype.hasOwnProperty.call(Qe,Be))return Qe[Be]}function cr(Qe){for(const Be in Qe)if(Object.prototype.hasOwnProperty.call(Qe,Be))return!1;return!0}function Zn(Qe,Be,he){const ye={};for(const de in Qe)Object.prototype.hasOwnProperty.call(Qe,de)&&(ye[de]=Be.call(he,Qe[de],de,Qe));return ye}function pn(Qe,Be){if(Qe===Be)return!0;const he=Object.keys(Qe),ye=Object.keys(Be);for(const de of he){if(!ye.includes(de))return!1;const lt=Qe[de],Re=Be[de];if(dr(lt)&&dr(Re)){if(!pn(lt,Re))return!1}else if(lt!==Re)return!1}for(const de of ye)if(!he.includes(de))return!1;return!0}function dr(Qe){return null!==Qe&&"object"==typeof Qe}function Mr(Qe){const Be=[];for(const[he,ye]of Object.entries(Qe))Array.isArray(ye)?ye.forEach(de=>{Be.push(encodeURIComponent(he)+"="+encodeURIComponent(de))}):Be.push(encodeURIComponent(he)+"="+encodeURIComponent(ye));return Be.length?"&"+Be.join("&"):""}function Ri(Qe){const Be={};return Qe.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[de,lt]=ye.split("=");Be[decodeURIComponent(de)]=decodeURIComponent(lt)}}),Be}function bi(Qe){const Be=Qe.indexOf("?");if(!Be)return"";const he=Qe.indexOf("#",Be);return Qe.substring(Be,he>0?he:void 0)}class Dr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Be=1;Be<this.blockSize;++Be)this.pad_[Be]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Be,he){he||(he=0);const ye=this.W_;if("string"==typeof Be)for(let Yt=0;Yt<16;Yt++)ye[Yt]=Be.charCodeAt(he)<<24|Be.charCodeAt(he+1)<<16|Be.charCodeAt(he+2)<<8|Be.charCodeAt(he+3),he+=4;else for(let Yt=0;Yt<16;Yt++)ye[Yt]=Be[he]<<24|Be[he+1]<<16|Be[he+2]<<8|Be[he+3],he+=4;for(let Yt=16;Yt<80;Yt++){const gn=ye[Yt-3]^ye[Yt-8]^ye[Yt-14]^ye[Yt-16];ye[Yt]=4294967295&(gn<<1|gn>>>31)}let et,xt,de=this.chain_[0],lt=this.chain_[1],Re=this.chain_[2],Fe=this.chain_[3],Ee=this.chain_[4];for(let Yt=0;Yt<80;Yt++){Yt<40?Yt<20?(et=Fe^lt&(Re^Fe),xt=1518500249):(et=lt^Re^Fe,xt=1859775393):Yt<60?(et=lt&Re|Fe&(lt|Re),xt=2400959708):(et=lt^Re^Fe,xt=3395469782);const gn=(de<<5|de>>>27)+et+Ee+xt+ye[Yt]&4294967295;Ee=Fe,Fe=Re,Re=4294967295&(lt<<30|lt>>>2),lt=de,de=gn}this.chain_[0]=this.chain_[0]+de&4294967295,this.chain_[1]=this.chain_[1]+lt&4294967295,this.chain_[2]=this.chain_[2]+Re&4294967295,this.chain_[3]=this.chain_[3]+Fe&4294967295,this.chain_[4]=this.chain_[4]+Ee&4294967295}update(Be,he){if(null==Be)return;void 0===he&&(he=Be.length);const ye=he-this.blockSize;let de=0;const lt=this.buf_;let Re=this.inbuf_;for(;de<he;){if(0===Re)for(;de<=ye;)this.compress_(Be,de),de+=this.blockSize;if("string"==typeof Be){for(;de<he;)if(lt[Re]=Be.charCodeAt(de),++Re,++de,Re===this.blockSize){this.compress_(lt),Re=0;break}}else for(;de<he;)if(lt[Re]=Be[de],++Re,++de,Re===this.blockSize){this.compress_(lt),Re=0;break}}this.inbuf_=Re,this.total_+=he}digest(){const Be=[];let he=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let de=this.blockSize-1;de>=56;de--)this.buf_[de]=255&he,he/=256;this.compress_(this.buf_);let ye=0;for(let de=0;de<5;de++)for(let lt=24;lt>=0;lt-=8)Be[ye]=this.chain_[de]>>lt&255,++ye;return Be}}function Xn(Qe,Be){const he=new wn(Qe,Be);return he.subscribe.bind(he)}class wn{constructor(Be,he){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=he,this.task.then(()=>{Be(this)}).catch(ye=>{this.error(ye)})}next(Be){this.forEachObserver(he=>{he.next(Be)})}error(Be){this.forEachObserver(he=>{he.error(Be)}),this.close(Be)}complete(){this.forEachObserver(Be=>{Be.complete()}),this.close()}subscribe(Be,he,ye){let de;if(void 0===Be&&void 0===he&&void 0===ye)throw new Error("Missing Observer.");de=function Nr(Qe,Be){if("object"!=typeof Qe||null===Qe)return!1;for(const he of Be)if(he in Qe&&"function"==typeof Qe[he])return!0;return!1}(Be,["next","error","complete"])?Be:{next:Be,error:he,complete:ye},void 0===de.next&&(de.next=Xr),void 0===de.error&&(de.error=Xr),void 0===de.complete&&(de.complete=Xr);const lt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?de.error(this.finalError):de.complete()}catch{}}),this.observers.push(de),lt}unsubscribeOne(Be){void 0===this.observers||void 0===this.observers[Be]||(delete this.observers[Be],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Be){if(!this.finalized)for(let he=0;he<this.observers.length;he++)this.sendOne(he,Be)}sendOne(Be,he){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Be])try{he(this.observers[Be])}catch(ye){typeof console<"u"&&console.error&&console.error(ye)}})}close(Be){this.finalized||(this.finalized=!0,void 0!==Be&&(this.finalError=Be),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xr(){}const pr=function(Qe,Be,he,ye){let de;if(ye<Be?de="at least "+Be:ye>he&&(de=0===he?"none":"no more than "+he),de)throw new Error(Qe+" failed: Was called with "+ye+(1===ye?" argument.":" arguments.")+" Expects "+de+".")};function Ci(Qe,Be){return`${Qe} failed: ${Be} argument `}function ai(Qe,Be,he,ye){if((!ye||he)&&"function"!=typeof he)throw new Error(Ci(Qe,Be)+"must be a valid function.")}function _r(Qe,Be,he,ye){if((!ye||he)&&("object"!=typeof he||null===he))throw new Error(Ci(Qe,Be)+"must be a valid context object.")}const yi=function(Qe){const Be=[];let he=0;for(let ye=0;ye<Qe.length;ye++){let de=Qe.charCodeAt(ye);if(de>=55296&&de<=56319){const lt=de-55296;ye++,m(ye<Qe.length,"Surrogate pair missing trail surrogate."),de=65536+(lt<<10)+(Qe.charCodeAt(ye)-56320)}de<128?Be[he++]=de:de<2048?(Be[he++]=de>>6|192,Be[he++]=63&de|128):de<65536?(Be[he++]=de>>12|224,Be[he++]=de>>6&63|128,Be[he++]=63&de|128):(Be[he++]=de>>18|240,Be[he++]=de>>12&63|128,Be[he++]=de>>6&63|128,Be[he++]=63&de|128)}return Be},sr=function(Qe){let Be=0;for(let he=0;he<Qe.length;he++){const ye=Qe.charCodeAt(he);ye<128?Be++:ye<2048?Be+=2:ye>=55296&&ye<=56319?(Be+=4,he++):Be+=3}return Be},tr=1e3,ni=2,Gr=144e5,ri=.5;function Sr(Qe,Be=tr,he=ni){const ye=Be*Math.pow(he,Qe),de=Math.round(ri*ye*(Math.random()-.5)*2);return Math.min(Gr,ye+de)}function Jr(Qe){return Qe&&Qe._delegate?Qe._delegate:Qe}},9613:(ln,at,B)=>{"use strict";B.d(at,{c:()=>Xe});var y=B(3577),m=B(3457);let q;const xe=Te=>Te.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pe=Te=>(void 0===q&&(q=void 0===Te.style.animationName&&void 0!==Te.style.webkitAnimationName?"-webkit-":""),q),Ce=(Te,Ie,ae)=>{const dt=Ie.startsWith("animation")?Pe(Te):"";Te.style.setProperty(dt+Ie,ae)},we=(Te,Ie)=>{const ae=Ie.startsWith("animation")?Pe(Te):"";Te.style.removeProperty(ae+Ie)},me=[],Le=(Te=[],Ie)=>{if(void 0!==Ie){const ae=Array.isArray(Ie)?Ie:[Ie];return[...Te,...ae]}return Te},Xe=Te=>{let Ie,ae,dt,ze,Ae,Y,Ue,We,Ge,_t,mt,Dt,ut,ht=[],Ke=[],fe=[],Ct=!1,it={},Et=[],Ve=[],gt={},wt=0,yt=!1,qe=!1,St=!0,jt=!1,hn=!0,Rt=!1;const rn=Te,Rn=[],Un=[],fn=[],tn=[],En=[],Ht=[],cr=[],Zn=[],pn=[],dr=[],Mi="function"==typeof AnimationEffect||void 0!==m.w&&"function"==typeof m.w.AnimationEffect,Mr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Mi,bi=()=>dr,Nr=(be,Je)=>((null!=Je&&Je.oneTimeCallback?Un:Rn).push({c:be,o:Je}),ut),pr=()=>{if(Mr)dr.forEach(be=>{be.cancel()}),dr.length=0;else{const be=fn.slice();(0,y.r)(()=>{be.forEach(Je=>{we(Je,"animation-name"),we(Je,"animation-duration"),we(Je,"animation-timing-function"),we(Je,"animation-iteration-count"),we(Je,"animation-delay"),we(Je,"animation-play-state"),we(Je,"animation-fill-mode"),we(Je,"animation-direction")})})}},Ci=()=>{En.forEach(be=>{null!=be&&be.parentNode&&be.parentNode.removeChild(be)}),En.length=0},Ur=()=>void 0!==Ae?Ae:Ue?Ue.getFill():"both",Jr=()=>void 0!==Ge?Ge:void 0!==Y?Y:Ue?Ue.getDirection():"normal",Qe=()=>yt?"linear":void 0!==dt?dt:Ue?Ue.getEasing():"linear",Be=()=>qe?0:void 0!==_t?_t:void 0!==ae?ae:Ue?Ue.getDuration():0,he=()=>void 0!==ze?ze:Ue?Ue.getIterations():1,ye=()=>void 0!==mt?mt:void 0!==Ie?Ie:Ue?Ue.getDelay():0,nn=()=>{0!==wt&&(wt--,0===wt&&((()=>{gr(),Zn.forEach($t=>$t()),pn.forEach($t=>$t());const be=St?1:0,Je=Et,nt=Ve,Lt=gt;fn.forEach($t=>{const Gt=$t.classList;Je.forEach(Wt=>Gt.add(Wt)),nt.forEach(Wt=>Gt.remove(Wt));for(const Wt in Lt)Lt.hasOwnProperty(Wt)&&Ce($t,Wt,Lt[Wt])}),Rn.forEach($t=>$t.c(be,ut)),Un.forEach($t=>$t.c(be,ut)),Un.length=0,hn=!0,St&&(jt=!0),St=!0})(),Ue&&Ue.animationFinish()))},On=(be=!0)=>{Ci();const Je=(Te=>(Te.forEach(Ie=>{for(const ae in Ie)if(Ie.hasOwnProperty(ae)){const dt=Ie[ae];if("easing"===ae)Ie["animation-timing-function"]=dt,delete Ie[ae];else{const ze=xe(ae);ze!==ae&&(Ie[ze]=dt,delete Ie[ae])}}}),Te))(ht);fn.forEach(nt=>{if(Je.length>0){const Lt=((Te=[])=>Te.map(Ie=>{const ae=Ie.offset,dt=[];for(const ze in Ie)Ie.hasOwnProperty(ze)&&"offset"!==ze&&dt.push(`${ze}: ${Ie[ze]};`);return`${100*ae}% { ${dt.join(" ")} }`}).join(" "))(Je);Dt=void 0!==Te?Te:(Te=>{let Ie=me.indexOf(Te);return Ie<0&&(Ie=me.push(Te)-1),`ion-animation-${Ie}`})(Lt);const $t=((Te,Ie,ae)=>{var dt;const ze=(Te=>{const Ie=void 0!==Te.getRootNode?Te.getRootNode():Te;return Ie.head||Ie})(ae),Ae=Pe(ae),Y=ze.querySelector("#"+Te);if(Y)return Y;const ht=(null!==(dt=ae.ownerDocument)&&void 0!==dt?dt:document).createElement("style");return ht.id=Te,ht.textContent=`@${Ae}keyframes ${Te} { ${Ie} } @${Ae}keyframes ${Te}-alt { ${Ie} }`,ze.appendChild(ht),ht})(Dt,Lt,nt);En.push($t),Ce(nt,"animation-duration",`${Be()}ms`),Ce(nt,"animation-timing-function",Qe()),Ce(nt,"animation-delay",`${ye()}ms`),Ce(nt,"animation-fill-mode",Ur()),Ce(nt,"animation-direction",Jr());const Gt=he()===1/0?"infinite":he().toString();Ce(nt,"animation-iteration-count",Gt),Ce(nt,"animation-play-state","paused"),be&&Ce(nt,"animation-name",`${$t.id}-alt`),(0,y.r)(()=>{Ce(nt,"animation-name",$t.id||null)})}})},vr=(be=!0)=>{(()=>{Ht.forEach(Lt=>Lt()),cr.forEach(Lt=>Lt());const be=Ke,Je=fe,nt=it;fn.forEach(Lt=>{const $t=Lt.classList;be.forEach(Gt=>$t.add(Gt)),Je.forEach(Gt=>$t.remove(Gt));for(const Gt in nt)nt.hasOwnProperty(Gt)&&Ce(Lt,Gt,nt[Gt])})})(),ht.length>0&&(Mr?(fn.forEach(be=>{const Je=be.animate(ht,{id:rn,delay:ye(),duration:Be(),easing:Qe(),iterations:he(),fill:Ur(),direction:Jr()});Je.pause(),dr.push(Je)}),dr.length>0&&(dr[0].onfinish=()=>{nn()})):On(be)),Ct=!0},Tn=be=>{if(be=Math.min(Math.max(be,0),.9999),Mr)dr.forEach(Je=>{Je.currentTime=Je.effect.getComputedTiming().delay+Be()*be,Je.pause()});else{const Je=`-${Be()*be}ms`;fn.forEach(nt=>{ht.length>0&&(Ce(nt,"animation-delay",Je),Ce(nt,"animation-play-state","paused"))})}},Fr=be=>{dr.forEach(Je=>{Je.effect.updateTiming({delay:ye(),duration:Be(),easing:Qe(),iterations:he(),fill:Ur(),direction:Jr()})}),void 0!==be&&Tn(be)},wr=(be=!0,Je)=>{(0,y.r)(()=>{fn.forEach(nt=>{Ce(nt,"animation-name",Dt||null),Ce(nt,"animation-duration",`${Be()}ms`),Ce(nt,"animation-timing-function",Qe()),Ce(nt,"animation-delay",void 0!==Je?`-${Je*Be()}ms`:`${ye()}ms`),Ce(nt,"animation-fill-mode",Ur()||null),Ce(nt,"animation-direction",Jr()||null);const Lt=he()===1/0?"infinite":he().toString();Ce(nt,"animation-iteration-count",Lt),be&&Ce(nt,"animation-name",`${Dt}-alt`),(0,y.r)(()=>{Ce(nt,"animation-name",Dt||null)})})})},jn=(be=!1,Je=!0,nt)=>(be&&tn.forEach(Lt=>{Lt.update(be,Je,nt)}),Mr?Fr(nt):wr(Je,nt),ut),as=()=>{Ct&&(Mr?dr.forEach(be=>{be.pause()}):fn.forEach(be=>{Ce(be,"animation-play-state","paused")}),Rt=!0)},_n=()=>{We=void 0,nn()},gr=()=>{We&&clearTimeout(We)},$i=be=>new Promise(Je=>{null!=be&&be.sync&&(qe=!0,Nr(()=>qe=!1,{oneTimeCallback:!0})),Ct||vr(),jt&&(Mr?(Tn(0),Fr()):wr(),jt=!1),hn&&(wt=tn.length+1,hn=!1),Nr(()=>Je(),{oneTimeCallback:!0}),tn.forEach(nt=>{nt.play()}),Mr?(dr.forEach(be=>{be.play()}),(0===ht.length||0===fn.length)&&nn()):(()=>{if(gr(),(0,y.r)(()=>{fn.forEach(be=>{ht.length>0&&Ce(be,"animation-play-state","running")})}),0===ht.length||0===fn.length)nn();else{const be=ye()||0,Je=Be()||0,nt=he()||1;isFinite(nt)&&(We=setTimeout(_n,be+Je*nt+100)),((Te,Ie)=>{let ae;const dt={passive:!0},Ae=Y=>{Te===Y.target&&(ae&&ae(),gr(),(0,y.r)(()=>{fn.forEach(be=>{we(be,"animation-duration"),we(be,"animation-delay"),we(be,"animation-play-state")}),(0,y.r)(nn)}))};Te&&(Te.addEventListener("webkitAnimationEnd",Ae,dt),Te.addEventListener("animationend",Ae,dt),ae=()=>{Te.removeEventListener("webkitAnimationEnd",Ae,dt),Te.removeEventListener("animationend",Ae,dt)})})(fn[0])}})(),Rt=!1}),ce=(be,Je)=>{const nt=ht[0];return void 0===nt||void 0!==nt.offset&&0!==nt.offset?ht=[{offset:0,[be]:Je},...ht]:nt[be]=Je,ut};return ut={parentAnimation:Ue,elements:fn,childAnimations:tn,id:rn,animationFinish:nn,from:ce,to:(be,Je)=>{const nt=ht[ht.length-1];return void 0===nt||void 0!==nt.offset&&1!==nt.offset?ht=[...ht,{offset:1,[be]:Je}]:nt[be]=Je,ut},fromTo:(be,Je,nt)=>ce(be,Je).to(be,nt),parent:be=>(Ue=be,ut),play:$i,pause:()=>(tn.forEach(be=>{be.pause()}),as(),ut),stop:()=>{tn.forEach(be=>{be.stop()}),Ct&&(pr(),Ct=!1),yt=!1,qe=!1,hn=!0,Ge=void 0,_t=void 0,mt=void 0,wt=0,jt=!1,St=!0,Rt=!1},destroy:be=>(tn.forEach(Je=>{Je.destroy(be)}),(be=>{pr(),be&&Ci()})(be),fn.length=0,tn.length=0,ht.length=0,Rn.length=0,Un.length=0,Ct=!1,hn=!0,ut),keyframes:be=>{const Je=ht!==be;return ht=be,Je&&(be=>{Mr?bi().forEach(Je=>{if(Je.effect.setKeyframes)Je.effect.setKeyframes(be);else{const nt=new KeyframeEffect(Je.effect.target,be,Je.effect.getTiming());Je.effect=nt}}):On()})(ht),ut},addAnimation:be=>{if(null!=be)if(Array.isArray(be))for(const Je of be)Je.parent(ut),tn.push(Je);else be.parent(ut),tn.push(be);return ut},addElement:be=>{if(null!=be)if(1===be.nodeType)fn.push(be);else if(be.length>=0)for(let Je=0;Je<be.length;Je++)fn.push(be[Je]);else console.error("Invalid addElement value");return ut},update:jn,fill:be=>(Ae=be,jn(!0),ut),direction:be=>(Y=be,jn(!0),ut),iterations:be=>(ze=be,jn(!0),ut),duration:be=>(!Mr&&0===be&&(be=1),ae=be,jn(!0),ut),easing:be=>(dt=be,jn(!0),ut),delay:be=>(Ie=be,jn(!0),ut),getWebAnimations:bi,getKeyframes:()=>ht,getFill:Ur,getDirection:Jr,getDelay:ye,getIterations:he,getEasing:Qe,getDuration:Be,afterAddRead:be=>(Zn.push(be),ut),afterAddWrite:be=>(pn.push(be),ut),afterClearStyles:(be=[])=>{for(const Je of be)gt[Je]="";return ut},afterStyles:(be={})=>(gt=be,ut),afterRemoveClass:be=>(Ve=Le(Ve,be),ut),afterAddClass:be=>(Et=Le(Et,be),ut),beforeAddRead:be=>(Ht.push(be),ut),beforeAddWrite:be=>(cr.push(be),ut),beforeClearStyles:(be=[])=>{for(const Je of be)it[Je]="";return ut},beforeStyles:(be={})=>(it=be,ut),beforeRemoveClass:be=>(fe=Le(fe,be),ut),beforeAddClass:be=>(Ke=Le(Ke,be),ut),onFinish:Nr,isRunning:()=>0!==wt&&!Rt,progressStart:(be=!1,Je)=>(tn.forEach(nt=>{nt.progressStart(be,Je)}),as(),yt=be,Ct||vr(),jn(!1,!0,Je),ut),progressStep:be=>(tn.forEach(Je=>{Je.progressStep(be)}),Tn(be),ut),progressEnd:(be,Je,nt)=>(yt=!1,tn.forEach(Lt=>{Lt.progressEnd(be,Je,nt)}),void 0!==nt&&(_t=nt),jt=!1,St=!0,0===be?(Ge="reverse"===Jr()?"normal":"reverse","reverse"===Ge&&(St=!1),Mr?(jn(),Tn(1-Je)):(mt=(1-Je)*Be()*-1,jn(!1,!1))):1===be&&(Mr?(jn(),Tn(Je)):(mt=Je*Be()*-1,jn(!1,!1))),void 0!==be&&(Nr(()=>{_t=void 0,Ge=void 0,mt=void 0},{oneTimeCallback:!0}),Ue||$i()),ut)}}},3982:(ln,at,B)=>{"use strict";B.d(at,{E:()=>Se,a:()=>y,s:()=>we});const y=me=>{try{if(me instanceof Ce)return me.value;if(!oe()||"string"!=typeof me||""===me)return me;if(me.includes("onload="))return"";const De=document.createDocumentFragment(),ke=document.createElement("div");De.appendChild(ke),ke.innerHTML=me,Pe.forEach(Te=>{const Ie=De.querySelectorAll(Te);for(let ae=Ie.length-1;ae>=0;ae--){const dt=Ie[ae];dt.parentNode?dt.parentNode.removeChild(dt):De.removeChild(dt);const ze=q(dt);for(let Ae=0;Ae<ze.length;Ae++)m(ze[Ae])}});const je=q(De);for(let Te=0;Te<je.length;Te++)m(je[Te]);const Le=document.createElement("div");Le.appendChild(De);const Xe=Le.querySelector("div");return null!==Xe?Xe.innerHTML:Le.innerHTML}catch(De){return console.error(De),""}},m=me=>{if(me.nodeType&&1!==me.nodeType)return;if(typeof NamedNodeMap<"u"&&!(me.attributes instanceof NamedNodeMap))return void me.remove();for(let ke=me.attributes.length-1;ke>=0;ke--){const je=me.attributes.item(ke),Le=je.name;if(!xe.includes(Le.toLowerCase())){me.removeAttribute(Le);continue}const Xe=je.value,Te=me[Le];(null!=Xe&&Xe.toLowerCase().includes("javascript:")||null!=Te&&Te.toLowerCase().includes("javascript:"))&&me.removeAttribute(Le)}const De=q(me);for(let ke=0;ke<De.length;ke++)m(De[ke])},q=me=>null!=me.children?me.children:me.childNodes,oe=()=>{var me;const De=window,ke=null===(me=null==De?void 0:De.Ionic)||void 0===me?void 0:me.config;return!ke||(ke.get?ke.get("sanitizerEnabled",!0):!0===ke.sanitizerEnabled||void 0===ke.sanitizerEnabled)},xe=["class","id","href","src","name","slot"],Pe=["script","style","iframe","meta","link","object","embed"];class Ce{constructor(De){this.value=De}}const we=me=>{const De=window,ke=De.Ionic;if(!ke||!ke.config||"Object"===ke.config.constructor.name)return De.Ionic=De.Ionic||{},De.Ionic.config=Object.assign(Object.assign({},De.Ionic.config),me),De.Ionic.config},Se=!1},6782:(ln,at,B)=>{"use strict";B.d(at,{C:()=>xe,a:()=>q,d:()=>oe});var y=B(5861),m=B(3577);const q=function(){var Pe=(0,y.Z)(function*(Ce,we,He,Se,me,De){var ke;if(Ce)return Ce.attachViewToDom(we,He,me,Se);if(!(De||"string"==typeof He||He instanceof HTMLElement))throw new Error("framework delegate is missing");const je="string"==typeof He?null===(ke=we.ownerDocument)||void 0===ke?void 0:ke.createElement(He):He;return Se&&Se.forEach(Le=>je.classList.add(Le)),me&&Object.assign(je,me),we.appendChild(je),yield new Promise(Le=>(0,m.c)(je,Le)),je});return function(we,He,Se,me,De,ke){return Pe.apply(this,arguments)}}(),oe=(Pe,Ce)=>{if(Ce){if(Pe)return Pe.removeViewFromDom(Ce.parentElement,Ce);Ce.remove()}return Promise.resolve()},xe=()=>{let Pe,Ce;return{attachViewToDom:function(){var Se=(0,y.Z)(function*(me,De,ke={},je=[]){var Le,Xe;if(Pe=me,De){const Ie="string"==typeof De?null===(Le=Pe.ownerDocument)||void 0===Le?void 0:Le.createElement(De):De;je.forEach(ae=>Ie.classList.add(ae)),Object.assign(Ie,ke),Pe.appendChild(Ie),yield new Promise(ae=>(0,m.c)(Ie,ae))}else if(Pe.children.length>0&&("ION-MODAL"===Pe.tagName||"ION-POPOVER"===Pe.tagName)&&!Pe.children[0].classList.contains("ion-delegate-host")){const ae=null===(Xe=Pe.ownerDocument)||void 0===Xe?void 0:Xe.createElement("div");ae.classList.add("ion-delegate-host"),je.forEach(dt=>ae.classList.add(dt)),ae.append(...Pe.children),Pe.appendChild(ae)}const Te=document.querySelector("ion-app")||document.body;return Ce=document.createComment("ionic teleport"),Pe.parentNode.insertBefore(Ce,Pe),Te.appendChild(Pe),Pe});return function(De,ke){return Se.apply(this,arguments)}}(),removeViewFromDom:()=>(Pe&&Ce&&(Ce.parentNode.insertBefore(Pe,Ce),Ce.remove()),Promise.resolve())}}},4349:(ln,at,B)=>{"use strict";B.d(at,{G:()=>xe});class m{constructor(Ce,we,He,Se,me){this.id=we,this.name=He,this.disableScroll=me,this.priority=1e6*Se+we,this.ctrl=Ce}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Ce=this.ctrl.capture(this.name,this.id,this.priority);return Ce&&this.disableScroll&&this.ctrl.disableScroll(this.id),Ce}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class q{constructor(Ce,we,He,Se){this.id=we,this.disable=He,this.disableScroll=Se,this.ctrl=Ce}block(){if(this.ctrl){if(this.disable)for(const Ce of this.disable)this.ctrl.disableGesture(Ce,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Ce of this.disable)this.ctrl.enableGesture(Ce,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const oe="backdrop-no-scroll",xe=new class y{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Ce){var we;return new m(this,this.newID(),Ce.name,null!==(we=Ce.priority)&&void 0!==we?we:0,!!Ce.disableScroll)}createBlocker(Ce={}){return new q(this,this.newID(),Ce.disable,!!Ce.disableScroll)}start(Ce,we,He){return this.canStart(Ce)?(this.requestedStart.set(we,He),!0):(this.requestedStart.delete(we),!1)}capture(Ce,we,He){if(!this.start(Ce,we,He))return!1;const Se=this.requestedStart;let me=-1e4;if(Se.forEach(De=>{me=Math.max(me,De)}),me===He){this.capturedId=we,Se.clear();const De=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Ce}});return document.dispatchEvent(De),!0}return Se.delete(we),!1}release(Ce){this.requestedStart.delete(Ce),this.capturedId===Ce&&(this.capturedId=void 0)}disableGesture(Ce,we){let He=this.disabledGestures.get(Ce);void 0===He&&(He=new Set,this.disabledGestures.set(Ce,He)),He.add(we)}enableGesture(Ce,we){const He=this.disabledGestures.get(Ce);void 0!==He&&He.delete(we)}disableScroll(Ce){this.disabledScroll.add(Ce),1===this.disabledScroll.size&&document.body.classList.add(oe)}enableScroll(Ce){this.disabledScroll.delete(Ce),0===this.disabledScroll.size&&document.body.classList.remove(oe)}canStart(Ce){return!(void 0!==this.capturedId||this.isDisabled(Ce))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Ce){const we=this.disabledGestures.get(Ce);return!!(we&&we.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(ln,at,B)=>{"use strict";B.r(at),B.d(at,{MENU_BACK_BUTTON_PRIORITY:()=>xe,OVERLAY_BACK_BUTTON_PRIORITY:()=>oe,blockHardwareBackButton:()=>m,startHardwareBackButton:()=>q});var y=B(5861);const m=()=>{document.addEventListener("backbutton",()=>{})},q=()=>{const Pe=document;let Ce=!1;Pe.addEventListener("backbutton",()=>{if(Ce)return;let we=0,He=[];const Se=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ke,je){He.push({priority:ke,handler:je,id:we++})}}});Pe.dispatchEvent(Se);const me=function(){var ke=(0,y.Z)(function*(je){try{if(null!=je&&je.handler){const Le=je.handler(De);null!=Le&&(yield Le)}}catch(Le){console.error(Le)}});return function(Le){return ke.apply(this,arguments)}}(),De=()=>{if(He.length>0){let ke={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};He.forEach(je=>{je.priority>=ke.priority&&(ke=je)}),Ce=!0,He=He.filter(je=>je.id!==ke.id),me(ke).then(()=>Ce=!1)}};De()})},oe=100,xe=99},3577:(ln,at,B)=>{"use strict";B.d(at,{a:()=>we,b:()=>He,c:()=>q,d:()=>Xe,e:()=>Le,f:()=>je,g:()=>Se,h:()=>ke,i:()=>Ce,j:()=>Ae,k:()=>xe,l:()=>Te,m:()=>oe,n:()=>De,o:()=>Ie,p:()=>dt,q:()=>ze,r:()=>me,s:()=>ht,t:()=>y,u:()=>Y,v:()=>ae});const y=(Ke,fe=0)=>new Promise(Ct=>{m(Ke,fe,Ct)}),m=(Ke,fe=0,Ct)=>{let Ue,it;const Et={passive:!0},gt=()=>{Ue&&Ue()},wt=yt=>{(void 0===yt||Ke===yt.target)&&(gt(),Ct(yt))};return Ke&&(Ke.addEventListener("webkitTransitionEnd",wt,Et),Ke.addEventListener("transitionend",wt,Et),it=setTimeout(wt,fe+500),Ue=()=>{it&&(clearTimeout(it),it=void 0),Ke.removeEventListener("webkitTransitionEnd",wt,Et),Ke.removeEventListener("transitionend",wt,Et)}),gt},q=(Ke,fe)=>{Ke.componentOnReady?Ke.componentOnReady().then(Ct=>fe(Ct)):me(()=>fe(Ke))},oe=Ke=>void 0!==Ke.componentOnReady,xe=(Ke,fe=[])=>{const Ct={};return fe.forEach(Ue=>{Ke.hasAttribute(Ue)&&(null!==Ke.getAttribute(Ue)&&(Ct[Ue]=Ke.getAttribute(Ue)),Ke.removeAttribute(Ue))}),Ct},Pe=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Ce=(Ke,fe)=>{let Ct=Pe;return fe&&fe.length>0&&(Ct=Ct.filter(Ue=>!fe.includes(Ue))),xe(Ke,Ct)},we=(Ke,fe,Ct,Ue)=>{var it;if(typeof window<"u"){const Et=window,Ve=null===(it=null==Et?void 0:Et.Ionic)||void 0===it?void 0:it.config;if(Ve){const gt=Ve.get("_ael");if(gt)return gt(Ke,fe,Ct,Ue);if(Ve._ael)return Ve._ael(Ke,fe,Ct,Ue)}}return Ke.addEventListener(fe,Ct,Ue)},He=(Ke,fe,Ct,Ue)=>{var it;if(typeof window<"u"){const Et=window,Ve=null===(it=null==Et?void 0:Et.Ionic)||void 0===it?void 0:it.config;if(Ve){const gt=Ve.get("_rel");if(gt)return gt(Ke,fe,Ct,Ue);if(Ve._rel)return Ve._rel(Ke,fe,Ct,Ue)}}return Ke.removeEventListener(fe,Ct,Ue)},Se=(Ke,fe=Ke)=>Ke.shadowRoot||fe,me=Ke=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Ke):"function"==typeof requestAnimationFrame?requestAnimationFrame(Ke):setTimeout(Ke),De=Ke=>!!Ke.shadowRoot&&!!Ke.attachShadow,ke=Ke=>{const fe=Ke.closest("ion-item");return fe?fe.querySelector("ion-label"):null},je=Ke=>{if(Ke.focus(),Ke.classList.contains("ion-focusable")){const fe=Ke.closest("ion-app");fe&&fe.setFocus([Ke])}},Le=(Ke,fe)=>{let Ct;const Ue=Ke.getAttribute("aria-labelledby"),it=Ke.id;let Et=null!==Ue&&""!==Ue.trim()?Ue:fe+"-lbl",Ve=null!==Ue&&""!==Ue.trim()?document.getElementById(Ue):ke(Ke);return Ve?(null===Ue&&(Ve.id=Et),Ct=Ve.textContent,Ve.setAttribute("aria-hidden","true")):""!==it.trim()&&(Ve=document.querySelector(`label[for="${it}"]`),Ve&&(""!==Ve.id?Et=Ve.id:Ve.id=Et=`${it}-lbl`,Ct=Ve.textContent)),{label:Ve,labelId:Et,labelText:Ct}},Xe=(Ke,fe,Ct,Ue,it)=>{if(Ke||De(fe)){let Et=fe.querySelector("input.aux-input");Et||(Et=fe.ownerDocument.createElement("input"),Et.type="hidden",Et.classList.add("aux-input"),fe.appendChild(Et)),Et.disabled=it,Et.name=Ct,Et.value=Ue||""}},Te=(Ke,fe,Ct)=>Math.max(Ke,Math.min(fe,Ct)),Ie=(Ke,fe)=>{if(!Ke){const Ct="ASSERT: "+fe;throw console.error(Ct),new Error(Ct)}},ae=Ke=>Ke.timeStamp||Date.now(),dt=Ke=>{if(Ke){const fe=Ke.changedTouches;if(fe&&fe.length>0){const Ct=fe[0];return{x:Ct.clientX,y:Ct.clientY}}if(void 0!==Ke.pageX)return{x:Ke.pageX,y:Ke.pageY}}return{x:0,y:0}},ze=Ke=>{const fe="rtl"===document.dir;switch(Ke){case"start":return fe;case"end":return!fe;default:throw new Error(`"${Ke}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Ae=(Ke,fe)=>{const Ct=Ke._original||Ke;return{_original:Ke,emit:Y(Ct.emit.bind(Ct),fe)}},Y=(Ke,fe=0)=>{let Ct;return(...Ue)=>{clearTimeout(Ct),Ct=setTimeout(Ke,fe,...Ue)}},ht=(Ke,fe)=>{if(null!=Ke||(Ke={}),null!=fe||(fe={}),Ke===fe)return!0;const Ct=Object.keys(Ke);if(Ct.length!==Object.keys(fe).length)return!1;for(const Ue of Ct)if(!(Ue in fe)||Ke[Ue]!==fe[Ue])return!1;return!0}},3457:(ln,at,B)=>{"use strict";B.d(at,{w:()=>y});const y=typeof window<"u"?window:void 0},1898:(ln,at,B)=>{"use strict";B.r(at),B.d(at,{GESTURE_CONTROLLER:()=>y.G,createGesture:()=>He});var y=B(4349);const m=(ke,je,Le,Xe)=>{const Te=q(ke)?{capture:!!Xe.capture,passive:!!Xe.passive}:!!Xe.capture;let Ie,ae;return ke.__zone_symbol__addEventListener?(Ie="__zone_symbol__addEventListener",ae="__zone_symbol__removeEventListener"):(Ie="addEventListener",ae="removeEventListener"),ke[Ie](je,Le,Te),()=>{ke[ae](je,Le,Te)}},q=ke=>{if(void 0===oe)try{const je=Object.defineProperty({},"passive",{get:()=>{oe=!0}});ke.addEventListener("optsTest",()=>{},je)}catch{oe=!1}return!!oe};let oe;const Ce=ke=>ke instanceof Document?ke:ke.ownerDocument,He=ke=>{let je=!1,Le=!1,Xe=!0,Te=!1;const Ie=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},ke),ae=Ie.canStart,dt=Ie.onWillStart,ze=Ie.onStart,Ae=Ie.onEnd,Y=Ie.notCaptured,ht=Ie.onMove,Ke=Ie.threshold,fe=Ie.passive,Ct=Ie.blurOnStart,Ue={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},it=((ke,je,Le)=>{const Xe=Le*(Math.PI/180),Te="x"===ke,Ie=Math.cos(Xe),ae=je*je;let dt=0,ze=0,Ae=!1,Y=0;return{start(ht,Ke){dt=ht,ze=Ke,Y=0,Ae=!0},detect(ht,Ke){if(!Ae)return!1;const fe=ht-dt,Ct=Ke-ze,Ue=fe*fe+Ct*Ct;if(Ue<ae)return!1;const it=Math.sqrt(Ue),Et=(Te?fe:Ct)/it;return Y=Et>Ie?1:Et<-Ie?-1:0,Ae=!1,!0},isGesture:()=>0!==Y,getDirection:()=>Y}})(Ie.direction,Ie.threshold,Ie.maxAngle),Et=y.G.createGesture({name:ke.gestureName,priority:ke.gesturePriority,disableScroll:ke.disableScroll}),wt=()=>{je&&(Te=!1,ht&&ht(Ue))},yt=()=>!!Et.capture()&&(je=!0,Xe=!1,Ue.startX=Ue.currentX,Ue.startY=Ue.currentY,Ue.startTime=Ue.currentTime,dt?dt(Ue).then(We):We(),!0),We=()=>{Ct&&(()=>{if(typeof document<"u"){const jt=document.activeElement;null!=jt&&jt.blur&&jt.blur()}})(),ze&&ze(Ue),Xe=!0},Ge=()=>{je=!1,Le=!1,Te=!1,Xe=!0,Et.release()},_t=jt=>{const hn=je,Dt=Xe;if(Ge(),Dt){if(Se(Ue,jt),hn)return void(Ae&&Ae(Ue));Y&&Y(Ue)}},mt=((ke,je,Le,Xe,Te)=>{let Ie,ae,dt,ze,Ae,Y,ht,Ke=0;const fe=qe=>{Ke=Date.now()+2e3,je(qe)&&(!ae&&Le&&(ae=m(ke,"touchmove",Le,Te)),dt||(dt=m(qe.target,"touchend",Ue,Te)),ze||(ze=m(qe.target,"touchcancel",Ue,Te)))},Ct=qe=>{Ke>Date.now()||je(qe)&&(!Y&&Le&&(Y=m(Ce(ke),"mousemove",Le,Te)),ht||(ht=m(Ce(ke),"mouseup",it,Te)))},Ue=qe=>{Et(),Xe&&Xe(qe)},it=qe=>{Ve(),Xe&&Xe(qe)},Et=()=>{ae&&ae(),dt&&dt(),ze&&ze(),ae=dt=ze=void 0},Ve=()=>{Y&&Y(),ht&&ht(),Y=ht=void 0},gt=()=>{Et(),Ve()},wt=(qe=!0)=>{qe?(Ie||(Ie=m(ke,"touchstart",fe,Te)),Ae||(Ae=m(ke,"mousedown",Ct,Te))):(Ie&&Ie(),Ae&&Ae(),Ie=Ae=void 0,gt())};return{enable:wt,stop:gt,destroy:()=>{wt(!1),Xe=Le=je=void 0}}})(Ie.el,jt=>{const hn=De(jt);return!(Le||!Xe||(me(jt,Ue),Ue.startX=Ue.currentX,Ue.startY=Ue.currentY,Ue.startTime=Ue.currentTime=hn,Ue.velocityX=Ue.velocityY=Ue.deltaX=Ue.deltaY=0,Ue.event=jt,ae&&!1===ae(Ue))||(Et.release(),!Et.start()))&&(Le=!0,0===Ke?yt():(it.start(Ue.startX,Ue.startY),!0))},jt=>{je?!Te&&Xe&&(Te=!0,Se(Ue,jt),requestAnimationFrame(wt)):(Se(Ue,jt),it.detect(Ue.currentX,Ue.currentY)&&(!it.isGesture()||!yt())&&St())},_t,{capture:!1,passive:fe}),St=()=>{Ge(),mt.stop(),Y&&Y(Ue)};return{enable(jt=!0){jt||(je&&_t(void 0),Ge()),mt.enable(jt)},destroy(){Et.destroy(),mt.destroy()}}},Se=(ke,je)=>{if(!je)return;const Le=ke.currentX,Xe=ke.currentY,Te=ke.currentTime;me(je,ke);const Ie=ke.currentX,ae=ke.currentY,ze=(ke.currentTime=De(je))-Te;if(ze>0&&ze<100){const Y=(ae-Xe)/ze;ke.velocityX=(Ie-Le)/ze*.7+.3*ke.velocityX,ke.velocityY=.7*Y+.3*ke.velocityY}ke.deltaX=Ie-ke.startX,ke.deltaY=ae-ke.startY,ke.event=je},me=(ke,je)=>{let Le=0,Xe=0;if(ke){const Te=ke.changedTouches;if(Te&&Te.length>0){const Ie=Te[0];Le=Ie.clientX,Xe=Ie.clientY}else void 0!==ke.pageX&&(Le=ke.pageX,Xe=ke.pageY)}je.currentX=Le,je.currentY=Xe},De=ke=>ke.timeStamp||Date.now()},4083:(ln,at,B)=>{"use strict";B.d(at,{B:()=>me,H:()=>gt,a:()=>Ps,b:()=>Ee,c:()=>jt,d:()=>Rt,e:()=>$i,f:()=>ut,g:()=>hn,h:()=>Et,i:()=>Sr,j:()=>De,p:()=>as,r:()=>kt,w:()=>ei});var y=B(5861);let q,oe,xe,Pe=!1,Ce=!1,we=!1,He=!1,Se=!1;const me={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},De=ce=>{const Me=new URL(ce,Wn.$resourcesUrl$);return Me.origin!==wr.location.origin?Me.href:Me.pathname},ae="s-id",dt="sty-id",Y="http://www.w3.org/1999/xlink",ht={},Ue=ce=>"object"==(ce=typeof ce)||"function"===ce;function it(ce){var Me,Ye,be;return null!==(be=null===(Ye=null===(Me=ce.head)||void 0===Me?void 0:Me.querySelector('meta[name="csp-nonce"]'))||void 0===Ye?void 0:Ye.getAttribute("content"))&&void 0!==be?be:void 0}const Et=(ce,Me,...Ye)=>{let be=null,Je=null,nt=null,Lt=!1,$t=!1;const Gt=[],Wt=Qn=>{for(let Ln=0;Ln<Qn.length;Ln++)be=Qn[Ln],Array.isArray(be)?Wt(be):null!=be&&"boolean"!=typeof be&&((Lt="function"!=typeof ce&&!Ue(be))&&(be=String(be)),Lt&&$t?Gt[Gt.length-1].$text$+=be:Gt.push(Lt?Ve(null,be):be),$t=Lt)};if(Wt(Ye),Me){Me.key&&(Je=Me.key),Me.name&&(nt=Me.name);{const Qn=Me.className||Me.class;Qn&&(Me.class="object"!=typeof Qn?Qn:Object.keys(Qn).filter(Ln=>Qn[Ln]).join(" "))}}if("function"==typeof ce)return ce(null===Me?{}:Me,Gt,yt);const cn=Ve(ce,null);return cn.$attrs$=Me,Gt.length>0&&(cn.$children$=Gt),cn.$key$=Je,cn.$name$=nt,cn},Ve=(ce,Me)=>({$flags$:0,$tag$:ce,$text$:Me,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),gt={},yt={forEach:(ce,Me)=>ce.map(qe).forEach(Me),map:(ce,Me)=>ce.map(qe).map(Me).map(We)},qe=ce=>({vattrs:ce.$attrs$,vchildren:ce.$children$,vkey:ce.$key$,vname:ce.$name$,vtag:ce.$tag$,vtext:ce.$text$}),We=ce=>{if("function"==typeof ce.vtag){const Ye=Object.assign({},ce.vattrs);return ce.vkey&&(Ye.key=ce.vkey),ce.vname&&(Ye.name=ce.vname),Et(ce.vtag,Ye,...ce.vchildren||[])}const Me=Ve(ce.vtag,ce.vtext);return Me.$attrs$=ce.vattrs,Me.$children$=ce.vchildren,Me.$key$=ce.vkey,Me.$name$=ce.vname,Me},_t=(ce,Me,Ye,be,Je,nt,Lt)=>{let $t,Gt,Wt,cn;if(1===nt.nodeType){for($t=nt.getAttribute("c-id"),$t&&(Gt=$t.split("."),(Gt[0]===Lt||"0"===Gt[0])&&(Wt={$flags$:0,$hostId$:Gt[0],$nodeId$:Gt[1],$depth$:Gt[2],$index$:Gt[3],$tag$:nt.tagName.toLowerCase(),$elm$:nt,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},Me.push(Wt),nt.removeAttribute("c-id"),ce.$children$||(ce.$children$=[]),ce.$children$[Wt.$index$]=Wt,ce=Wt,be&&"0"===Wt.$depth$&&(be[Wt.$index$]=Wt.$elm$))),cn=nt.childNodes.length-1;cn>=0;cn--)_t(ce,Me,Ye,be,Je,nt.childNodes[cn],Lt);if(nt.shadowRoot)for(cn=nt.shadowRoot.childNodes.length-1;cn>=0;cn--)_t(ce,Me,Ye,be,Je,nt.shadowRoot.childNodes[cn],Lt)}else if(8===nt.nodeType)Gt=nt.nodeValue.split("."),(Gt[1]===Lt||"0"===Gt[1])&&($t=Gt[0],Wt={$flags$:0,$hostId$:Gt[1],$nodeId$:Gt[2],$depth$:Gt[3],$index$:Gt[4],$elm$:nt,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===$t?(Wt.$elm$=nt.nextSibling,Wt.$elm$&&3===Wt.$elm$.nodeType&&(Wt.$text$=Wt.$elm$.textContent,Me.push(Wt),nt.remove(),ce.$children$||(ce.$children$=[]),ce.$children$[Wt.$index$]=Wt,be&&"0"===Wt.$depth$&&(be[Wt.$index$]=Wt.$elm$))):Wt.$hostId$===Lt&&("s"===$t?(Wt.$tag$="slot",nt["s-sn"]=Gt[5]?Wt.$name$=Gt[5]:"",nt["s-sr"]=!0,be&&(Wt.$elm$=jn.createElement(Wt.$tag$),Wt.$name$&&Wt.$elm$.setAttribute("name",Wt.$name$),nt.parentNode.insertBefore(Wt.$elm$,nt),nt.remove(),"0"===Wt.$depth$&&(be[Wt.$index$]=Wt.$elm$)),Ye.push(Wt),ce.$children$||(ce.$children$=[]),ce.$children$[Wt.$index$]=Wt):"r"===$t&&(be?nt.remove():(Je["s-cr"]=nt,nt["s-cn"]=!0))));else if(ce&&"style"===ce.$tag$){const Qn=Ve(null,nt.textContent);Qn.$elm$=nt,Qn.$index$="0",ce.$children$=[Qn]}},mt=(ce,Me)=>{if(1===ce.nodeType){let Ye=0;for(;Ye<ce.childNodes.length;Ye++)mt(ce.childNodes[Ye],Me);if(ce.shadowRoot)for(Ye=0;Ye<ce.shadowRoot.childNodes.length;Ye++)mt(ce.shadowRoot.childNodes[Ye],Me)}else if(8===ce.nodeType){const Ye=ce.nodeValue.split(".");"o"===Ye[0]&&(Me.set(Ye[1]+"."+Ye[2],ce),ce.nodeValue="",ce["s-en"]=Ye[3])}},jt=ce=>Fr.push(ce),hn=ce=>Wr(ce).$modeName$,ut=ce=>Wr(ce).$hostElement$,Rt=(ce,Me,Ye)=>{const be=ut(ce);return{emit:Je=>rn(be,Me,{bubbles:!!(4&Ye),composed:!!(2&Ye),cancelable:!!(1&Ye),detail:Je})}},rn=(ce,Me,Ye)=>{const be=Wn.ce(Me,Ye);return ce.dispatchEvent(be),be},Rn=new WeakMap,Un=(ce,Me,Ye)=>{let be=Tn.get(ce);li&&Ye?(be=be||new CSSStyleSheet,"string"==typeof be?be=Me:be.replaceSync(Me)):be=Me,Tn.set(ce,be)},fn=(ce,Me,Ye,be)=>{var Je;let nt=En(Me,Ye);const Lt=Tn.get(nt);if(ce=11===ce.nodeType?ce:jn,Lt)if("string"==typeof Lt){let Gt,$t=Rn.get(ce=ce.head||ce);if($t||Rn.set(ce,$t=new Set),!$t.has(nt)){if(ce.host&&(Gt=ce.querySelector(`[${dt}="${nt}"]`)))Gt.innerHTML=Lt;else{Gt=jn.createElement("style"),Gt.innerHTML=Lt;const Wt=null!==(Je=Wn.$nonce$)&&void 0!==Je?Je:it(jn);null!=Wt&&Gt.setAttribute("nonce",Wt),ce.insertBefore(Gt,ce.querySelector("link"))}$t&&$t.add(nt)}}else ce.adoptedStyleSheets.includes(Lt)||(ce.adoptedStyleSheets=[...ce.adoptedStyleSheets,Lt]);return nt},En=(ce,Me)=>"sc-"+(Me&&32&ce.$flags$?ce.$tagName$+"-"+Me:ce.$tagName$),Ht=ce=>ce.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),cr=(ce,Me,Ye,be,Je,nt)=>{if(Ye!==be){let Lt=nn(ce,Me),$t=Me.toLowerCase();if("class"===Me){const Gt=ce.classList,Wt=pn(Ye),cn=pn(be);Gt.remove(...Wt.filter(Qn=>Qn&&!cn.includes(Qn))),Gt.add(...cn.filter(Qn=>Qn&&!Wt.includes(Qn)))}else if("style"===Me){for(const Gt in Ye)(!be||null==be[Gt])&&(Gt.includes("-")?ce.style.removeProperty(Gt):ce.style[Gt]="");for(const Gt in be)(!Ye||be[Gt]!==Ye[Gt])&&(Gt.includes("-")?ce.style.setProperty(Gt,be[Gt]):ce.style[Gt]=be[Gt])}else if("key"!==Me)if("ref"===Me)be&&be(ce);else if(Lt||"o"!==Me[0]||"n"!==Me[1]){const Gt=Ue(be);if((Lt||Gt&&null!==be)&&!Je)try{if(ce.tagName.includes("-"))ce[Me]=be;else{const cn=null==be?"":be;"list"===Me?Lt=!1:(null==Ye||ce[Me]!=cn)&&(ce[Me]=cn)}}catch{}let Wt=!1;$t!==($t=$t.replace(/^xlink\:?/,""))&&(Me=$t,Wt=!0),null==be||!1===be?(!1!==be||""===ce.getAttribute(Me))&&(Wt?ce.removeAttributeNS(Y,Me):ce.removeAttribute(Me)):(!Lt||4&nt||Je)&&!Gt&&(be=!0===be?"":be,Wt?ce.setAttributeNS(Y,Me,be):ce.setAttribute(Me,be))}else Me="-"===Me[2]?Me.slice(3):nn(wr,$t)?$t.slice(2):$t[2]+Me.slice(3),Ye&&Wn.rel(ce,Me,Ye,!1),be&&Wn.ael(ce,Me,be,!1)}},Zn=/\s/,pn=ce=>ce?ce.split(Zn):[],dr=(ce,Me,Ye,be)=>{const Je=11===Me.$elm$.nodeType&&Me.$elm$.host?Me.$elm$.host:Me.$elm$,nt=ce&&ce.$attrs$||ht,Lt=Me.$attrs$||ht;for(be in nt)be in Lt||cr(Je,be,nt[be],void 0,Ye,Me.$flags$);for(be in Lt)cr(Je,be,nt[be],Lt[be],Ye,Me.$flags$)},Mi=(ce,Me,Ye,be)=>{const Je=Me.$children$[Ye];let Lt,$t,Gt,nt=0;if(Pe||(we=!0,"slot"===Je.$tag$&&(q&&be.classList.add(q+"-s"),Je.$flags$|=Je.$children$?2:1)),null!==Je.$text$)Lt=Je.$elm$=jn.createTextNode(Je.$text$);else if(1&Je.$flags$)Lt=Je.$elm$=jn.createTextNode("");else{if(He||(He="svg"===Je.$tag$),Lt=Je.$elm$=jn.createElementNS(He?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Je.$flags$?"slot-fb":Je.$tag$),He&&"foreignObject"===Je.$tag$&&(He=!1),dr(null,Je,He),(ce=>null!=ce)(q)&&Lt["s-si"]!==q&&Lt.classList.add(Lt["s-si"]=q),Je.$children$)for(nt=0;nt<Je.$children$.length;++nt)$t=Mi(ce,Je,nt,Lt),$t&&Lt.appendChild($t);"svg"===Je.$tag$?He=!1:"foreignObject"===Lt.tagName&&(He=!0)}return Lt["s-hn"]=xe,3&Je.$flags$&&(Lt["s-sr"]=!0,Lt["s-cr"]=oe,Lt["s-sn"]=Je.$name$||"",Gt=ce&&ce.$children$&&ce.$children$[Ye],Gt&&Gt.$tag$===Je.$tag$&&ce.$elm$&&Mr(ce.$elm$,!1)),Lt},Mr=(ce,Me)=>{Wn.$flags$|=1;const Ye=ce.childNodes;for(let be=Ye.length-1;be>=0;be--){const Je=Ye[be];Je["s-hn"]!==xe&&Je["s-ol"]&&(sn(Je).insertBefore(Je,wn(Je)),Je["s-ol"].remove(),Je["s-ol"]=void 0,we=!0),Me&&Mr(Je,Me)}Wn.$flags$&=-2},Ri=(ce,Me,Ye,be,Je,nt)=>{let $t,Lt=ce["s-cr"]&&ce["s-cr"].parentNode||ce;for(Lt.shadowRoot&&Lt.tagName===xe&&(Lt=Lt.shadowRoot);Je<=nt;++Je)be[Je]&&($t=Mi(null,Ye,Je,ce),$t&&(be[Je].$elm$=$t,Lt.insertBefore($t,wn(Me))))},bi=(ce,Me,Ye)=>{for(let be=Me;be<=Ye;++be){const Je=ce[be];if(Je){const nt=Je.$elm$;ai(Je),nt&&(Ce=!0,nt["s-ol"]?nt["s-ol"].remove():Mr(nt,!0),nt.remove())}}},Xn=(ce,Me)=>ce.$tag$===Me.$tag$&&("slot"===ce.$tag$?ce.$name$===Me.$name$:ce.$key$===Me.$key$),wn=ce=>ce&&ce["s-ol"]||ce,sn=ce=>(ce["s-ol"]?ce["s-ol"]:ce).parentNode,Nr=(ce,Me)=>{const Ye=Me.$elm$=ce.$elm$,be=ce.$children$,Je=Me.$children$,nt=Me.$tag$,Lt=Me.$text$;let $t;null===Lt?(He="svg"===nt||"foreignObject"!==nt&&He,"slot"===nt||dr(ce,Me,He),null!==be&&null!==Je?((ce,Me,Ye,be)=>{let Fi,Li,Je=0,nt=0,Lt=0,$t=0,Gt=Me.length-1,Wt=Me[0],cn=Me[Gt],Qn=be.length-1,Ln=be[0],ar=be[Qn];for(;Je<=Gt&&nt<=Qn;)if(null==Wt)Wt=Me[++Je];else if(null==cn)cn=Me[--Gt];else if(null==Ln)Ln=be[++nt];else if(null==ar)ar=be[--Qn];else if(Xn(Wt,Ln))Nr(Wt,Ln),Wt=Me[++Je],Ln=be[++nt];else if(Xn(cn,ar))Nr(cn,ar),cn=Me[--Gt],ar=be[--Qn];else if(Xn(Wt,ar))("slot"===Wt.$tag$||"slot"===ar.$tag$)&&Mr(Wt.$elm$.parentNode,!1),Nr(Wt,ar),ce.insertBefore(Wt.$elm$,cn.$elm$.nextSibling),Wt=Me[++Je],ar=be[--Qn];else if(Xn(cn,Ln))("slot"===Wt.$tag$||"slot"===ar.$tag$)&&Mr(cn.$elm$.parentNode,!1),Nr(cn,Ln),ce.insertBefore(cn.$elm$,Wt.$elm$),cn=Me[--Gt],Ln=be[++nt];else{for(Lt=-1,$t=Je;$t<=Gt;++$t)if(Me[$t]&&null!==Me[$t].$key$&&Me[$t].$key$===Ln.$key$){Lt=$t;break}Lt>=0?(Li=Me[Lt],Li.$tag$!==Ln.$tag$?Fi=Mi(Me&&Me[nt],Ye,Lt,ce):(Nr(Li,Ln),Me[Lt]=void 0,Fi=Li.$elm$),Ln=be[++nt]):(Fi=Mi(Me&&Me[nt],Ye,nt,ce),Ln=be[++nt]),Fi&&sn(Wt.$elm$).insertBefore(Fi,wn(Wt.$elm$))}Je>Gt?Ri(ce,null==be[Qn+1]?null:be[Qn+1].$elm$,Ye,be,nt,Qn):nt>Qn&&bi(Me,Je,Gt)})(Ye,be,Me,Je):null!==Je?(null!==ce.$text$&&(Ye.textContent=""),Ri(Ye,null,Me,Je,0,Je.length-1)):null!==be&&bi(be,0,be.length-1),He&&"svg"===nt&&(He=!1)):($t=Ye["s-cr"])?$t.parentNode.textContent=Lt:ce.$text$!==Lt&&(Ye.data=Lt)},Xr=ce=>{const Me=ce.childNodes;let Ye,be,Je,nt,Lt,$t;for(be=0,Je=Me.length;be<Je;be++)if(Ye=Me[be],1===Ye.nodeType){if(Ye["s-sr"])for(Lt=Ye["s-sn"],Ye.hidden=!1,nt=0;nt<Je;nt++)if($t=Me[nt].nodeType,Me[nt]["s-hn"]!==Ye["s-hn"]||""!==Lt){if(1===$t&&Lt===Me[nt].getAttribute("slot")){Ye.hidden=!0;break}}else if(1===$t||3===$t&&""!==Me[nt].textContent.trim()){Ye.hidden=!0;break}Xr(Ye)}},pr=[],Ci=ce=>{let Me,Ye,be,Je,nt,Lt,$t=0;const Gt=ce.childNodes,Wt=Gt.length;for(;$t<Wt;$t++){if(Me=Gt[$t],Me["s-sr"]&&(Ye=Me["s-cr"])&&Ye.parentNode)for(be=Ye.parentNode.childNodes,Je=Me["s-sn"],Lt=be.length-1;Lt>=0;Lt--)Ye=be[Lt],!Ye["s-cn"]&&!Ye["s-nr"]&&Ye["s-hn"]!==Me["s-hn"]&&(kr(Ye,Je)?(nt=pr.find(cn=>cn.$nodeToRelocate$===Ye),Ce=!0,Ye["s-sn"]=Ye["s-sn"]||Je,nt?nt.$slotRefNode$=Me:pr.push({$slotRefNode$:Me,$nodeToRelocate$:Ye}),Ye["s-sr"]&&pr.map(cn=>{kr(cn.$nodeToRelocate$,Ye["s-sn"])&&(nt=pr.find(Qn=>Qn.$nodeToRelocate$===Ye),nt&&!cn.$slotRefNode$&&(cn.$slotRefNode$=nt.$slotRefNode$))})):pr.some(cn=>cn.$nodeToRelocate$===Ye)||pr.push({$nodeToRelocate$:Ye}));1===Me.nodeType&&Ci(Me)}},kr=(ce,Me)=>1===ce.nodeType?null===ce.getAttribute("slot")&&""===Me||ce.getAttribute("slot")===Me:ce["s-sn"]===Me||""===Me,ai=ce=>{ce.$attrs$&&ce.$attrs$.ref&&ce.$attrs$.ref(null),ce.$children$&&ce.$children$.map(ai)},yi=(ce,Me)=>{Me&&!ce.$onRenderResolve$&&Me["s-p"]&&Me["s-p"].push(new Promise(Ye=>ce.$onRenderResolve$=Ye))},sr=(ce,Me)=>{if(ce.$flags$|=16,!(4&ce.$flags$))return yi(ce,ce.$ancestorComponent$),ei(()=>Di(ce,Me));ce.$flags$|=512},Di=(ce,Me)=>{const be=ce.$lazyInstance$;let Je;return Me&&(ce.$flags$|=256,ce.$queuedListeners$&&(ce.$queuedListeners$.map(([nt,Lt])=>Ur(be,nt,Lt)),ce.$queuedListeners$=null),Je=Ur(be,"componentWillLoad")),Je=tr(Je,()=>Ur(be,"componentWillRender")),tr(Je,()=>ni(ce,be,Me))},tr=(ce,Me)=>ce instanceof Promise?ce.then(Me):Me(),ni=function(){var ce=(0,y.Z)(function*(Me,Ye,be){const Je=Me.$hostElement$,Lt=Je["s-rc"];be&&(ce=>{const Me=ce.$cmpMeta$,Ye=ce.$hostElement$,be=Me.$flags$,nt=fn(Ye.shadowRoot?Ye.shadowRoot:Ye.getRootNode(),Me,ce.$modeName$);10&be&&(Ye["s-sc"]=nt,Ye.classList.add(nt+"-h"),2&be&&Ye.classList.add(nt+"-s"))})(Me);Gr(Me,Ye),Lt&&(Lt.map(Gt=>Gt()),Je["s-rc"]=void 0);{const Gt=Je["s-p"],Wt=()=>ri(Me);0===Gt.length?Wt():(Promise.all(Gt).then(Wt),Me.$flags$|=4,Gt.length=0)}});return function(Ye,be,Je){return ce.apply(this,arguments)}}(),Gr=(ce,Me,Ye)=>{try{Me=Me.render&&Me.render(),ce.$flags$&=-17,ce.$flags$|=2,((ce,Me)=>{const Ye=ce.$hostElement$,be=ce.$cmpMeta$,Je=ce.$vnode$||Ve(null,null),nt=(ce=>ce&&ce.$tag$===gt)(Me)?Me:Et(null,null,Me);if(xe=Ye.tagName,be.$attrsToReflect$&&(nt.$attrs$=nt.$attrs$||{},be.$attrsToReflect$.map(([Lt,$t])=>nt.$attrs$[$t]=Ye[Lt])),nt.$tag$=null,nt.$flags$|=4,ce.$vnode$=nt,nt.$elm$=Je.$elm$=Ye.shadowRoot||Ye,q=Ye["s-sc"],oe=Ye["s-cr"],Pe=0!=(1&be.$flags$),Ce=!1,Nr(Je,nt),Wn.$flags$|=1,we){Ci(nt.$elm$);let Lt,$t,Gt,Wt,cn,Qn,Ln=0;for(;Ln<pr.length;Ln++)Lt=pr[Ln],$t=Lt.$nodeToRelocate$,$t["s-ol"]||(Gt=jn.createTextNode(""),Gt["s-nr"]=$t,$t.parentNode.insertBefore($t["s-ol"]=Gt,$t));for(Ln=0;Ln<pr.length;Ln++)if(Lt=pr[Ln],$t=Lt.$nodeToRelocate$,Lt.$slotRefNode$){for(Wt=Lt.$slotRefNode$.parentNode,cn=Lt.$slotRefNode$.nextSibling,Gt=$t["s-ol"];Gt=Gt.previousSibling;)if(Qn=Gt["s-nr"],Qn&&Qn["s-sn"]===$t["s-sn"]&&Wt===Qn.parentNode&&(Qn=Qn.nextSibling,!Qn||!Qn["s-nr"])){cn=Qn;break}(!cn&&Wt!==$t.parentNode||$t.nextSibling!==cn)&&$t!==cn&&(!$t["s-hn"]&&$t["s-ol"]&&($t["s-hn"]=$t["s-ol"].parentNode.nodeName),Wt.insertBefore($t,cn))}else 1===$t.nodeType&&($t.hidden=!0)}Ce&&Xr(nt.$elm$),Wn.$flags$&=-2,pr.length=0})(ce,Me)}catch(be){On(be,ce.$hostElement$)}return null},ri=ce=>{const Ye=ce.$hostElement$,Je=ce.$lazyInstance$,nt=ce.$ancestorComponent$;Ur(Je,"componentDidRender"),64&ce.$flags$?Ur(Je,"componentDidUpdate"):(ce.$flags$|=64,Jr(Ye),Ur(Je,"componentDidLoad"),ce.$onReadyResolve$(Ye),nt||_i()),ce.$onInstanceResolve$(Ye),ce.$onRenderResolve$&&(ce.$onRenderResolve$(),ce.$onRenderResolve$=void 0),512&ce.$flags$&&ui(()=>sr(ce,!1)),ce.$flags$&=-517},Sr=ce=>{{const Me=Wr(ce),Ye=Me.$hostElement$.isConnected;return Ye&&2==(18&Me.$flags$)&&sr(Me,!1),Ye}},_i=ce=>{Jr(jn.documentElement),ui(()=>rn(wr,"appload",{detail:{namespace:"ionic"}}))},Ur=(ce,Me,Ye)=>{if(ce&&ce[Me])try{return ce[Me](Ye)}catch(be){On(be)}},Jr=ce=>ce.classList.add("hydrated"),he=(ce,Me,Ye)=>{if(Me.$members$){ce.watchers&&(Me.$watchers$=ce.watchers);const be=Object.entries(Me.$members$),Je=ce.prototype;if(be.map(([nt,[Lt]])=>{31&Lt||2&Ye&&32&Lt?Object.defineProperty(Je,nt,{get(){return((ce,Me)=>Wr(this).$instanceValues$.get(Me))(0,nt)},set($t){((ce,Me,Ye,be)=>{const Je=Wr(ce),nt=Je.$hostElement$,Lt=Je.$instanceValues$.get(Me),$t=Je.$flags$,Gt=Je.$lazyInstance$;Ye=((ce,Me)=>null==ce||Ue(ce)?ce:4&Me?"false"!==ce&&(""===ce||!!ce):2&Me?parseFloat(ce):1&Me?String(ce):ce)(Ye,be.$members$[Me][0]);const Wt=Number.isNaN(Lt)&&Number.isNaN(Ye);if((!(8&$t)||void 0===Lt)&&Ye!==Lt&&!Wt&&(Je.$instanceValues$.set(Me,Ye),Gt)){if(be.$watchers$&&128&$t){const Qn=be.$watchers$[Me];Qn&&Qn.map(Ln=>{try{Gt[Ln](Ye,Lt,Me)}catch(ar){On(ar,nt)}})}2==(18&$t)&&sr(Je,!1)}})(this,nt,$t,Me)},configurable:!0,enumerable:!0}):1&Ye&&64&Lt&&Object.defineProperty(Je,nt,{value(...$t){const Gt=Wr(this);return Gt.$onInstancePromise$.then(()=>Gt.$lazyInstance$[nt](...$t))}})}),1&Ye){const nt=new Map;Je.attributeChangedCallback=function(Lt,$t,Gt){Wn.jmp(()=>{const Wt=nt.get(Lt);if(this.hasOwnProperty(Wt))Gt=this[Wt],delete this[Wt];else if(Je.hasOwnProperty(Wt)&&"number"==typeof this[Wt]&&this[Wt]==Gt)return;this[Wt]=(null!==Gt||"boolean"!=typeof this[Wt])&&Gt})},ce.observedAttributes=be.filter(([Lt,$t])=>15&$t[0]).map(([Lt,$t])=>{const Gt=$t[1]||Lt;return nt.set(Gt,Lt),512&$t[0]&&Me.$attrsToReflect$.push([Lt,Gt]),Gt})}}return ce},ye=function(){var ce=(0,y.Z)(function*(Me,Ye,be,Je,nt){if(!(32&Ye.$flags$)){Ye.$flags$|=32;{if((nt=vr(be)).then){const Wt=()=>{};nt=yield nt,Wt()}nt.isProxied||(be.$watchers$=nt.watchers,he(nt,be,2),nt.isProxied=!0);const Gt=()=>{};Ye.$flags$|=8;try{new nt(Ye)}catch(Wt){On(Wt)}Ye.$flags$&=-9,Ye.$flags$|=128,Gt(),de(Ye.$lazyInstance$)}if(nt.style){let Gt=nt.style;"string"!=typeof Gt&&(Gt=Gt[Ye.$modeName$=(ce=>Fr.map(Me=>Me(ce)).find(Me=>!!Me))(Me)]);const Wt=En(be,Ye.$modeName$);if(!Tn.has(Wt)){const cn=()=>{};Un(Wt,Gt,!!(1&be.$flags$)),cn()}}}const Lt=Ye.$ancestorComponent$,$t=()=>sr(Ye,!0);Lt&&Lt["s-rc"]?Lt["s-rc"].push($t):$t()});return function(Ye,be,Je,nt,Lt){return ce.apply(this,arguments)}}(),de=ce=>{Ur(ce,"connectedCallback")},Re=ce=>{const Me=ce["s-cr"]=jn.createComment("");Me["s-cn"]=!0,ce.insertBefore(Me,ce.firstChild)},Ee=(ce,Me={})=>{var Ye;const Je=[],nt=Me.exclude||[],Lt=wr.customElements,$t=jn.head,Gt=$t.querySelector("meta[charset]"),Wt=jn.createElement("style"),cn=[],Qn=jn.querySelectorAll(`[${dt}]`);let Ln,ar=!0,Fi=0;for(Object.assign(Wn,Me),Wn.$resourcesUrl$=new URL(Me.resourcesUrl||"./",jn.baseURI).href,Wn.$flags$|=2;Fi<Qn.length;Fi++)Un(Qn[Fi].getAttribute(dt),Ht(Qn[Fi].innerHTML),!0);ce.map(Li=>{Li[1].map(ct=>{const st={$flags$:ct[0],$tagName$:ct[1],$members$:ct[2],$listeners$:ct[3]};st.$members$=ct[2],st.$listeners$=ct[3],st.$attrsToReflect$=[],st.$watchers$={};const It=st.$tagName$,Kt=class extends HTMLElement{constructor(en){super(en),At(en=this,st),1&st.$flags$&&en.attachShadow({mode:"open",delegatesFocus:!!(16&st.$flags$)})}connectedCallback(){Ln&&(clearTimeout(Ln),Ln=null),ar?cn.push(this):Wn.jmp(()=>(ce=>{if(!(1&Wn.$flags$)){const Me=Wr(ce),Ye=Me.$cmpMeta$,be=()=>{};if(1&Me.$flags$)et(ce,Me,Ye.$listeners$),de(Me.$lazyInstance$);else{let Je;if(Me.$flags$|=1,Je=ce.getAttribute(ae),Je){if(1&Ye.$flags$){const nt=fn(ce.shadowRoot,Ye,ce.getAttribute("s-mode"));ce.classList.remove(nt+"-h",nt+"-s")}((ce,Me,Ye,be)=>{const nt=ce.shadowRoot,Lt=[],Gt=nt?[]:null,Wt=be.$vnode$=Ve(Me,null);Wn.$orgLocNodes$||mt(jn.body,Wn.$orgLocNodes$=new Map),ce[ae]=Ye,ce.removeAttribute(ae),_t(Wt,Lt,[],Gt,ce,ce,Ye),Lt.map(cn=>{const Qn=cn.$hostId$+"."+cn.$nodeId$,Ln=Wn.$orgLocNodes$.get(Qn),ar=cn.$elm$;Ln&&ns&&""===Ln["s-en"]&&Ln.parentNode.insertBefore(ar,Ln.nextSibling),nt||(ar["s-hn"]=Me,Ln&&(ar["s-ol"]=Ln,ar["s-ol"]["s-nr"]=ar)),Wn.$orgLocNodes$.delete(Qn)}),nt&&Gt.map(cn=>{cn&&nt.appendChild(cn)})})(ce,Ye.$tagName$,Je,Me)}Je||12&Ye.$flags$&&Re(ce);{let nt=ce;for(;nt=nt.parentNode||nt.host;)if(1===nt.nodeType&&nt.hasAttribute("s-id")&&nt["s-p"]||nt["s-p"]){yi(Me,Me.$ancestorComponent$=nt);break}}Ye.$members$&&Object.entries(Ye.$members$).map(([nt,[Lt]])=>{if(31&Lt&&ce.hasOwnProperty(nt)){const $t=ce[nt];delete ce[nt],ce[nt]=$t}}),ye(ce,Me,Ye)}be()}})(this))}disconnectedCallback(){Wn.jmp(()=>(ce=>{if(!(1&Wn.$flags$)){const Me=Wr(this),Ye=Me.$lazyInstance$;Me.$rmListeners$&&(Me.$rmListeners$.map(be=>be()),Me.$rmListeners$=void 0),Ur(Ye,"disconnectedCallback")}})())}componentOnReady(){return Wr(this).$onReadyPromise$}};st.$lazyBundleId$=Li[0],!nt.includes(It)&&!Lt.get(It)&&(Je.push(It),Lt.define(It,he(Kt,st,1)))})});{Wt.innerHTML=Je+"{visibility:hidden}.hydrated{visibility:inherit}",Wt.setAttribute("data-styles","");const Li=null!==(Ye=Wn.$nonce$)&&void 0!==Ye?Ye:it(jn);null!=Li&&Wt.setAttribute("nonce",Li),$t.insertBefore(Wt,Gt?Gt.nextSibling:$t.firstChild)}ar=!1,cn.length?cn.map(Li=>Li.connectedCallback()):Wn.jmp(()=>Ln=setTimeout(_i,30))},et=(ce,Me,Ye,be)=>{Ye&&Ye.map(([Je,nt,Lt])=>{const $t=Yt(ce,Je),Gt=xt(Me,Lt),Wt=gn(Je);Wn.ael($t,nt,Gt,Wt),(Me.$rmListeners$=Me.$rmListeners$||[]).push(()=>Wn.rel($t,nt,Gt,Wt))})},xt=(ce,Me)=>Ye=>{try{256&ce.$flags$?ce.$lazyInstance$[Me](Ye):(ce.$queuedListeners$=ce.$queuedListeners$||[]).push([Me,Ye])}catch(be){On(be)}},Yt=(ce,Me)=>4&Me?jn:8&Me?wr:16&Me?jn.body:ce,gn=ce=>0!=(2&ce),nr=new WeakMap,Wr=ce=>nr.get(ce),kt=(ce,Me)=>nr.set(Me.$lazyInstance$=ce,Me),At=(ce,Me)=>{const Ye={$flags$:0,$hostElement$:ce,$cmpMeta$:Me,$instanceValues$:new Map};return Ye.$onInstancePromise$=new Promise(be=>Ye.$onInstanceResolve$=be),Ye.$onReadyPromise$=new Promise(be=>Ye.$onReadyResolve$=be),ce["s-p"]=[],ce["s-rc"]=[],et(ce,Ye,Me.$listeners$),nr.set(ce,Ye)},nn=(ce,Me)=>Me in ce,On=(ce,Me)=>(0,console.error)(ce,Me),Jn=new Map,vr=(ce,Me,Ye)=>{const be=ce.$tagName$.replace(/-/g,"_"),Je=ce.$lazyBundleId$,nt=Jn.get(Je);return nt?nt[be]:B(863)(`./${Je}.entry.js`).then(Lt=>(Jn.set(Je,Lt),Lt[be]),On)},Tn=new Map,Fr=[],wr=typeof window<"u"?window:{},jn=wr.document||{head:{}},Wn={$flags$:0,$resourcesUrl$:"",jmp:ce=>ce(),raf:ce=>requestAnimationFrame(ce),ael:(ce,Me,Ye,be)=>ce.addEventListener(Me,Ye,be),rel:(ce,Me,Ye,be)=>ce.removeEventListener(Me,Ye,be),ce:(ce,Me)=>new CustomEvent(ce,Me)},Ps=ce=>{Object.assign(Wn,ce)},ns=!0,as=ce=>Promise.resolve(ce),li=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),_n=[],gr=[],si=(ce,Me)=>Ye=>{ce.push(Ye),Se||(Se=!0,Me&&4&Wn.$flags$?ui(vi):Wn.raf(vi))},Rr=ce=>{for(let Me=0;Me<ce.length;Me++)try{ce[Me](performance.now())}catch(Ye){On(Ye)}ce.length=0},vi=()=>{Rr(_n),Rr(gr),(Se=_n.length>0)&&Wn.raf(vi)},ui=ce=>as().then(ce),$i=si(_n,!1),ei=si(gr,!0)},8126:(ln,at,B)=>{"use strict";B.d(at,{m:()=>me});var y=B(5861),m=B(7593),q=B(3577),oe=B(5273),xe=B(9613);const Pe=De=>(0,xe.c)().duration(De?400:300),Ce=De=>{let ke,je;const Le=De.width+8,Xe=(0,xe.c)(),Te=(0,xe.c)();De.isEndSide?(ke=Le+"px",je="0px"):(ke=-Le+"px",je="0px"),Xe.addElement(De.menuInnerEl).fromTo("transform",`translateX(${ke})`,`translateX(${je})`);const ae="ios"===(0,oe.b)(De),dt=ae?.2:.25;return Te.addElement(De.backdropEl).fromTo("opacity",.01,dt),Pe(ae).addAnimation([Xe,Te])},we=De=>{let ke,je;const Le=(0,oe.b)(De),Xe=De.width;De.isEndSide?(ke=-Xe+"px",je=Xe+"px"):(ke=Xe+"px",je=-Xe+"px");const Te=(0,xe.c)().addElement(De.menuInnerEl).fromTo("transform",`translateX(${je})`,"translateX(0px)"),Ie=(0,xe.c)().addElement(De.contentEl).fromTo("transform","translateX(0px)",`translateX(${ke})`),ae=(0,xe.c)().addElement(De.backdropEl).fromTo("opacity",.01,.32);return Pe("ios"===Le).addAnimation([Te,Ie,ae])},He=De=>{const ke=(0,oe.b)(De),je=De.width*(De.isEndSide?-1:1)+"px",Le=(0,xe.c)().addElement(De.contentEl).fromTo("transform","translateX(0px)",`translateX(${je})`);return Pe("ios"===ke).addAnimation(Le)},me=(()=>{const De=new Map,ke=[],je=function(){var We=(0,y.Z)(function*(Ge){const _t=yield ze(Ge);return!!_t&&_t.open()});return function(_t){return We.apply(this,arguments)}}(),Le=function(){var We=(0,y.Z)(function*(Ge){const _t=yield void 0!==Ge?ze(Ge):Ae();return void 0!==_t&&_t.close()});return function(_t){return We.apply(this,arguments)}}(),Xe=function(){var We=(0,y.Z)(function*(Ge){const _t=yield ze(Ge);return!!_t&&_t.toggle()});return function(_t){return We.apply(this,arguments)}}(),Te=function(){var We=(0,y.Z)(function*(Ge,_t){const mt=yield ze(_t);return mt&&(mt.disabled=!Ge),mt});return function(_t,mt){return We.apply(this,arguments)}}(),Ie=function(){var We=(0,y.Z)(function*(Ge,_t){const mt=yield ze(_t);return mt&&(mt.swipeGesture=Ge),mt});return function(_t,mt){return We.apply(this,arguments)}}(),ae=function(){var We=(0,y.Z)(function*(Ge){if(null!=Ge){const _t=yield ze(Ge);return void 0!==_t&&_t.isOpen()}return void 0!==(yield Ae())});return function(_t){return We.apply(this,arguments)}}(),dt=function(){var We=(0,y.Z)(function*(Ge){const _t=yield ze(Ge);return!!_t&&!_t.disabled});return function(_t){return We.apply(this,arguments)}}(),ze=function(){var We=(0,y.Z)(function*(Ge){return yield qe(),"start"===Ge||"end"===Ge?yt(St=>St.side===Ge&&!St.disabled)||yt(St=>St.side===Ge):null!=Ge?yt(mt=>mt.menuId===Ge):yt(mt=>!mt.disabled)||(ke.length>0?ke[0].el:void 0)});return function(_t){return We.apply(this,arguments)}}(),Ae=function(){var We=(0,y.Z)(function*(){return yield qe(),Ve()});return function(){return We.apply(this,arguments)}}(),Y=function(){var We=(0,y.Z)(function*(){return yield qe(),gt()});return function(){return We.apply(this,arguments)}}(),ht=function(){var We=(0,y.Z)(function*(){return yield qe(),wt()});return function(){return We.apply(this,arguments)}}(),Ke=(We,Ge)=>{De.set(We,Ge)},Ue=We=>{const Ge=We.side;ke.filter(_t=>_t.side===Ge&&_t!==We).forEach(_t=>_t.disabled=!0)},it=function(){var We=(0,y.Z)(function*(Ge,_t,mt){if(wt())return!1;if(_t){const St=yield Ae();St&&Ge.el!==St&&(yield St.setOpen(!1,!1))}return Ge._setOpen(_t,mt)});return function(_t,mt,St){return We.apply(this,arguments)}}(),Ve=()=>yt(We=>We._isOpen),gt=()=>ke.map(We=>We.el),wt=()=>ke.some(We=>We.isAnimating),yt=We=>{const Ge=ke.find(We);if(void 0!==Ge)return Ge.el},qe=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(We=>new Promise(Ge=>(0,q.c)(We,Ge))));return Ke("reveal",He),Ke("push",we),Ke("overlay",Ce),typeof document<"u"&&document.addEventListener("ionBackButton",We=>{const Ge=Ve();Ge&&We.detail.register(m.MENU_BACK_BUTTON_PRIORITY,()=>Ge.close())}),{registerAnimation:Ke,get:ze,getMenus:Y,getOpen:Ae,isEnabled:dt,swipeGesture:Ie,isAnimating:ht,isOpen:ae,enable:Te,toggle:Xe,close:Le,open:je,_getOpenSync:Ve,_createAnimation:(We,Ge)=>{const _t=De.get(We);if(!_t)throw new Error("animation not registered");return _t(Ge)},_register:We=>{ke.indexOf(We)<0&&(We.disabled||Ue(We),ke.push(We))},_unregister:We=>{const Ge=ke.indexOf(We);Ge>-1&&ke.splice(Ge,1)},_setOpen:it,_setActiveMenu:Ue}})()},1178:(ln,at,B)=>{"use strict";B.d(at,{a:()=>m,b:()=>q,p:()=>y});const y=(oe,...xe)=>console.warn(`[Ionic Warning]: ${oe}`,...xe),m=(oe,...xe)=>console.error(`[Ionic Error]: ${oe}`,...xe),q=(oe,...xe)=>console.error(`<${oe.tagName.toLowerCase()}> must be used inside ${xe.join(" or ")}.`)},9866:(ln,at,B)=>{"use strict";B.d(at,{L:()=>oe,a:()=>xe,b:()=>Pe,c:()=>Ce,d:()=>we,e:()=>ht,g:()=>Ct,l:()=>Y,s:()=>Ke,t:()=>me});var y=B(5861),m=B(4083),q=B(3577);const oe="ionViewWillEnter",xe="ionViewDidEnter",Pe="ionViewWillLeave",Ce="ionViewDidLeave",we="ionViewWillUnload",me=Ue=>new Promise((it,Et)=>{(0,m.w)(()=>{De(Ue),ke(Ue).then(Ve=>{Ve.animation&&Ve.animation.destroy(),je(Ue),it(Ve)},Ve=>{je(Ue),Et(Ve)})})}),De=Ue=>{const it=Ue.enteringEl,Et=Ue.leavingEl;fe(it,Et,Ue.direction),Ue.showGoBack?it.classList.add("can-go-back"):it.classList.remove("can-go-back"),Ke(it,!1),it.style.setProperty("pointer-events","none"),Et&&(Ke(Et,!1),Et.style.setProperty("pointer-events","none"))},ke=function(){var Ue=(0,y.Z)(function*(it){const Et=yield Le(it);return Et&&m.B.isBrowser?Xe(Et,it):Te(it)});return function(Et){return Ue.apply(this,arguments)}}(),je=Ue=>{const it=Ue.enteringEl,Et=Ue.leavingEl;it.classList.remove("ion-page-invisible"),it.style.removeProperty("pointer-events"),void 0!==Et&&(Et.classList.remove("ion-page-invisible"),Et.style.removeProperty("pointer-events"))},Le=function(){var Ue=(0,y.Z)(function*(it){return it.leavingEl&&it.animated&&0!==it.duration?it.animationBuilder?it.animationBuilder:"ios"===it.mode?(yield Promise.resolve().then(B.bind(B,3551))).iosTransitionAnimation:(yield Promise.resolve().then(B.bind(B,1138))).mdTransitionAnimation:void 0});return function(Et){return Ue.apply(this,arguments)}}(),Xe=function(){var Ue=(0,y.Z)(function*(it,Et){yield Ie(Et,!0);const Ve=it(Et.baseEl,Et);ze(Et.enteringEl,Et.leavingEl);const gt=yield dt(Ve,Et);return Et.progressCallback&&Et.progressCallback(void 0),gt&&Ae(Et.enteringEl,Et.leavingEl),{hasCompleted:gt,animation:Ve}});return function(Et,Ve){return Ue.apply(this,arguments)}}(),Te=function(){var Ue=(0,y.Z)(function*(it){const Et=it.enteringEl,Ve=it.leavingEl;return yield Ie(it,!1),ze(Et,Ve),Ae(Et,Ve),{hasCompleted:!0}});return function(Et){return Ue.apply(this,arguments)}}(),Ie=function(){var Ue=(0,y.Z)(function*(it,Et){(void 0!==it.deepWait?it.deepWait:Et)&&(yield Promise.all([ht(it.enteringEl),ht(it.leavingEl)])),yield ae(it.viewIsReady,it.enteringEl)});return function(Et,Ve){return Ue.apply(this,arguments)}}(),ae=function(){var Ue=(0,y.Z)(function*(it,Et){it&&(yield it(Et))});return function(Et,Ve){return Ue.apply(this,arguments)}}(),dt=(Ue,it)=>{const Et=it.progressCallback,Ve=new Promise(gt=>{Ue.onFinish(wt=>gt(1===wt))});return Et?(Ue.progressStart(!0),Et(Ue)):Ue.play(),Ve},ze=(Ue,it)=>{Y(it,Pe),Y(Ue,oe)},Ae=(Ue,it)=>{Y(Ue,xe),Y(it,Ce)},Y=(Ue,it)=>{if(Ue){const Et=new CustomEvent(it,{bubbles:!1,cancelable:!1});Ue.dispatchEvent(Et)}},ht=function(){var Ue=(0,y.Z)(function*(it){const Et=it;if(Et){if(null!=Et.componentOnReady){if(null!=(yield Et.componentOnReady()))return}else if(null!=Et.__registerHost)return void(yield new Promise(gt=>(0,q.r)(gt)));yield Promise.all(Array.from(Et.children).map(ht))}});return function(Et){return Ue.apply(this,arguments)}}(),Ke=(Ue,it)=>{it?(Ue.setAttribute("aria-hidden","true"),Ue.classList.add("ion-page-hidden")):(Ue.hidden=!1,Ue.removeAttribute("aria-hidden"),Ue.classList.remove("ion-page-hidden"))},fe=(Ue,it,Et)=>{void 0!==Ue&&(Ue.style.zIndex="back"===Et?"99":"101"),void 0!==it&&(it.style.zIndex="100")},Ct=Ue=>Ue.classList.contains("ion-page")?Ue:Ue.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ue},5273:(ln,at,B)=>{"use strict";B.d(at,{a:()=>me,b:()=>wt,c:()=>q,g:()=>Se,i:()=>yt});var y=B(4083);class m{constructor(){this.m=new Map}reset(We){this.m=new Map(Object.entries(We))}get(We,Ge){const _t=this.m.get(We);return void 0!==_t?_t:Ge}getBoolean(We,Ge=!1){const _t=this.m.get(We);return void 0===_t?Ge:"string"==typeof _t?"true"===_t:!!_t}getNumber(We,Ge){const _t=parseFloat(this.m.get(We));return isNaN(_t)?void 0!==Ge?Ge:NaN:_t}set(We,Ge){this.m.set(We,Ge)}}const q=new m,He="ionic-persist-config",Se=qe=>De(qe),me=(qe,We)=>("string"==typeof qe&&(We=qe,qe=void 0),Se(qe).includes(We)),De=(qe=window)=>{if(typeof qe>"u")return[];qe.Ionic=qe.Ionic||{};let We=qe.Ionic.platforms;return null==We&&(We=qe.Ionic.platforms=ke(qe),We.forEach(Ge=>qe.document.documentElement.classList.add(`plt-${Ge}`))),We},ke=qe=>{const We=q.get("platform");return Object.keys(Ve).filter(Ge=>{const _t=null==We?void 0:We[Ge];return"function"==typeof _t?_t(qe):Ve[Ge](qe)})},Le=qe=>!!(it(qe,/iPad/i)||it(qe,/Macintosh/i)&&Ae(qe)),Ie=qe=>it(qe,/android|sink/i),Ae=qe=>Et(qe,"(any-pointer:coarse)"),ht=qe=>Ke(qe)||fe(qe),Ke=qe=>!!(qe.cordova||qe.phonegap||qe.PhoneGap),fe=qe=>{const We=qe.Capacitor;return!(null==We||!We.isNative)},it=(qe,We)=>We.test(qe.navigator.userAgent),Et=(qe,We)=>{var Ge;return null===(Ge=qe.matchMedia)||void 0===Ge?void 0:Ge.call(qe,We).matches},Ve={ipad:Le,iphone:qe=>it(qe,/iPhone/i),ios:qe=>it(qe,/iPhone|iPod/i)||Le(qe),android:Ie,phablet:qe=>{const We=qe.innerWidth,Ge=qe.innerHeight,_t=Math.min(We,Ge),mt=Math.max(We,Ge);return _t>390&&_t<520&&mt>620&&mt<800},tablet:qe=>{const We=qe.innerWidth,Ge=qe.innerHeight,_t=Math.min(We,Ge),mt=Math.max(We,Ge);return Le(qe)||(qe=>Ie(qe)&&!it(qe,/mobile/i))(qe)||_t>460&&_t<820&&mt>780&&mt<1400},cordova:Ke,capacitor:fe,electron:qe=>it(qe,/electron/i),pwa:qe=>{var We;return!!(null!==(We=qe.matchMedia)&&void 0!==We&&We.call(qe,"(display-mode: standalone)").matches||qe.navigator.standalone)},mobile:Ae,mobileweb:qe=>Ae(qe)&&!ht(qe),desktop:qe=>!Ae(qe),hybrid:ht};let gt;const wt=qe=>qe&&(0,y.g)(qe)||gt,yt=(qe={})=>{if(typeof window>"u")return;const We=window.document,Ge=window,_t=Ge.Ionic=Ge.Ionic||{},mt={};qe._ael&&(mt.ael=qe._ael),qe._rel&&(mt.rel=qe._rel),qe._ce&&(mt.ce=qe._ce),(0,y.a)(mt);const St=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(qe=>{try{const We=qe.sessionStorage.getItem(He);return null!==We?JSON.parse(We):{}}catch{return{}}})(Ge)),{persistConfig:!1}),_t.config),(qe=>{const We={};return qe.location.search.slice(1).split("&").map(Ge=>Ge.split("=")).map(([Ge,_t])=>[decodeURIComponent(Ge),decodeURIComponent(_t)]).filter(([Ge])=>((qe,We)=>qe.substr(0,We.length)===We)(Ge,"ionic:")).map(([Ge,_t])=>[Ge.slice("ionic:".length),_t]).forEach(([Ge,_t])=>{We[Ge]=_t}),We})(Ge)),qe);q.reset(St),q.getBoolean("persistConfig")&&((qe,We)=>{try{qe.sessionStorage.setItem(He,JSON.stringify(We))}catch{return}})(Ge,St),De(Ge),_t.config=q,_t.mode=gt=q.get("mode",We.documentElement.getAttribute("mode")||(me(Ge,"ios")?"ios":"md")),q.set("mode",gt),We.documentElement.setAttribute("mode",gt),We.documentElement.classList.add(gt),q.getBoolean("_testing")&&q.set("animated",!1);const jt=Dt=>{var ut;return null===(ut=Dt.tagName)||void 0===ut?void 0:ut.startsWith("ION-")},hn=Dt=>["ios","md"].includes(Dt);(0,y.c)(Dt=>{for(;Dt;){const ut=Dt.mode||Dt.getAttribute("mode");if(ut){if(hn(ut))return ut;jt(Dt)&&console.warn('Invalid ionic mode: "'+ut+'", expected: "ios" or "md"')}Dt=Dt.parentElement}return gt})}},3551:(ln,at,B)=>{"use strict";B.r(at),B.d(at,{iosTransitionAnimation:()=>ke,shadow:()=>Ce});var y=B(9613),m=B(9866);B(3457),B(4083);const Pe=je=>document.querySelector(`${je}.ion-cloned-element`),Ce=je=>je.shadowRoot||je,we=je=>{const Le="ION-TABS"===je.tagName?je:je.querySelector("ion-tabs"),Xe="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Le){const Te=Le.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Te?Te.querySelector(Xe):null}return je.querySelector(Xe)},He=(je,Le)=>{const Xe="ION-TABS"===je.tagName?je:je.querySelector("ion-tabs");let Te=[];if(null!=Xe){const Ie=Xe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Ie&&(Te=Ie.querySelectorAll("ion-buttons"))}else Te=je.querySelectorAll("ion-buttons");for(const Ie of Te){const ae=Ie.closest("ion-header"),dt=ae&&!ae.classList.contains("header-collapse-condense-inactive"),ze=Ie.querySelector("ion-back-button"),Ae=Ie.classList.contains("buttons-collapse");if(null!==ze&&("start"===Ie.slot||""===Ie.slot)&&(Ae&&dt&&Le||!Ae))return ze}return null},me=(je,Le,Xe,Te,Ie,ae)=>{const dt=Le?`calc(100% - ${ae.right+4}px)`:ae.left-4+"px",ze=Le?"7px":"-7px",Ae=Le?"-4px":"4px",Y=Le?"-4px":"4px",ht=Le?"right":"left",Ke=Le?"left":"right",Ue=Xe?[{offset:0,opacity:1,transform:`translate3d(${Ae}, ${ae.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ze}, ${Ie.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${ze}, ${Ie.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Ae}, ${ae.top-46}px, 0) scale(1)`}],Ve=Xe?[{offset:0,opacity:1,transform:`translate3d(${Y}, ${ae.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Y}, ${ae.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Y}, ${ae.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Y}, ${ae.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Y}, ${ae.top-46}px, 0) scale(1)`}],gt=(0,y.c)(),wt=(0,y.c)(),yt=Pe("ion-back-button"),qe=Ce(yt).querySelector(".button-text"),We=Ce(yt).querySelector("ion-icon");yt.text=Te.text,yt.mode=Te.mode,yt.icon=Te.icon,yt.color=Te.color,yt.disabled=Te.disabled,yt.style.setProperty("display","block"),yt.style.setProperty("position","fixed"),wt.addElement(We),gt.addElement(qe),gt.beforeStyles({"transform-origin":`${ht} center`}).beforeAddWrite(()=>{Te.style.setProperty("display","none"),yt.style.setProperty(ht,dt)}).afterAddWrite(()=>{Te.style.setProperty("display",""),yt.style.setProperty("display","none"),yt.style.removeProperty(ht)}).keyframes(Ue),wt.beforeStyles({"transform-origin":`${Ke} center`}).keyframes(Ve),je.addAnimation([gt,wt])},De=(je,Le,Xe,Te,Ie,ae)=>{const dt=Le?`calc(100% - ${Ie.right}px)`:`${Ie.left}px`,ze=Le?"-18px":"18px",Ae=Le?"right":"left",Ke=Xe?[{offset:0,opacity:0,transform:`translate3d(${ze}, ${ae.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Ie.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Ie.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ze}, ${ae.top-4}px, 0) scale(0.5)`}],fe=Pe("ion-title"),Ct=(0,y.c)();fe.innerText=Te.innerText,fe.size=Te.size,fe.color=Te.color,Ct.addElement(fe),Ct.beforeStyles({"transform-origin":`${Ae} center`,height:"46px",display:"",position:"relative",[Ae]:dt}).beforeAddWrite(()=>{Te.style.setProperty("display","none")}).afterAddWrite(()=>{Te.style.setProperty("display",""),fe.style.setProperty("display","none")}).keyframes(Ke),je.addAnimation(Ct)},ke=(je,Le)=>{var Xe;try{const Te="cubic-bezier(0.32,0.72,0,1)",Ie="opacity",ae="transform",dt="0%",Ae="rtl"===je.ownerDocument.dir,Y=Ae?"-99.5%":"99.5%",ht=Ae?"33%":"-33%",Ke=Le.enteringEl,fe=Le.leavingEl,Ct="back"===Le.direction,Ue=Ke.querySelector(":scope > ion-content"),it=Ke.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Et=Ke.querySelectorAll(":scope > ion-header > ion-toolbar"),Ve=(0,y.c)(),gt=(0,y.c)();if(Ve.addElement(Ke).duration((null!==(Xe=Le.duration)&&void 0!==Xe?Xe:0)||540).easing(Le.easing||Te).fill("both").beforeRemoveClass("ion-page-invisible"),fe&&null!=je){const We=(0,y.c)();We.addElement(je),Ve.addAnimation(We)}if(Ue||0!==Et.length||0!==it.length?(gt.addElement(Ue),gt.addElement(it)):gt.addElement(Ke.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Ve.addAnimation(gt),Ct?gt.beforeClearStyles([Ie]).fromTo("transform",`translateX(${ht})`,`translateX(${dt})`).fromTo(Ie,.8,1):gt.beforeClearStyles([Ie]).fromTo("transform",`translateX(${Y})`,`translateX(${dt})`),Ue){const We=Ce(Ue).querySelector(".transition-effect");if(We){const Ge=We.querySelector(".transition-cover"),_t=We.querySelector(".transition-shadow"),mt=(0,y.c)(),St=(0,y.c)(),jt=(0,y.c)();mt.addElement(We).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),St.addElement(Ge).beforeClearStyles([Ie]).fromTo(Ie,0,.1),jt.addElement(_t).beforeClearStyles([Ie]).fromTo(Ie,.03,.7),mt.addAnimation([St,jt]),gt.addAnimation([mt])}}const wt=Ke.querySelector("ion-header.header-collapse-condense"),{forward:yt,backward:qe}=((je,Le,Xe,Te,Ie)=>{const ae=He(Te,Xe),dt=we(Ie),ze=we(Te),Ae=He(Ie,Xe),Y=null!==ae&&null!==dt&&!Xe,ht=null!==ze&&null!==Ae&&Xe;if(Y){const Ke=dt.getBoundingClientRect(),fe=ae.getBoundingClientRect();De(je,Le,Xe,dt,Ke,fe),me(je,Le,Xe,ae,Ke,fe)}else if(ht){const Ke=ze.getBoundingClientRect(),fe=Ae.getBoundingClientRect();De(je,Le,Xe,ze,Ke,fe),me(je,Le,Xe,Ae,Ke,fe)}return{forward:Y,backward:ht}})(Ve,Ae,Ct,Ke,fe);if(Et.forEach(We=>{const Ge=(0,y.c)();Ge.addElement(We),Ve.addAnimation(Ge);const _t=(0,y.c)();_t.addElement(We.querySelector("ion-title"));const mt=(0,y.c)(),St=Array.from(We.querySelectorAll("ion-buttons,[menuToggle]")),jt=We.closest("ion-header"),hn=null==jt?void 0:jt.classList.contains("header-collapse-condense-inactive");let Dt;Dt=St.filter(Ct?Un=>{const fn=Un.classList.contains("buttons-collapse");return fn&&!hn||!fn}:Un=>!Un.classList.contains("buttons-collapse")),mt.addElement(Dt);const ut=(0,y.c)();ut.addElement(We.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Rt=(0,y.c)();Rt.addElement(Ce(We).querySelector(".toolbar-background"));const rn=(0,y.c)(),Rn=We.querySelector("ion-back-button");if(Rn&&rn.addElement(Rn),Ge.addAnimation([_t,mt,ut,Rt,rn]),mt.fromTo(Ie,.01,1),ut.fromTo(Ie,.01,1),Ct)hn||_t.fromTo("transform",`translateX(${ht})`,`translateX(${dt})`).fromTo(Ie,.01,1),ut.fromTo("transform",`translateX(${ht})`,`translateX(${dt})`),rn.fromTo(Ie,.01,1);else if(wt||_t.fromTo("transform",`translateX(${Y})`,`translateX(${dt})`).fromTo(Ie,.01,1),ut.fromTo("transform",`translateX(${Y})`,`translateX(${dt})`),Rt.beforeClearStyles([Ie,"transform"]),(null==jt?void 0:jt.translucent)?Rt.fromTo("transform",Ae?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Rt.fromTo(Ie,.01,"var(--opacity)"),yt||rn.fromTo(Ie,.01,1),Rn&&!yt){const fn=(0,y.c)();fn.addElement(Ce(Rn).querySelector(".button-text")).fromTo("transform",Ae?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ge.addAnimation(fn)}}),fe){const We=(0,y.c)(),Ge=fe.querySelector(":scope > ion-content"),_t=fe.querySelectorAll(":scope > ion-header > ion-toolbar"),mt=fe.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ge||0!==_t.length||0!==mt.length?(We.addElement(Ge),We.addElement(mt)):We.addElement(fe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Ve.addAnimation(We),Ct){We.beforeClearStyles([Ie]).fromTo("transform",`translateX(${dt})`,Ae?"translateX(-100%)":"translateX(100%)");const St=(0,m.g)(fe);Ve.afterAddWrite(()=>{"normal"===Ve.getDirection()&&St.style.setProperty("display","none")})}else We.fromTo("transform",`translateX(${dt})`,`translateX(${ht})`).fromTo(Ie,1,.8);if(Ge){const St=Ce(Ge).querySelector(".transition-effect");if(St){const jt=St.querySelector(".transition-cover"),hn=St.querySelector(".transition-shadow"),Dt=(0,y.c)(),ut=(0,y.c)(),Rt=(0,y.c)();Dt.addElement(St).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),ut.addElement(jt).beforeClearStyles([Ie]).fromTo(Ie,.1,0),Rt.addElement(hn).beforeClearStyles([Ie]).fromTo(Ie,.7,.03),Dt.addAnimation([ut,Rt]),We.addAnimation([Dt])}}_t.forEach(St=>{const jt=(0,y.c)();jt.addElement(St);const hn=(0,y.c)();hn.addElement(St.querySelector("ion-title"));const Dt=(0,y.c)(),ut=St.querySelectorAll("ion-buttons,[menuToggle]"),Rt=St.closest("ion-header"),rn=null==Rt?void 0:Rt.classList.contains("header-collapse-condense-inactive"),Rn=Array.from(ut).filter(cr=>{const Zn=cr.classList.contains("buttons-collapse");return Zn&&!rn||!Zn});Dt.addElement(Rn);const Un=(0,y.c)(),fn=St.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");fn.length>0&&Un.addElement(fn);const tn=(0,y.c)();tn.addElement(Ce(St).querySelector(".toolbar-background"));const En=(0,y.c)(),Ht=St.querySelector("ion-back-button");if(Ht&&En.addElement(Ht),jt.addAnimation([hn,Dt,Un,En,tn]),Ve.addAnimation(jt),En.fromTo(Ie,.99,0),Dt.fromTo(Ie,.99,0),Un.fromTo(Ie,.99,0),Ct){if(rn||hn.fromTo("transform",`translateX(${dt})`,Ae?"translateX(-100%)":"translateX(100%)").fromTo(Ie,.99,0),Un.fromTo("transform",`translateX(${dt})`,Ae?"translateX(-100%)":"translateX(100%)"),tn.beforeClearStyles([Ie,"transform"]),(null==Rt?void 0:Rt.translucent)?tn.fromTo("transform","translateX(0px)",Ae?"translateX(-100%)":"translateX(100%)"):tn.fromTo(Ie,"var(--opacity)",0),Ht&&!qe){const Zn=(0,y.c)();Zn.addElement(Ce(Ht).querySelector(".button-text")).fromTo("transform",`translateX(${dt})`,`translateX(${(Ae?-124:124)+"px"})`),jt.addAnimation(Zn)}}else rn||hn.fromTo("transform",`translateX(${dt})`,`translateX(${ht})`).fromTo(Ie,.99,0).afterClearStyles([ae,Ie]),Un.fromTo("transform",`translateX(${dt})`,`translateX(${ht})`).afterClearStyles([ae,Ie]),En.afterClearStyles([Ie]),hn.afterClearStyles([Ie]),Dt.afterClearStyles([Ie])})}return Ve}catch(Te){throw Te}}},1138:(ln,at,B)=>{"use strict";B.r(at),B.d(at,{mdTransitionAnimation:()=>xe});var y=B(9613),m=B(9866);B(3457),B(4083);const xe=(Pe,Ce)=>{var we,He,Se;const ke="back"===Ce.direction,Le=Ce.leavingEl,Xe=(0,m.g)(Ce.enteringEl),Te=Xe.querySelector("ion-toolbar"),Ie=(0,y.c)();if(Ie.addElement(Xe).fill("both").beforeRemoveClass("ion-page-invisible"),ke?Ie.duration((null!==(we=Ce.duration)&&void 0!==we?we:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Ie.duration((null!==(He=Ce.duration)&&void 0!==He?He:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Te){const ae=(0,y.c)();ae.addElement(Te),Ie.addAnimation(ae)}if(Le&&ke){Ie.duration((null!==(Se=Ce.duration)&&void 0!==Se?Se:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ae=(0,y.c)();ae.addElement((0,m.g)(Le)).onFinish(dt=>{1===dt&&ae.elements.length>0&&ae.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Ie.addAnimation(ae)}return Ie}},2583:(ln,at,B)=>{"use strict";B.d(at,{B:()=>mt,G:()=>St,a:()=>Se,b:()=>me,c:()=>Le,d:()=>jt,e:()=>hn,f:()=>it,g:()=>Ve,h:()=>yt,i:()=>We,j:()=>Te,k:()=>we,m:()=>ke,n:()=>dt,o:()=>Ct,s:()=>_t,t:()=>Xe});var y=B(5861),m=B(5273),q=B(6782),oe=B(7593),xe=B(3577),Pe=B(1178);let Ce=0;const we=new WeakMap,He=Dt=>({create:ut=>Ie(Dt,ut),dismiss:(ut,Rt,rn)=>Ke(document,ut,Rt,Dt,rn),getTop:()=>(0,y.Z)(function*(){return Ct(document,Dt)})()}),Se=He("ion-alert"),me=He("ion-action-sheet"),ke=He("ion-modal"),Le=He("ion-popover"),Xe=He("ion-toast"),Te=Dt=>{typeof document<"u"&&ht(document);const ut=Ce++;Dt.overlayIndex=ut,Dt.hasAttribute("id")||(Dt.id=`ion-overlay-${ut}`)},Ie=(Dt,ut)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Dt).then(()=>{const Rt=document.createElement(Dt);return Rt.classList.add("overlay-hidden"),Object.assign(Rt,Object.assign(Object.assign({},ut),{hasController:!0})),gt(document).appendChild(Rt),new Promise(rn=>(0,xe.c)(Rt,rn))}):Promise.resolve(),ae='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',dt=(Dt,ut)=>{let Rt=Dt.querySelector(ae);const rn=null==Rt?void 0:Rt.shadowRoot;rn&&(Rt=rn.querySelector(ae)||Rt),Rt?(0,xe.f)(Rt):ut.focus()},Ae=(Dt,ut)=>{const Rt=Array.from(Dt.querySelectorAll(ae));let rn=Rt.length>0?Rt[Rt.length-1]:null;const Rn=null==rn?void 0:rn.shadowRoot;Rn&&(rn=Rn.querySelector(ae)||rn),rn?rn.focus():ut.focus()},ht=Dt=>{0===Ce&&(Ce=1,Dt.addEventListener("focus",ut=>{((Dt,ut)=>{const Rt=Ct(ut,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),rn=Dt.target;Rt&&rn&&!Rt.classList.contains("ion-disable-focus-trap")&&(Rt.shadowRoot?(()=>{if(Rt.contains(rn))Rt.lastFocus=rn;else{const fn=Rt.lastFocus;dt(Rt,Rt),fn===ut.activeElement&&Ae(Rt,Rt),Rt.lastFocus=ut.activeElement}})():(()=>{if(Rt===rn)Rt.lastFocus=void 0;else{const fn=(0,xe.g)(Rt);if(!fn.contains(rn))return;const tn=fn.querySelector(".ion-overlay-wrapper");if(!tn)return;if(tn.contains(rn))Rt.lastFocus=rn;else{const En=Rt.lastFocus;dt(tn,Rt),En===ut.activeElement&&Ae(tn,Rt),Rt.lastFocus=ut.activeElement}}})())})(ut,Dt)},!0),Dt.addEventListener("ionBackButton",ut=>{const Rt=Ct(Dt);null!=Rt&&Rt.backdropDismiss&&ut.detail.register(oe.OVERLAY_BACK_BUTTON_PRIORITY,()=>Rt.dismiss(void 0,mt))}),Dt.addEventListener("keydown",ut=>{if("Escape"===ut.key){const Rt=Ct(Dt);null!=Rt&&Rt.backdropDismiss&&Rt.dismiss(void 0,mt)}}))},Ke=(Dt,ut,Rt,rn,Rn)=>{const Un=Ct(Dt,rn,Rn);return Un?Un.dismiss(ut,Rt):Promise.reject("overlay does not exist")},Ct=(Dt,ut,Rt)=>{const rn=((Dt,ut)=>(void 0===ut&&(ut="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Dt.querySelectorAll(ut)).filter(Rt=>Rt.overlayIndex>0)))(Dt,ut).filter(Rn=>!(Dt=>Dt.classList.contains("overlay-hidden"))(Rn));return void 0===Rt?rn[rn.length-1]:rn.find(Rn=>Rn.id===Rt)},Ue=(Dt=!1)=>{const Rt=gt(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");Rt&&(Dt?Rt.setAttribute("aria-hidden","true"):Rt.removeAttribute("aria-hidden"))},it=function(){var Dt=(0,y.Z)(function*(ut,Rt,rn,Rn,Un){var fn,tn;if(ut.presented)return;Ue(!0),ut.presented=!0,ut.willPresent.emit(),null===(fn=ut.willPresentShorthand)||void 0===fn||fn.emit();const En=(0,m.b)(ut),Ht=ut.enterAnimation?ut.enterAnimation:m.c.get(Rt,"ios"===En?rn:Rn);(yield wt(ut,Ht,ut.el,Un))&&(ut.didPresent.emit(),null===(tn=ut.didPresentShorthand)||void 0===tn||tn.emit()),"ION-TOAST"!==ut.el.tagName&&Et(ut.el),ut.keyboardClose&&(null===document.activeElement||!ut.el.contains(document.activeElement))&&ut.el.focus()});return function(Rt,rn,Rn,Un,fn){return Dt.apply(this,arguments)}}(),Et=function(){var Dt=(0,y.Z)(function*(ut){let Rt=document.activeElement;if(!Rt)return;const rn=null==Rt?void 0:Rt.shadowRoot;rn&&(Rt=rn.querySelector(ae)||Rt),yield ut.onDidDismiss(),Rt.focus()});return function(Rt){return Dt.apply(this,arguments)}}(),Ve=function(){var Dt=(0,y.Z)(function*(ut,Rt,rn,Rn,Un,fn,tn){var En,Ht;if(!ut.presented)return!1;Ue(!1),ut.presented=!1;try{ut.el.style.setProperty("pointer-events","none"),ut.willDismiss.emit({data:Rt,role:rn}),null===(En=ut.willDismissShorthand)||void 0===En||En.emit({data:Rt,role:rn});const cr=(0,m.b)(ut),Zn=ut.leaveAnimation?ut.leaveAnimation:m.c.get(Rn,"ios"===cr?Un:fn);rn!==St&&(yield wt(ut,Zn,ut.el,tn)),ut.didDismiss.emit({data:Rt,role:rn}),null===(Ht=ut.didDismissShorthand)||void 0===Ht||Ht.emit({data:Rt,role:rn}),we.delete(ut),ut.el.classList.add("overlay-hidden"),ut.el.style.removeProperty("pointer-events"),void 0!==ut.el.lastFocus&&(ut.el.lastFocus=void 0)}catch(cr){console.error(cr)}return ut.el.remove(),!0});return function(Rt,rn,Rn,Un,fn,tn,En){return Dt.apply(this,arguments)}}(),gt=Dt=>Dt.querySelector("ion-app")||Dt.body,wt=function(){var Dt=(0,y.Z)(function*(ut,Rt,rn,Rn){rn.classList.remove("overlay-hidden");const fn=Rt(ut.el,Rn);(!ut.animated||!m.c.getBoolean("animated",!0))&&fn.duration(0),ut.keyboardClose&&fn.beforeAddWrite(()=>{const En=rn.ownerDocument.activeElement;null!=En&&En.matches("input,ion-input, ion-textarea")&&En.blur()});const tn=we.get(ut)||[];return we.set(ut,[...tn,fn]),yield fn.play(),!0});return function(Rt,rn,Rn,Un){return Dt.apply(this,arguments)}}(),yt=(Dt,ut)=>{let Rt;const rn=new Promise(Rn=>Rt=Rn);return qe(Dt,ut,Rn=>{Rt(Rn.detail)}),rn},qe=(Dt,ut,Rt)=>{const rn=Rn=>{(0,xe.b)(Dt,ut,rn),Rt(Rn)};(0,xe.a)(Dt,ut,rn)},We=Dt=>"cancel"===Dt||Dt===mt,Ge=Dt=>Dt(),_t=(Dt,ut)=>{if("function"==typeof Dt)return m.c.get("_zoneGate",Ge)(()=>{try{return Dt(ut)}catch(rn){throw rn}})},mt="backdrop",St="gesture",jt=Dt=>{let Rt,ut=!1;const rn=(0,q.C)(),Rn=(tn=!1)=>{if(Rt&&!tn)return{delegate:Rt,inline:ut};const{el:En,hasController:Ht,delegate:cr}=Dt;return ut=null!==En.parentNode&&!Ht,Rt=ut?cr||rn:cr,{inline:ut,delegate:Rt}};return{attachViewToDom:function(){var tn=(0,y.Z)(function*(En){const{delegate:Ht}=Rn(!0);if(Ht)return yield Ht.attachViewToDom(Dt.el,En);const{hasController:cr}=Dt;if(cr&&void 0!==En)throw new Error("framework delegate is missing");return null});return function(Ht){return tn.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:tn}=Rn();tn&&void 0!==Dt.el&&tn.removeViewFromDom(Dt.el.parentElement,Dt.el)}}},hn=()=>{let Dt;const ut=()=>{Dt&&(Dt(),Dt=void 0)};return{addClickListener:(rn,Rn)=>{ut();const Un=void 0!==Rn?document.getElementById(Rn):null;Un?Dt=((tn,En)=>{const Ht=()=>{En.present()};return tn.addEventListener("click",Ht),()=>{tn.removeEventListener("click",Ht)}})(Un,rn):(0,Pe.p)(`A trigger element with the ID "${Rn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,rn)},removeClickListener:ut}}},3726:(ln,at,B)=>{"use strict";B.d(at,{n:()=>y});class y{constructor(q,oe,xe,Pe,Ce,we,He=!1,Se,me="User"){this.uid=Se,this.email=q,this.nombre=oe,this.apellido=xe,this.edad=Pe,this.dni=Ce,this.imagenes=we,this.isAdmin=He,this.typename=me}static filterPrivate(q){return Object.fromEntries(Object.entries(q).filter(([oe])=>!["uid"].includes(oe)))}}},3651:(ln,at,B)=>{"use strict";B.d(at,{e:()=>De});var y=B(5861),m=B(3726),q=B(8502),we=(B(2090),B(6881),B(1877),B(4859),B(4650)),He=B(1762),Se=B(1205),me=B(6159);let De=(()=>{class ke{constructor(Le,Xe,Te,Ie,ae){this.afs=Le,this.afAuth=Xe,this.router=Te,this.ngZone=Ie,this._db=ae,this.afAuth.authState.subscribe(dt=>{var ze;dt?(this.userData=dt,localStorage.setItem("auth",JSON.stringify(this.userData)),this.sub=this._db.collection("users").doc(dt.uid).get().subscribe(Ae=>{localStorage.setItem("user",JSON.stringify(Ae.data())),console.log("sign in")})):(null===(ze=this.sub)||void 0===ze||ze.unsubscribe(),localStorage.setItem("auth","null"),localStorage.setItem("user","null"),console.log("sign out"))})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("auth"))}get isVerified(){const Le=JSON.parse(localStorage.getItem("auth"));return null!==Le&&Le.emailVerified}get isAdmin(){const Le=JSON.parse(localStorage.getItem("user"));return null!==Le&&Le.isAdmin}SignIn(Le,Xe){return this.afAuth.signInWithEmailAndPassword(Le,Xe)}SignUp(Le,Xe){var Te=this;return(0,y.Z)(function*(){try{let Ie=yield Te.afAuth.createUserWithEmailAndPassword(Le.email,Xe);return Te.SendVerificationMail(),yield Ie.user.updateProfile({displayName:Le.nombre,photoURL:Le.imagenes[0]}),Te.SetUserData(Ie.user.uid,Le),Te.router.navigate(["home"]),new Promise((ae,dt)=>{ae("success")})}catch(Ie){return new Promise((ae,dt)=>{ae(JSON.parse(JSON.stringify(Ie)))})}})()}GoogleAuth(){return this.AuthLogin(new q.V)}AuthLogin(Le){return this.afAuth.signInWithPopup(Le).then(Xe=>{var Te,Ie;let ae=Xe.user;this.SetUserData(ae.uid,new m.n(ae.email,null!==(Te=ae.displayName)&&void 0!==Te?Te:"","",0,"",[null!==(Ie=ae.photoURL)&&void 0!==Ie?Ie:""])),console.log(Xe.user),this.router.navigate(["/home"])}).catch(Xe=>{})}SetUserData(Le,Xe){const Te=this.afs.doc(`users/${Le}`);return Xe.uid=Le,console.log("user updated in db"),Te.set(JSON.parse(JSON.stringify(Xe)),{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("auth")})}SendVerificationMail(){return this.afAuth.currentUser.then(Le=>Le.sendEmailVerification()).then(()=>{console.log("correo de verificacion enviado")})}ForgotPassword(Le){return this.afAuth.sendPasswordResetEmail(Le).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(Xe=>{window.alert(Xe)})}checkPassword(Le){var Xe=this;return(0,y.Z)(function*(){const Te=yield Xe.afAuth.currentUser,Ie=q.Q.credential(Te.email,Le);let ae=!0;try{yield(0,q.a1)(Te,Ie),console.log("password looks good")}catch{console.log("incorrect password"),ae=!1}finally{return ae}})()}}return ke.\u0275fac=function(Le){return new(Le||ke)(we.LFG(He.ST),we.LFG(Se.zQ),we.LFG(me.F0),we.LFG(we.R0b),we.LFG(He.ST))},ke.\u0275prov=we.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})()},5626:(ln,at,B)=>{"use strict";var y=B(4650),m=B(1481),q=B(6159),oe=B(9972),xe=B(3651);const we=[{path:"home",loadComponent:()=>B.e(4035).then(B.bind(B,4035)).then(u=>u.HomePage),canActivate:[(u=!1)=>{const i=(0,y.f3M)(xe.e);return(0,y.f3M)(q.F0),i.isLoggedIn}],canDeactivate:[()=>!(0,y.f3M)(xe.e).isLoggedIn]},{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>Promise.all([B.e(2998),B.e(1453)]).then(B.bind(B,1453)).then(u=>u.LogniPage)},{path:"register",loadComponent:()=>Promise.all([B.e(2998),B.e(7009)]).then(B.bind(B,7009)).then(u=>u.RegisterPage)},{path:"splash",loadComponent:()=>B.e(4399).then(B.bind(B,4399)).then(u=>u.SplashPage)}];let He=(()=>{class u{constructor(o){this._router=o}ngOnInit(){setTimeout(()=>{this._router.navigateByUrl("splash")},1500)}}return u.\u0275fac=function(o){return new(o||u)(y.Y36(q.F0))},u.\u0275cmp=y.Xpm({type:u,selectors:[["app-root"]],standalone:!0,features:[y.jDz],decls:2,vars:0,template:function(o,d){1&o&&(y.TgZ(0,"ion-app"),y._UZ(1,"ion-router-outlet"),y.qZA())},dependencies:[oe.Pc,oe.dr,oe.jP]}),u})();var me=B(2011),De=B(1205),ke=B(9751),je=B(9646),Le=B(8996),Xe=B(8372),Te=B(4004),Ie=B(3900),ae=B(4976),dt=B(3942),ze=B(5861),Ae=B(6881),Y=B(2090),ht=B(4859);const Ke="firebasestorage.googleapis.com",fe="storageBucket";class Et extends Y.ZR{constructor(i,o,d=0){super(gt(i),`Firebase Storage: ${o} (${gt(i)})`),this.status_=d,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Et.prototype)}get status(){return this.status_}set status(i){this.status_=i}_codeEquals(i){return gt(i)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(i){this.customData.serverResponse=i,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ve=(()=>{return(u=Ve||(Ve={})).UNKNOWN="unknown",u.OBJECT_NOT_FOUND="object-not-found",u.BUCKET_NOT_FOUND="bucket-not-found",u.PROJECT_NOT_FOUND="project-not-found",u.QUOTA_EXCEEDED="quota-exceeded",u.UNAUTHENTICATED="unauthenticated",u.UNAUTHORIZED="unauthorized",u.UNAUTHORIZED_APP="unauthorized-app",u.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",u.INVALID_CHECKSUM="invalid-checksum",u.CANCELED="canceled",u.INVALID_EVENT_NAME="invalid-event-name",u.INVALID_URL="invalid-url",u.INVALID_DEFAULT_BUCKET="invalid-default-bucket",u.NO_DEFAULT_BUCKET="no-default-bucket",u.CANNOT_SLICE_BLOB="cannot-slice-blob",u.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",u.NO_DOWNLOAD_URL="no-download-url",u.INVALID_ARGUMENT="invalid-argument",u.INVALID_ARGUMENT_COUNT="invalid-argument-count",u.APP_DELETED="app-deleted",u.INVALID_ROOT_OPERATION="invalid-root-operation",u.INVALID_FORMAT="invalid-format",u.INTERNAL_ERROR="internal-error",u.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Ve;var u})();function gt(u){return"storage/"+u}function wt(){return new Et(Ve.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function mt(){return new Et(Ve.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function St(){return new Et(Ve.CANCELED,"User canceled the upload/download.")}function ut(){return new Et(Ve.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Un(u){return new Et(Ve.INVALID_ARGUMENT,u)}function fn(){return new Et(Ve.APP_DELETED,"The Firebase app was deleted.")}function tn(u){return new Et(Ve.INVALID_ROOT_OPERATION,"The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function En(u,i){return new Et(Ve.INVALID_FORMAT,"String does not match format '"+u+"': "+i)}function Ht(u){throw new Et(Ve.INTERNAL_ERROR,"Internal error: "+u)}class cr{constructor(i,o){this.bucket=i,this.path_=o}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const i=encodeURIComponent;return"/b/"+i(this.bucket)+"/o/"+i(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(i,o){let d;try{d=cr.makeFromUrl(i,o)}catch{return new cr(i,"")}if(""===d.path)return d;throw function hn(u){return new Et(Ve.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+u+"'.")}(i)}static makeFromUrl(i,o){let d=null;const g="([A-Za-z0-9.\\-_]+)",U=new RegExp("^gs://"+g+"(/(.*))?$","i");function ie(ki){ki.path_=decodeURIComponent(ki.path)}const ot=o.replace(/[.]/g,"\\."),Pi=[{regex:U,indices:{bucket:1,path:3},postModify:function I(ki){"/"===ki.path.charAt(ki.path.length-1)&&(ki.path_=ki.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${ot}/v[A-Za-z0-9_]+/b/${g}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ie},{regex:new RegExp(`^https?://${o===Ke?"(?:storage.googleapis.com|storage.cloud.google.com)":o}/${g}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ie}];for(let ki=0;ki<Pi.length;ki++){const ll=Pi[ki],Na=ll.regex.exec(i);if(Na){let aa=Na[ll.indices.path];aa||(aa=""),d=new cr(Na[ll.indices.bucket],aa),ll.postModify(d);break}}if(null==d)throw function jt(u){return new Et(Ve.INVALID_URL,"Invalid URL '"+u+"'.")}(i);return d}}class Zn{constructor(i){this.promise_=Promise.reject(i)}getPromise(){return this.promise_}cancel(i=!1){}}function bi(u){return"string"==typeof u||u instanceof String}function Dr(u){return Xn()&&u instanceof Blob}function Xn(){return typeof Blob<"u"&&!(0,Y.UG)()}function wn(u,i,o,d){if(d<i)throw Un(`Invalid value for '${u}'. Expected ${i} or greater.`);if(d>o)throw Un(`Invalid value for '${u}'. Expected ${o} or less.`)}function sn(u,i,o){let d=i;return null==o&&(d=`https://${i}`),`${o}://${d}/v0${u}`}function Nr(u){const i=encodeURIComponent;let o="?";for(const d in u)u.hasOwnProperty(d)&&(o=o+(i(d)+"=")+i(u[d])+"&");return o=o.slice(0,-1),o}var Xr=(()=>{return(u=Xr||(Xr={}))[u.NO_ERROR=0]="NO_ERROR",u[u.NETWORK_ERROR=1]="NETWORK_ERROR",u[u.ABORT=2]="ABORT",Xr;var u})();function pr(u,i){const o=u>=500&&u<600,g=-1!==[408,429].indexOf(u),I=-1!==i.indexOf(u);return o||g||I}class Ci{constructor(i,o,d,g,I,A,U,Z,ie,Ze,ot,Mt=!0){this.url_=i,this.method_=o,this.headers_=d,this.body_=g,this.successCodes_=I,this.additionalRetryCodes_=A,this.callback_=U,this.errorCallback_=Z,this.timeout_=ie,this.progressCallback_=Ze,this.connectionFactory_=ot,this.retry=Mt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Zt,Xt)=>{this.resolve_=Zt,this.reject_=Xt,this.start_()})}start_(){const o=(d,g)=>{const I=this.resolve_,A=this.reject_,U=g.connection;if(g.wasSuccessCode)try{const Z=this.callback_(U,U.getResponse());!function Mi(u){return void 0!==u}(Z)?I():I(Z)}catch(Z){A(Z)}else if(null!==U){const Z=wt();Z.serverResponse=U.getErrorText(),A(this.errorCallback_?this.errorCallback_(U,Z):Z)}else A(g.canceled?this.appDelete_?fn():St():mt())};this.canceled_?o(0,new kr(!1,null,!0)):this.backoffId_=function pn(u,i,o){let d=1,g=null,I=null,A=!1,U=0;function Z(){return 2===U}let ie=!1;function Ze(...ur){ie||(ie=!0,i.apply(null,ur))}function ot(ur){g=setTimeout(()=>{g=null,u(Zt,Z())},ur)}function Mt(){I&&clearTimeout(I)}function Zt(ur,...Zr){if(ie)return void Mt();if(ur)return Mt(),void Ze.call(null,ur,...Zr);if(Z()||A)return Mt(),void Ze.call(null,ur,...Zr);let Pi;d<64&&(d*=2),1===U?(U=2,Pi=0):Pi=1e3*(d+Math.random()),ot(Pi)}let Xt=!1;function vn(ur){Xt||(Xt=!0,Mt(),!ie&&(null!==g?(ur||(U=2),clearTimeout(g),ot(0)):ur||(U=1)))}return ot(0),I=setTimeout(()=>{A=!0,vn(!0)},o),vn}((d,g)=>{if(g)return void d(!1,new kr(!1,null,!0));const I=this.connectionFactory_();this.pendingConnection_=I;const A=U=>{null!==this.progressCallback_&&this.progressCallback_(U.loaded,U.lengthComputable?U.total:-1)};null!==this.progressCallback_&&I.addUploadProgressListener(A),I.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&I.removeUploadProgressListener(A),this.pendingConnection_=null;const U=I.getErrorCode()===Xr.NO_ERROR,Z=I.getStatus();if(!U||pr(Z,this.additionalRetryCodes_)&&this.retry){const Ze=I.getErrorCode()===Xr.ABORT;return void d(!1,new kr(!1,null,Ze))}const ie=-1!==this.successCodes_.indexOf(Z);d(!0,new kr(ie,I))})},o,this.timeout_)}getPromise(){return this.promise_}cancel(i){this.canceled_=!0,this.appDelete_=i||!1,null!==this.backoffId_&&function dr(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class kr{constructor(i,o,d){this.wasSuccessCode=i,this.connection=o,this.canceled=!!d}}function ni(...u){const i=function tr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==i){const o=new i;for(let d=0;d<u.length;d++)o.append(u[d]);return o.getBlob()}if(Xn())return new Blob(u);throw new Et(Ve.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _i{constructor(i,o){this.data=i,this.contentType=o||null}}function Ur(u,i){switch(u){case Sr.RAW:return new _i(Jr(i));case Sr.BASE64:case Sr.BASE64URL:return new _i(Be(u,i));case Sr.DATA_URL:return new _i(function ye(u){const i=new he(u);return i.base64?Be(Sr.BASE64,i.rest):function Qe(u){let i;try{i=decodeURIComponent(u)}catch{throw En(Sr.DATA_URL,"Malformed data URL.")}return Jr(i)}(i.rest)}(i),function de(u){return new he(u).contentType}(i))}throw wt()}function Jr(u){const i=[];for(let o=0;o<u.length;o++){let d=u.charCodeAt(o);d<=127?i.push(d):d<=2047?i.push(192|d>>6,128|63&d):55296==(64512&d)?o<u.length-1&&56320==(64512&u.charCodeAt(o+1))?(d=65536|(1023&d)<<10|1023&u.charCodeAt(++o),i.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|63&d)):i.push(239,191,189):56320==(64512&d)?i.push(239,191,189):i.push(224|d>>12,128|d>>6&63,128|63&d)}return new Uint8Array(i)}function Be(u,i){switch(u){case Sr.BASE64:{const g=-1!==i.indexOf("-"),I=-1!==i.indexOf("_");if(g||I)throw En(u,"Invalid character '"+(g?"-":"_")+"' found: is it base64url encoded?");break}case Sr.BASE64URL:{const g=-1!==i.indexOf("+"),I=-1!==i.indexOf("/");if(g||I)throw En(u,"Invalid character '"+(g?"+":"/")+"' found: is it base64 encoded?");i=i.replace(/-/g,"+").replace(/_/g,"/");break}}let o;try{o=function ri(u){if(typeof atob>"u")throw function Rn(u){return new Et(Ve.UNSUPPORTED_ENVIRONMENT,`${u} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(u)}(i)}catch(g){throw g.message.includes("polyfill")?g:En(u,"Invalid character found")}const d=new Uint8Array(o.length);for(let g=0;g<o.length;g++)d[g]=o.charCodeAt(g);return d}class he{constructor(i){this.base64=!1,this.contentType=null;const o=i.match(/^data:([^,]+)?,/);if(null===o)throw En(Sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const d=o[1]||null;null!=d&&(this.base64=function lt(u,i){return u.length>=i.length&&u.substring(u.length-i.length)===i}(d,";base64"),this.contentType=this.base64?d.substring(0,d.length-7):d),this.rest=i.substring(i.indexOf(",")+1)}}class Re{constructor(i,o){let d=0,g="";Dr(i)?(this.data_=i,d=i.size,g=i.type):i instanceof ArrayBuffer?(o?this.data_=new Uint8Array(i):(this.data_=new Uint8Array(i.byteLength),this.data_.set(new Uint8Array(i))),d=this.data_.length):i instanceof Uint8Array&&(o?this.data_=i:(this.data_=new Uint8Array(i.length),this.data_.set(i)),d=i.length),this.size_=d,this.type_=g}size(){return this.size_}type(){return this.type_}slice(i,o){if(Dr(this.data_)){const g=function Gr(u,i,o){return u.webkitSlice?u.webkitSlice(i,o):u.mozSlice?u.mozSlice(i,o):u.slice?u.slice(i,o):null}(this.data_,i,o);return null===g?null:new Re(g)}{const d=new Uint8Array(this.data_.buffer,i,o-i);return new Re(d,!0)}}static getBlob(...i){if(Xn()){const o=i.map(d=>d instanceof Re?d.data_:d);return new Re(ni.apply(null,o))}{const o=i.map(A=>bi(A)?Ur(Sr.RAW,A).data:A.data_);let d=0;o.forEach(A=>{d+=A.byteLength});const g=new Uint8Array(d);let I=0;return o.forEach(A=>{for(let U=0;U<A.length;U++)g[I++]=A[U]}),new Re(g,!0)}}uploadData(){return this.data_}}function Fe(u){let i;try{i=JSON.parse(u)}catch{return null}return function Ri(u){return"object"==typeof u&&!Array.isArray(u)}(i)?i:null}function xt(u){const i=u.lastIndexOf("/",u.length-2);return-1===i?u:u.slice(i+1)}function Yt(u,i){return i}class gn{constructor(i,o,d,g){this.server=i,this.local=o||i,this.writable=!!d,this.xform=g||Yt}}let mn=null;function Wr(){if(mn)return mn;const u=[];u.push(new gn("bucket")),u.push(new gn("generation")),u.push(new gn("metageneration")),u.push(new gn("name","fullPath",!0));const o=new gn("name");o.xform=function i(I,A){return function nr(u){return!bi(u)||u.length<2?u:xt(u)}(A)},u.push(o);const g=new gn("size");return g.xform=function d(I,A){return void 0!==A?Number(A):A},u.push(g),u.push(new gn("timeCreated")),u.push(new gn("updated")),u.push(new gn("md5Hash",null,!0)),u.push(new gn("cacheControl",null,!0)),u.push(new gn("contentDisposition",null,!0)),u.push(new gn("contentEncoding",null,!0)),u.push(new gn("contentLanguage",null,!0)),u.push(new gn("contentType",null,!0)),u.push(new gn("metadata","customMetadata",!0)),mn=u,mn}function nn(u,i,o){const d=Fe(i);return null===d?null:function At(u,i,o){const d={type:"file"},g=o.length;for(let I=0;I<g;I++){const A=o[I];d[A.local]=A.xform(d,i[A.server])}return function kt(u,i){Object.defineProperty(u,"ref",{get:function o(){const I=new cr(u.bucket,u.fullPath);return i._makeStorageReference(I)}})}(d,u),d}(u,d,o)}function Jn(u,i){const o={},d=i.length;for(let g=0;g<d;g++){const I=i[g];I.writable&&(o[I.server]=u[I.local])}return JSON.stringify(o)}const vr="prefixes",Tn="items";class jn{constructor(i,o,d,g){this.url=i,this.method=o,this.handler=d,this.timeout=g,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wn(u){if(!u)throw wt()}function Ps(u,i){return function o(d,g){const I=nn(u,g,i);return Wn(null!==I),I}}function li(u){return function i(o,d){let g;return g=401===o.getStatus()?o.getErrorText().includes("Firebase App Check token is invalid")?function Ge(){return new Et(Ve.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function We(){return new Et(Ve.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===o.getStatus()?function qe(u){return new Et(Ve.QUOTA_EXCEEDED,"Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===o.getStatus()?function _t(u){return new Et(Ve.UNAUTHORIZED,"User does not have permission to access '"+u+"'.")}(u.path):d,g.status=o.getStatus(),g.serverResponse=d.serverResponse,g}}function _n(u){const i=li(u);return function o(d,g){let I=i(d,g);return 404===d.getStatus()&&(I=function yt(u){return new Et(Ve.OBJECT_NOT_FOUND,"Object '"+u+"' does not exist.")}(u.path)),I.serverResponse=g.serverResponse,I}}function gr(u,i,o){const g=sn(i.fullServerUrl(),u.host,u._protocol),A=u.maxOperationRetryTime,U=new jn(g,"GET",Ps(u,o),A);return U.errorHandler=_n(i),U}function si(u,i,o,d,g){const I={};I.prefix=i.isRoot?"":i.path+"/",o&&o.length>0&&(I.delimiter=o),d&&(I.pageToken=d),g&&(I.maxResults=g);const U=sn(i.bucketOnlyServerUrl(),u.host,u._protocol),ie=u.maxOperationRetryTime,Ze=new jn(U,"GET",function ns(u,i){return function o(d,g){const I=function wr(u,i,o){const d=Fe(o);return null===d?null:function Fr(u,i,o){const d={prefixes:[],items:[],nextPageToken:o.nextPageToken};if(o[vr])for(const g of o[vr]){const I=g.replace(/\/$/,""),A=u._makeStorageReference(new cr(i,I));d.prefixes.push(A)}if(o[Tn])for(const g of o[Tn]){const I=u._makeStorageReference(new cr(i,g.name));d.items.push(I)}return d}(u,i,d)}(u,i,g);return Wn(null!==I),I}}(u,i.bucket),ie);return Ze.urlParams=I,Ze.errorHandler=li(i),Ze}function ce(u,i,o){const d=Object.assign({},o);return d.fullPath=u.path,d.size=i.size(),d.contentType||(d.contentType=function ei(u,i){return u&&u.contentType||i&&i.type()||"application/octet-stream"}(null,i)),d}class Ye{constructor(i,o,d,g){this.current=i,this.total=o,this.finalized=!!d,this.metadata=g||null}}function be(u,i){let o=null;try{o=u.getResponseHeader("X-Goog-Upload-Status")}catch{Wn(!1)}return Wn(!!o&&-1!==(i||["active"]).indexOf(o)),o}const Gt={STATE_CHANGED:"state_changed"},Wt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cn(u){switch(u){case"running":case"pausing":case"canceling":return Wt.RUNNING;case"paused":return Wt.PAUSED;case"success":return Wt.SUCCESS;case"canceled":return Wt.CANCELED;default:return Wt.ERROR}}class Qn{constructor(i,o,d){if(function Mr(u){return"function"==typeof u}(i)||null!=o||null!=d)this.next=i,this.error=null!=o?o:void 0,this.complete=null!=d?d:void 0;else{const I=i;this.next=I.next,this.error=I.error,this.complete=I.complete}}}function Ln(u){return(...i)=>{Promise.resolve().then(()=>u(...i))}}let ar=null;class Fi{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xr.NO_ERROR,this.sendPromise_=new Promise(i=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xr.ABORT,i()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xr.NETWORK_ERROR,i()}),this.xhr_.addEventListener("load",()=>{i()})})}send(i,o,d,g){if(this.sent_)throw Ht("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(o,i,!0),void 0!==g)for(const I in g)g.hasOwnProperty(I)&&this.xhr_.setRequestHeader(I,g[I].toString());return void 0!==d?this.xhr_.send(d):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ht("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ht("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ht("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ht("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(i){return this.xhr_.getResponseHeader(i)}addUploadProgressListener(i){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",i)}removeUploadProgressListener(i){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",i)}}class Li extends Fi{initXhr(){this.xhr_.responseType="text"}}function ct(){return ar?ar():new Li}class rr{constructor(i,o,d=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=i,this._blob=o,this._metadata=d,this._mappings=Wr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=g=>{if(this._request=void 0,this._chunkMultiplier=1,g._codeEquals(Ve.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const I=this.isExponentialBackoffExpired();if(pr(g.status,[])){if(!I)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();g=mt()}this._error=g,this._transition("error")}},this._metadataErrorHandler=g=>{this._request=void 0,g._codeEquals(Ve.CANCELED)?this.completeTransitions_():(this._error=g,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((g,I)=>{this._resolve=g,this._reject=I,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const i=this._transferred;return o=>this._updateProgress(i+o)}_shouldDoResumable(i){return i.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(i){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([o,d])=>{switch(this._state){case"running":i(o,d);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((i,o)=>{const d=function Je(u,i,o,d,g){const I=i.bucketOnlyServerUrl(),A=ce(i,d,g),U={name:A.fullPath},Z=sn(I,u.host,u._protocol),Ze={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${d.size()}`,"X-Goog-Upload-Header-Content-Type":A.contentType,"Content-Type":"application/json; charset=utf-8"},ot=Jn(A,o),Xt=new jn(Z,"POST",function Zt(vn){let ur;be(vn);try{ur=vn.getResponseHeader("X-Goog-Upload-URL")}catch{Wn(!1)}return Wn(bi(ur)),ur},u.maxUploadRetryTime);return Xt.urlParams=U,Xt.headers=Ze,Xt.body=ot,Xt.errorHandler=li(i),Xt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),g=this._ref.storage._makeRequest(d,ct,i,o);this._request=g,g.getPromise().then(I=>{this._request=void 0,this._uploadUrl=I,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const i=this._uploadUrl;this._resolveToken((o,d)=>{const g=function nt(u,i,o,d){const Z=new jn(o,"POST",function I(ie){const Ze=be(ie,["active","final"]);let ot=null;try{ot=ie.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Wn(!1)}ot||Wn(!1);const Mt=Number(ot);return Wn(!isNaN(Mt)),new Ye(Mt,d.size(),"final"===Ze)},u.maxUploadRetryTime);return Z.headers={"X-Goog-Upload-Command":"query"},Z.errorHandler=li(i),Z}(this._ref.storage,this._ref._location,i,this._blob),I=this._ref.storage._makeRequest(g,ct,o,d);this._request=I,I.getPromise().then(A=>{this._request=void 0,this._updateProgress(A.current),this._needToFetchStatus=!1,A.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const i=262144*this._chunkMultiplier,o=new Ye(this._transferred,this._blob.size()),d=this._uploadUrl;this._resolveToken((g,I)=>{let A;try{A=function $t(u,i,o,d,g,I,A,U){const Z=new Ye(0,0);if(A?(Z.current=A.current,Z.total=A.total):(Z.current=0,Z.total=d.size()),d.size()!==Z.total)throw function Rt(){return new Et(Ve.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const ie=Z.total-Z.current;let Ze=ie;g>0&&(Ze=Math.min(Ze,g));const ot=Z.current;let Zt="";Zt=0===Ze?"finalize":ie===Ze?"upload, finalize":"upload";const Xt={"X-Goog-Upload-Command":Zt,"X-Goog-Upload-Offset":`${Z.current}`},vn=d.slice(ot,ot+Ze);if(null===vn)throw ut();const Pi=new jn(o,"POST",function ur(ki,ll){const Na=be(ki,["active","final"]),va=Z.current+Ze,aa=d.size();let fc;return fc="final"===Na?Ps(i,I)(ki,ll):null,new Ye(va,aa,"final"===Na,fc)},i.maxUploadRetryTime);return Pi.headers=Xt,Pi.body=vn.uploadData(),Pi.progressCallback=U||null,Pi.errorHandler=li(u),Pi}(this._ref._location,this._ref.storage,d,this._blob,i,this._mappings,o,this._makeProgressCallback())}catch(Z){return this._error=Z,void this._transition("error")}const U=this._ref.storage._makeRequest(A,ct,g,I,!1);this._request=U,U.getPromise().then(Z=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Z.current),Z.finalized?(this._metadata=Z.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((i,o)=>{const d=gr(this._ref.storage,this._ref._location,this._mappings),g=this._ref.storage._makeRequest(d,ct,i,o);this._request=g,g.getPromise().then(I=>{this._request=void 0,this._metadata=I,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((i,o)=>{const d=function Me(u,i,o,d,g){const I=i.bucketOnlyServerUrl(),A={"X-Goog-Upload-Protocol":"multipart"},Z=function U(){let Pi="";for(let ki=0;ki<2;ki++)Pi+=Math.random().toString().slice(2);return Pi}();A["Content-Type"]="multipart/related; boundary="+Z;const ie=ce(i,d,g),Ze=Jn(ie,o),Zt=Re.getBlob("--"+Z+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ze+"\r\n--"+Z+"\r\nContent-Type: "+ie.contentType+"\r\n\r\n",d,"\r\n--"+Z+"--");if(null===Zt)throw ut();const Xt={name:ie.fullPath},vn=sn(I,u.host,u._protocol),Zr=u.maxUploadRetryTime,Si=new jn(vn,"POST",Ps(u,o),Zr);return Si.urlParams=Xt,Si.headers=A,Si.body=Zt.uploadData(),Si.errorHandler=li(i),Si}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),g=this._ref.storage._makeRequest(d,ct,i,o);this._request=g,g.getPromise().then(I=>{this._request=void 0,this._metadata=I,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(i){const o=this._transferred;this._transferred=i,this._transferred!==o&&this._notifyObservers()}_transition(i){if(this._state!==i)switch(i){case"canceling":case"pausing":this._state=i,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const o="paused"===this._state;this._state=i,o&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=i,this._notifyObservers();break;case"canceled":this._error=St(),this._state=i,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const i=cn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:i,metadata:this._metadata,task:this,ref:this._ref}}on(i,o,d,g){const I=new Qn(o||void 0,d||void 0,g||void 0);return this._addObserver(I),()=>{this._removeObserver(I)}}then(i,o){return this._promise.then(i,o)}catch(i){return this.then(null,i)}_addObserver(i){this._observers.push(i),this._notifyObserver(i)}_removeObserver(i){const o=this._observers.indexOf(i);-1!==o&&this._observers.splice(o,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(o=>{this._notifyObserver(o)})}_finishPromise(){if(void 0!==this._resolve){let i=!0;switch(cn(this._state)){case Wt.SUCCESS:Ln(this._resolve.bind(null,this.snapshot))();break;case Wt.CANCELED:case Wt.ERROR:Ln(this._reject.bind(null,this._error))();break;default:i=!1}i&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(i){switch(cn(this._state)){case Wt.RUNNING:case Wt.PAUSED:i.next&&Ln(i.next.bind(i,this.snapshot))();break;case Wt.SUCCESS:i.complete&&Ln(i.complete.bind(i))();break;default:i.error&&Ln(i.error.bind(i,this._error))()}}resume(){const i="paused"===this._state||"pausing"===this._state;return i&&this._transition("running"),i}pause(){const i="running"===this._state;return i&&this._transition("pausing"),i}cancel(){const i="running"===this._state||"pausing"===this._state;return i&&this._transition("canceling"),i}}class Hn{constructor(i,o){this._service=i,this._location=o instanceof cr?o:cr.makeFromUrl(o,i.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(i,o){return new Hn(i,o)}get root(){const i=new cr(this._location.bucket,"");return this._newRef(this._service,i)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xt(this._location.path)}get storage(){return this._service}get parent(){const i=function Ee(u){if(0===u.length)return null;const i=u.lastIndexOf("/");return-1===i?"":u.slice(0,i)}(this._location.path);if(null===i)return null;const o=new cr(this._location.bucket,i);return new Hn(this._service,o)}_throwIfRoot(i){if(""===this._location.path)throw tn(i)}}function ho(u,i,o){return No.apply(this,arguments)}function No(){return(No=(0,ze.Z)(function*(u,i,o){const g=yield ms(u,{pageToken:o});i.prefixes.push(...g.prefixes),i.items.push(...g.items),null!=g.nextPageToken&&(yield ho(u,i,g.nextPageToken))})).apply(this,arguments)}function ms(u,i){null!=i&&"number"==typeof i.maxResults&&wn("options.maxResults",1,1e3,i.maxResults);const o=i||{},d=si(u.storage,u._location,"/",o.pageToken,o.maxResults);return u.storage.makeRequestWithTokens(d,ct)}function Zo(u){u._throwIfRoot("getDownloadURL");const i=function vi(u,i,o){const g=sn(i.fullServerUrl(),u.host,u._protocol),A=u.maxOperationRetryTime,U=new jn(g,"GET",function as(u,i){return function o(d,g){const I=nn(u,g,i);return Wn(null!==I),function On(u,i,o,d){const g=Fe(i);if(null===g||!bi(g.downloadTokens))return null;const I=g.downloadTokens;if(0===I.length)return null;const A=encodeURIComponent;return I.split(",").map(ie=>{const ot=u.fullPath;return sn("/b/"+A(u.bucket)+"/o/"+A(ot),o,d)+Nr({alt:"media",token:ie})})[0]}(I,g,u.host,u._protocol)}}(u,o),A);return U.errorHandler=_n(i),U}(u.storage,u._location,Wr());return u.storage.makeRequestWithTokens(i,ct).then(o=>{if(null===o)throw function rn(){return new Et(Ve.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return o})}function Fo(u,i){const o=function et(u,i){const o=i.split("/").filter(d=>d.length>0).join("/");return 0===u.length?o:u+"/"+o}(u._location.path,i),d=new cr(u._location.bucket,o);return new Hn(u.storage,d)}function Ba(u,i){if(u instanceof $a){const o=u;if(null==o._bucket)throw function Dt(){return new Et(Ve.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fe+"' property when initializing the app?")}();const d=new Hn(o,o._bucket);return null!=i?Ba(d,i):d}return void 0!==i?Fo(u,i):u}function Ea(u,i){if(i&&function Os(u){return/^[A-Za-z]+:\/\//.test(u)}(i)){if(u instanceof $a)return function Qo(u,i){return new Hn(u,i)}(u,i);throw Un("To use ref(service, url), the first argument must be a Storage instance.")}return Ba(u,i)}function ls(u,i){const o=null==i?void 0:i[fe];return null==o?null:cr.makeFromBucketSpec(o,u)}class $a{constructor(i,o,d,g,I){this.app=i,this._authProvider=o,this._appCheckProvider=d,this._url=g,this._firebaseVersion=I,this._bucket=null,this._host=Ke,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=g?cr.makeFromBucketSpec(g,this._host):ls(this._host,this.app.options)}get host(){return this._host}set host(i){this._host=i,this._bucket=null!=this._url?cr.makeFromBucketSpec(this._url,i):ls(i,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(i){wn("time",0,Number.POSITIVE_INFINITY,i),this._maxUploadRetryTime=i}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(i){wn("time",0,Number.POSITIVE_INFINITY,i),this._maxOperationRetryTime=i}_getAuthToken(){var i=this;return(0,ze.Z)(function*(){if(i._overrideAuthToken)return i._overrideAuthToken;const o=i._authProvider.getImmediate({optional:!0});if(o){const d=yield o.getToken();if(null!==d)return d.accessToken}return null})()}_getAppCheckToken(){var i=this;return(0,ze.Z)(function*(){const o=i._appCheckProvider.getImmediate({optional:!0});return o?(yield o.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(i=>i.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(i){return new Hn(this,i)}_makeRequest(i,o,d,g,I=!0){if(this._deleted)return new Zn(fn());{const A=function Di(u,i,o,d,g,I,A=!0){const U=Nr(u.urlParams),Z=u.url+U,ie=Object.assign({},u.headers);return function yi(u,i){i&&(u["X-Firebase-GMPID"]=i)}(ie,i),function ai(u,i){null!==i&&i.length>0&&(u.Authorization="Firebase "+i)}(ie,o),function _r(u,i){u["X-Firebase-Storage-Version"]="webjs/"+(null!=i?i:"AppManager")}(ie,I),function sr(u,i){null!==i&&(u["X-Firebase-AppCheck"]=i)}(ie,d),new Ci(Z,u.method,ie,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,g,A)}(i,this._appId,d,g,o,this._firebaseVersion,I);return this._requests.add(A),A.getPromise().then(()=>this._requests.delete(A),()=>this._requests.delete(A)),A}}makeRequestWithTokens(i,o){var d=this;return(0,ze.Z)(function*(){const[g,I]=yield Promise.all([d._getAuthToken(),d._getAppCheckToken()]);return d._makeRequest(i,o,g,I).getPromise()})()}}const us="@firebase/storage";function wa(u,i){return Ea(u=(0,Y.m9)(u),i)}function Yi(u,{instanceIdentifier:i}){const o=u.getProvider("app").getImmediate(),d=u.getProvider("auth-internal"),g=u.getProvider("app-check-internal");return new $a(o,d,g,i,Ae.SDK_VERSION)}!function rs(){(0,Ae._registerComponent)(new ht.wA("storage",Yi,"PUBLIC").setMultipleInstances(!0)),(0,Ae.registerVersion)(us,"0.11.2",""),(0,Ae.registerVersion)(us,"0.11.2","esm2017")}();class Ao{constructor(i,o,d){this._delegate=i,this.task=o,this.ref=d}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class cs{constructor(i,o){this._delegate=i,this._ref=o,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ao(this._delegate.snapshot,this,this._ref)}then(i,o){return this._delegate.then(d=>{if(i)return i(new Ao(d,this,this._ref))},o)}on(i,o,d,g){let I;return o&&(I="function"==typeof o?A=>o(new Ao(A,this,this._ref)):{next:o.next?A=>o.next(new Ao(A,this,this._ref)):void 0,complete:o.complete||void 0,error:o.error||void 0}),this._delegate.on(i,I,d||void 0,g||void 0)}}class Va{constructor(i,o){this._delegate=i,this._service=o}get prefixes(){return this._delegate.prefixes.map(i=>new C(i,this._service))}get items(){return this._delegate.items.map(i=>new C(i,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class C{constructor(i,o){this._delegate=i,this.storage=o}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(i){const o=function $o(u,i){return Fo(u,i)}(this._delegate,i);return new C(o,this.storage)}get root(){return new C(this._delegate.root,this.storage)}get parent(){const i=this._delegate.parent;return null==i?null:new C(i,this.storage)}put(i,o){return this._throwIfRoot("put"),new cs(function po(u,i,o){return function Ws(u,i,o){return u._throwIfRoot("uploadBytesResumable"),new rr(u,new Re(i),o)}(u=(0,Y.m9)(u),i,o)}(this._delegate,i,o),this)}putString(i,o=Sr.RAW,d){this._throwIfRoot("putString");const g=Ur(o,i),I=Object.assign({},d);return null==I.contentType&&null!=g.contentType&&(I.contentType=g.contentType),new cs(new rr(this._delegate,new Re(g.data,!0),I),this)}listAll(){return function Bo(u){return function Ks(u){const i={prefixes:[],items:[]};return ho(u,i).then(()=>i)}(u=(0,Y.m9)(u))}(this._delegate).then(i=>new Va(i,this.storage))}list(i){return function hu(u,i){return ms(u=(0,Y.m9)(u),i)}(this._delegate,i||void 0).then(o=>new Va(o,this.storage))}getMetadata(){return function Lo(u){return function La(u){u._throwIfRoot("getMetadata");const i=gr(u.storage,u._location,Wr());return u.storage.makeRequestWithTokens(i,ct)}(u=(0,Y.m9)(u))}(this._delegate)}updateMetadata(i){return function no(u,i){return function fo(u,i){u._throwIfRoot("updateMetadata");const o=function ui(u,i,o,d){const I=sn(i.fullServerUrl(),u.host,u._protocol),U=Jn(o,d),ie=u.maxOperationRetryTime,Ze=new jn(I,"PATCH",Ps(u,d),ie);return Ze.headers={"Content-Type":"application/json; charset=utf-8"},Ze.body=U,Ze.errorHandler=_n(i),Ze}(u.storage,u._location,i,Wr());return u.storage.makeRequestWithTokens(o,ct)}(u=(0,Y.m9)(u),i)}(this._delegate,i)}getDownloadURL(){return function Ua(u){return Zo(u=(0,Y.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ua(u){return function ko(u){u._throwIfRoot("deleteObject");const i=function $i(u,i){const d=sn(i.fullServerUrl(),u.host,u._protocol),U=new jn(d,"DELETE",function A(Z,ie){},u.maxOperationRetryTime);return U.successCodes=[200,204],U.errorHandler=_n(i),U}(u.storage,u._location);return u.storage.makeRequestWithTokens(i,ct)}(u=(0,Y.m9)(u))}(this._delegate)}_throwIfRoot(i){if(""===this._delegate._location.path)throw tn(i)}}class Q{constructor(i,o){this.app=i,this._delegate=o}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(i){if(D(i))throw Un("ref() expected a child path but got a URL, use refFromURL instead.");return new C(wa(this._delegate,i),this)}refFromURL(i){if(!D(i))throw Un("refFromURL() expected a full URL but got a child path, use ref() instead.");try{cr.makeFromUrl(i,this._delegate.host)}catch{throw Un("refFromUrl() expected a valid full URL but got an invalid one.")}return new C(wa(this._delegate,i),this)}setMaxUploadRetryTime(i){this._delegate.maxUploadRetryTime=i}setMaxOperationRetryTime(i){this._delegate.maxOperationRetryTime=i}useEmulator(i,o,d={}){!function Ei(u,i,o,d={}){!function So(u,i,o,d={}){u.host=`${i}:${o}`,u._protocol="http";const{mockUserToken:g}=d;g&&(u._overrideAuthToken="string"==typeof g?g:(0,Y.Sg)(g,u.app.options.projectId))}(u,i,o,d)}(this._delegate,i,o,d)}}function D(u){return/^[A-Za-z]+:\/\//.test(u)}function Vn(u,{instanceIdentifier:i}){const o=u.getProvider("app-compat").getImmediate(),d=u.getProvider("storage").getImmediate({identifier:i});return new Q(o,d)}!function Kn(u){const i={TaskState:Wt,TaskEvent:Gt,StringFormat:Sr,Storage:Q,Reference:C};u.INTERNAL.registerComponent(new ht.wA("storage-compat",Vn,"PUBLIC").setServiceProps(i).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.3.2")}(dt.Z);var Ar=B(6217),Nn=B(9260);function W(u){const i=function ts(u){return new ke.y(i=>{const o=A=>i.next(A);o(u.snapshot);const I=u.on("state_changed",o);return u.then(A=>{o(A),i.complete()},A=>{o(u.snapshot),(A=>{i.error(A)})(A)}),function(){I()}}).pipe((0,Xe.b)(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>i,percentageChanges:()=>i.pipe((0,Te.U)(o=>o.bytesTransferred/o.totalBytes*100))}}function H(u){return{getDownloadURL:()=>(0,je.of)(void 0).pipe(ae.fc,(0,Ie.w)(()=>u.getDownloadURL()),ae.iC),getMetadata:()=>(0,je.of)(void 0).pipe(ae.fc,(0,Ie.w)(()=>u.getMetadata()),ae.iC),delete:()=>(0,Le.D)(u.delete()),child:i=>H(u.child(i)),updateMetadata:i=>(0,Le.D)(u.updateMetadata(i)),put:(i,o)=>W(u.put(i,o)),putString:(i,o,d)=>W(u.putString(i,o,d)),list:i=>(0,Le.D)(u.list(i)),listAll:()=>(0,Le.D)(u.listAll())}}const L=new y.OlP("angularfire2.storageBucket"),ue=new y.OlP("angularfire2.storage.maxUploadRetryTime"),Ft=new y.OlP("angularfire2.storage.maxOperationRetryTime"),Bn=new y.OlP("angularfire2.storage.use-emulator");let Oi=(()=>{class u{constructor(o,d,g,I,A,U,Z,ie,Ze,ot){const Mt=(0,me.on)(o,A,d);this.storage=(0,me.cc)(`${Mt.name}.storage.${g}`,"AngularFireStorage",Mt.name,()=>{const Zt=A.runOutsideAngular(()=>Mt.storage(g||void 0)),Xt=Ze;return Xt&&Zt.useEmulator(...Xt),Z&&Zt.setMaxUploadRetryTime(Z),ie&&Zt.setMaxOperationRetryTime(ie),Zt},[Z,ie])}ref(o){return H(this.storage.ref(o))}refFromURL(o){return H(this.storage.refFromURL(o))}upload(o,d,g){return H(this.storage.ref(o)).put(d,g)}}return u.\u0275fac=function(o){return new(o||u)(y.LFG(me.Dh),y.LFG(me.xv,8),y.LFG(L,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(ae.HU),y.LFG(ue,8),y.LFG(Ft,8),y.LFG(Bn,8),y.LFG(Ar.nm,8))},u.\u0275prov=y.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),$n=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=y.oAB({type:u}),u.\u0275inj=y.cJS({}),u})(),Ia=(()=>{class u{constructor(){Nn.Z.registerVersion("angularfire",ae.q4.full,"gcs-compat")}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=y.oAB({type:u}),u.\u0275inj=y.cJS({providers:[Oi],imports:[$n]}),u})();var Dl=B(1762),is=B(4986),fu=B(6451),ja=B(3099),ro=B(5026),Tl=B(1884),cl=B(4482),Sl=B(5403),Ns=B(8421),Ha=B(4671),ds=B(5032),ks=B(3269);B(9568);var za=B(1877);const ca="@firebase/database";let Al="";function Qi(u){Al=u}class da{constructor(i){this.domStorage_=i,this.prefix_="firebase:"}set(i,o){null==o?this.domStorage_.removeItem(this.prefixedName_(i)):this.domStorage_.setItem(this.prefixedName_(i),(0,Y.Wl)(o))}get(i){const o=this.domStorage_.getItem(this.prefixedName_(i));return null==o?null:(0,Y.cI)(o)}remove(i){this.domStorage_.removeItem(this.prefixedName_(i))}prefixedName_(i){return this.prefix_+i}toString(){return this.domStorage_.toString()}}class ha{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(i,o){null==o?delete this.cache_[i]:this.cache_[i]=o}get(i){return(0,Y.r3)(this.cache_,i)?this.cache_[i]:null}remove(i){delete this.cache_[i]}}const Ga=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const i=window[u];return i.setItem("firebase:sentinel","cache"),i.removeItem("firebase:sentinel"),new da(i)}}catch{}return new ha},yo=Ga("localStorage"),Jo=Ga("sessionStorage"),_o=new za.Yd("@firebase/database"),Wa=function(){let u=1;return function(){return u++}}(),Ka=function(u){const i=(0,Y.dS)(u),o=new Y.gQ;o.update(i);const d=o.digest();return Y.US.encodeByteArray(d)},ba=function(...u){let i="";for(let o=0;o<u.length;o++){const d=u[o];Array.isArray(d)||d&&"object"==typeof d&&"number"==typeof d.length?i+=ba.apply(null,d):i+="object"==typeof d?(0,Y.Wl)(d):d,i+=" "}return i};let Hs=null,Xl=!0;const hl=function(u,i){(0,Y.hu)(!i||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(_o.logLevel=za.in.VERBOSE,Hs=_o.log.bind(_o),i&&Jo.set("logging_enabled",!0)):"function"==typeof u?Hs=u:(Hs=null,Jo.remove("logging_enabled"))},hs=function(...u){if(!0===Xl&&(Xl=!1,null===Hs&&!0===Jo.get("logging_enabled")&&hl(!0)),Hs){const i=ba.apply(null,u);Hs(i)}},ss=function(u){return function(...i){hs(u,...i)}},qs=function(...u){const i="FIREBASE INTERNAL ERROR: "+ba(...u);_o.error(i)},Lr=function(...u){const i=`FIREBASE FATAL ERROR: ${ba(...u)}`;throw _o.error(i),new Error(i)},vs=function(...u){const i="FIREBASE WARNING: "+ba(...u);_o.warn(i)},Mo=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},Es="[MIN_NAME]",Vo="[MAX_NAME]",ii=function(u,i){if(u===i)return 0;if(u===Es||i===Vo)return-1;if(i===Es||u===Vo)return 1;{const o=Br(u),d=Br(i);return null!==o?null!==d?o-d==0?u.length-i.length:o-d:-1:null!==d?1:u<i?-1:1}},Vu=function(u,i){return u===i?0:u<i?-1:1},fa=function(u,i){if(i&&u in i)return i[u];throw new Error("Missing required key ("+u+") in object: "+(0,Y.Wl)(i))},F=function(u){if("object"!=typeof u||null===u)return(0,Y.Wl)(u);const i=[];for(const d in u)i.push(d);i.sort();let o="{";for(let d=0;d<i.length;d++)0!==d&&(o+=","),o+=(0,Y.Wl)(i[d]),o+=":",o+=F(u[i[d]]);return o+="}",o},ee=function(u,i){const o=u.length;if(o<=i)return[u];const d=[];for(let g=0;g<o;g+=i)d.push(u.substring(g,g+i>o?o:g+i));return d};function V(u,i){for(const o in u)u.hasOwnProperty(o)&&i(o,u[o])}const le=function(u){(0,Y.hu)(!Mo(u),"Invalid JSON number");const d=1023;let g,I,A,U,Z;0===u?(I=0,A=0,g=1/u==-1/0?1:0):(g=u<0,(u=Math.abs(u))>=Math.pow(2,1-d)?(U=Math.min(Math.floor(Math.log(u)/Math.LN2),d),I=U+d,A=Math.round(u*Math.pow(2,52-U)-Math.pow(2,52))):(I=0,A=Math.round(u/Math.pow(2,-1074))));const ie=[];for(Z=52;Z;Z-=1)ie.push(A%2?1:0),A=Math.floor(A/2);for(Z=11;Z;Z-=1)ie.push(I%2?1:0),I=Math.floor(I/2);ie.push(g?1:0),ie.reverse();const Ze=ie.join("");let ot="";for(Z=0;Z<64;Z+=8){let Mt=parseInt(Ze.substr(Z,8),2).toString(16);1===Mt.length&&(Mt="0"+Mt),ot+=Mt}return ot.toLowerCase()},kn=new RegExp("^-?(0*)\\d{1,10}$"),Br=function(u){if(kn.test(u)){const i=Number(u);if(i>=-2147483648&&i<=2147483647)return i}return null},Er=function(u){try{u()}catch(i){setTimeout(()=>{throw vs("Exception was thrown by user callback.",i.stack||""),i},Math.floor(0))}},zi=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gi=function(u,i){const o=setTimeout(u,i);return"number"==typeof o&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(o):"object"==typeof o&&o.unref&&o.unref(),o};class Gi{constructor(i,o){this.appName_=i,this.appCheckProvider=o,this.appCheck=null==o?void 0:o.getImmediate({optional:!0}),this.appCheck||null==o||o.get().then(d=>this.appCheck=d)}getToken(i){return this.appCheck?this.appCheck.getToken(i):new Promise((o,d)=>{setTimeout(()=>{this.appCheck?this.getToken(i).then(o,d):o(null)},0)})}addTokenChangeListener(i){var o;null===(o=this.appCheckProvider)||void 0===o||o.get().then(d=>d.addTokenListener(i))}notifyForInvalidToken(){vs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class so{constructor(i,o,d){this.appName_=i,this.firebaseOptions_=o,this.authProvider_=d,this.auth_=null,this.auth_=d.getImmediate({optional:!0}),this.auth_||d.onInit(g=>this.auth_=g)}getToken(i){return this.auth_?this.auth_.getToken(i).catch(o=>o&&"auth/token-not-initialized"===o.code?(hs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(o)):new Promise((o,d)=>{setTimeout(()=>{this.auth_?this.getToken(i).then(o,d):o(null)},0)})}addTokenChangeListener(i){this.auth_?this.auth_.addAuthTokenListener(i):this.authProvider_.get().then(o=>o.addAuthTokenListener(i))}removeTokenChangeListener(i){this.authProvider_.get().then(o=>o.removeAuthTokenListener(i))}notifyForInvalidToken(){let i='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';i+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vs(i)}}let Cs=(()=>{class u{constructor(o){this.accessToken=o}getToken(o){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(o){o(this.accessToken)}removeTokenChangeListener(o){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Ml=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Rl="websocket",Ds="long_polling";class Ls{constructor(i,o,d,g,I=!1,A="",U=!1,Z=!1){this.secure=o,this.namespace=d,this.webSocketOnly=g,this.nodeAdmin=I,this.persistenceKey=A,this.includeNamespaceInQueryParams=U,this.isUsingEmulator=Z,this._host=i.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yo.get("host:"+i)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(i){i!==this.internalHost&&(this.internalHost=i,this.isCacheableHost()&&yo.set("host:"+this._host,this.internalHost))}toString(){let i=this.toURLString();return this.persistenceKey&&(i+="<"+this.persistenceKey+">"),i}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Jl(u,i,o){let d;if((0,Y.hu)("string"==typeof i,"typeof type must == string"),(0,Y.hu)("object"==typeof o,"typeof params must == object"),i===Rl)d=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(i!==Ds)throw new Error("Unknown connection type: "+i);d=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function xl(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(o.ns=u.namespace);const g=[];return V(o,(I,A)=>{g.push(I+"="+A)}),d+g.join("&")}class fs{constructor(){this.counters_={}}incrementCounter(i,o=1){(0,Y.r3)(this.counters_,i)||(this.counters_[i]=0),this.counters_[i]+=o}get(){return(0,Y.p$)(this.counters_)}}const dn={},jr={};function Ts(u){const i=u.toString();return dn[i]||(dn[i]=new fs),dn[i]}class zn{constructor(i){this.onMessage_=i,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(i,o){this.closeAfterResponse=i,this.onClose=o,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(i,o){for(this.pendingResponses[i]=o;this.pendingResponses[this.currentResponseNum];){const d=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let g=0;g<d.length;++g)d[g]&&Er(()=>{this.onMessage_(d[g])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class hr{constructor(i,o,d,g,I,A,U){this.connId=i,this.repoInfo=o,this.applicationId=d,this.appCheckToken=g,this.authToken=I,this.transportSessionId=A,this.lastSessionId=U,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ss(i),this.stats_=Ts(o),this.urlFn=Z=>(this.appCheckToken&&(Z.ac=this.appCheckToken),Jl(o,Ds,Z))}open(i,o){this.curSegmentNum=0,this.onDisconnect_=o,this.myPacketOrderer=new zn(i),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,Y.Yr)()||"complete"===document.readyState)u();else{let i=!1;const o=function(){document.body?i||(i=!0,u()):setTimeout(o,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&o()}),window.attachEvent("onload",o))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ta((...I)=>{const[A,U,Z,ie,Ze]=I;if(this.incrementIncomingBytes_(I),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===A)this.id=U,this.password=Z;else{if("close"!==A)throw new Error("Unrecognized command received: "+A);U?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(U,()=>{this.onClosed_()})):this.onClosed_()}},(...I)=>{const[A,U]=I;this.incrementIncomingBytes_(I),this.myPacketOrderer.handleResponse(A,U)},()=>{this.onClosed_()},this.urlFn);const d={start:"t"};d.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(d.cb=this.scriptTagHolder.uniqueCallbackIdentifier),d.v="5",this.transportSessionId&&(d.s=this.transportSessionId),this.lastSessionId&&(d.ls=this.lastSessionId),this.applicationId&&(d.p=this.applicationId),this.appCheckToken&&(d.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ml.test(location.hostname)&&(d.r="f");const g=this.urlFn(d);this.log_("Connecting via long-poll to "+g),this.scriptTagHolder.addTag(g,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hr.forceAllow_=!0}static forceDisallow(){hr.forceDisallow_=!0}static isAvailable(){return!((0,Y.Yr)()||!hr.forceAllow_&&(hr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(i){const o=(0,Y.Wl)(i);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const d=(0,Y.h$)(o),g=ee(d,1840);for(let I=0;I<g.length;I++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,g.length,g[I]),this.curSegmentNum++}addDisconnectPingFrame(i,o){if((0,Y.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const d={dframe:"t"};d.id=i,d.pw=o,this.myDisconnFrame.src=this.urlFn(d),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(i){const o=(0,Y.Wl)(i).length;this.bytesReceived+=o,this.stats_.incrementCounter("bytes_received",o)}}class ta{constructor(i,o,d,g){if(this.onDisconnect=d,this.urlFn=g,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Y.Yr)())this.commandCB=i,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=Wa(),window["pLPCommand"+this.uniqueCallbackIdentifier]=i,window["pRTLPCB"+this.uniqueCallbackIdentifier]=o,this.myIFrame=ta.createIFrame_();let I="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(I='<script>document.domain="'+document.domain+'";<\/script>');const A="<html><body>"+I+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(A),this.myIFrame.doc.close()}catch(U){hs("frame writing exception"),U.stack&&hs(U.stack),hs(U)}}}static createIFrame_(){const i=document.createElement("iframe");if(i.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(i);try{i.contentWindow.document||hs("No IE domain setting required")}catch{const d=document.domain;i.src="javascript:void((function(){document.open();document.domain='"+d+"';document.close();})())"}return i.contentDocument?i.doc=i.contentDocument:i.contentWindow?i.doc=i.contentWindow.document:i.document&&(i.doc=i.document),i}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const i=this.onDisconnect;i&&(this.onDisconnect=null,i())}startLongPoll(i,o){for(this.myID=i,this.myPW=o,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const i={};i.id=this.myID,i.pw=this.myPW,i.ser=this.currentSerial;let o=this.urlFn(i),d="",g=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+d.length<=1870;){const A=this.pendingSegs.shift();d=d+"&seg"+g+"="+A.seg+"&ts"+g+"="+A.ts+"&d"+g+"="+A.d,g++}return o+=d,this.addLongPollTag_(o,this.currentSerial),!0}return!1}enqueueSegment(i,o,d){this.pendingSegs.push({seg:i,ts:o,d}),this.alive&&this.newRequest_()}addLongPollTag_(i,o){this.outstandingRequests.add(o);const d=()=>{this.outstandingRequests.delete(o),this.newRequest_()},g=setTimeout(d,Math.floor(25e3));this.addTag(i,()=>{clearTimeout(g),d()})}addTag(i,o){(0,Y.Yr)()?this.doNodeLongPoll(i,o):setTimeout(()=>{try{if(!this.sendNewPolls)return;const d=this.myIFrame.doc.createElement("script");d.type="text/javascript",d.async=!0,d.src=i,d.onload=d.onreadystatechange=function(){const g=d.readyState;(!g||"loaded"===g||"complete"===g)&&(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),o())},d.onerror=()=>{hs("Long-poll script failed to load: "+i),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(d)}catch{}},Math.floor(1))}}let qn=null;typeof MozWebSocket<"u"?qn=MozWebSocket:typeof WebSocket<"u"&&(qn=WebSocket);let Za=(()=>{class u{constructor(o,d,g,I,A,U,Z){this.connId=o,this.applicationId=g,this.appCheckToken=I,this.authToken=A,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ss(this.connId),this.stats_=Ts(d),this.connURL=u.connectionURL_(d,U,Z,I,g),this.nodeAdmin=d.nodeAdmin}static connectionURL_(o,d,g,I,A){const U={v:"5"};return!(0,Y.Yr)()&&typeof location<"u"&&location.hostname&&Ml.test(location.hostname)&&(U.r="f"),d&&(U.s=d),g&&(U.ls=g),I&&(U.ac=I),A&&(U.p=A),Jl(o,Rl,U)}open(o,d){this.onDisconnect=d,this.onMessage=o,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yo.set("previous_websocket_failure",!0);try{let g;if((0,Y.Yr)()){g={headers:{"User-Agent":`Firebase/5/${Al}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(g.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(g.headers["X-Firebase-AppCheck"]=this.appCheckToken);const A=process.env,U=0===this.connURL.indexOf("wss://")?A.HTTPS_PROXY||A.https_proxy:A.HTTP_PROXY||A.http_proxy;U&&(g.proxy={origin:U})}this.mySock=new qn(this.connURL,[],g)}catch(g){this.log_("Error instantiating WebSocket.");const I=g.message||g.data;return I&&this.log_(I),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=g=>{this.handleIncomingFrame(g)},this.mySock.onerror=g=>{this.log_("WebSocket error.  Closing connection.");const I=g.message||g.data;I&&this.log_(I),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let o=!1;if(typeof navigator<"u"&&navigator.userAgent){const g=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);g&&g.length>1&&parseFloat(g[1])<4.4&&(o=!0)}return!o&&null!==qn&&!u.forceDisallow_}static previouslyFailed(){return yo.isInMemoryStorage||!0===yo.get("previous_websocket_failure")}markConnectionHealthy(){yo.remove("previous_websocket_failure")}appendFrame_(o){if(this.frames.push(o),this.frames.length===this.totalFrames){const d=this.frames.join("");this.frames=null;const g=(0,Y.cI)(d);this.onMessage(g)}}handleNewFrameCount_(o){this.totalFrames=o,this.frames=[]}extractFrameCount_(o){if((0,Y.hu)(null===this.frames,"We already have a frame buffer"),o.length<=6){const d=Number(o);if(!isNaN(d))return this.handleNewFrameCount_(d),null}return this.handleNewFrameCount_(1),o}handleIncomingFrame(o){if(null===this.mySock)return;const d=o.data;if(this.bytesReceived+=d.length,this.stats_.incrementCounter("bytes_received",d.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(d);else{const g=this.extractFrameCount_(d);null!==g&&this.appendFrame_(g)}}send(o){this.resetKeepAlive();const d=(0,Y.Wl)(o);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const g=ee(d,16384);g.length>1&&this.sendString_(String(g.length));for(let I=0;I<g.length;I++)this.sendString_(g[I])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(o){try{this.mySock.send(o)}catch(d){this.log_("Exception thrown from WebSocket.send():",d.message||d.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),Ai=(()=>{class u{constructor(o){this.initTransports_(o)}static get ALL_TRANSPORTS(){return[hr,Za]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(o){const d=Za&&Za.isAvailable();let g=d&&!Za.previouslyFailed();if(o.webSocketOnly&&(d||vs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),g=!0),g)this.transports_=[Za];else{const I=this.transports_=[];for(const A of u.ALL_TRANSPORTS)A&&A.isAvailable()&&I.push(A);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class vu{constructor(i,o,d,g,I,A,U,Z,ie,Ze){this.id=i,this.repoInfo_=o,this.applicationId_=d,this.appCheckToken_=g,this.authToken_=I,this.onMessage_=A,this.onReady_=U,this.onDisconnect_=Z,this.onKill_=ie,this.lastSessionId=Ze,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ss("c:"+this.id+":"),this.transportManager_=new Ai(o),this.log_("Connection created"),this.start_()}start_(){const i=this.transportManager_.initialTransport();this.conn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.conn_),d=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(o,d)},Math.floor(0));const g=i.healthyTimeout||0;g>0&&(this.healthyTimeout_=gi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(g)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(i){return o=>{i===this.conn_?this.onConnectionLost_(o):i===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(i){return o=>{2!==this.state_&&(i===this.rx_?this.onPrimaryMessageReceived_(o):i===this.secondaryConn_?this.onSecondaryMessageReceived_(o):this.log_("message on old connection"))}}sendRequest(i){this.sendData_({t:"d",d:i})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(i){if("t"in i){const o=i.t;"a"===o?this.upgradeIfSecondaryHealthy_():"r"===o?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===o&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(i){const o=fa("t",i),d=fa("d",i);if("c"===o)this.onSecondaryControl_(d);else{if("d"!==o)throw new Error("Unknown protocol layer: "+o);this.pendingDataMessages.push(d)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(i){const o=fa("t",i),d=fa("d",i);"c"===o?this.onControl_(d):"d"===o&&this.onDataMessage_(d)}onDataMessage_(i){this.onPrimaryResponse_(),this.onMessage_(i)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(i){const o=fa("t",i);if("d"in i){const d=i.d;if("h"===o){const g=Object.assign({},d);this.repoInfo_.isUsingEmulator&&(g.h=this.repoInfo_.host),this.onHandshake_(g)}else if("n"===o){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let g=0;g<this.pendingDataMessages.length;++g)this.onDataMessage_(this.pendingDataMessages[g]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===o?this.onConnectionShutdown_(d):"r"===o?this.onReset_(d):"e"===o?qs("Server Error: "+d):"o"===o?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qs("Unknown control packet command: "+o)}}onHandshake_(i){const o=i.ts,d=i.v,g=i.h;this.sessionId=i.s,this.repoInfo_.host=g,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,o),"5"!==d&&vs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const i=this.transportManager_.upgradeTransport();i&&this.startUpgrade_(i)}startUpgrade_(i){this.secondaryConn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.secondaryConn_),d=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(o,d),gi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(i){this.log_("Reset packet received.  New host: "+i),this.repoInfo_.host=i,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(i,o){this.log_("Realtime connection established."),this.conn_=i,this.state_=1,this.onReady_&&(this.onReady_(o,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const i=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===i||this.rx_===i)&&this.close()}onConnectionLost_(i){this.conn_=null,i||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(i){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(i),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(i){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(i)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class wo{put(i,o,d,g){}merge(i,o,d,g){}refreshAuthToken(i){}refreshAppCheckToken(i){}onDisconnectPut(i,o,d){}onDisconnectMerge(i,o,d){}onDisconnectCancel(i,o){}reportStats(i){}}class S{constructor(i){this.allowedEvents_=i,this.listeners_={},(0,Y.hu)(Array.isArray(i)&&i.length>0,"Requires a non-empty array")}trigger(i,...o){if(Array.isArray(this.listeners_[i])){const d=[...this.listeners_[i]];for(let g=0;g<d.length;g++)d[g].callback.apply(d[g].context,o)}}on(i,o,d){this.validateEventType_(i),this.listeners_[i]=this.listeners_[i]||[],this.listeners_[i].push({callback:o,context:d});const g=this.getInitialEvent(i);g&&o.apply(d,g)}off(i,o,d){this.validateEventType_(i);const g=this.listeners_[i]||[];for(let I=0;I<g.length;I++)if(g[I].callback===o&&(!d||d===g[I].context))return void g.splice(I,1)}validateEventType_(i){(0,Y.hu)(this.allowedEvents_.find(o=>o===i),"Unknown event: "+i)}}class R extends S{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Y.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new R}getInitialEvent(i){return(0,Y.hu)("online"===i,"Unknown event type: "+i),[this.online_]}currentlyOnline(){return this.online_}}const w=32,k=768;class z{constructor(i,o){if(void 0===o){this.pieces_=i.split("/");let d=0;for(let g=0;g<this.pieces_.length;g++)this.pieces_[g].length>0&&(this.pieces_[d]=this.pieces_[g],d++);this.pieces_.length=d,this.pieceNum_=0}else this.pieces_=i,this.pieceNum_=o}toString(){let i="";for(let o=this.pieceNum_;o<this.pieces_.length;o++)""!==this.pieces_[o]&&(i+="/"+this.pieces_[o]);return i||"/"}}function re(){return new z("")}function se(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function rt(u){return u.pieces_.length-u.pieceNum_}function Tt(u){let i=u.pieceNum_;return i<u.pieces_.length&&i++,new z(u.pieces_,i)}function un(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function xn(u,i=0){return u.pieces_.slice(u.pieceNum_+i)}function xi(u){if(u.pieceNum_>=u.pieces_.length)return null;const i=[];for(let o=u.pieceNum_;o<u.pieces_.length-1;o++)i.push(u.pieces_[o]);return new z(i,0)}function xr(u,i){const o=[];for(let d=u.pieceNum_;d<u.pieces_.length;d++)o.push(u.pieces_[d]);if(i instanceof z)for(let d=i.pieceNum_;d<i.pieces_.length;d++)o.push(i.pieces_[d]);else{const d=i.split("/");for(let g=0;g<d.length;g++)d[g].length>0&&o.push(d[g])}return new z(o,0)}function ir(u){return u.pieceNum_>=u.pieces_.length}function Wi(u,i){const o=se(u),d=se(i);if(null===o)return i;if(o===d)return Wi(Tt(u),Tt(i));throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+u+")")}function Ss(u,i){const o=xn(u,0),d=xn(i,0);for(let g=0;g<o.length&&g<d.length;g++){const I=ii(o[g],d[g]);if(0!==I)return I}return o.length===d.length?0:o.length<d.length?-1:1}function Ro(u,i){if(rt(u)!==rt(i))return!1;for(let o=u.pieceNum_,d=i.pieceNum_;o<=u.pieces_.length;o++,d++)if(u.pieces_[o]!==i.pieces_[d])return!1;return!0}function Ni(u,i){let o=u.pieceNum_,d=i.pieceNum_;if(rt(u)>rt(i))return!1;for(;o<u.pieces_.length;){if(u.pieces_[o]!==i.pieces_[d])return!1;++o,++d}return!0}class Ho{constructor(i,o){this.errorPrefix_=o,this.parts_=xn(i,0),this.byteLength_=Math.max(1,this.parts_.length);for(let d=0;d<this.parts_.length;d++)this.byteLength_+=(0,Y.ug)(this.parts_[d]);kl(this)}}function kl(u){if(u.byteLength_>k)throw new Error(u.errorPrefix_+"has a key path longer than "+k+" bytes ("+u.byteLength_+").");if(u.parts_.length>w)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+w+") or object contains a cycle "+Xa(u))}function Xa(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class Fl extends S{constructor(){let i,o;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(o="visibilitychange",i="hidden"):typeof document.mozHidden<"u"?(o="mozvisibilitychange",i="mozHidden"):typeof document.msHidden<"u"?(o="msvisibilitychange",i="msHidden"):typeof document.webkitHidden<"u"&&(o="webkitvisibilitychange",i="webkitHidden")),this.visible_=!0,o&&document.addEventListener(o,()=>{const d=!document[i];d!==this.visible_&&(this.visible_=d,this.trigger("visible",d))},!1)}static getInstance(){return new Fl}getInitialEvent(i){return(0,Y.hu)("visible"===i,"Unknown event type: "+i),[this.visible_]}}const Eu=1e3;let Qc,pa=(()=>{class u extends wo{constructor(o,d,g,I,A,U,Z,ie){if(super(),this.repoInfo_=o,this.applicationId_=d,this.onDataUpdate_=g,this.onConnectStatus_=I,this.onServerInfoUpdate_=A,this.authTokenProvider_=U,this.appCheckTokenProvider_=Z,this.authOverride_=ie,this.id=u.nextPersistentConnectionId_++,this.log_=ss("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Eu,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ie&&!(0,Y.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Fl.getInstance().on("visible",this.onVisible_,this),-1===o.host.indexOf("fblocal")&&R.getInstance().on("online",this.onOnline_,this)}sendRequest(o,d,g){const I=++this.requestNumber_,A={r:I,a:o,b:d};this.log_((0,Y.Wl)(A)),(0,Y.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(A),g&&(this.requestCBHash_[I]=g)}get(o){this.initConnection_();const d=new Y.BH,I={action:"g",request:{p:o._path.toString(),q:o._queryObject},onComplete:U=>{const Z=U.d;"ok"===U.s?d.resolve(Z):d.reject(Z)}};return this.outstandingGets_.push(I),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),d.promise}listen(o,d,g,I){this.initConnection_();const A=o._queryIdentifier,U=o._path.toString();this.log_("Listen called for "+U+" "+A),this.listens.has(U)||this.listens.set(U,new Map),(0,Y.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Y.hu)(!this.listens.get(U).has(A),"listen() called twice for same path/queryId.");const Z={onComplete:I,hashFn:d,query:o,tag:g};this.listens.get(U).set(A,Z),this.connected_&&this.sendListen_(Z)}sendGet_(o){const d=this.outstandingGets_[o];this.sendRequest("g",d.request,g=>{delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),d.onComplete&&d.onComplete(g)})}sendListen_(o){const d=o.query,g=d._path.toString(),I=d._queryIdentifier;this.log_("Listen on "+g+" for "+I);const A={p:g};o.tag&&(A.q=d._queryObject,A.t=o.tag),A.h=o.hashFn(),this.sendRequest("q",A,Z=>{const ie=Z.d,Ze=Z.s;u.warnOnListenWarnings_(ie,d),(this.listens.get(g)&&this.listens.get(g).get(I))===o&&(this.log_("listen response",Z),"ok"!==Ze&&this.removeListen_(g,I),o.onComplete&&o.onComplete(Ze,ie))})}static warnOnListenWarnings_(o,d){if(o&&"object"==typeof o&&(0,Y.r3)(o,"w")){const g=(0,Y.DV)(o,"w");if(Array.isArray(g)&&~g.indexOf("no_index")){const I='".indexOn": "'+d._queryParams.getIndex().toString()+'"',A=d._path.toString();vs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${I} at ${A} to your security rules for better performance.`)}}}refreshAuthToken(o){this.authToken_=o,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(o)}reduceReconnectDelayIfAdminCredential_(o){(o&&40===o.length||(0,Y.GJ)(o))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(o){this.appCheckToken_=o,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const o=this.authToken_,d=(0,Y.w9)(o)?"auth":"gauth",g={cred:o};null===this.authOverride_?g.noauth=!0:"object"==typeof this.authOverride_&&(g.authvar=this.authOverride_),this.sendRequest(d,g,I=>{const A=I.s,U=I.d||"error";this.authToken_===o&&("ok"===A?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(A,U))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},o=>{const d=o.s,g=o.d||"error";"ok"===d?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(d,g)})}unlisten(o,d){const g=o._path.toString(),I=o._queryIdentifier;this.log_("Unlisten called for "+g+" "+I),(0,Y.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(g,I)&&this.connected_&&this.sendUnlisten_(g,I,o._queryObject,d)}sendUnlisten_(o,d,g,I){this.log_("Unlisten on "+o+" for "+d);const A={p:o};I&&(A.q=g,A.t=I),this.sendRequest("n",A)}onDisconnectPut(o,d,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",o,d,g):this.onDisconnectRequestQueue_.push({pathString:o,action:"o",data:d,onComplete:g})}onDisconnectMerge(o,d,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",o,d,g):this.onDisconnectRequestQueue_.push({pathString:o,action:"om",data:d,onComplete:g})}onDisconnectCancel(o,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",o,null,d):this.onDisconnectRequestQueue_.push({pathString:o,action:"oc",data:null,onComplete:d})}sendOnDisconnect_(o,d,g,I){const A={p:d,d:g};this.log_("onDisconnect "+o,A),this.sendRequest(o,A,U=>{I&&setTimeout(()=>{I(U.s,U.d)},Math.floor(0))})}put(o,d,g,I){this.putInternal("p",o,d,g,I)}merge(o,d,g,I){this.putInternal("m",o,d,g,I)}putInternal(o,d,g,I,A){this.initConnection_();const U={p:d,d:g};void 0!==A&&(U.h=A),this.outstandingPuts_.push({action:o,request:U,onComplete:I}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+d)}sendPut_(o){const d=this.outstandingPuts_[o].action,g=this.outstandingPuts_[o].request,I=this.outstandingPuts_[o].onComplete;this.outstandingPuts_[o].queued=this.connected_,this.sendRequest(d,g,A=>{this.log_(d+" response",A),delete this.outstandingPuts_[o],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),I&&I(A.s,A.d)})}reportStats(o){if(this.connected_){const d={c:o};this.log_("reportStats",d),this.sendRequest("s",d,g=>{"ok"!==g.s&&this.log_("reportStats","Error sending stats: "+g.d)})}}onDataMessage_(o){if("r"in o){this.log_("from server: "+(0,Y.Wl)(o));const d=o.r,g=this.requestCBHash_[d];g&&(delete this.requestCBHash_[d],g(o.b))}else{if("error"in o)throw"A server-side error has occurred: "+o.error;"a"in o&&this.onDataPush_(o.a,o.b)}}onDataPush_(o,d){this.log_("handleServerMessage",o,d),"d"===o?this.onDataUpdate_(d.p,d.d,!1,d.t):"m"===o?this.onDataUpdate_(d.p,d.d,!0,d.t):"c"===o?this.onListenRevoked_(d.p,d.q):"ac"===o?this.onAuthRevoked_(d.s,d.d):"apc"===o?this.onAppCheckRevoked_(d.s,d.d):"sd"===o?this.onSecurityDebugPacket_(d):qs("Unrecognized action received from server: "+(0,Y.Wl)(o)+"\nAre you using the latest client?")}onReady_(o,d){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(o),this.lastSessionId=d,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(o){(0,Y.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(o))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(o){o&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Eu,this.realtime_||this.scheduleConnect_(0)),this.visible_=o}onOnline_(o){o?(this.log_("Browser went online."),this.reconnectDelay_=Eu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Eu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const o=(new Date).getTime()-this.lastConnectionAttemptTime_;let d=Math.max(0,this.reconnectDelay_-o);d=Math.random()*d,this.log_("Trying to reconnect in "+d+"ms"),this.scheduleConnect_(d),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var o=this;return(0,ze.Z)(function*(){if(o.shouldReconnect_()){o.log_("Making a connection attempt"),o.lastConnectionAttemptTime_=(new Date).getTime(),o.lastConnectionEstablishedTime_=null;const d=o.onDataMessage_.bind(o),g=o.onReady_.bind(o),I=o.onRealtimeDisconnect_.bind(o),A=o.id+":"+u.nextConnectionId_++,U=o.lastSessionId;let Z=!1,ie=null;const Ze=function(){ie?ie.close():(Z=!0,I())};o.realtime_={close:Ze,sendRequest:function(Zt){(0,Y.hu)(ie,"sendRequest call when we're not connected not allowed."),ie.sendRequest(Zt)}};const Mt=o.forceTokenRefresh_;o.forceTokenRefresh_=!1;try{const[Zt,Xt]=yield Promise.all([o.authTokenProvider_.getToken(Mt),o.appCheckTokenProvider_.getToken(Mt)]);Z?hs("getToken() completed but was canceled"):(hs("getToken() completed. Creating connection."),o.authToken_=Zt&&Zt.accessToken,o.appCheckToken_=Xt&&Xt.token,ie=new vu(A,o.repoInfo_,o.applicationId_,o.appCheckToken_,o.authToken_,d,g,I,vn=>{vs(vn+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},U))}catch(Zt){o.log_("Failed to get token: "+Zt),Z||(o.repoInfo_.nodeAdmin&&vs(Zt),Ze())}}})()}interrupt(o){hs("Interrupting connection for reason: "+o),this.interruptReasons_[o]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(o){hs("Resuming connection for reason: "+o),delete this.interruptReasons_[o],(0,Y.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Eu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(o){const d=o-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:d})}cancelSentTransactions_(){for(let o=0;o<this.outstandingPuts_.length;o++){const d=this.outstandingPuts_[o];d&&"h"in d.request&&d.queued&&(d.onComplete&&d.onComplete("disconnect"),delete this.outstandingPuts_[o],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(o,d){let g;g=d?d.map(A=>F(A)).join("$"):"default";const I=this.removeListen_(o,g);I&&I.onComplete&&I.onComplete("permission_denied")}removeListen_(o,d){const g=new z(o).toString();let I;if(this.listens.has(g)){const A=this.listens.get(g);I=A.get(d),A.delete(d),0===A.size&&this.listens.delete(g)}else I=void 0;return I}onAuthRevoked_(o,d){hs("Auth token revoked: "+o+"/"+d),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===o||"permission_denied"===o)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(o,d){hs("App check token revoked: "+o+"/"+d),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===o||"permission_denied"===o)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(o){this.securityDebugCallback_?this.securityDebugCallback_(o):"msg"in o&&console.log("FIREBASE: "+o.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const o of this.listens.values())for(const d of o.values())this.sendListen_(d);for(let o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){const o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(let o=0;o<this.outstandingGets_.length;o++)this.outstandingGets_[o]&&this.sendGet_(o)}sendConnectStats_(){const o={};let d="js";(0,Y.Yr)()&&(d=this.repoInfo_.nodeAdmin?"admin_node":"node"),o["sdk."+d+"."+Al.replace(/\./g,"-")]=1,(0,Y.uI)()?o["framework.cordova"]=1:(0,Y.b$)()&&(o["framework.reactnative"]=1),this.reportStats(o)}shouldReconnect_(){const o=R.getInstance().currentlyOnline();return(0,Y.xb)(this.interruptReasons_)&&o}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class ci{constructor(i,o){this.name=i,this.node=o}static Wrap(i,o){return new ci(i,o)}}class Zc{getCompare(){return this.compare.bind(this)}indexedValueChanged(i,o){const d=new ci(Es,i),g=new ci(Es,o);return 0!==this.compare(d,g)}minPost(){return ci.MIN}}class Fd extends Zc{static get __EMPTY_NODE(){return Qc}static set __EMPTY_NODE(i){Qc=i}compare(i,o){return ii(i.name,o.name)}isDefinedOn(i){throw(0,Y.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(i,o){return!1}minPost(){return ci.MIN}maxPost(){return new ci(Vo,Qc)}makePost(i,o){return(0,Y.hu)("string"==typeof i,"KeyIndex indexValue must always be a string."),new ci(i,Qc)}toString(){return".key"}}const Ja=new Fd;class Xc{constructor(i,o,d,g,I=null){this.isReverse_=g,this.resultGenerator_=I,this.nodeStack_=[];let A=1;for(;!i.isEmpty();)if(A=o?d(i.key,o):1,g&&(A*=-1),A<0)i=this.isReverse_?i.left:i.right;else{if(0===A){this.nodeStack_.push(i);break}this.nodeStack_.push(i),i=this.isReverse_?i.right:i.left}}getNext(){if(0===this.nodeStack_.length)return null;let o,i=this.nodeStack_.pop();if(o=this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value},this.isReverse_)for(i=i.left;!i.isEmpty();)this.nodeStack_.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack_.push(i),i=i.left;return o}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const i=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value}}}let Ld,ga=(()=>{class u{constructor(o,d,g,I,A){this.key=o,this.value=d,this.color=null!=g?g:u.RED,this.left=null!=I?I:ra.EMPTY_NODE,this.right=null!=A?A:ra.EMPTY_NODE}copy(o,d,g,I,A){return new u(null!=o?o:this.key,null!=d?d:this.value,null!=g?g:this.color,null!=I?I:this.left,null!=A?A:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||!!o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,d,g){let I=this;const A=g(o,I.key);return I=A<0?I.copy(null,null,null,I.left.insert(o,d,g),null):0===A?I.copy(null,d,null,null,null):I.copy(null,null,null,null,I.right.insert(o,d,g)),I.fixUp_()}removeMin_(){if(this.left.isEmpty())return ra.EMPTY_NODE;let o=this;return!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.removeMin_(),null),o.fixUp_()}remove(o,d){let g,I;if(g=this,d(o,g.key)<0)!g.left.isEmpty()&&!g.left.isRed_()&&!g.left.left.isRed_()&&(g=g.moveRedLeft_()),g=g.copy(null,null,null,g.left.remove(o,d),null);else{if(g.left.isRed_()&&(g=g.rotateRight_()),!g.right.isEmpty()&&!g.right.isRed_()&&!g.right.left.isRed_()&&(g=g.moveRedRight_()),0===d(o,g.key)){if(g.right.isEmpty())return ra.EMPTY_NODE;I=g.right.min_(),g=g.copy(I.key,I.value,null,null,g.right.removeMin_())}g=g.copy(null,null,null,null,g.right.remove(o,d))}return g.fixUp_()}isRed_(){return this.color}fixUp_(){let o=this;return o.right.isRed_()&&!o.left.isRed_()&&(o=o.rotateLeft_()),o.left.isRed_()&&o.left.left.isRed_()&&(o=o.rotateRight_()),o.left.isRed_()&&o.right.isRed_()&&(o=o.colorFlip_()),o}moveRedLeft_(){let o=this.colorFlip_();return o.right.left.isRed_()&&(o=o.copy(null,null,null,null,o.right.rotateRight_()),o=o.rotateLeft_(),o=o.colorFlip_()),o}moveRedRight_(){let o=this.colorFlip_();return o.left.left.isRed_()&&(o=o.rotateRight_(),o=o.colorFlip_()),o}rotateLeft_(){const o=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight_(){const o=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip_(){const o=this.left.copy(null,null,!this.left.color,null,null),d=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,d)}checkMaxDepth_(){const o=this.check_();return Math.pow(2,o)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const o=this.left.check_();if(o!==this.right.check_())throw new Error("Black depths differ");return o+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class ra{constructor(i,o=ra.EMPTY_NODE){this.comparator_=i,this.root_=o}insert(i,o){return new ra(this.comparator_,this.root_.insert(i,o,this.comparator_).copy(null,null,ga.BLACK,null,null))}remove(i){return new ra(this.comparator_,this.root_.remove(i,this.comparator_).copy(null,null,ga.BLACK,null,null))}get(i){let o,d=this.root_;for(;!d.isEmpty();){if(o=this.comparator_(i,d.key),0===o)return d.value;o<0?d=d.left:o>0&&(d=d.right)}return null}getPredecessorKey(i){let o,d=this.root_,g=null;for(;!d.isEmpty();){if(o=this.comparator_(i,d.key),0===o){if(d.left.isEmpty())return g?g.key:null;for(d=d.left;!d.right.isEmpty();)d=d.right;return d.key}o<0?d=d.left:o>0&&(g=d,d=d.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(i){return this.root_.inorderTraversal(i)}reverseTraversal(i){return this.root_.reverseTraversal(i)}getIterator(i){return new Xc(this.root_,null,this.comparator_,!1,i)}getIteratorFrom(i,o){return new Xc(this.root_,i,this.comparator_,!1,o)}getReverseIteratorFrom(i,o){return new Xc(this.root_,i,this.comparator_,!0,o)}getReverseIterator(i){return new Xc(this.root_,null,this.comparator_,!0,i)}}function wu(u,i){return ii(u.name,i.name)}function _c(u,i){return ii(u,i)}ra.EMPTY_NODE=new class kh{copy(i,o,d,g,I){return this}insert(i,o,d){return new ga(i,o,null)}remove(i,o){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const oo=function(u){return"number"==typeof u?"number:"+le(u):"string:"+u},Ku=function(u){if(u.isLeafNode()){const i=u.val();(0,Y.hu)("string"==typeof i||"number"==typeof i||"object"==typeof i&&(0,Y.r3)(i,".sv"),"Priority must be a string or number.")}else(0,Y.hu)(u===Ld||u.isEmpty(),"priority of unexpected type.");(0,Y.hu)(u===Ld||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let el,Ji,tl,Ll=(()=>{class u{constructor(o,d=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=o,this.priorityNode_=d,this.lazyHash_=null,(0,Y.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ku(this.priorityNode_)}static set __childrenNodeConstructor(o){el=o}static get __childrenNodeConstructor(){return el}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(o){return new u(this.value_,o)}getImmediateChild(o){return".priority"===o?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(o){return ir(o)?this:".priority"===se(o)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(o,d){return null}updateImmediateChild(o,d){return".priority"===o?this.updatePriority(d):d.isEmpty()&&".priority"!==o?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(o,d).updatePriority(this.priorityNode_)}updateChild(o,d){const g=se(o);return null===g?d:d.isEmpty()&&".priority"!==g?this:((0,Y.hu)(".priority"!==g||1===rt(o),".priority must be the last token in a path"),this.updateImmediateChild(g,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Tt(o),d)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(o,d){return!1}val(o){return o&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let o="";this.priorityNode_.isEmpty()||(o+="priority:"+oo(this.priorityNode_.val())+":");const d=typeof this.value_;o+=d+":",o+="number"===d?le(this.value_):this.value_,this.lazyHash_=Ka(o)}return this.lazyHash_}getValue(){return this.value_}compareTo(o){return o===u.__childrenNodeConstructor.EMPTY_NODE?1:o instanceof u.__childrenNodeConstructor?-1:((0,Y.hu)(o.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(o))}compareToLeafNode_(o){const d=typeof o.value_,g=typeof this.value_,I=u.VALUE_TYPE_ORDER.indexOf(d),A=u.VALUE_TYPE_ORDER.indexOf(g);return(0,Y.hu)(I>=0,"Unknown leaf type: "+d),(0,Y.hu)(A>=0,"Unknown leaf type: "+g),I===A?"object"===g?0:this.value_<o.value_?-1:this.value_===o.value_?0:1:A-I}withIndex(){return this}isIndexed(){return!0}equals(o){return o===this||!!o.isLeafNode()&&(this.value_===o.value_&&this.priorityNode_.equals(o.priorityNode_))}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const Bi=new class Iu extends Zc{compare(i,o){const d=i.node.getPriority(),g=o.node.getPriority(),I=d.compareTo(g);return 0===I?ii(i.name,o.name):I}isDefinedOn(i){return!i.getPriority().isEmpty()}indexedValueChanged(i,o){return!i.getPriority().equals(o.getPriority())}minPost(){return ci.MIN}maxPost(){return new ci(Vo,new Ll("[PRIORITY-POST]",tl))}makePost(i,o){const d=Ji(i);return new ci(o,new Ll("[PRIORITY-POST]",d))}toString(){return".priority"}},zo=Math.log(2);class Jc{constructor(i){this.count=parseInt(Math.log(i+1)/zo,10),this.current_=this.count-1;const g=(I=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=i+1&g}nextBitIsOne(){const i=!(this.bits_&1<<this.current_);return this.current_--,i}}const ed=function(u,i,o,d){u.sort(i);const g=function(Z,ie){const Ze=ie-Z;let ot,Mt;if(0===Ze)return null;if(1===Ze)return ot=u[Z],Mt=o?o(ot):ot,new ga(Mt,ot.node,ga.BLACK,null,null);{const Zt=parseInt(Ze/2,10)+Z,Xt=g(Z,Zt),vn=g(Zt+1,ie);return ot=u[Zt],Mt=o?o(ot):ot,new ga(Mt,ot.node,ga.BLACK,Xt,vn)}},U=function(Z){let ie=null,Ze=null,ot=u.length;const Mt=function(Xt,vn){const ur=ot-Xt,Zr=ot;ot-=Xt;const Si=g(ur+1,Zr),Pi=u[ur],ki=o?o(Pi):Pi;Zt(new ga(ki,Pi.node,vn,null,Si))},Zt=function(Xt){ie?(ie.left=Xt,ie=Xt):(Ze=Xt,ie=Xt)};for(let Xt=0;Xt<Z.count;++Xt){const vn=Z.nextBitIsOne(),ur=Math.pow(2,Z.count-(Xt+1));vn?Mt(ur,ga.BLACK):(Mt(ur,ga.BLACK),Mt(ur,ga.RED))}return Ze}(new Jc(u.length));return new ra(d||i,U)};let Zs;const Ec={};class Io{constructor(i,o){this.indexes_=i,this.indexSet_=o}static get Default(){return(0,Y.hu)(Ec&&Bi,"ChildrenNode.ts has not been loaded"),Zs=Zs||new Io({".priority":Ec},{".priority":Bi}),Zs}get(i){const o=(0,Y.DV)(this.indexes_,i);if(!o)throw new Error("No index defined for "+i);return o instanceof ra?o:null}hasIndex(i){return(0,Y.r3)(this.indexSet_,i.toString())}addIndex(i,o){(0,Y.hu)(i!==Ja,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const d=[];let g=!1;const I=o.getIterator(ci.Wrap);let U,A=I.getNext();for(;A;)g=g||i.isDefinedOn(A.node),d.push(A),A=I.getNext();U=g?ed(d,i.getCompare()):Ec;const Z=i.toString(),ie=Object.assign({},this.indexSet_);ie[Z]=i;const Ze=Object.assign({},this.indexes_);return Ze[Z]=U,new Io(Ze,ie)}addToIndexes(i,o){const d=(0,Y.UI)(this.indexes_,(g,I)=>{const A=(0,Y.DV)(this.indexSet_,I);if((0,Y.hu)(A,"Missing index implementation for "+I),g===Ec){if(A.isDefinedOn(i.node)){const U=[],Z=o.getIterator(ci.Wrap);let ie=Z.getNext();for(;ie;)ie.name!==i.name&&U.push(ie),ie=Z.getNext();return U.push(i),ed(U,A.getCompare())}return Ec}{const U=o.get(i.name);let Z=g;return U&&(Z=Z.remove(new ci(i.name,U))),Z.insert(i,i.node)}});return new Io(d,this.indexSet_)}removeFromIndexes(i,o){const d=(0,Y.UI)(this.indexes_,g=>{if(g===Ec)return g;{const I=o.get(i.name);return I?g.remove(new ci(i.name,I)):g}});return new Io(d,this.indexSet_)}}let Ki,br=(()=>{class u{constructor(o,d,g){this.children_=o,this.priorityNode_=d,this.indexMap_=g,this.lazyHash_=null,this.priorityNode_&&Ku(this.priorityNode_),this.children_.isEmpty()&&(0,Y.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ki||(Ki=new u(new ra(_c),null,Io.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ki}updatePriority(o){return this.children_.isEmpty()?this:new u(this.children_,o,this.indexMap_)}getImmediateChild(o){if(".priority"===o)return this.getPriority();{const d=this.children_.get(o);return null===d?Ki:d}}getChild(o){const d=se(o);return null===d?this:this.getImmediateChild(d).getChild(Tt(o))}hasChild(o){return null!==this.children_.get(o)}updateImmediateChild(o,d){if((0,Y.hu)(d,"We should always be passing snapshot nodes"),".priority"===o)return this.updatePriority(d);{const g=new ci(o,d);let I,A;d.isEmpty()?(I=this.children_.remove(o),A=this.indexMap_.removeFromIndexes(g,this.children_)):(I=this.children_.insert(o,d),A=this.indexMap_.addToIndexes(g,this.children_));const U=I.isEmpty()?Ki:this.priorityNode_;return new u(I,U,A)}}updateChild(o,d){const g=se(o);if(null===g)return d;{(0,Y.hu)(".priority"!==se(o)||1===rt(o),".priority must be the last token in a path");const I=this.getImmediateChild(g).updateChild(Tt(o),d);return this.updateImmediateChild(g,I)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(o){if(this.isEmpty())return null;const d={};let g=0,I=0,A=!0;if(this.forEachChild(Bi,(U,Z)=>{d[U]=Z.val(o),g++,A&&u.INTEGER_REGEXP_.test(U)?I=Math.max(I,Number(U)):A=!1}),!o&&A&&I<2*g){const U=[];for(const Z in d)U[Z]=d[Z];return U}return o&&!this.getPriority().isEmpty()&&(d[".priority"]=this.getPriority().val()),d}hash(){if(null===this.lazyHash_){let o="";this.getPriority().isEmpty()||(o+="priority:"+oo(this.getPriority().val())+":"),this.forEachChild(Bi,(d,g)=>{const I=g.hash();""!==I&&(o+=":"+d+":"+I)}),this.lazyHash_=""===o?"":Ka(o)}return this.lazyHash_}getPredecessorChildName(o,d,g){const I=this.resolveIndex_(g);if(I){const A=I.getPredecessorKey(new ci(o,d));return A?A.name:null}return this.children_.getPredecessorKey(o)}getFirstChildName(o){const d=this.resolveIndex_(o);if(d){const g=d.minKey();return g&&g.name}return this.children_.minKey()}getFirstChild(o){const d=this.getFirstChildName(o);return d?new ci(d,this.children_.get(d)):null}getLastChildName(o){const d=this.resolveIndex_(o);if(d){const g=d.maxKey();return g&&g.name}return this.children_.maxKey()}getLastChild(o){const d=this.getLastChildName(o);return d?new ci(d,this.children_.get(d)):null}forEachChild(o,d){const g=this.resolveIndex_(o);return g?g.inorderTraversal(I=>d(I.name,I.node)):this.children_.inorderTraversal(d)}getIterator(o){return this.getIteratorFrom(o.minPost(),o)}getIteratorFrom(o,d){const g=this.resolveIndex_(d);if(g)return g.getIteratorFrom(o,I=>I);{const I=this.children_.getIteratorFrom(o.name,ci.Wrap);let A=I.peek();for(;null!=A&&d.compare(A,o)<0;)I.getNext(),A=I.peek();return I}}getReverseIterator(o){return this.getReverseIteratorFrom(o.maxPost(),o)}getReverseIteratorFrom(o,d){const g=this.resolveIndex_(d);if(g)return g.getReverseIteratorFrom(o,I=>I);{const I=this.children_.getReverseIteratorFrom(o.name,ci.Wrap);let A=I.peek();for(;null!=A&&d.compare(A,o)>0;)I.getNext(),A=I.peek();return I}}compareTo(o){return this.isEmpty()?o.isEmpty()?0:-1:o.isLeafNode()||o.isEmpty()?1:o===ml?-1:0}withIndex(o){if(o===Ja||this.indexMap_.hasIndex(o))return this;{const d=this.indexMap_.addIndex(o,this.children_);return new u(this.children_,this.priorityNode_,d)}}isIndexed(o){return o===Ja||this.indexMap_.hasIndex(o)}equals(o){if(o===this)return!0;if(o.isLeafNode())return!1;{const d=o;if(this.getPriority().equals(d.getPriority())){if(this.children_.count()===d.children_.count()){const g=this.getIterator(Bi),I=d.getIterator(Bi);let A=g.getNext(),U=I.getNext();for(;A&&U;){if(A.name!==U.name||!A.node.equals(U.node))return!1;A=g.getNext(),U=I.getNext()}return null===A&&null===U}return!1}return!1}}resolveIndex_(o){return o===Ja?null:this.indexMap_.get(o.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const ml=new class qu extends br{constructor(){super(new ra(_c),br.EMPTY_NODE,Io.Default)}compareTo(i){return i===this?0:1}equals(i){return i===this}getPriority(){return this}getImmediateChild(i){return br.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ci,{MIN:{value:new ci(Es,br.EMPTY_NODE)},MAX:{value:new ci(Vo,ml)}}),Fd.__EMPTY_NODE=br.EMPTY_NODE,Ll.__childrenNodeConstructor=br,function vc(u){Ld=u}(ml),function es(u){tl=u}(ml);const ia=!0;function Ui(u,i=null){if(null===u)return br.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(i=u[".priority"]),(0,Y.hu)(null===i||"string"==typeof i||"number"==typeof i||"object"==typeof i&&".sv"in i,"Invalid priority type found: "+typeof i),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new Ll(u,Ui(i));if(u instanceof Array||!ia){let o=br.EMPTY_NODE;return V(u,(d,g)=>{if((0,Y.r3)(u,d)&&"."!==d.substring(0,1)){const I=Ui(g);(I.isLeafNode()||!I.isEmpty())&&(o=o.updateImmediateChild(d,I))}}),o.updatePriority(Ui(i))}{const o=[];let d=!1;if(V(u,(A,U)=>{if("."!==A.substring(0,1)){const Z=Ui(U);Z.isEmpty()||(d=d||!Z.getPriority().isEmpty(),o.push(new ci(A,Z)))}}),0===o.length)return br.EMPTY_NODE;const I=ed(o,wu,A=>A.name,_c);if(d){const A=ed(o,Bi.getCompare());return new br(I,Ui(i),new Io({".priority":A},{".priority":Bi}))}return new br(I,Ui(i),Io.Default)}}!function ao(u){Ji=u}(Ui);class yl extends Zc{constructor(i){super(),this.indexPath_=i,(0,Y.hu)(!ir(i)&&".priority"!==se(i),"Can't create PathIndex with empty path or .priority key")}extractChild(i){return i.getChild(this.indexPath_)}isDefinedOn(i){return!i.getChild(this.indexPath_).isEmpty()}compare(i,o){const d=this.extractChild(i.node),g=this.extractChild(o.node),I=d.compareTo(g);return 0===I?ii(i.name,o.name):I}makePost(i,o){const d=Ui(i),g=br.EMPTY_NODE.updateChild(this.indexPath_,d);return new ci(o,g)}maxPost(){const i=br.EMPTY_NODE.updateChild(this.indexPath_,ml);return new ci(Vo,i)}toString(){return xn(this.indexPath_,0).join("/")}}const bu=new class sa extends Zc{compare(i,o){const d=i.node.compareTo(o.node);return 0===d?ii(i.name,o.name):d}isDefinedOn(i){return!0}indexedValueChanged(i,o){return!i.equals(o)}minPost(){return ci.MIN}maxPost(){return ci.MAX}makePost(i,o){const d=Ui(i);return new ci(o,d)}toString(){return".value"}};function _l(u){return{type:"value",snapshotNode:u}}function xo(u,i){return{type:"child_added",snapshotNode:i,childName:u}}function Bl(u,i){return{type:"child_removed",snapshotNode:i,childName:u}}function Sa(u,i,o){return{type:"child_changed",snapshotNode:i,childName:u,oldSnap:o}}class x{constructor(i){this.index_=i}updateChild(i,o,d,g,I,A){(0,Y.hu)(i.isIndexed(this.index_),"A node must be indexed if only a child is updated");const U=i.getImmediateChild(o);return U.getChild(g).equals(d.getChild(g))&&U.isEmpty()===d.isEmpty()||(null!=A&&(d.isEmpty()?i.hasChild(o)?A.trackChildChange(Bl(o,U)):(0,Y.hu)(i.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):U.isEmpty()?A.trackChildChange(xo(o,d)):A.trackChildChange(Sa(o,d,U))),i.isLeafNode()&&d.isEmpty())?i:i.updateImmediateChild(o,d).withIndex(this.index_)}updateFullNode(i,o,d){return null!=d&&(i.isLeafNode()||i.forEachChild(Bi,(g,I)=>{o.hasChild(g)||d.trackChildChange(Bl(g,I))}),o.isLeafNode()||o.forEachChild(Bi,(g,I)=>{if(i.hasChild(g)){const A=i.getImmediateChild(g);A.equals(I)||d.trackChildChange(Sa(g,I,A))}else d.trackChildChange(xo(g,I))})),o.withIndex(this.index_)}updatePriority(i,o){return i.isEmpty()?br.EMPTY_NODE:i.updatePriority(o)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ${constructor(i){this.indexedFilter_=new x(i.getIndex()),this.index_=i.getIndex(),this.startPost_=$.getStartPost_(i),this.endPost_=$.getEndPost_(i),this.startIsInclusive_=!i.startAfterSet_,this.endIsInclusive_=!i.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(i){const o=this.startIsInclusive_?this.index_.compare(this.getStartPost(),i)<=0:this.index_.compare(this.getStartPost(),i)<0,d=this.endIsInclusive_?this.index_.compare(i,this.getEndPost())<=0:this.index_.compare(i,this.getEndPost())<0;return o&&d}updateChild(i,o,d,g,I,A){return this.matches(new ci(o,d))||(d=br.EMPTY_NODE),this.indexedFilter_.updateChild(i,o,d,g,I,A)}updateFullNode(i,o,d){o.isLeafNode()&&(o=br.EMPTY_NODE);let g=o.withIndex(this.index_);g=g.updatePriority(br.EMPTY_NODE);const I=this;return o.forEachChild(Bi,(A,U)=>{I.matches(new ci(A,U))||(g=g.updateImmediateChild(A,br.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(i,g,d)}updatePriority(i,o){return i}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(i){if(i.hasStart()){const o=i.getIndexStartName();return i.getIndex().makePost(i.getIndexStartValue(),o)}return i.getIndex().minPost()}static getEndPost_(i){if(i.hasEnd()){const o=i.getIndexEndName();return i.getIndex().makePost(i.getIndexEndValue(),o)}return i.getIndex().maxPost()}}class J{constructor(i){this.withinDirectionalStart=o=>this.reverse_?this.withinEndPost(o):this.withinStartPost(o),this.withinDirectionalEnd=o=>this.reverse_?this.withinStartPost(o):this.withinEndPost(o),this.withinStartPost=o=>{const d=this.index_.compare(this.rangedFilter_.getStartPost(),o);return this.startIsInclusive_?d<=0:d<0},this.withinEndPost=o=>{const d=this.index_.compare(o,this.rangedFilter_.getEndPost());return this.endIsInclusive_?d<=0:d<0},this.rangedFilter_=new $(i),this.index_=i.getIndex(),this.limit_=i.getLimit(),this.reverse_=!i.isViewFromLeft(),this.startIsInclusive_=!i.startAfterSet_,this.endIsInclusive_=!i.endBeforeSet_}updateChild(i,o,d,g,I,A){return this.rangedFilter_.matches(new ci(o,d))||(d=br.EMPTY_NODE),i.getImmediateChild(o).equals(d)?i:i.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(i,o,d,g,I,A):this.fullLimitUpdateChild_(i,o,d,I,A)}updateFullNode(i,o,d){let g;if(o.isLeafNode()||o.isEmpty())g=br.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<o.numChildren()&&o.isIndexed(this.index_)){let I;g=br.EMPTY_NODE.withIndex(this.index_),I=this.reverse_?o.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let A=0;for(;I.hasNext()&&A<this.limit_;){const U=I.getNext();if(this.withinDirectionalStart(U)){if(!this.withinDirectionalEnd(U))break;g=g.updateImmediateChild(U.name,U.node),A++}}}else{let I;g=o.withIndex(this.index_),g=g.updatePriority(br.EMPTY_NODE),I=this.reverse_?g.getReverseIterator(this.index_):g.getIterator(this.index_);let A=0;for(;I.hasNext();){const U=I.getNext();A<this.limit_&&this.withinDirectionalStart(U)&&this.withinDirectionalEnd(U)?A++:g=g.updateImmediateChild(U.name,br.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(i,g,d)}updatePriority(i,o){return i}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(i,o,d,g,I){let A;if(this.reverse_){const ot=this.index_.getCompare();A=(Mt,Zt)=>ot(Zt,Mt)}else A=this.index_.getCompare();const U=i;(0,Y.hu)(U.numChildren()===this.limit_,"");const Z=new ci(o,d),ie=this.reverse_?U.getFirstChild(this.index_):U.getLastChild(this.index_),Ze=this.rangedFilter_.matches(Z);if(U.hasChild(o)){const ot=U.getImmediateChild(o);let Mt=g.getChildAfterChild(this.index_,ie,this.reverse_);for(;null!=Mt&&(Mt.name===o||U.hasChild(Mt.name));)Mt=g.getChildAfterChild(this.index_,Mt,this.reverse_);const Zt=null==Mt?1:A(Mt,Z);if(Ze&&!d.isEmpty()&&Zt>=0)return null!=I&&I.trackChildChange(Sa(o,d,ot)),U.updateImmediateChild(o,d);{null!=I&&I.trackChildChange(Bl(o,ot));const vn=U.updateImmediateChild(o,br.EMPTY_NODE);return null!=Mt&&this.rangedFilter_.matches(Mt)?(null!=I&&I.trackChildChange(xo(Mt.name,Mt.node)),vn.updateImmediateChild(Mt.name,Mt.node)):vn}}return d.isEmpty()?i:Ze&&A(ie,Z)>=0?(null!=I&&(I.trackChildChange(Bl(ie.name,ie.node)),I.trackChildChange(xo(o,d))),U.updateImmediateChild(o,d).updateImmediateChild(ie.name,br.EMPTY_NODE)):i}}class Oe{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Es}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Y.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bi}copy(){const i=new Oe;return i.limitSet_=this.limitSet_,i.limit_=this.limit_,i.startSet_=this.startSet_,i.startAfterSet_=this.startAfterSet_,i.indexStartValue_=this.indexStartValue_,i.startNameSet_=this.startNameSet_,i.indexStartName_=this.indexStartName_,i.endSet_=this.endSet_,i.endBeforeSet_=this.endBeforeSet_,i.indexEndValue_=this.indexEndValue_,i.endNameSet_=this.endNameSet_,i.indexEndName_=this.indexEndName_,i.index_=this.index_,i.viewFrom_=this.viewFrom_,i}}function Pn(u,i,o){const d=u.copy();return d.startSet_=!0,void 0===i&&(i=null),d.indexStartValue_=i,null!=o?(d.startNameSet_=!0,d.indexStartName_=o):(d.startNameSet_=!1,d.indexStartName_=""),d}function er(u,i,o){const d=u.copy();return d.endSet_=!0,void 0===i&&(i=null),d.indexEndValue_=i,void 0!==o?(d.endNameSet_=!0,d.indexEndName_=o):(d.endNameSet_=!1,d.indexEndName_=""),d}function $r(u,i){const o=u.copy();return o.index_=i,o}function Go(u){const i={};if(u.isDefault())return i;let o;if(u.index_===Bi?o="$priority":u.index_===bu?o="$value":u.index_===Ja?o="$key":((0,Y.hu)(u.index_ instanceof yl,"Unrecognized index type!"),o=u.index_.toString()),i.orderBy=(0,Y.Wl)(o),u.startSet_){const d=u.startAfterSet_?"startAfter":"startAt";i[d]=(0,Y.Wl)(u.indexStartValue_),u.startNameSet_&&(i[d]+=","+(0,Y.Wl)(u.indexStartName_))}if(u.endSet_){const d=u.endBeforeSet_?"endBefore":"endAt";i[d]=(0,Y.Wl)(u.indexEndValue_),u.endNameSet_&&(i[d]+=","+(0,Y.Wl)(u.indexEndName_))}return u.limitSet_&&(u.isViewFromLeft()?i.limitToFirst=u.limit_:i.limitToLast=u.limit_),i}function As(u){const i={};if(u.startSet_&&(i.sp=u.indexStartValue_,u.startNameSet_&&(i.sn=u.indexStartName_),i.sin=!u.startAfterSet_),u.endSet_&&(i.ep=u.indexEndValue_,u.endNameSet_&&(i.en=u.indexEndName_),i.ein=!u.endBeforeSet_),u.limitSet_){i.l=u.limit_;let o=u.viewFrom_;""===o&&(o=u.isViewFromLeft()?"l":"r"),i.vf=o}return u.index_!==Bi&&(i.i=u.index_.toString()),i}class eu extends wo{constructor(i,o,d,g){super(),this.repoInfo_=i,this.onDataUpdate_=o,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.log_=ss("p:rest:"),this.listens_={}}reportStats(i){throw new Error("Method not implemented.")}static getListenId_(i,o){return void 0!==o?"tag$"+o:((0,Y.hu)(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())}listen(i,o,d,g){const I=i._path.toString();this.log_("Listen called for "+I+" "+i._queryIdentifier);const A=eu.getListenId_(i,d),U={};this.listens_[A]=U;const Z=Go(i._queryParams);this.restRequest_(I+".json",Z,(ie,Ze)=>{let ot=Ze;if(404===ie&&(ot=null,ie=null),null===ie&&this.onDataUpdate_(I,ot,!1,d),(0,Y.DV)(this.listens_,A)===U){let Mt;Mt=ie?401===ie?"permission_denied":"rest_error:"+ie:"ok",g(Mt,null)}})}unlisten(i,o){const d=eu.getListenId_(i,o);delete this.listens_[d]}get(i){const o=Go(i._queryParams),d=i._path.toString(),g=new Y.BH;return this.restRequest_(d+".json",o,(I,A)=>{let U=A;404===I&&(U=null,I=null),null===I?(this.onDataUpdate_(d,U,!1,null),g.resolve(U)):g.reject(new Error(U))}),g.promise}refreshAuthToken(i){}restRequest_(i,o={},d){return o.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([g,I])=>{g&&g.accessToken&&(o.auth=g.accessToken),I&&I.token&&(o.ac=I.token);const A=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+(0,Y.xO)(o);this.log_("Sending REST request for "+A);const U=new XMLHttpRequest;U.onreadystatechange=()=>{if(d&&4===U.readyState){this.log_("REST Response for "+A+" received. status:",U.status,"response:",U.responseText);let Z=null;if(U.status>=200&&U.status<300){try{Z=(0,Y.cI)(U.responseText)}catch{vs("Failed to parse JSON response for "+A+": "+U.responseText)}d(null,Z)}else 401!==U.status&&404!==U.status&&vs("Got unsuccessful REST response for "+A+" Status: "+U.status),d(U.status);d=null}},U.open("GET",A,!0),U.send()})}}class Ms{constructor(){this.rootNode_=br.EMPTY_NODE}getNode(i){return this.rootNode_.getChild(i)}updateSnapshot(i,o){this.rootNode_=this.rootNode_.updateChild(i,o)}}function $l(){return{value:null,children:new Map}}function di(u,i,o){if(ir(i))u.value=o,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(i,o);else{const d=se(i);u.children.has(d)||u.children.set(d,$l()),di(u.children.get(d),i=Tt(i),o)}}function Qs(u,i){if(ir(i))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const o=u.value;return u.value=null,o.forEachChild(Bi,(d,g)=>{di(u,new z(d),g)}),Qs(u,i)}}if(u.children.size>0){const o=se(i);return i=Tt(i),u.children.has(o)&&Qs(u.children.get(o),i)&&u.children.delete(o),0===u.children.size}return!0}function Ul(u,i,o){null!==u.value?o(i,u.value):function xp(u,i){u.children.forEach((o,d)=>{i(d,o)})}(u,(d,g)=>{Ul(g,new z(i.toString()+"/"+d),o)})}class Cu{constructor(i){this.collection_=i,this.last_=null}get(){const i=this.collection_.get(),o=Object.assign({},i);return this.last_&&V(this.last_,(d,g)=>{o[d]=o[d]-g}),this.last_=i,o}}class qi{constructor(i,o){this.server_=o,this.statsToReport_={},this.statsListener_=new Cu(i);const d=1e4+2e4*Math.random();gi(this.reportStats_.bind(this),Math.floor(d))}reportStats_(){const i=this.statsListener_.get(),o={};let d=!1;V(i,(g,I)=>{I>0&&(0,Y.r3)(this.statsToReport_,g)&&(o[g]=I,d=!0)}),d&&this.server_.reportStats(o),gi(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var bo=(()=>{return(u=bo||(bo={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",bo;var u})();function Bd(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class td{constructor(i,o,d){this.path=i,this.affectedTree=o,this.revert=d,this.type=bo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(i){if(ir(this.path)){if(null!=this.affectedTree.value)return(0,Y.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const o=this.affectedTree.subtree(new z(i));return new td(re(),o,this.revert)}}return(0,Y.hu)(se(this.path)===i,"operationForChild called for unrelated child."),new td(Tt(this.path),this.affectedTree,this.revert)}}class Yu{constructor(i,o){this.source=i,this.path=o,this.type=bo.LISTEN_COMPLETE}operationForChild(i){return ir(this.path)?new Yu(this.source,re()):new Yu(this.source,Tt(this.path))}}class Du{constructor(i,o,d){this.source=i,this.path=o,this.snap=d,this.type=bo.OVERWRITE}operationForChild(i){return ir(this.path)?new Du(this.source,re(),this.snap.getImmediateChild(i)):new Du(this.source,Tt(this.path),this.snap)}}class Ic{constructor(i,o,d){this.source=i,this.path=o,this.children=d,this.type=bo.MERGE}operationForChild(i){if(ir(this.path)){const o=this.children.subtree(new z(i));return o.isEmpty()?null:o.value?new Du(this.source,re(),o.value):new Ic(this.source,re(),o)}return(0,Y.hu)(se(this.path)===i,"Can't get a merge for a child not on the path of the operation"),new Ic(this.source,Tt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class bc{constructor(i,o,d){this.node_=i,this.fullyInitialized_=o,this.filtered_=d}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(i){if(ir(i))return this.isFullyInitialized()&&!this.filtered_;const o=se(i);return this.isCompleteForChild(o)}isCompleteForChild(i){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(i)}getNode(){return this.node_}}class M{constructor(i){this.query_=i,this.index_=this.query_._queryParams.getIndex()}}function b(u,i,o,d,g,I){const A=d.filter(U=>U.type===o);A.sort((U,Z)=>function ne(u,i,o){if(null==i.childName||null==o.childName)throw(0,Y.g5)("Should only compare child_ events.");const d=new ci(i.childName,i.snapshotNode),g=new ci(o.childName,o.snapshotNode);return u.index_.compare(d,g)}(u,U,Z)),A.forEach(U=>{const Z=function P(u,i,o){return"value"===i.type||"child_removed"===i.type||(i.prevName=o.getPredecessorChildName(i.childName,i.snapshotNode,u.index_)),i}(u,U,I);g.forEach(ie=>{ie.respondsTo(U.type)&&i.push(ie.createEvent(Z,u.query_))})})}function ve(u,i){return{eventCache:u,serverCache:i}}function vt(u,i,o,d){return ve(new bc(i,o,d),u.serverCache)}function zt(u,i,o,d){return ve(u.eventCache,new bc(i,o,d))}function In(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function Mn(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let lr;class hi{constructor(i,o=(()=>(lr||(lr=new ra(Vu)),lr))()){this.value=i,this.children=o}static fromObject(i){let o=new hi(null);return V(i,(d,g)=>{o=o.set(new z(d),g)}),o}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(i,o){if(null!=this.value&&o(this.value))return{path:re(),value:this.value};if(ir(i))return null;{const d=se(i),g=this.children.get(d);if(null!==g){const I=g.findRootMostMatchingPathAndValue(Tt(i),o);return null!=I?{path:xr(new z(d),I.path),value:I.value}:null}return null}}findRootMostValueAndPath(i){return this.findRootMostMatchingPathAndValue(i,()=>!0)}subtree(i){if(ir(i))return this;{const o=se(i),d=this.children.get(o);return null!==d?d.subtree(Tt(i)):new hi(null)}}set(i,o){if(ir(i))return new hi(o,this.children);{const d=se(i),I=(this.children.get(d)||new hi(null)).set(Tt(i),o),A=this.children.insert(d,I);return new hi(this.value,A)}}remove(i){if(ir(i))return this.children.isEmpty()?new hi(null):new hi(null,this.children);{const o=se(i),d=this.children.get(o);if(d){const g=d.remove(Tt(i));let I;return I=g.isEmpty()?this.children.remove(o):this.children.insert(o,g),null===this.value&&I.isEmpty()?new hi(null):new hi(this.value,I)}return this}}get(i){if(ir(i))return this.value;{const o=se(i),d=this.children.get(o);return d?d.get(Tt(i)):null}}setTree(i,o){if(ir(i))return o;{const d=se(i),I=(this.children.get(d)||new hi(null)).setTree(Tt(i),o);let A;return A=I.isEmpty()?this.children.remove(d):this.children.insert(d,I),new hi(this.value,A)}}fold(i){return this.fold_(re(),i)}fold_(i,o){const d={};return this.children.inorderTraversal((g,I)=>{d[g]=I.fold_(xr(i,g),o)}),o(i,this.value,d)}findOnPath(i,o){return this.findOnPath_(i,re(),o)}findOnPath_(i,o,d){const g=!!this.value&&d(o,this.value);if(g)return g;if(ir(i))return null;{const I=se(i),A=this.children.get(I);return A?A.findOnPath_(Tt(i),xr(o,I),d):null}}foreachOnPath(i,o){return this.foreachOnPath_(i,re(),o)}foreachOnPath_(i,o,d){if(ir(i))return this;{this.value&&d(o,this.value);const g=se(i),I=this.children.get(g);return I?I.foreachOnPath_(Tt(i),xr(o,g),d):new hi(null)}}foreach(i){this.foreach_(re(),i)}foreach_(i,o){this.children.inorderTraversal((d,g)=>{g.foreach_(xr(i,d),o)}),this.value&&o(i,this.value)}foreachChild(i){this.children.inorderTraversal((o,d)=>{d.value&&i(o,d.value)})}}class lo{constructor(i){this.writeTree_=i}static empty(){return new lo(new hi(null))}}function Tu(u,i,o){if(ir(i))return new lo(new hi(o));{const d=u.writeTree_.findRootMostValueAndPath(i);if(null!=d){const g=d.path;let I=d.value;const A=Wi(g,i);return I=I.updateChild(A,o),new lo(u.writeTree_.set(g,I))}{const g=new hi(o),I=u.writeTree_.setTree(i,g);return new lo(I)}}}function Vl(u,i,o){let d=u;return V(o,(g,I)=>{d=Tu(d,xr(i,g),I)}),d}function Zu(u,i){if(ir(i))return lo.empty();{const o=u.writeTree_.setTree(i,new hi(null));return new lo(o)}}function Su(u,i){return null!=nu(u,i)}function nu(u,i){const o=u.writeTree_.findRootMostValueAndPath(i);return null!=o?u.writeTree_.get(o.path).getChild(Wi(o.path,i)):null}function Cc(u){const i=[],o=u.writeTree_.value;return null!=o?o.isLeafNode()||o.forEachChild(Bi,(d,g)=>{i.push(new ci(d,g))}):u.writeTree_.children.inorderTraversal((d,g)=>{null!=g.value&&i.push(new ci(d,g.value))}),i}function nl(u,i){if(ir(i))return u;{const o=nu(u,i);return new lo(null!=o?new hi(o):u.writeTree_.subtree(i))}}function Qu(u){return u.writeTree_.isEmpty()}function ma(u,i){return uo(re(),u.writeTree_,i)}function uo(u,i,o){if(null!=i.value)return o.updateChild(u,i.value);{let d=null;return i.children.inorderTraversal((g,I)=>{".priority"===g?((0,Y.hu)(null!==I.value,"Priority writes must always be leaf nodes"),d=I.value):o=uo(xr(u,g),I,o)}),!o.getChild(u).isEmpty()&&null!==d&&(o=o.updateChild(xr(u,".priority"),d)),o}}function Au(u,i){return Bh(i,u)}function Sc(u,i){if(u.snap)return Ni(u.path,i);for(const o in u.children)if(u.children.hasOwnProperty(o)&&Ni(xr(u.path,o),i))return!0;return!1}function rm(u){return u.visible}function gy(u,i,o){let d=lo.empty();for(let g=0;g<u.length;++g){const I=u[g];if(i(I)){const A=I.path;let U;if(I.snap)Ni(o,A)?(U=Wi(o,A),d=Tu(d,U,I.snap)):Ni(A,o)&&(U=Wi(A,o),d=Tu(d,re(),I.snap.getChild(U)));else{if(!I.children)throw(0,Y.g5)("WriteRecord should have .snap or .children");if(Ni(o,A))U=Wi(o,A),d=Vl(d,U,I.children);else if(Ni(A,o))if(U=Wi(A,o),ir(U))d=Vl(d,re(),I.children);else{const Z=(0,Y.DV)(I.children,se(U));if(Z){const ie=Z.getChild(Tt(U));d=Tu(d,re(),ie)}}}}}return d}function Xu(u,i,o,d,g){if(d||g){const I=nl(u.visibleWrites,i);return!g&&Qu(I)?o:g||null!=o||Su(I,re())?ma(gy(u.allWrites,function(ie){return(ie.visible||g)&&(!d||!~d.indexOf(ie.writeId))&&(Ni(ie.path,i)||Ni(i,ie.path))},i),o||br.EMPTY_NODE):null}{const I=nu(u.visibleWrites,i);if(null!=I)return I;{const A=nl(u.visibleWrites,i);return Qu(A)?o:null!=o||Su(A,re())?ma(A,o||br.EMPTY_NODE):null}}}function Lf(u,i,o,d){return Xu(u.writeTree,u.treePath,i,o,d)}function $d(u,i){return function B_(u,i,o){let d=br.EMPTY_NODE;const g=nu(u.visibleWrites,i);if(g)return g.isLeafNode()||g.forEachChild(Bi,(I,A)=>{d=d.updateImmediateChild(I,A)}),d;if(o){const I=nl(u.visibleWrites,i);return o.forEachChild(Bi,(A,U)=>{const Z=ma(nl(I,new z(A)),U);d=d.updateImmediateChild(A,Z)}),Cc(I).forEach(A=>{d=d.updateImmediateChild(A.name,A.node)}),d}return Cc(nl(u.visibleWrites,i)).forEach(A=>{d=d.updateImmediateChild(A.name,A.node)}),d}(u.writeTree,u.treePath,i)}function $_(u,i,o,d){return function rl(u,i,o,d,g){(0,Y.hu)(d||g,"Either existingEventSnap or existingServerSnap must exist");const I=xr(i,o);if(Su(u.visibleWrites,I))return null;{const A=nl(u.visibleWrites,I);return Qu(A)?g.getChild(o):ma(A,g.getChild(o))}}(u.writeTree,u.treePath,i,o,d)}function Np(u,i){return function nd(u,i){return nu(u.visibleWrites,i)}(u.writeTree,xr(u.treePath,i))}function sm(u,i,o){return function im(u,i,o,d){const g=xr(i,o),I=nu(u.visibleWrites,g);return null!=I?I:d.isCompleteForChild(o)?ma(nl(u.visibleWrites,g),d.getNode().getImmediateChild(o)):null}(u.writeTree,u.treePath,i,o)}function Bf(u,i){return Bh(xr(u.treePath,i),u.writeTree)}function Bh(u,i){return{treePath:u,writeTree:i}}class kp{constructor(){this.changeMap=new Map}trackChildChange(i){const o=i.type,d=i.childName;(0,Y.hu)("child_added"===o||"child_changed"===o||"child_removed"===o,"Only child changes supported for tracking"),(0,Y.hu)(".priority"!==d,"Only non-priority child changes can be tracked.");const g=this.changeMap.get(d);if(g){const I=g.type;if("child_added"===o&&"child_removed"===I)this.changeMap.set(d,Sa(d,i.snapshotNode,g.snapshotNode));else if("child_removed"===o&&"child_added"===I)this.changeMap.delete(d);else if("child_removed"===o&&"child_changed"===I)this.changeMap.set(d,Bl(d,g.oldSnap));else if("child_changed"===o&&"child_added"===I)this.changeMap.set(d,xo(d,i.snapshotNode));else{if("child_changed"!==o||"child_changed"!==I)throw(0,Y.g5)("Illegal combination of changes: "+i+" occurred after "+g);this.changeMap.set(d,Sa(d,i.snapshotNode,g.oldSnap))}}else this.changeMap.set(d,i)}getChanges(){return Array.from(this.changeMap.values())}}const $h=new class om{getCompleteChild(i){return null}getChildAfterChild(i,o,d){return null}};class Fp{constructor(i,o,d=null){this.writes_=i,this.viewCache_=o,this.optCompleteServerCache_=d}getCompleteChild(i){const o=this.viewCache_.eventCache;if(o.isCompleteForChild(i))return o.getNode().getImmediateChild(i);{const d=null!=this.optCompleteServerCache_?new bc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sm(this.writes_,i,d)}}getChildAfterChild(i,o,d){const g=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Mn(this.viewCache_),I=function mi(u,i,o,d,g,I){return function Op(u,i,o,d,g,I,A){let U;const Z=nl(u.visibleWrites,i),ie=nu(Z,re());if(null!=ie)U=ie;else{if(null==o)return[];U=ma(Z,o)}if(U=U.withIndex(A),U.isEmpty()||U.isLeafNode())return[];{const Ze=[],ot=A.getCompare(),Mt=I?U.getReverseIteratorFrom(d,A):U.getIteratorFrom(d,A);let Zt=Mt.getNext();for(;Zt&&Ze.length<g;)0!==ot(Zt,d)&&Ze.push(Zt),Zt=Mt.getNext();return Ze}}(u.writeTree,u.treePath,i,o,d,g,I)}(this.writes_,g,o,1,d,i);return 0===I.length?null:I[0]}}function am(u,i,o,d,g,I){const A=i.eventCache;if(null!=Np(d,o))return i;{let U,Z;if(ir(o))if((0,Y.hu)(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),i.serverCache.isFiltered()){const ie=Mn(i),ot=$d(d,ie instanceof br?ie:br.EMPTY_NODE);U=u.filter.updateFullNode(i.eventCache.getNode(),ot,I)}else{const ie=Lf(d,Mn(i));U=u.filter.updateFullNode(i.eventCache.getNode(),ie,I)}else{const ie=se(o);if(".priority"===ie){(0,Y.hu)(1===rt(o),"Can't have a priority with additional path components");const Ze=A.getNode();Z=i.serverCache.getNode();const ot=$_(d,o,Ze,Z);U=null!=ot?u.filter.updatePriority(Ze,ot):A.getNode()}else{const Ze=Tt(o);let ot;if(A.isCompleteForChild(ie)){Z=i.serverCache.getNode();const Mt=$_(d,o,A.getNode(),Z);ot=null!=Mt?A.getNode().getImmediateChild(ie).updateChild(Ze,Mt):A.getNode().getImmediateChild(ie)}else ot=sm(d,ie,i.serverCache);U=null!=ot?u.filter.updateChild(A.getNode(),ie,ot,Ze,g,I):A.getNode()}}return vt(i,U,A.isFullyInitialized()||ir(o),u.filter.filtersNodes())}}function Ju(u,i,o,d,g,I,A,U){const Z=i.serverCache;let ie;const Ze=A?u.filter:u.filter.getIndexedFilter();if(ir(o))ie=Ze.updateFullNode(Z.getNode(),d,null);else if(Ze.filtersNodes()&&!Z.isFiltered()){const Zt=Z.getNode().updateChild(o,d);ie=Ze.updateFullNode(Z.getNode(),Zt,null)}else{const Zt=se(o);if(!Z.isCompleteForPath(o)&&rt(o)>1)return i;const Xt=Tt(o),ur=Z.getNode().getImmediateChild(Zt).updateChild(Xt,d);ie=".priority"===Zt?Ze.updatePriority(Z.getNode(),ur):Ze.updateChild(Z.getNode(),Zt,ur,Xt,$h,null)}const ot=zt(i,ie,Z.isFullyInitialized()||ir(o),Ze.filtersNodes());return am(u,ot,o,g,new Fp(g,ot,I),U)}function ru(u,i,o,d,g,I,A){const U=i.eventCache;let Z,ie;const Ze=new Fp(g,i,I);if(ir(o))ie=u.filter.updateFullNode(i.eventCache.getNode(),d,A),Z=vt(i,ie,!0,u.filter.filtersNodes());else{const ot=se(o);if(".priority"===ot)ie=u.filter.updatePriority(i.eventCache.getNode(),d),Z=vt(i,ie,U.isFullyInitialized(),U.isFiltered());else{const Mt=Tt(o),Zt=U.getNode().getImmediateChild(ot);let Xt;if(ir(Mt))Xt=d;else{const vn=Ze.getCompleteChild(ot);Xt=null!=vn?".priority"===un(Mt)&&vn.getChild(xi(Mt)).isEmpty()?vn:vn.updateChild(Mt,d):br.EMPTY_NODE}Z=Zt.equals(Xt)?i:vt(i,u.filter.updateChild(U.getNode(),ot,Xt,Mt,Ze,A),U.isFullyInitialized(),u.filter.filtersNodes())}}return Z}function iu(u,i){return u.eventCache.isCompleteForChild(i)}function lm(u,i,o){return o.foreach((d,g)=>{i=i.updateChild(d,g)}),i}function jd(u,i,o,d,g,I,A,U){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let ie,Z=i;ie=ir(o)?d:new hi(null).setTree(o,d);const Ze=i.serverCache.getNode();return ie.children.inorderTraversal((ot,Mt)=>{if(Ze.hasChild(ot)){const Xt=lm(0,i.serverCache.getNode().getImmediateChild(ot),Mt);Z=Ju(u,Z,new z(ot),Xt,g,I,A,U)}}),ie.children.inorderTraversal((ot,Mt)=>{const Zt=!i.serverCache.isCompleteForChild(ot)&&null===Mt.value;if(!Ze.hasChild(ot)&&!Zt){const vn=lm(0,i.serverCache.getNode().getImmediateChild(ot),Mt);Z=Ju(u,Z,new z(ot),vn,g,I,A,U)}}),Z}class $f{constructor(i,o){this.query_=i,this.eventRegistrations_=[];const d=this.query_._queryParams,g=new x(d.getIndex()),I=function ft(u){return u.loadsAllData()?new x(u.getIndex()):u.hasLimit()?new J(u):new $(u)}(d);this.processor_=function Ud(u){return{filter:u}}(I);const A=o.serverCache,U=o.eventCache,Z=g.updateFullNode(br.EMPTY_NODE,A.getNode(),null),ie=I.updateFullNode(br.EMPTY_NODE,U.getNode(),null),Ze=new bc(Z,A.isFullyInitialized(),g.filtersNodes()),ot=new bc(ie,U.isFullyInitialized(),I.filtersNodes());this.viewCache_=ve(ot,Ze),this.eventGenerator_=new M(this.query_)}get query(){return this.query_}}function j_(u,i){const o=Mn(u.viewCache_);return o&&(u.query._queryParams.loadsAllData()||!ir(i)&&!o.getImmediateChild(se(i)).isEmpty())?o.getChild(i):null}function Vh(u){return 0===u.eventRegistrations_.length}function Mu(u,i,o){const d=[];if(o){(0,Y.hu)(null==i,"A cancel should cancel all event registrations.");const g=u.query._path;u.eventRegistrations_.forEach(I=>{const A=I.createCancelEvent(o,g);A&&d.push(A)})}if(i){let g=[];for(let I=0;I<u.eventRegistrations_.length;++I){const A=u.eventRegistrations_[I];if(A.matches(i)){if(i.hasAnyCallback()){g=g.concat(u.eventRegistrations_.slice(I+1));break}}else g.push(A)}u.eventRegistrations_=g}else u.eventRegistrations_=[];return d}function Ru(u,i,o,d){i.type===bo.MERGE&&null!==i.source.queryId&&((0,Y.hu)(Mn(u.viewCache_),"We should always have a full cache before handling merges"),(0,Y.hu)(In(u.viewCache_),"Missing event cache, even though we have a server cache"));const g=u.viewCache_,I=function Uh(u,i,o,d,g){const I=new kp;let A,U;if(o.type===bo.OVERWRITE){const ie=o;ie.source.fromUser?A=ru(u,i,ie.path,ie.snap,d,g,I):((0,Y.hu)(ie.source.fromServer,"Unknown source."),U=ie.source.tagged||i.serverCache.isFiltered()&&!ir(ie.path),A=Ju(u,i,ie.path,ie.snap,d,g,U,I))}else if(o.type===bo.MERGE){const ie=o;ie.source.fromUser?A=function yy(u,i,o,d,g,I,A){let U=i;return d.foreach((Z,ie)=>{const Ze=xr(o,Z);iu(i,se(Ze))&&(U=ru(u,U,Ze,ie,g,I,A))}),d.foreach((Z,ie)=>{const Ze=xr(o,Z);iu(i,se(Ze))||(U=ru(u,U,Ze,ie,g,I,A))}),U}(u,i,ie.path,ie.children,d,g,I):((0,Y.hu)(ie.source.fromServer,"Unknown source."),U=ie.source.tagged||i.serverCache.isFiltered(),A=jd(u,i,ie.path,ie.children,d,g,U,I))}else if(o.type===bo.ACK_USER_WRITE){const ie=o;A=ie.revert?function Gs(u,i,o,d,g,I){let A;if(null!=Np(d,o))return i;{const U=new Fp(d,i,g),Z=i.eventCache.getNode();let ie;if(ir(o)||".priority"===se(o)){let Ze;if(i.serverCache.isFullyInitialized())Ze=Lf(d,Mn(i));else{const ot=i.serverCache.getNode();(0,Y.hu)(ot instanceof br,"serverChildren would be complete if leaf node"),Ze=$d(d,ot)}ie=u.filter.updateFullNode(Z,Ze,I)}else{const Ze=se(o);let ot=sm(d,Ze,i.serverCache);null==ot&&i.serverCache.isCompleteForChild(Ze)&&(ot=Z.getImmediateChild(Ze)),ie=null!=ot?u.filter.updateChild(Z,Ze,ot,Tt(o),U,I):i.eventCache.getNode().hasChild(Ze)?u.filter.updateChild(Z,Ze,br.EMPTY_NODE,Tt(o),U,I):Z,ie.isEmpty()&&i.serverCache.isFullyInitialized()&&(A=Lf(d,Mn(i)),A.isLeafNode()&&(ie=u.filter.updateFullNode(ie,A,I)))}return A=i.serverCache.isFullyInitialized()||null!=Np(d,re()),vt(i,ie,A,u.filter.filtersNodes())}}(u,i,ie.path,d,g,I):function U_(u,i,o,d,g,I,A){if(null!=Np(g,o))return i;const U=i.serverCache.isFiltered(),Z=i.serverCache;if(null!=d.value){if(ir(o)&&Z.isFullyInitialized()||Z.isCompleteForPath(o))return Ju(u,i,o,Z.getNode().getChild(o),g,I,U,A);if(ir(o)){let ie=new hi(null);return Z.getNode().forEachChild(Ja,(Ze,ot)=>{ie=ie.set(new z(Ze),ot)}),jd(u,i,o,ie,g,I,U,A)}return i}{let ie=new hi(null);return d.foreach((Ze,ot)=>{const Mt=xr(o,Ze);Z.isCompleteForPath(Mt)&&(ie=ie.set(Ze,Z.getNode().getChild(Mt)))}),jd(u,i,o,ie,g,I,U,A)}}(u,i,ie.path,ie.affectedTree,d,g,I)}else{if(o.type!==bo.LISTEN_COMPLETE)throw(0,Y.g5)("Unknown operation type: "+o.type);A=function V_(u,i,o,d,g){const I=i.serverCache;return am(u,zt(i,I.getNode(),I.isFullyInitialized()||ir(o),I.isFiltered()),o,d,$h,g)}(u,i,o.path,d,I)}const Z=I.getChanges();return function Vd(u,i,o){const d=i.eventCache;if(d.isFullyInitialized()){const g=d.getNode().isLeafNode()||d.getNode().isEmpty(),I=In(u);(o.length>0||!u.eventCache.isFullyInitialized()||g&&!d.getNode().equals(I)||!d.getNode().getPriority().equals(I.getPriority()))&&o.push(_l(In(i)))}}(i,A,Z),{viewCache:A,changes:Z}}(u.processor_,g,i,o,d);return function my(u,i){(0,Y.hu)(i.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,Y.hu)(i.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,I.viewCache),(0,Y.hu)(I.viewCache.serverCache.isFullyInitialized()||!g.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=I.viewCache,$p(u,I.changes,I.viewCache.eventCache.getNode(),null)}function $p(u,i,o,d){return function _(u,i,o,d){const g=[],I=[];return i.forEach(A=>{"child_changed"===A.type&&u.index_.indexedValueChanged(A.oldSnap,A.snapshotNode)&&I.push(function Fh(u,i){return{type:"child_moved",snapshotNode:i,childName:u}}(A.childName,A.snapshotNode))}),b(u,g,"child_removed",i,d,o),b(u,g,"child_added",i,d,o),b(u,g,"child_moved",I,d,o),b(u,g,"child_changed",i,d,o),b(u,g,"value",i,d,o),g}(u.eventGenerator_,i,o,d?[d]:u.eventRegistrations_)}let jh,Hh;class vy{constructor(){this.views=new Map}}function Hd(u,i,o,d){const g=i.source.queryId;if(null!==g){const I=u.views.get(g);return(0,Y.hu)(null!=I,"SyncTree gave us an op for an invalid query."),Ru(I,i,o,d)}{let I=[];for(const A of u.views.values())I=I.concat(Ru(A,i,o,d));return I}}function um(u,i,o,d,g){const A=u.views.get(i._queryIdentifier);if(!A){let U=Lf(o,g?d:null),Z=!1;U?Z=!0:d instanceof br?(U=$d(o,d),Z=!1):(U=br.EMPTY_NODE,Z=!1);const ie=ve(new bc(U,Z,!1),new bc(d,g,!1));return new $f(i,ie)}return A}function Co(u){const i=[];for(const o of u.views.values())o.query._queryParams.loadsAllData()||i.push(o);return i}function Ti(u,i){let o=null;for(const d of u.views.values())o=o||j_(d,i);return o}function cm(u,i){return i._queryParams.loadsAllData()?tc(u):u.views.get(i._queryIdentifier)}function dm(u,i){return null!=cm(u,i)}function xu(u){return null!=tc(u)}function tc(u){for(const i of u.views.values())if(i.query._queryParams.loadsAllData())return i;return null}let co=1;class Up{constructor(i){this.listenProvider_=i,this.syncPointTree_=new hi(null),this.pendingWriteTree_=function il(){return{visibleWrites:lo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zd(u,i,o,d,g){return function Dc(u,i,o,d,g){(0,Y.hu)(d>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===g&&(g=!0),u.allWrites.push({path:i,snap:o,writeId:d,visible:g}),g&&(u.visibleWrites=Tu(u.visibleWrites,i,o)),u.lastWriteId=d}(u.pendingWriteTree_,i,o,d,g),g?Wd(u,new Du({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,o)):[]}function jl(u,i,o=!1){const d=function Pp(u,i){for(let o=0;o<u.allWrites.length;o++){const d=u.allWrites[o];if(d.writeId===i)return d}return null}(u.pendingWriteTree_,i);if(function Ff(u,i){const o=u.allWrites.findIndex(U=>U.writeId===i);(0,Y.hu)(o>=0,"removeWrite called with nonexistent writeId.");const d=u.allWrites[o];u.allWrites.splice(o,1);let g=d.visible,I=!1,A=u.allWrites.length-1;for(;g&&A>=0;){const U=u.allWrites[A];U.visible&&(A>=o&&Sc(U,d.path)?g=!1:Ni(d.path,U.path)&&(I=!0)),A--}return!!g&&(I?(function py(u){u.visibleWrites=gy(u.allWrites,rm,re()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(d.snap?u.visibleWrites=Zu(u.visibleWrites,d.path):V(d.children,Z=>{u.visibleWrites=Zu(u.visibleWrites,xr(d.path,Z))}),!0))}(u.pendingWriteTree_,i)){let I=new hi(null);return null!=d.snap?I=I.set(re(),!0):V(d.children,A=>{I=I.set(new z(A),!0)}),Wd(u,new td(d.path,I,o))}return[]}function rd(u,i,o){return Wd(u,new Du({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,o))}function jf(u,i,o,d,g=!1){const I=i._path,A=u.syncPointTree_.get(I);let U=[];if(A&&("default"===i._queryIdentifier||dm(A,i))){const Z=function wy(u,i,o,d){const g=i._queryIdentifier,I=[];let A=[];const U=xu(u);if("default"===g)for(const[Z,ie]of u.views.entries())A=A.concat(Mu(ie,o,d)),Vh(ie)&&(u.views.delete(Z),ie.query._queryParams.loadsAllData()||I.push(ie.query));else{const Z=u.views.get(g);Z&&(A=A.concat(Mu(Z,o,d)),Vh(Z)&&(u.views.delete(g),Z.query._queryParams.loadsAllData()||I.push(Z.query)))}return U&&!xu(u)&&I.push(new(function Ey(){return(0,Y.hu)(jh,"Reference.ts has not been loaded"),jh}())(i._repo,i._path)),{removed:I,events:A}}(A,i,o,d);(function Vf(u){return 0===u.views.size})(A)&&(u.syncPointTree_=u.syncPointTree_.remove(I));const ie=Z.removed;if(U=Z.events,!g){const Ze=-1!==ie.findIndex(Mt=>Mt._queryParams.loadsAllData()),ot=u.syncPointTree_.findOnPath(I,(Mt,Zt)=>xu(Zt));if(Ze&&!ot){const Mt=u.syncPointTree_.subtree(I);if(!Mt.isEmpty()){const Zt=function nc(u){return u.fold((i,o,d)=>{if(o&&xu(o))return[tc(o)];{let g=[];return o&&(g=Co(o)),V(d,(I,A)=>{g=g.concat(A)}),g}})}(Mt);for(let Xt=0;Xt<Zt.length;++Xt){const vn=Zt[Xt],ur=vn.query,Zr=Vp(u,vn);u.listenProvider_.startListening(Mc(ur),Wh(u,ur),Zr.hashFn,Zr.onComplete)}}}!ot&&ie.length>0&&!d&&(Ze?u.listenProvider_.stopListening(Mc(i),null):ie.forEach(Mt=>{const Zt=u.queryToTagMap.get($s(Mt));u.listenProvider_.stopListening(Mc(Mt),Zt)}))}!function pm(u,i){for(let o=0;o<i.length;++o){const d=i[o];if(!d._queryParams.loadsAllData()){const g=$s(d),I=u.queryToTagMap.get(g);u.queryToTagMap.delete(g),u.tagToQueryMap.delete(I)}}}(u,ie)}return U}function Ty(u,i,o,d){const g=qd(u,d);if(null!=g){const I=fm(g),A=I.path,U=I.queryId,Z=Wi(A,i);return Ac(u,A,new Du(Bd(U),Z,o))}return[]}function Gd(u,i,o,d=!1){const g=i._path;let I=null,A=!1;u.syncPointTree_.foreachOnPath(g,(Mt,Zt)=>{const Xt=Wi(Mt,g);I=I||Ti(Zt,Xt),A=A||xu(Zt)});let Z,U=u.syncPointTree_.get(g);U?(A=A||xu(U),I=I||Ti(U,re())):(U=new vy,u.syncPointTree_=u.syncPointTree_.set(g,U)),null!=I?Z=!0:(Z=!1,I=br.EMPTY_NODE,u.syncPointTree_.subtree(g).foreachChild((Zt,Xt)=>{const vn=Ti(Xt,re());vn&&(I=I.updateImmediateChild(Zt,vn))}));const ie=dm(U,i);if(!ie&&!i._queryParams.loadsAllData()){const Mt=$s(i);(0,Y.hu)(!u.queryToTagMap.has(Mt),"View does not exist, but we have a tag");const Zt=function Kh(){return co++}();u.queryToTagMap.set(Mt,Zt),u.tagToQueryMap.set(Zt,Mt)}let ot=function $v(u,i,o,d,g,I){const A=um(u,i,d,g,I);return u.views.has(i._queryIdentifier)||u.views.set(i._queryIdentifier,A),function Bp(u,i){u.eventRegistrations_.push(i)}(A,o),function ec(u,i){const o=u.viewCache_.eventCache,d=[];return o.getNode().isLeafNode()||o.getNode().forEachChild(Bi,(I,A)=>{d.push(xo(I,A))}),o.isFullyInitialized()&&d.push(_l(o.getNode())),$p(u,d,o.getNode(),i)}(A,o)}(U,i,o,Au(u.pendingWriteTree_,g),I,Z);if(!ie&&!A&&!d){const Mt=cm(U,i);ot=ot.concat(function id(u,i,o){const d=i._path,g=Wh(u,i),I=Vp(u,o),A=u.listenProvider_.startListening(Mc(i),g,I.hashFn,I.onComplete),U=u.syncPointTree_.subtree(d);if(g)(0,Y.hu)(!xu(U.value),"If we're adding a query, it shouldn't be shadowed");else{const Z=U.fold((ie,Ze,ot)=>{if(!ir(ie)&&Ze&&xu(Ze))return[tc(Ze).query];{let Mt=[];return Ze&&(Mt=Mt.concat(Co(Ze).map(Zt=>Zt.query))),V(ot,(Zt,Xt)=>{Mt=Mt.concat(Xt)}),Mt}});for(let ie=0;ie<Z.length;++ie){const Ze=Z[ie];u.listenProvider_.stopListening(Mc(Ze),Wh(u,Ze))}}return A}(u,i,Mt))}return ot}function Gh(u,i,o){const g=u.pendingWriteTree_,I=u.syncPointTree_.findOnPath(i,(A,U)=>{const ie=Ti(U,Wi(A,i));if(ie)return ie});return Xu(g,i,I,o,!0)}function Wd(u,i){return Hf(i,u.syncPointTree_,null,Au(u.pendingWriteTree_,re()))}function Hf(u,i,o,d){if(ir(u.path))return Kd(u,i,o,d);{const g=i.get(re());null==o&&null!=g&&(o=Ti(g,re()));let I=[];const A=se(u.path),U=u.operationForChild(A),Z=i.children.get(A);if(Z&&U){const ie=o?o.getImmediateChild(A):null,Ze=Bf(d,A);I=I.concat(Hf(U,Z,ie,Ze))}return g&&(I=I.concat(Hd(g,u,d,o))),I}}function Kd(u,i,o,d){const g=i.get(re());null==o&&null!=g&&(o=Ti(g,re()));let I=[];return i.children.inorderTraversal((A,U)=>{const Z=o?o.getImmediateChild(A):null,ie=Bf(d,A),Ze=u.operationForChild(A);Ze&&(I=I.concat(Kd(Ze,U,Z,ie)))}),g&&(I=I.concat(Hd(g,u,d,o))),I}function Vp(u,i){const o=i.query,d=Wh(u,o);return{hashFn:()=>(function Lp(u){return u.viewCache_.serverCache.getNode()}(i)||br.EMPTY_NODE).hash(),onComplete:g=>{if("ok"===g)return d?function Dy(u,i,o){const d=qd(u,o);if(d){const g=fm(d),I=g.path,A=g.queryId,U=Wi(I,i);return Ac(u,I,new Yu(Bd(A),U))}return[]}(u,o._path,d):function Cy(u,i){return Wd(u,new Yu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i))}(u,o._path);{const I=function qt(u,i){let o="Unknown Error";"too_big"===u?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?o="Client doesn't have permission to access the desired data.":"unavailable"===u&&(o="The service is unavailable");const d=new Error(u+" at "+i._path.toString()+": "+o);return d.code=u.toUpperCase(),d}(g,o);return jf(u,o,null,I)}}}}function Wh(u,i){const o=$s(i);return u.queryToTagMap.get(o)}function $s(u){return u._path.toString()+"$"+u._queryIdentifier}function qd(u,i){return u.tagToQueryMap.get(i)}function fm(u){const i=u.indexOf("$");return(0,Y.hu)(-1!==i&&i<u.length-1,"Bad queryKey."),{queryId:u.substr(i+1),path:new z(u.substr(0,i))}}function Ac(u,i,o){const d=u.syncPointTree_.get(i);return(0,Y.hu)(d,"Missing sync point for query tag that we're tracking"),Hd(d,o,Au(u.pendingWriteTree_,i),null)}function Mc(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function Iy(){return(0,Y.hu)(Hh,"Reference.ts has not been loaded"),Hh}())(u._repo,u._path):u}class jp{constructor(i){this.node_=i}getImmediateChild(i){const o=this.node_.getImmediateChild(i);return new jp(o)}node(){return this.node_}}class qh{constructor(i,o){this.syncTree_=i,this.path_=o}getImmediateChild(i){const o=xr(this.path_,i);return new qh(this.syncTree_,o)}node(){return Gh(this.syncTree_,this.path_)}}const Hp=function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u},Ay=function(u,i,o){return u&&"object"==typeof u?((0,Y.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?Yd(u[".sv"],i,o):"object"==typeof u[".sv"]?Yh(u[".sv"],i):void(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},Yd=function(u,i,o){if("timestamp"===u)return o.timestamp;(0,Y.hu)(!1,"Unexpected server value: "+u)},Yh=function(u,i,o){u.hasOwnProperty("increment")||(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const d=u.increment;"number"!=typeof d&&(0,Y.hu)(!1,"Unexpected increment value: "+d);const g=i.node();if((0,Y.hu)(null!==g&&typeof g<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!g.isLeafNode())return d;const A=g.getValue();return"number"!=typeof A?d:A+d},sd=function(u,i,o,d){return Zd(i,new qh(o,u),d)},zf=function(u,i,o){return Zd(u,new jp(i),o)};function Zd(u,i,o){const d=u.getPriority().val(),g=Ay(d,i.getImmediateChild(".priority"),o);let I;if(u.isLeafNode()){const A=u,U=Ay(A.getValue(),i,o);return U!==A.getValue()||g!==A.getPriority().val()?new Ll(U,Ui(g)):u}{const A=u;return I=A,g!==A.getPriority().val()&&(I=I.updatePriority(new Ll(g))),A.forEachChild(Bi,(U,Z)=>{const ie=Zd(Z,i.getImmediateChild(U),o);ie!==Z&&(I=I.updateImmediateChild(U,ie))}),I}}class zp{constructor(i="",o=null,d={children:{},childCount:0}){this.name=i,this.parent=o,this.node=d}}function Gp(u,i){let o=i instanceof z?i:new z(i),d=u,g=se(o);for(;null!==g;){const I=(0,Y.DV)(d.node.children,g)||{children:{},childCount:0};d=new zp(g,d,I),o=Tt(o),g=se(o)}return d}function Rc(u){return u.node.value}function od(u,i){u.node.value=i,Wp(u)}function My(u){return u.node.childCount>0}function Pu(u,i){V(u.node.children,(o,d)=>{i(new zp(o,u,d))})}function xc(u,i,o,d){o&&!d&&i(u),Pu(u,g=>{xc(g,i,!0,d)}),o&&d&&i(u)}function Zh(u){return new z(null===u.parent?u.name:Zh(u.parent)+"/"+u.name)}function Wp(u){null!==u.parent&&function rc(u,i,o){const d=function z_(u){return void 0===Rc(u)&&!My(u)}(o),g=(0,Y.r3)(u.node.children,i);d&&g?(delete u.node.children[i],u.node.childCount--,Wp(u)):!d&&!g&&(u.node.children[i]=o.node,u.node.childCount++,Wp(u))}(u.parent,u.name,u)}const G_=/[\[\].#$\/\u0000-\u001F\u007F]/,W_=/[\[\].#$\u0000-\u001F\u007F]/,ad=10485760,Qd=function(u){return"string"==typeof u&&0!==u.length&&!G_.test(u)},Hl=function(u){return"string"==typeof u&&0!==u.length&&!W_.test(u)},Nu=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!Mo(u)||u&&"object"==typeof u&&(0,Y.r3)(u,".sv")},sl=function(u,i,o,d){d&&void 0===i||Qh((0,Y.gK)(u,"value"),i,o)},Qh=function(u,i,o){const d=o instanceof z?new Ho(o,u):o;if(void 0===i)throw new Error(u+"contains undefined "+Xa(d));if("function"==typeof i)throw new Error(u+"contains a function "+Xa(d)+" with contents = "+i.toString());if(Mo(i))throw new Error(u+"contains "+i.toString()+" "+Xa(d));if("string"==typeof i&&i.length>ad/3&&(0,Y.ug)(i)>ad)throw new Error(u+"contains a string greater than "+ad+" utf8 bytes "+Xa(d)+" ('"+i.substring(0,50)+"...')");if(i&&"object"==typeof i){let g=!1,I=!1;if(V(i,(A,U)=>{if(".value"===A)g=!0;else if(".priority"!==A&&".sv"!==A&&(I=!0,!Qd(A)))throw new Error(u+" contains an invalid key ("+A+") "+Xa(d)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Bs(u,i){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(i),u.byteLength_+=(0,Y.ug)(i),kl(u)})(d,A),Qh(u,U,d),function na(u){const i=u.parts_.pop();u.byteLength_-=(0,Y.ug)(i),u.parts_.length>0&&(u.byteLength_-=1)}(d)}),g&&I)throw new Error(u+' contains ".value" child '+Xa(d)+" in addition to actual children.")}},Kp=function(u,i,o,d){if(d&&void 0===i)return;const g=(0,Y.gK)(u,"values");if(!i||"object"!=typeof i||Array.isArray(i))throw new Error(g+" must be an object containing the children to replace.");const I=[];V(i,(A,U)=>{const Z=new z(A);if(Qh(g,U,xr(o,Z)),".priority"===un(Z)&&!Nu(U))throw new Error(g+"contains an invalid value for '"+Z.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");I.push(Z)}),function(u,i){let o,d;for(o=0;o<i.length;o++){d=i[o];const I=xn(d);for(let A=0;A<I.length;A++)if((".priority"!==I[A]||A!==I.length-1)&&!Qd(I[A]))throw new Error(u+"contains an invalid key ("+I[A]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}i.sort(Ss);let g=null;for(o=0;o<i.length;o++){if(d=i[o],null!==g&&Ni(g,d))throw new Error(u+"contains a path "+g.toString()+" that is ancestor of another path "+d.toString());g=d}}(g,I)},Gf=function(u,i,o){if(!o||void 0!==i){if(Mo(i))throw new Error((0,Y.gK)(u,"priority")+"is "+i.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nu(i))throw new Error((0,Y.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Xd=function(u,i,o,d){if(!(d&&void 0===o||Qd(o)))throw new Error((0,Y.gK)(u,i)+'was an invalid key = "'+o+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Jd=function(u,i,o,d){if(!(d&&void 0===o||Hl(o)))throw new Error((0,Y.gK)(u,i)+'was an invalid path = "'+o+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qp=function(u,i,o,d){o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),Jd(u,i,o,d)},zl=function(u,i){if(".info"===se(i))throw new Error(u+" failed = Can't modify data under /.info/")},eh=function(u,i){const o=i.path.toString();if("string"!=typeof i.repoInfo.host||0===i.repoInfo.host.length||!Qd(i.repoInfo.namespace)&&"localhost"!==i.repoInfo.host.split(":")[0]||0!==o.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Hl(u)}(o))throw new Error((0,Y.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Pc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ic(u,i){let o=null;for(let d=0;d<i.length;d++){const g=i[d],I=g.getPath();null!==o&&!Ro(I,o.path)&&(u.eventLists_.push(o),o=null),null===o&&(o={events:[],path:I}),o.events.push(g)}o&&u.eventLists_.push(o)}function xy(u,i,o){ic(u,o),Py(u,d=>Ro(d,i))}function vl(u,i,o){ic(u,o),Py(u,d=>Ni(d,i)||Ni(i,d))}function Py(u,i){u.recursionDepth_++;let o=!0;for(let d=0;d<u.eventLists_.length;d++){const g=u.eventLists_[d];g&&(i(g.path)?(K_(u.eventLists_[d]),u.eventLists_[d]=null):o=!1)}o&&(u.eventLists_=[]),u.recursionDepth_--}function K_(u){for(let i=0;i<u.events.length;i++){const o=u.events[i];if(null!==o){u.events[i]=null;const d=o.getEventRunner();Hs&&hs("event: "+o.toString()),Er(d)}}}const Oy="repo_interrupt",Wf=25;class su{constructor(i,o,d,g){this.repoInfo_=i,this.forceRestClient_=o,this.authTokenProvider_=d,this.appCheckProvider_=g,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$l(),this.transactionQueueTree_=new zp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function mm(u){const o=u.infoData_.getNode(new z(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+o}function Kf(u){return Hp({timestamp:mm(u)})}function Ny(u,i,o,d,g){u.dataUpdateCount++;const I=new z(i);o=u.interceptServerDataCallback_?u.interceptServerDataCallback_(i,o):o;let A=[];if(g)if(d){const Z=(0,Y.UI)(o,ie=>Ui(ie));A=function H_(u,i,o,d){const g=qd(u,d);if(g){const I=fm(g),A=I.path,U=I.queryId,Z=Wi(A,i),ie=hi.fromObject(o);return Ac(u,A,new Ic(Bd(U),Z,ie))}return[]}(u.serverSyncTree_,I,Z,g)}else{const Z=Ui(o);A=Ty(u.serverSyncTree_,I,Z,g)}else if(d){const Z=(0,Y.UI)(o,ie=>Ui(ie));A=function by(u,i,o){const d=hi.fromObject(o);return Wd(u,new Ic({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,d))}(u.serverSyncTree_,I,Z)}else{const Z=Ui(o);A=rd(u.serverSyncTree_,I,Z)}let U=I;A.length>0&&(U=ud(u,I)),vl(u.eventQueue_,U,A)}function q_(u,i){Zp(u,"connected",i),!1===i&&function Xp(u){ld(u,"onDisconnectEvents");const i=Kf(u),o=$l();Ul(u.onDisconnect_,re(),(g,I)=>{const A=sd(g,I,u.serverSyncTree_,i);di(o,g,A)});let d=[];Ul(o,re(),(g,I)=>{d=d.concat(rd(u.serverSyncTree_,g,I));const A=Fc(u,g);ud(u,A)}),u.onDisconnect_=$l(),vl(u.eventQueue_,re(),d)}(u)}function Zp(u,i,o){const d=new z("/.info/"+i),g=Ui(o);u.infoData_.updateSnapshot(d,g);const I=rd(u.infoSyncTree_,d,g);vl(u.eventQueue_,d,I)}function Xh(u){return u.nextWriteId_++}function qf(u,i,o,d,g){ld(u,"set",{path:i.toString(),value:o,priority:d});const I=Kf(u),A=Ui(o,d),U=Gh(u.serverSyncTree_,i),Z=zf(A,U,I),ie=Xh(u),Ze=zd(u.serverSyncTree_,i,Z,ie,!0);ic(u.eventQueue_,Ze),u.server_.put(i.toString(),A.val(!0),(Mt,Zt)=>{const Xt="ok"===Mt;Xt||vs("set at "+i+" failed: "+Mt);const vn=jl(u.serverSyncTree_,ie,!Xt);vl(u.eventQueue_,i,vn),Oc(0,g,Mt,Zt)});const ot=Fc(u,i);ud(u,ot),vl(u.eventQueue_,ot,[])}function Y_(u,i,o){u.server_.onDisconnectCancel(i.toString(),(d,g)=>{"ok"===d&&Qs(u.onDisconnect_,i),Oc(0,o,d,g)})}function El(u,i,o,d){const g=Ui(o);u.server_.onDisconnectPut(i.toString(),g.val(!0),(I,A)=>{"ok"===I&&di(u.onDisconnect_,i,g),Oc(0,d,I,A)})}function th(u,i,o){let d;d=".info"===se(i._path)?jf(u.infoSyncTree_,i,o):jf(u.serverSyncTree_,i,o),xy(u.eventQueue_,i._path,d)}function Yf(u){u.persistentConnection_&&u.persistentConnection_.interrupt(Oy)}function ld(u,...i){let o="";u.persistentConnection_&&(o=u.persistentConnection_.id+":"),hs(o,...i)}function Oc(u,i,o,d){i&&Er(()=>{if("ok"===o)i(null);else{const g=(o||"error").toUpperCase();let I=g;d&&(I+=": "+d);const A=new Error(I);A.code=g,i(A)}})}function eg(u,i,o){return Gh(u.serverSyncTree_,i,o)||br.EMPTY_NODE}function Kr(u,i=u.transactionQueueTree_){if(i||tg(u,i),Rc(i)){const o=_m(u,i);(0,Y.hu)(o.length>0,"Sending zero length transaction queue"),o.every(g=>0===g.status)&&function Qf(u,i,o){const d=o.map(ie=>ie.currentWriteId),g=eg(u,i,d);let I=g;const A=g.hash();for(let ie=0;ie<o.length;ie++){const Ze=o[ie];(0,Y.hu)(0===Ze.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ze.status=1,Ze.retryCount++;const ot=Wi(i,Ze.path);I=I.updateChild(ot,Ze.currentOutputSnapshotRaw)}const U=I.val(!0),Z=i;u.server_.put(Z.toString(),U,ie=>{ld(u,"transaction put response",{path:Z.toString(),status:ie});let Ze=[];if("ok"===ie){const ot=[];for(let Mt=0;Mt<o.length;Mt++)o[Mt].status=2,Ze=Ze.concat(jl(u.serverSyncTree_,o[Mt].currentWriteId)),o[Mt].onComplete&&ot.push(()=>o[Mt].onComplete(null,!0,o[Mt].currentOutputSnapshotResolved)),o[Mt].unwatcher();tg(u,Gp(u.transactionQueueTree_,i)),Kr(u,u.transactionQueueTree_),vl(u.eventQueue_,i,Ze);for(let Mt=0;Mt<ot.length;Mt++)Er(ot[Mt])}else{if("datastale"===ie)for(let ot=0;ot<o.length;ot++)o[ot].status=3===o[ot].status?4:0;else{vs("transaction at "+Z.toString()+" failed: "+ie);for(let ot=0;ot<o.length;ot++)o[ot].status=4,o[ot].abortReason=ie}ud(u,i)}},A)}(u,Zh(i),o)}else My(i)&&Pu(i,o=>{Kr(u,o)})}function ud(u,i){const o=nh(u,i),d=Zh(o);return function Nc(u,i,o){if(0===i.length)return;const d=[];let g=[];const A=i.filter(U=>0===U.status).map(U=>U.currentWriteId);for(let U=0;U<i.length;U++){const Z=i[U],ie=Wi(o,Z.path);let ot,Ze=!1;if((0,Y.hu)(null!==ie,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Z.status)Ze=!0,ot=Z.abortReason,g=g.concat(jl(u.serverSyncTree_,Z.currentWriteId,!0));else if(0===Z.status)if(Z.retryCount>=Wf)Ze=!0,ot="maxretry",g=g.concat(jl(u.serverSyncTree_,Z.currentWriteId,!0));else{const Mt=eg(u,Z.path,A);Z.currentInputSnapshot=Mt;const Zt=i[U].update(Mt.val());if(void 0!==Zt){Qh("transaction failed: Data returned ",Zt,Z.path);let Xt=Ui(Zt);"object"==typeof Zt&&null!=Zt&&(0,Y.r3)(Zt,".priority")||(Xt=Xt.updatePriority(Mt.getPriority()));const ur=Z.currentWriteId,Zr=Kf(u),Si=zf(Xt,Mt,Zr);Z.currentOutputSnapshotRaw=Xt,Z.currentOutputSnapshotResolved=Si,Z.currentWriteId=Xh(u),A.splice(A.indexOf(ur),1),g=g.concat(zd(u.serverSyncTree_,Z.path,Si,Z.currentWriteId,Z.applyLocally)),g=g.concat(jl(u.serverSyncTree_,ur,!0))}else Ze=!0,ot="nodata",g=g.concat(jl(u.serverSyncTree_,Z.currentWriteId,!0))}vl(u.eventQueue_,o,g),g=[],Ze&&(i[U].status=2,setTimeout(i[U].unwatcher,Math.floor(0)),i[U].onComplete&&d.push("nodata"===ot?()=>i[U].onComplete(null,!1,i[U].currentInputSnapshot):()=>i[U].onComplete(new Error(ot),!1,null)))}tg(u,u.transactionQueueTree_);for(let U=0;U<d.length;U++)Er(d[U]);Kr(u,u.transactionQueueTree_)}(u,_m(u,o),d),d}function nh(u,i){let o,d=u.transactionQueueTree_;for(o=se(i);null!==o&&void 0===Rc(d);)d=Gp(d,o),o=se(i=Tt(i));return d}function _m(u,i){const o=[];return kc(u,i,o),o.sort((d,g)=>d.order-g.order),o}function kc(u,i,o){const d=Rc(i);if(d)for(let g=0;g<d.length;g++)o.push(d[g]);Pu(i,g=>{kc(u,g,o)})}function tg(u,i){const o=Rc(i);if(o){let d=0;for(let g=0;g<o.length;g++)2!==o[g].status&&(o[d]=o[g],d++);o.length=d,od(i,o.length>0?o:void 0)}Pu(i,d=>{tg(u,d)})}function Fc(u,i){const o=Zh(nh(u,i)),d=Gp(u.transactionQueueTree_,i);return function Ry(u,i,o){let d=o?u:u.parent;for(;null!==d;){if(i(d))return!0;d=d.parent}}(d,g=>{ng(u,g)}),ng(u,d),xc(d,g=>{ng(u,g)}),o}function ng(u,i){const o=Rc(i);if(o){const d=[];let g=[],I=-1;for(let A=0;A<o.length;A++)3===o[A].status||(1===o[A].status?((0,Y.hu)(I===A-1,"All SENT items should be at beginning of queue."),I=A,o[A].status=3,o[A].abortReason="set"):((0,Y.hu)(0===o[A].status,"Unexpected transaction status in abort"),o[A].unwatcher(),g=g.concat(jl(u.serverSyncTree_,o[A].currentWriteId,!0)),o[A].onComplete&&d.push(o[A].onComplete.bind(null,new Error("set"),!1,null))));-1===I?od(i,void 0):o.length=I+1,vl(u.eventQueue_,Zh(i),g);for(let A=0;A<d.length;A++)Er(d[A])}}const rg=function(u,i){const o=vm(u),d=o.namespace;return"firebase.com"===o.domain&&Lr(o.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!d||"undefined"===d)&&"localhost"!==o.domain&&Lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),o.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ls(o.host,o.secure,d,"ws"===o.scheme||"wss"===o.scheme,i,"",d!==o.subdomain),path:new z(o.pathString)}},vm=function(u){let i="",o="",d="",g="",I="",A=!0,U="https",Z=443;if("string"==typeof u){let ie=u.indexOf("//");ie>=0&&(U=u.substring(0,ie-1),u=u.substring(ie+2));let Ze=u.indexOf("/");-1===Ze&&(Ze=u.length);let ot=u.indexOf("?");-1===ot&&(ot=u.length),i=u.substring(0,Math.min(Ze,ot)),Ze<ot&&(g=function cd(u){let i="";const o=u.split("/");for(let d=0;d<o.length;d++)if(o[d].length>0){let g=o[d];try{g=decodeURIComponent(g.replace(/\+/g," "))}catch{}i+="/"+g}return i}(u.substring(Ze,ot)));const Mt=function Z_(u){const i={};"?"===u.charAt(0)&&(u=u.substring(1));for(const o of u.split("&")){if(0===o.length)continue;const d=o.split("=");2===d.length?i[decodeURIComponent(d[0])]=decodeURIComponent(d[1]):vs(`Invalid query segment '${o}' in query '${u}'`)}return i}(u.substring(Math.min(u.length,ot)));ie=i.indexOf(":"),ie>=0?(A="https"===U||"wss"===U,Z=parseInt(i.substring(ie+1),10)):ie=i.length;const Zt=i.slice(0,ie);if("localhost"===Zt.toLowerCase())o="localhost";else if(Zt.split(".").length<=2)o=Zt;else{const Xt=i.indexOf(".");d=i.substring(0,Xt).toLowerCase(),o=i.substring(Xt+1),I=d}"ns"in Mt&&(I=Mt.ns)}return{host:i,port:Z,domain:o,subdomain:d,secure:A,scheme:U,pathString:g,namespace:I}},dd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ly=function(){let u=0;const i=[];return function(o){const d=o===u;let g;u=o;const I=new Array(8);for(g=7;g>=0;g--)I[g]=dd.charAt(o%64),o=Math.floor(o/64);(0,Y.hu)(0===o,"Cannot push at time == 0");let A=I.join("");if(d){for(g=11;g>=0&&63===i[g];g--)i[g]=0;i[g]++}else for(g=0;g<12;g++)i[g]=Math.floor(64*Math.random());for(g=0;g<12;g++)A+=dd.charAt(i[g]);return(0,Y.hu)(20===A.length,"nextPushId: Length should be 20."),A}}();class ig{constructor(i,o,d,g){this.eventType=i,this.eventRegistration=o,this.snapshot=d,this.prevName=g}getPath(){const i=this.snapshot.ref;return"value"===this.eventType?i._path:i.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Y.Wl)(this.snapshot.exportVal())}}class rh{constructor(i,o,d){this.eventRegistration=i,this.error=o,this.path=d}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class sg{constructor(i,o){this.snapshotCallback=i,this.cancelCallback=o}onValue(i,o){this.snapshotCallback.call(null,i,o)}onCancel(i){return(0,Y.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,i)}get hasCancelCallback(){return!!this.cancelCallback}matches(i){return this.snapshotCallback===i.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===i.snapshotCallback.userCallback&&this.snapshotCallback.context===i.snapshotCallback.context}}class Q_{constructor(i,o){this._repo=i,this._path=o}cancel(){const i=new Y.BH;return Y_(this._repo,this._path,i.wrapCallback(()=>{})),i.promise}remove(){zl("OnDisconnect.remove",this._path);const i=new Y.BH;return El(this._repo,this._path,null,i.wrapCallback(()=>{})),i.promise}set(i){zl("OnDisconnect.set",this._path),sl("OnDisconnect.set",i,this._path,!1);const o=new Y.BH;return El(this._repo,this._path,i,o.wrapCallback(()=>{})),o.promise}setWithPriority(i,o){zl("OnDisconnect.setWithPriority",this._path),sl("OnDisconnect.setWithPriority",i,this._path,!1),Gf("OnDisconnect.setWithPriority",o,!1);const d=new Y.BH;return function Jp(u,i,o,d,g){const I=Ui(o,d);u.server_.onDisconnectPut(i.toString(),I.val(!0),(A,U)=>{"ok"===A&&di(u.onDisconnect_,i,I),Oc(0,g,A,U)})}(this._repo,this._path,i,o,d.wrapCallback(()=>{})),d.promise}update(i){zl("OnDisconnect.update",this._path),Kp("OnDisconnect.update",i,this._path,!1);const o=new Y.BH;return function ky(u,i,o,d){if((0,Y.xb)(o))return hs("onDisconnect().update() called with empty data.  Don't do anything."),void Oc(0,d,"ok",void 0);u.server_.onDisconnectMerge(i.toString(),o,(g,I)=>{"ok"===g&&V(o,(A,U)=>{const Z=Ui(U);di(u.onDisconnect_,xr(i,A),Z)}),Oc(0,d,g,I)})}(this._repo,this._path,i,o.wrapCallback(()=>{})),o.promise}}class wl{constructor(i,o,d,g){this._repo=i,this._path=o,this._queryParams=d,this._orderByCalled=g}get key(){return ir(this._path)?null:un(this._path)}get ref(){return new ol(this._repo,this._path)}get _queryIdentifier(){const i=As(this._queryParams),o=F(i);return"{}"===o?"default":o}get _queryObject(){return As(this._queryParams)}isEqual(i){if(!((i=(0,Y.m9)(i))instanceof wl))return!1;const o=this._repo===i._repo,d=Ro(this._path,i._path);return o&&d&&this._queryIdentifier===i._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Gn(u){let i="";for(let o=u.pieceNum_;o<u.pieces_.length;o++)""!==u.pieces_[o]&&(i+="/"+encodeURIComponent(String(u.pieces_[o])));return i||"/"}(this._path)}}function Em(u,i){if(!0===u._orderByCalled)throw new Error(i+": You can't combine multiple orderBy calls.")}function Lc(u){let i=null,o=null;if(u.hasStart()&&(i=u.getIndexStartValue()),u.hasEnd()&&(o=u.getIndexEndValue()),u.getIndex()===Ja){const d="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",g="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==Es)throw new Error(d);if("string"!=typeof i)throw new Error(g)}if(u.hasEnd()){if(u.getIndexEndName()!==Vo)throw new Error(d);if("string"!=typeof o)throw new Error(g)}}else if(u.getIndex()===Bi){if(null!=i&&!Nu(i)||null!=o&&!Nu(o))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Y.hu)(u.getIndex()instanceof yl||u.getIndex()===bu,"unknown index type."),null!=i&&"object"==typeof i||null!=o&&"object"==typeof o)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ku(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ol extends wl{constructor(i,o){super(i,o,new Oe,!1)}get parent(){const i=xi(this._path);return null===i?null:new ol(this._repo,i)}get root(){let i=this;for(;null!==i.parent;)i=i.parent;return i}}class hd{constructor(i,o,d){this._node=i,this.ref=o,this._index=d}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(i){const o=new z(i),d=Bc(this.ref,i);return new hd(this._node.getChild(o),d,Bi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(i){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(d,g)=>i(new hd(g,Bc(this.ref,d),Bi)))}hasChild(i){const o=new z(i);return!this._node.getChild(o).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fd(u,i){return(u=(0,Y.m9)(u))._checkNotDeleted("ref"),void 0!==i?Bc(u._root,i):u._root}function By(u,i){(u=(0,Y.m9)(u))._checkNotDeleted("refFromURL");const o=rg(i,u._repo.repoInfo_.nodeAdmin);eh("refFromURL",o);const d=o.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&d.host!==u._repo.repoInfo_.host&&Lr("refFromURL: Host name does not match the current database: (found "+d.host+" but expected "+u._repo.repoInfo_.host+")"),fd(u,o.path.toString())}function Bc(u,i){return null===se((u=(0,Y.m9)(u))._path)?qp("child","path",i,!1):Jd("child","path",i,!1),new ol(u._repo,xr(u._path,i))}function Po(u,i){u=(0,Y.m9)(u),zl("set",u._path),sl("set",i,u._path,!1);const o=new Y.BH;return qf(u._repo,u._path,i,null,o.wrapCallback(()=>{})),o.promise}function tv(u,i){Kp("update",i,u._path,!1);const o=new Y.BH;return function ym(u,i,o,d){ld(u,"update",{path:i.toString(),value:o});let g=!0;const I=Kf(u),A={};if(V(o,(U,Z)=>{g=!1,A[U]=sd(xr(i,U),Ui(Z),u.serverSyncTree_,I)}),g)hs("update() called with empty data.  Don't do anything."),Oc(0,d,"ok",void 0);else{const U=Xh(u),Z=function zh(u,i,o,d){!function Tc(u,i,o,d){(0,Y.hu)(d>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:i,children:o,writeId:d,visible:!0}),u.visibleWrites=Vl(u.visibleWrites,i,o),u.lastWriteId=d}(u.pendingWriteTree_,i,o,d);const g=hi.fromObject(o);return Wd(u,new Ic({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,g))}(u.serverSyncTree_,i,A,U);ic(u.eventQueue_,Z),u.server_.merge(i.toString(),o,(ie,Ze)=>{const ot="ok"===ie;ot||vs("update at "+i+" failed: "+ie);const Mt=jl(u.serverSyncTree_,U,!ot),Zt=Mt.length>0?ud(u,i):i;vl(u.eventQueue_,Zt,Mt),Oc(0,d,ie,Ze)}),V(o,ie=>{const Ze=Fc(u,xr(i,ie));ud(u,Ze)}),vl(u.eventQueue_,i,[])}}(u._repo,u._path,i,o.wrapCallback(()=>{})),o.promise}function nv(u){u=(0,Y.m9)(u);const i=new sg(()=>{}),o=new pd(i);return function Qp(u,i,o){const d=function Sy(u,i){const o=i._path;let d=null;u.syncPointTree_.foreachOnPath(o,(ie,Ze)=>{const ot=Wi(ie,o);d=d||Ti(Ze,ot)});let g=u.syncPointTree_.get(o);g?d=d||Ti(g,re()):(g=new vy,u.syncPointTree_=u.syncPointTree_.set(o,g));const I=null!=d,A=I?new bc(d,!0,!1):null;return function _y(u){return In(u.viewCache_)}(um(g,i,Au(u.pendingWriteTree_,i._path),I?A.getNode():br.EMPTY_NODE,I))}(u.serverSyncTree_,i);return null!=d?Promise.resolve(d):u.server_.get(i).then(g=>{const I=Ui(g).withIndex(i._queryParams.getIndex());let A;if(Gd(u.serverSyncTree_,i,o,!0),i._queryParams.loadsAllData())A=rd(u.serverSyncTree_,i._path,I);else{const U=Wh(u.serverSyncTree_,i);A=Ty(u.serverSyncTree_,i._path,I,U)}return vl(u.eventQueue_,i._path,A),jf(u.serverSyncTree_,i,o,null,!0),I},g=>(ld(u,"get for query "+(0,Y.Wl)(i)+" failed: "+g),Promise.reject(new Error(g))))}(u._repo,u,o).then(d=>new hd(d,new ol(u._repo,u._path),u._queryParams.getIndex()))}class pd{constructor(i){this.callbackContext=i}respondsTo(i){return"value"===i}createEvent(i,o){const d=o._queryParams.getIndex();return new ig("value",this,new hd(i.snapshotNode,new ol(o._repo,o._path),d))}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,null)}createCancelEvent(i,o){return this.callbackContext.hasCancelCallback?new rh(this,i,o):null}matches(i){return i instanceof pd&&(!i.callbackContext||!this.callbackContext||i.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ag{constructor(i,o){this.eventType=i,this.callbackContext=o}respondsTo(i){let o="children_added"===i?"child_added":i;return o="children_removed"===o?"child_removed":o,this.eventType===o}createCancelEvent(i,o){return this.callbackContext.hasCancelCallback?new rh(this,i,o):null}createEvent(i,o){(0,Y.hu)(null!=i.childName,"Child events should have a childName.");const d=Bc(new ol(o._repo,o._path),i.childName),g=o._queryParams.getIndex();return new ig(i.type,this,new hd(i.snapshotNode,d,g),i.prevName)}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,i.prevName)}matches(i){return i instanceof ag&&this.eventType===i.eventType&&(!this.callbackContext||!i.callbackContext||this.callbackContext.matches(i.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $c(u,i,o,d,g){let I;if("object"==typeof d&&(I=void 0,g=d),"function"==typeof d&&(I=d),g&&g.onlyOnce){const Z=o,ie=(Ze,ot)=>{th(u._repo,u,U),Z(Ze,ot)};ie.userCallback=o.userCallback,ie.context=o.context,o=ie}const A=new sg(o,I||void 0),U="value"===i?new pd(A):new ag(i,A);return function Fy(u,i,o){let d;d=".info"===se(i._path)?Gd(u.infoSyncTree_,i,o):Gd(u.serverSyncTree_,i,o),xy(u.eventQueue_,i._path,d)}(u._repo,u,U),()=>th(u._repo,u,U)}function ih(u,i,o,d){return $c(u,"value",i,o,d)}function lg(u,i,o,d){return $c(u,"child_added",i,o,d)}function $y(u,i,o,d){return $c(u,"child_changed",i,o,d)}function Jh(u,i,o,d){return $c(u,"child_moved",i,o,d)}function ug(u,i,o,d){return $c(u,"child_removed",i,o,d)}function Xf(u,i,o){let d=null;const g=o?new sg(o):null;"value"===i?d=new pd(g):i&&(d=new ag(i,g)),th(u._repo,u,d)}class Wo{}class Jf extends Wo{constructor(i,o){super(),this._value=i,this._key=o}_apply(i){sl("endAt",this._value,i._path,!0);const o=er(i._queryParams,this._value,this._key);if(ku(o),Lc(o),i._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wl(i._repo,i._path,o,i._orderByCalled)}}class bm extends Wo{constructor(i,o){super(),this._value=i,this._key=o}_apply(i){sl("endBefore",this._value,i._path,!1);const o=function zr(u,i,o){let d;return d=er(u,i,u.index_===Ja||o?o:Es),d.endBeforeSet_=!0,d}(i._queryParams,this._value,this._key);if(ku(o),Lc(o),i._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wl(i._repo,i._path,o,i._orderByCalled)}}class Cm extends Wo{constructor(i,o){super(),this._value=i,this._key=o}_apply(i){sl("startAt",this._value,i._path,!0);const o=Pn(i._queryParams,this._value,this._key);if(ku(o),Lc(o),i._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new wl(i._repo,i._path,o,i._orderByCalled)}}class gd extends Wo{constructor(i,o){super(),this._value=i,this._key=o}_apply(i){sl("startAfter",this._value,i._path,!1);const o=function Sn(u,i,o){let d;return d=Pn(u,i,u.index_===Ja||o?o:Vo),d.startAfterSet_=!0,d}(i._queryParams,this._value,this._key);if(ku(o),Lc(o),i._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new wl(i._repo,i._path,o,i._orderByCalled)}}class ef extends Wo{constructor(i){super(),this._limit=i}_apply(i){if(i._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new wl(i._repo,i._path,function bt(u,i){const o=u.copy();return o.limitSet_=!0,o.limit_=i,o.viewFrom_="l",o}(i._queryParams,this._limit),i._orderByCalled)}}class tp extends Wo{constructor(i){super(),this._limit=i}_apply(i){if(i._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new wl(i._repo,i._path,function Bt(u,i){const o=u.copy();return o.limitSet_=!0,o.limit_=i,o.viewFrom_="r",o}(i._queryParams,this._limit),i._orderByCalled)}}class md extends Wo{constructor(i){super(),this._path=i}_apply(i){Em(i,"orderByChild");const o=new z(this._path);if(ir(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const d=new yl(o),g=$r(i._queryParams,d);return Lc(g),new wl(i._repo,i._path,g,!0)}}class np extends Wo{_apply(i){Em(i,"orderByKey");const o=$r(i._queryParams,Ja);return Lc(o),new wl(i._repo,i._path,o,!0)}}class cg extends Wo{_apply(i){Em(i,"orderByPriority");const o=$r(i._queryParams,Bi);return Lc(o),new wl(i._repo,i._path,o,!0)}}class jy extends Wo{_apply(i){Em(i,"orderByValue");const o=$r(i._queryParams,bu);return Lc(o),new wl(i._repo,i._path,o,!0)}}class Sm extends Wo{constructor(i,o){super(),this._value=i,this._key=o}_apply(i){if(sl("equalTo",this._value,i._path,!1),i._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(i._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Jf(this._value,this._key)._apply(new Cm(this._value,this._key)._apply(i))}}function Il(u,...i){let o=(0,Y.m9)(u);for(const d of i)o=d._apply(o);return o}(function Uf(u){(0,Y.hu)(!jh,"__referenceConstructor has already been defined"),jh=u})(ol),function hm(u){(0,Y.hu)(!Hh,"__referenceConstructor has already been defined"),Hh=u}(ol);const Gy="FIREBASE_DATABASE_EMULATOR_HOST",dg={};let Ra=!1;function tf(u,i,o,d,g){let I=d||u.options.databaseURL;void 0===I&&(u.options.projectId||Lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hs("Using default host for project ",u.options.projectId),I=`${u.options.projectId}-default-rtdb.firebaseio.com`);let Z,ie,A=rg(I,g),U=A.repoInfo;typeof process<"u"&&process.env&&(ie=process.env[Gy]),ie?(Z=!0,I=`http://${ie}?ns=${U.namespace}`,A=rg(I,g),U=A.repoInfo):Z=!A.repoInfo.secure;const Ze=g&&Z?new Cs(Cs.OWNER):new so(u.name,u.options,i);eh("Invalid Firebase Database URL",A),ir(A.path)||Lr("Database URL must point to the root of a Firebase Database (not including a child path).");const ot=function ip(u,i,o,d){let g=dg[i.name];g||(g={},dg[i.name]=g);let I=g[u.toURLString()];return I&&Lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),I=new su(u,Ra,o,d),g[u.toURLString()]=I,I}(U,u,Ze,new Gi(u.name,o));return new Mm(ot,u)}class Mm{constructor(i,o){this._repoInternal=i,this.app=o,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Aa(u,i,o){if(u.stats_=Ts(u.repoInfo_),u.forceRestClient_||zi())u.server_=new eu(u.repoInfo_,(d,g,I,A)=>{Ny(u,d,g,I,A)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>q_(u,!0),0);else{if(typeof o<"u"&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Y.Wl)(o)}catch(d){throw new Error("Invalid authOverride provided: "+d)}}u.persistentConnection_=new pa(u.repoInfo_,i,(d,g,I,A)=>{Ny(u,d,g,I,A)},d=>{q_(u,d)},d=>{!function Yp(u,i){V(i,(o,d)=>{Zp(u,o,d)})}(u,d)},u.authTokenProvider_,u.appCheckProvider_,o),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(d=>{u.server_.refreshAuthToken(d)}),u.appCheckProvider_.addTokenChangeListener(d=>{u.server_.refreshAppCheckToken(d.token)}),u.statsReporter_=function pu(u,i){const o=u.toString();return jr[o]||(jr[o]=i()),jr[o]}(u.repoInfo_,()=>new qi(u.stats_,u.server_)),u.infoData_=new Ms,u.infoSyncTree_=new Up({startListening:(d,g,I,A)=>{let U=[];const Z=u.infoData_.getNode(d._path);return Z.isEmpty()||(U=rd(u.infoSyncTree_,d._path,Z),setTimeout(()=>{A("ok")},0)),U},stopListening:()=>{}}),Zp(u,"connected",!1),u.serverSyncTree_=new Up({startListening:(d,g,I,A)=>(u.server_.listen(d,I,g,(U,Z)=>{const ie=A(U,Z);vl(u.eventQueue_,d._path,ie)}),[]),stopListening:(d,g)=>{u.server_.unlisten(d,g)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ol(this._repo,re())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Am(u,i){const o=dg[i];(!o||o[u.key]!==u)&&Lr(`Database ${i}(${u.repoInfo_}) has already been deleted.`),Yf(u),delete o[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(i){null===this._rootInternal&&Lr("Cannot call "+i+" on a deleted database.")}}function Rm(){Ai.IS_TRANSPORT_INITIALIZED&&vs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function iv(){Rm(),hr.forceDisallow()}function xm(){Rm(),Za.forceDisallow(),hr.forceAllow()}function xa(u,i){hl(u,i)}const Wy={".sv":"timestamp"};class sp{constructor(i,o){this.committed=i,this.snapshot=o}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}pa.prototype.simpleListen=function(u,i){this.sendRequest("q",{p:u},i)},pa.prototype.echo=function(u,i){this.sendRequest("echo",{d:u},i)},function ov(u){Qi(Ae.SDK_VERSION),(0,Ae._registerComponent)(new ht.wA("database",(i,{instanceIdentifier:o})=>tf(i.getProvider("app").getImmediate(),i.getProvider("auth-internal"),i.getProvider("app-check-internal"),o),"PUBLIC").setMultipleInstances(!0)),(0,Ae.registerVersion)(ca,"0.14.4",u),(0,Ae.registerVersion)(ca,"0.14.4","esm2017")}();const Nm=new za.Yd("@firebase/database-compat"),mg=function(u){Nm.warn("FIREBASE WARNING: "+u)};class nf{constructor(i){this._delegate=i}cancel(i){(0,Y.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.cancel","onComplete",i,!0);const o=this._delegate.cancel();return i&&o.then(()=>i(null),d=>i(d)),o}remove(i){(0,Y.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.remove","onComplete",i,!0);const o=this._delegate.remove();return i&&o.then(()=>i(null),d=>i(d)),o}set(i,o){(0,Y.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Y.Wj)("OnDisconnect.set","onComplete",o,!0);const d=this._delegate.set(i);return o&&d.then(()=>o(null),g=>o(g)),d}setWithPriority(i,o,d){(0,Y.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Y.Wj)("OnDisconnect.setWithPriority","onComplete",d,!0);const g=this._delegate.setWithPriority(i,o);return d&&g.then(()=>d(null),I=>d(I)),g}update(i,o){if((0,Y.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(i)){const g={};for(let I=0;I<i.length;++I)g[""+I]=i[I];i=g,mg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Y.Wj)("OnDisconnect.update","onComplete",o,!0);const d=this._delegate.update(i);return o&&d.then(()=>o(null),g=>o(g)),d}}class Uc{constructor(i,o){this.committed=i,this.snapshot=o}toJSON(){return(0,Y.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Gl{constructor(i,o){this._database=i,this._delegate=o}val(){return(0,Y.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Y.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Y.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Y.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(i){return(0,Y.Dv)("DataSnapshot.child",0,1,arguments.length),i=String(i),Jd("DataSnapshot.child","path",i,!1),new Gl(this._database,this._delegate.child(i))}hasChild(i){return(0,Y.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Jd("DataSnapshot.hasChild","path",i,!1),this._delegate.hasChild(i)}getPriority(){return(0,Y.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(i){return(0,Y.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Y.Wj)("DataSnapshot.forEach","action",i,!1),this._delegate.forEach(o=>i(new Gl(this._database,o)))}hasChildren(){return(0,Y.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Y.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Y.Dv)("DataSnapshot.ref",0,0,arguments.length),new qo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ko{constructor(i,o){this.database=i,this._delegate=o}on(i,o,d,g){var I;(0,Y.Dv)("Query.on",2,4,arguments.length),(0,Y.Wj)("Query.on","callback",o,!1);const A=Ko.getCancelAndContextArgs_("Query.on",d,g),U=(ie,Ze)=>{o.call(A.context,new Gl(this.database,ie),Ze)};U.userCallback=o,U.context=A.context;const Z=null===(I=A.cancel)||void 0===I?void 0:I.bind(A.context);switch(i){case"value":return ih(this._delegate,U,Z),o;case"child_added":return lg(this._delegate,U,Z),o;case"child_removed":return ug(this._delegate,U,Z),o;case"child_changed":return $y(this._delegate,U,Z),o;case"child_moved":return Jh(this._delegate,U,Z),o;default:throw new Error((0,Y.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(i,o,d){if((0,Y.Dv)("Query.off",0,3,arguments.length),function(u,i,o){if(void 0!==i)switch(i){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Y.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,i),(0,Y.Wj)("Query.off","callback",o,!0),(0,Y.lb)("Query.off","context",d,!0),o){const g=()=>{};g.userCallback=o,g.context=d,Xf(this._delegate,i,g)}else Xf(this._delegate,i)}get(){return nv(this._delegate).then(i=>new Gl(this.database,i))}once(i,o,d,g){(0,Y.Dv)("Query.once",1,4,arguments.length),(0,Y.Wj)("Query.once","callback",o,!0);const I=Ko.getCancelAndContextArgs_("Query.once",d,g),A=new Y.BH,U=(ie,Ze)=>{const ot=new Gl(this.database,ie);o&&o.call(I.context,ot,Ze),A.resolve(ot)};U.userCallback=o,U.context=I.context;const Z=ie=>{I.cancel&&I.cancel.call(I.context,ie),A.reject(ie)};switch(i){case"value":ih(this._delegate,U,Z,{onlyOnce:!0});break;case"child_added":lg(this._delegate,U,Z,{onlyOnce:!0});break;case"child_removed":ug(this._delegate,U,Z,{onlyOnce:!0});break;case"child_changed":$y(this._delegate,U,Z,{onlyOnce:!0});break;case"child_moved":Jh(this._delegate,U,Z,{onlyOnce:!0});break;default:throw new Error((0,Y.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return A.promise}limitToFirst(i){return(0,Y.Dv)("Query.limitToFirst",1,1,arguments.length),new Ko(this.database,Il(this._delegate,function Tm(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ef(u)}(i)))}limitToLast(i){return(0,Y.Dv)("Query.limitToLast",1,1,arguments.length),new Ko(this.database,Il(this._delegate,function Uy(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new tp(u)}(i)))}orderByChild(i){return(0,Y.Dv)("Query.orderByChild",1,1,arguments.length),new Ko(this.database,Il(this._delegate,function yd(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Jd("orderByChild","path",u,!1),new md(u)}(i)))}orderByKey(){return(0,Y.Dv)("Query.orderByKey",0,0,arguments.length),new Ko(this.database,Il(this._delegate,function rp(){return new np}()))}orderByPriority(){return(0,Y.Dv)("Query.orderByPriority",0,0,arguments.length),new Ko(this.database,Il(this._delegate,function Vy(){return new cg}()))}orderByValue(){return(0,Y.Dv)("Query.orderByValue",0,0,arguments.length),new Ko(this.database,Il(this._delegate,function Hy(){return new jy}()))}startAt(i=null,o){return(0,Y.Dv)("Query.startAt",0,2,arguments.length),new Ko(this.database,Il(this._delegate,function ep(u=null,i){return Xd("startAt","key",i,!0),new Cm(u,i)}(i,o)))}startAfter(i=null,o){return(0,Y.Dv)("Query.startAfter",0,2,arguments.length),new Ko(this.database,Il(this._delegate,function Dm(u,i){return Xd("startAfter","key",i,!0),new gd(u,i)}(i,o)))}endAt(i=null,o){return(0,Y.Dv)("Query.endAt",0,2,arguments.length),new Ko(this.database,Il(this._delegate,function Im(u,i){return Xd("endAt","key",i,!0),new Jf(u,i)}(i,o)))}endBefore(i=null,o){return(0,Y.Dv)("Query.endBefore",0,2,arguments.length),new Ko(this.database,Il(this._delegate,function rv(u,i){return Xd("endBefore","key",i,!0),new bm(u,i)}(i,o)))}equalTo(i,o){return(0,Y.Dv)("Query.equalTo",1,2,arguments.length),new Ko(this.database,Il(this._delegate,function zy(u,i){return Xd("equalTo","key",i,!0),new Sm(u,i)}(i,o)))}toString(){return(0,Y.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Y.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(i){if((0,Y.Dv)("Query.isEqual",1,1,arguments.length),!(i instanceof Ko))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(i._delegate)}static getCancelAndContextArgs_(i,o,d){const g={cancel:void 0,context:void 0};if(o&&d)g.cancel=o,(0,Y.Wj)(i,"cancel",g.cancel,!0),g.context=d,(0,Y.lb)(i,"context",g.context,!0);else if(o)if("object"==typeof o&&null!==o)g.context=o;else{if("function"!=typeof o)throw new Error((0,Y.gK)(i,"cancelOrContext")+" must either be a cancel callback or a context object.");g.cancel=o}return g}get ref(){return new qo(this.database,new ol(this._delegate._repo,this._delegate._path))}}class qo extends Ko{constructor(i,o){super(i,new wl(o._repo,o._path,new Oe,!1)),this.database=i,this._delegate=o}getKey(){return(0,Y.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(i){return(0,Y.Dv)("Reference.child",1,1,arguments.length),"number"==typeof i&&(i=String(i)),new qo(this.database,Bc(this._delegate,i))}getParent(){(0,Y.Dv)("Reference.parent",0,0,arguments.length);const i=this._delegate.parent;return i?new qo(this.database,i):null}getRoot(){return(0,Y.Dv)("Reference.root",0,0,arguments.length),new qo(this.database,this._delegate.root)}set(i,o){(0,Y.Dv)("Reference.set",1,2,arguments.length),(0,Y.Wj)("Reference.set","onComplete",o,!0);const d=Po(this._delegate,i);return o&&d.then(()=>o(null),g=>o(g)),d}update(i,o){if((0,Y.Dv)("Reference.update",1,2,arguments.length),Array.isArray(i)){const g={};for(let I=0;I<i.length;++I)g[""+I]=i[I];i=g,mg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}zl("Reference.update",this._delegate._path),(0,Y.Wj)("Reference.update","onComplete",o,!0);const d=tv(this._delegate,i);return o&&d.then(()=>o(null),g=>o(g)),d}setWithPriority(i,o,d){(0,Y.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Y.Wj)("Reference.setWithPriority","onComplete",d,!0);const g=function ev(u,i,o){if(zl("setWithPriority",u._path),sl("setWithPriority",i,u._path,!1),Gf("setWithPriority",o,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const d=new Y.BH;return qf(u._repo,u._path,i,o,d.wrapCallback(()=>{})),d.promise}(this._delegate,i,o);return d&&g.then(()=>d(null),I=>d(I)),g}remove(i){(0,Y.Dv)("Reference.remove",0,1,arguments.length),(0,Y.Wj)("Reference.remove","onComplete",i,!0);const o=function og(u){return zl("remove",u._path),Po(u,null)}(this._delegate);return i&&o.then(()=>i(null),d=>i(d)),o}transaction(i,o,d){(0,Y.Dv)("Reference.transaction",1,3,arguments.length),(0,Y.Wj)("Reference.transaction","transactionUpdate",i,!1),(0,Y.Wj)("Reference.transaction","onComplete",o,!0),function(u,i,o,d){if(void 0!==o&&"boolean"!=typeof o)throw new Error((0,Y.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,d);const g=function Ky(u,i,o){var d;if(u=(0,Y.m9)(u),zl("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const g=null===(d=null==o?void 0:o.applyLocally)||void 0===d||d,I=new Y.BH,U=ih(u,()=>{});return function Ma(u,i,o,d,g,I){ld(u,"transaction on "+i);const A={path:i,update:o,onComplete:d,status:null,order:Wa(),applyLocally:I,retryCount:0,unwatcher:g,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},U=eg(u,i,void 0);A.currentInputSnapshot=U;const Z=A.update(U.val());if(void 0===Z)A.unwatcher(),A.currentOutputSnapshotRaw=null,A.currentOutputSnapshotResolved=null,A.onComplete&&A.onComplete(null,!1,A.currentInputSnapshot);else{Qh("transaction failed: Data returned ",Z,A.path),A.status=0;const ie=Gp(u.transactionQueueTree_,i),Ze=Rc(ie)||[];let ot;Ze.push(A),od(ie,Ze),"object"==typeof Z&&null!==Z&&(0,Y.r3)(Z,".priority")?(ot=(0,Y.DV)(Z,".priority"),(0,Y.hu)(Nu(ot),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):ot=(Gh(u.serverSyncTree_,i)||br.EMPTY_NODE).getPriority().val();const Mt=Kf(u),Zt=Ui(Z,ot),Xt=zf(Zt,U,Mt);A.currentOutputSnapshotRaw=Zt,A.currentOutputSnapshotResolved=Xt,A.currentWriteId=Xh(u);const vn=zd(u.serverSyncTree_,i,Xt,A.currentWriteId,A.applyLocally);vl(u.eventQueue_,i,vn),Kr(u,u.transactionQueueTree_)}}(u._repo,u._path,i,(Z,ie,Ze)=>{let ot=null;Z?I.reject(Z):(ot=new hd(Ze,new ol(u._repo,u._path),Bi),I.resolve(new sp(ie,ot)))},U,g),I.promise}(this._delegate,i,{applyLocally:d}).then(I=>new Uc(I.committed,new Gl(this.database,I.snapshot)));return o&&g.then(I=>o(null,I.committed,I.snapshot),I=>o(I,!1,null)),g}setPriority(i,o){(0,Y.Dv)("Reference.setPriority",1,2,arguments.length),(0,Y.Wj)("Reference.setPriority","onComplete",o,!0);const d=function J_(u,i){u=(0,Y.m9)(u),zl("setPriority",u._path),Gf("setPriority",i,!1);const o=new Y.BH;return qf(u._repo,xr(u._path,".priority"),i,null,o.wrapCallback(()=>{})),o.promise}(this._delegate,i);return o&&d.then(()=>o(null),g=>o(g)),d}push(i,o){(0,Y.Dv)("Reference.push",0,2,arguments.length),(0,Y.Wj)("Reference.push","onComplete",o,!0);const d=function X_(u,i){u=(0,Y.m9)(u),zl("push",u._path),sl("push",i,u._path,!0);const o=mm(u._repo),d=Ly(o),g=Bc(u,d),I=Bc(u,d);let A;return A=null!=i?Po(I,i).then(()=>I):Promise.resolve(I),g.then=A.then.bind(A),g.catch=A.then.bind(A,void 0),g}(this._delegate,i),g=d.then(A=>new qo(this.database,A));o&&g.then(()=>o(null),A=>o(A));const I=new qo(this.database,d);return I.then=g.then.bind(g),I.catch=g.catch.bind(g,void 0),I}onDisconnect(){return zl("Reference.onDisconnect",this._delegate._path),new nf(new Q_(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class rf{constructor(i,o){this._delegate=i,this.app=o,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:iv,forceLongPolling:xm}}useEmulator(i,o,d={}){!function pg(u,i,o,d={}){(u=(0,Y.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Lr("Cannot call useEmulator() after instance has already been initialized.");const g=u._repoInternal;let I;if(g.repoInfo_.nodeAdmin)d.mockUserToken&&Lr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),I=new Cs(Cs.OWNER);else if(d.mockUserToken){const A="string"==typeof d.mockUserToken?d.mockUserToken:(0,Y.Sg)(d.mockUserToken,u.app.options.projectId);I=new Cs(A)}!function hg(u,i,o,d){u.repoInfo_=new Ls(`${i}:${o}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams,!0),d&&(u.authTokenProvider_=d)}(g,i,o,I)}(this._delegate,i,o,d)}ref(i){if((0,Y.Dv)("database.ref",0,1,arguments.length),i instanceof qo){const o=By(this._delegate,i.toString());return new qo(this,o)}{const o=fd(this._delegate,i);return new qo(this,o)}}refFromURL(i){(0,Y.Dv)("database.refFromURL",1,1,arguments.length);const d=By(this._delegate,i);return new qo(this,d)}goOffline(){return(0,Y.Dv)("database.goOffline",0,0,arguments.length),function Om(u){(u=(0,Y.m9)(u))._checkNotDeleted("goOffline"),Yf(u._repo)}(this._delegate)}goOnline(){return(0,Y.Dv)("database.goOnline",0,0,arguments.length),function sv(u){(u=(0,Y.m9)(u))._checkNotDeleted("goOnline"),function Zf(u){u.persistentConnection_&&u.persistentConnection_.resume(Oy)}(u._repo)}(this._delegate)}}rf.ServerValue={TIMESTAMP:function gg(){return Wy}(),increment:u=>function bl(u){return{".sv":{increment:u}}}(u)};var yg=Object.freeze({__proto__:null,initStandalone:function km({app:u,url:i,version:o,customAuthImpl:d,namespace:g,nodeAdmin:I=!1}){Qi(o);const A=new ht.zt("auth-internal",new ht.H0("database-standalone"));return A.setComponent(new ht.wA("auth-internal",()=>d,"PRIVATE")),{instance:new rf(tf(u,A,void 0,i,I),u),namespace:g}}});const _g=rf.ServerValue;function sh(u){return null==u}function ap(u){return"function"==typeof u.set}function _d(u,i){return ap(i)?i:u.ref(i)}function qy(u,i){if(function vg(u){return"string"==typeof u}(u))return i.stringCase();if(ap(u))return i.firebaseCase();if(function jc(u){return"function"==typeof u.exportVal}(u))return i.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function vd(u,i,o="on",d=is.z){return new ke.y(g=>{let I=null;return I=u[o](i,(A,U)=>{d.schedule(()=>{g.next({snapshot:A,prevKey:U})}),"once"===o&&d.schedule(()=>g.complete())},A=>{d.schedule(()=>g.error(A))}),"on"===o?{unsubscribe(){null!=I&&u.off(i,I)}}:{unsubscribe(){}}}).pipe((0,Te.U)(g=>{const{snapshot:I,prevKey:A}=g;let U=null;return I.exists()&&(U=I.key),{type:i,payload:I,prevKey:A,key:U}}),(0,ja.B)())}function Eg(u,i){const o=u.length;for(let d=0;d<o;d++)if(u[d].payload.key===i)return d;return-1}function sc(u,i){const{payload:o,prevKey:d,key:g}=i,I=Eg(u,g),A=function Yy(u,i){if(sh(i))return 0;{const o=Eg(u,i);return-1===o?u.length:o+1}}(u,d);switch(i.type){case"value":if(i.payload&&i.payload.exists()){let U=null;i.payload.forEach(Z=>{const ie={payload:Z,type:"value",prevKey:U,key:Z.key};return U=Z.key,u=[...u,ie],!1})}return u;case"child_added":if(I>-1){const U=u[I-1];(U&&U.key||null)!==d&&(u=u.filter(Z=>Z.payload.key!==o.key)).splice(A,0,i)}else{if(null==d)return[i,...u];(u=u.slice()).splice(A,0,i)}return u;case"child_removed":return u.filter(U=>U.payload.key!==o.key);case"child_changed":return u.map(U=>U.payload.key===g?i:U);case"child_moved":if(I>-1){const U=u.splice(I,1)[0];return(u=u.slice()).splice(A,0,U),u}return u;default:return u}}function wg(u){return(sh(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function dv(u,i,o){return function lp(u,i,o){return vd(u,"value","once",o).pipe((0,Ie.w)(d=>{const g=[(0,je.of)(d)];return i.forEach(I=>g.push(vd(u,I,"on",o))),(0,fu.T)(...g).pipe((0,ro.R)(sc,[]))}),(0,Tl.x)())}(u,i=wg(i),o)}function Zy(u,i,o){const d=(i=wg(i)).map(g=>vd(u,g,"on",o));return(0,fu.T)(...d)}function Ig(u,i){return function(d,g){return qy(d,{stringCase:()=>u.child(d)[i](g),firebaseCase:()=>d[i](g),snapshotCase:()=>d.ref[i](g)})}}function fv(u){return function(o){return o?qy(o,{stringCase:()=>u.child(o).remove(),firebaseCase:()=>o.remove(),snapshotCase:()=>o.ref.remove()}):u.remove()}}function Lm(u,i){return function(){return vd(u,"value","on",i)}}!function Vc(u){u.INTERNAL.registerComponent(new ht.wA("database-compat",(i,{instanceIdentifier:o})=>{const d=i.getProvider("app-compat").getImmediate(),g=i.getProvider("database").getImmediate({identifier:o});return new rf(g,d)},"PUBLIC").setServiceProps({Reference:qo,Query:Ko,Database:rf,DataSnapshot:Gl,enableLogging:xa,INTERNAL:yg,ServerValue:_g}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.3.4")}(dt.Z);const pv=new y.OlP("angularfire2.realtimeDatabaseURL"),cp=new y.OlP("angularfire2.database.use-emulator");let Jy=(()=>{class u{constructor(o,d,g,I,A,U,Z,ie,Ze,ot,Mt,Zt,Xt,vn,ur){this.schedulers=U;const Zr=Z,Si=(0,me.on)(o,A,d);ie&&(0,De.nw)(Si,A,Ze,Mt,Zt,Xt,ot,vn),this.database=(0,me.cc)(`${Si.name}.database.${g}`,"AngularFireDatabase",Si.name,()=>{const Pi=A.runOutsideAngular(()=>Si.database(g||void 0));return Zr&&Pi.useEmulator(...Zr),Pi},[Zr])}list(o,d){const g=this.schedulers.ngZone.runOutsideAngular(()=>_d(this.database,o));let I=g;return d&&(I=d(g)),function Fm(u,i){const o=i.schedulers.outsideAngular,d=i.schedulers.ngZone.run(()=>u.ref);return{query:u,update:Ig(d,"update"),set:Ig(d,"set"),push:g=>d.push(g),remove:fv(d),snapshotChanges:g=>dv(u,g,o).pipe(ae.iC),stateChanges:g=>Zy(u,g,o).pipe(ae.iC),auditTrail:g=>function Qy(u,i,o){return function hv(u,i,o){return function Xy(u,i){return vd(u,"value","on",i).pipe((0,Te.U)(o=>{let d;return o.payload.forEach(g=>(d=g.key,!1)),{data:o,lastKeyToLoad:d}}))}(u,o).pipe(function io(...u){const i=(0,ks.jO)(u);return(0,cl.e)((o,d)=>{const g=u.length,I=new Array(g);let A=u.map(()=>!1),U=!1;for(let Z=0;Z<g;Z++)(0,Ns.Xf)(u[Z]).subscribe((0,Sl.x)(d,ie=>{I[Z]=ie,!U&&!A[Z]&&(A[Z]=!0,(U=A.every(Ha.y))&&(A=null))},ds.Z));o.subscribe((0,Sl.x)(d,Z=>{if(U){const ie=[Z,...I];d.next(i?i(...ie):ie)}}))})}(i),(0,Te.U)(([g,I])=>{const A=g.lastKeyToLoad,U=I.map(Z=>Z.key);return{actions:I,lastKeyToLoad:A,loadedKeys:U}}),function mo(u){return(0,cl.e)((i,o)=>{let d=!1,g=0;i.subscribe((0,Sl.x)(o,I=>(d||(d=!u(I,g++)))&&o.next(I)))})}(g=>-1===g.loadedKeys.indexOf(g.lastKeyToLoad)),(0,Te.U)(g=>g.actions))}(u,Zy(u,i).pipe((0,ro.R)((g,I)=>[...g,I],[])),o)}(u,g,o).pipe(ae.iC),valueChanges:(g,I)=>dv(u,g,o).pipe((0,Te.U)(U=>U.map(Z=>I&&I.idField?Object.assign(Object.assign({},Z.payload.val()),{[I.idField]:Z.key}):Z.payload.val())),ae.iC)}}(I,this)}object(o){return function up(u,i){return{query:u,snapshotChanges:()=>Lm(u,i.schedulers.outsideAngular)().pipe(ae.iC),update:o=>u.ref.update(o),set:o=>u.ref.set(o),remove:()=>u.ref.remove(),valueChanges:()=>Lm(u,i.schedulers.outsideAngular)().pipe(ae.iC,(0,Te.U)(d=>d.payload.exists()?d.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>_d(this.database,o)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(o){return new(o||u)(y.LFG(me.Dh),y.LFG(me.xv,8),y.LFG(pv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(ae.HU),y.LFG(cp,8),y.LFG(De.zQ,8),y.LFG(De.Qv,8),y.LFG(De.L6,8),y.LFG(De._Q,8),y.LFG(De.rT,8),y.LFG(De.lh,8),y.LFG(De.f7,8),y.LFG(Ar.nm,8))},u.\u0275prov=y.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Bm=(()=>{class u{constructor(){Nn.Z.registerVersion("angularfire",ae.q4.full,"rtdb-compat")}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=y.oAB({type:u}),u.\u0275inj=y.cJS({providers:[Jy]}),u})();var gs=B(7340);function oh(u){return new y.vHH(3e3,!1)}function Hm(){return typeof window<"u"&&typeof window.document<"u"}function Sg(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ac(u){switch(u.length){case 0:return new gs.ZN;case 1:return u[0];default:return new gs.ZE(u)}}function o_(u,i,o,d,g=new Map,I=new Map){const A=[],U=[];let Z=-1,ie=null;if(d.forEach(Ze=>{const ot=Ze.get("offset"),Mt=ot==Z,Zt=Mt&&ie||new Map;Ze.forEach((Xt,vn)=>{let ur=vn,Zr=Xt;if("offset"!==vn)switch(ur=i.normalizePropertyName(ur,A),Zr){case gs.k1:Zr=g.get(vn);break;case gs.l3:Zr=I.get(vn);break;default:Zr=i.normalizeStyleValue(vn,ur,Zr,A)}Zt.set(ur,Zr)}),Mt||U.push(Zt),ie=Zt,Z=ot}),A.length)throw function af(u){return new y.vHH(3502,!1)}();return U}function df(u,i,o,d){switch(i){case"start":u.onStart(()=>d(o&&zm(o,"start",u)));break;case"done":u.onDone(()=>d(o&&zm(o,"done",u)));break;case"destroy":u.onDestroy(()=>d(o&&zm(o,"destroy",u)))}}function zm(u,i,o){const d=o.totalTime,I=hf(u.element,u.triggerName,u.fromState,u.toState,i||u.phaseName,null==d?u.totalTime:d,!!o.disabled),A=u._data;return null!=A&&(I._data=A),I}function hf(u,i,o,d,g="",I=0,A){return{element:u,triggerName:i,fromState:o,toState:d,phaseName:g,totalTime:I,disabled:!!A}}function al(u,i,o){let d=u.get(i);return d||u.set(i,d=o),d}function ff(u){const i=u.indexOf(":");return[u.substring(1,i),u.slice(i+1)]}let pp=(u,i)=>!1,ph=(u,i,o)=>[],lc=null;function pf(u){const i=u.parentNode||u.host;return i===lc?null:i}(Sg()||typeof Element<"u")&&(Hm()?(lc=(()=>document.documentElement)(),pp=(u,i)=>{for(;i;){if(i===u)return!0;i=pf(i)}return!1}):pp=(u,i)=>u.contains(i),ph=(u,i,o)=>{if(o)return Array.from(u.querySelectorAll(i));const d=u.querySelector(i);return d?[d]:[]});let au=null,lu=!1;const Gm=pp,xg=ph;let u_=(()=>{class u{validateStyleProperty(o){return function Mg(u){au||(au=function Rg(){return typeof document<"u"?document.body:null}()||{},lu=!!au.style&&"WebkitAppearance"in au.style);let i=!0;return au.style&&!function Ag(u){return"ebkit"==u.substring(1,6)}(u)&&(i=u in au.style,!i&&lu&&(i="Webkit"+u.charAt(0).toUpperCase()+u.slice(1)in au.style)),i}(o)}matchesElement(o,d){return!1}containsElement(o,d){return Gm(o,d)}getParentElement(o){return pf(o)}query(o,d,g){return xg(o,d,g)}computeStyle(o,d,g){return g||""}animate(o,d,g,I,A,U=[],Z){return new gs.ZN(g,I)}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275prov=y.Yz7({token:u,factory:u.\u0275fac}),u})(),gf=(()=>{class u{}return u.NOOP=new u_,u})();const c_=1e3,mp="ng-enter",mf="ng-leave",gh="ng-trigger",yf=".ng-trigger",Pg="ng-animating",Og=".ng-animating";function uu(u){if("number"==typeof u)return u;const i=u.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:Ng(parseFloat(i[1]),i[2])}function Ng(u,i){return"s"===i?u*c_:u}function mh(u,i,o){return u.hasOwnProperty("duration")?u:function kg(u,i,o){let g,I=0,A="";if("string"==typeof u){const U=u.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===U)return i.push(oh()),{duration:0,delay:0,easing:""};g=Ng(parseFloat(U[1]),U[2]);const Z=U[3];null!=Z&&(I=Ng(parseFloat(Z),U[4]));const ie=U[5];ie&&(A=ie)}else g=u;if(!o){let U=!1,Z=i.length;g<0&&(i.push(function Ed(){return new y.vHH(3100,!1)}()),U=!0),I<0&&(i.push(function $m(){return new y.vHH(3101,!1)}()),U=!0),U&&i.splice(Z,0,oh())}return{duration:g,delay:I,easing:A}}(u,i,o)}function bd(u,i={}){return Object.keys(u).forEach(o=>{i[o]=u[o]}),i}function Km(u){const i=new Map;return Object.keys(u).forEach(o=>{i.set(o,u[o])}),i}function ya(u,i=new Map,o){if(o)for(let[d,g]of o)i.set(d,g);for(let[d,g]of u)i.set(d,g);return i}function qm(u,i,o){return o?i+":"+o+";":""}function yh(u){let i="";for(let o=0;o<u.style.length;o++){const d=u.style.item(o);i+=qm(0,d,u.style.getPropertyValue(d))}for(const o in u.style)u.style.hasOwnProperty(o)&&!o.startsWith("_")&&(i+=qm(0,h_(o),u.style[o]));u.setAttribute("style",i)}function Wl(u,i,o){u.style&&(i.forEach((d,g)=>{const I=Ef(g);o&&!o.has(g)&&o.set(g,u.style[I]),u.style[I]=d}),Sg()&&yh(u))}function Pa(u,i){u.style&&(i.forEach((o,d)=>{const g=Ef(d);u.style[g]=""}),Sg()&&yh(u))}function _h(u){return Array.isArray(u)?1==u.length?u[0]:(0,gs.vP)(u):u}const _p=new RegExp("{{\\s*(.+?)\\s*}}","g");function yv(u){let i=[];if("string"==typeof u){let o;for(;o=_p.exec(u);)i.push(o[1]);_p.lastIndex=0}return i}function vh(u,i,o){const d=u.toString(),g=d.replace(_p,(I,A)=>{let U=i[A];return null==U&&(o.push(function lh(u){return new y.vHH(3003,!1)}()),U=""),U.toString()});return g==d?u:g}function vf(u){const i=[];let o=u.next();for(;!o.done;)i.push(o.value),o=u.next();return i}const Ym=/-+([a-z0-9])/g;function Ef(u){return u.replace(Ym,(...i)=>i[1].toUpperCase())}function h_(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Oa(u,i,o){switch(i.type){case 7:return u.visitTrigger(i,o);case 0:return u.visitState(i,o);case 1:return u.visitTransition(i,o);case 2:return u.visitSequence(i,o);case 3:return u.visitGroup(i,o);case 4:return u.visitAnimate(i,o);case 5:return u.visitKeyframes(i,o);case 6:return u.visitStyle(i,o);case 8:return u.visitReference(i,o);case 9:return u.visitAnimateChild(i,o);case 10:return u.visitAnimateRef(i,o);case 11:return u.visitQuery(i,o);case 12:return u.visitStagger(i,o);default:throw function t_(u){return new y.vHH(3004,!1)}()}}function Lg(u,i){return window.getComputedStyle(u)[i]}const Ep="*";function _v(u,i){const o=[];return"string"==typeof u?u.split(/\s*,\s*/).forEach(d=>function p_(u,i,o){if(":"==u[0]){const Z=function vv(u,i){switch(u){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,d)=>parseFloat(d)>parseFloat(o);case":decrement":return(o,d)=>parseFloat(d)<parseFloat(o);default:return i.push(function bg(u){return new y.vHH(3016,!1)}()),"* => *"}}(u,o);if("function"==typeof Z)return void i.push(Z);u=Z}const d=u.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==d||d.length<4)return o.push(function ou(u){return new y.vHH(3015,!1)}()),i;const g=d[1],I=d[2],A=d[3];i.push(Fu(g,A));"<"==I[0]&&!(g==Ep&&A==Ep)&&i.push(Fu(A,g))}(d,o,i)):o.push(u),o}const If=new Set(["true","1"]),Ih=new Set(["false","0"]);function Fu(u,i){const o=If.has(u)||Ih.has(u),d=If.has(i)||Ih.has(i);return(g,I)=>{let A=u==Ep||u==g,U=i==Ep||i==I;return!A&&o&&"boolean"==typeof g&&(A=g?If.has(u):Ih.has(u)),!U&&d&&"boolean"==typeof I&&(U=I?If.has(i):Ih.has(i)),A&&U}}const m_=new RegExp("s*:selfs*,?","g");function cu(u,i,o,d){return new ql(u).build(i,o,d)}class ql{constructor(i){this._driver=i}build(i,o,d){const g=new y_(o);return this._resetContextStyleTimingState(g),Oa(this,_h(i),g)}_resetContextStyleTimingState(i){i.currentQuerySelector="",i.collectedStyles=new Map,i.collectedStyles.set("",new Map),i.currentTime=0}visitTrigger(i,o){let d=o.queryCount=0,g=o.depCount=0;const I=[],A=[];return"@"==i.name.charAt(0)&&o.errors.push(function n_(){return new y.vHH(3006,!1)}()),i.definitions.forEach(U=>{if(this._resetContextStyleTimingState(o),0==U.type){const Z=U,ie=Z.name;ie.toString().split(/\s*,\s*/).forEach(Ze=>{Z.name=Ze,I.push(this.visitState(Z,o))}),Z.name=ie}else if(1==U.type){const Z=this.visitTransition(U,o);d+=Z.queryCount,g+=Z.depCount,A.push(Z)}else o.errors.push(function Vv(){return new y.vHH(3007,!1)}())}),{type:7,name:i.name,states:I,transitions:A,queryCount:d,depCount:g,options:null}}visitState(i,o){const d=this.visitStyle(i.styles,o),g=i.options&&i.options.params||null;if(d.containsDynamicStyles){const I=new Set,A=g||{};d.styles.forEach(U=>{U instanceof Map&&U.forEach(Z=>{yv(Z).forEach(ie=>{A.hasOwnProperty(ie)||I.add(ie)})})}),I.size&&(vf(I.values()),o.errors.push(function sf(u,i){return new y.vHH(3008,!1)}()))}return{type:0,name:i.name,style:d,options:g?{params:g}:null}}visitTransition(i,o){o.queryCount=0,o.depCount=0;const d=Oa(this,_h(i.animation),o);return{type:1,matchers:_v(i.expr,o.errors),animation:d,queryCount:o.queryCount,depCount:o.depCount,options:Cd(i.options)}}visitSequence(i,o){return{type:2,steps:i.steps.map(d=>Oa(this,d,o)),options:Cd(i.options)}}visitGroup(i,o){const d=o.currentTime;let g=0;const I=i.steps.map(A=>{o.currentTime=d;const U=Oa(this,A,o);return g=Math.max(g,o.currentTime),U});return o.currentTime=g,{type:3,steps:I,options:Cd(i.options)}}visitAnimate(i,o){const d=function Vi(u,i){if(u.hasOwnProperty("duration"))return u;if("number"==typeof u)return bf(mh(u,i).duration,0,"");const o=u;if(o.split(/\s+/).some(I=>"{"==I.charAt(0)&&"{"==I.charAt(1))){const I=bf(0,0,"");return I.dynamic=!0,I.strValue=o,I}const g=mh(o,i);return bf(g.duration,g.delay,g.easing)}(i.timings,o.errors);o.currentAnimateTimings=d;let g,I=i.styles?i.styles:(0,gs.oB)({});if(5==I.type)g=this.visitKeyframes(I,o);else{let A=i.styles,U=!1;if(!A){U=!0;const ie={};d.easing&&(ie.easing=d.easing),A=(0,gs.oB)(ie)}o.currentTime+=d.duration+d.delay;const Z=this.visitStyle(A,o);Z.isEmptyStep=U,g=Z}return o.currentAnimateTimings=null,{type:4,timings:d,style:g,options:null}}visitStyle(i,o){const d=this._makeStyleAst(i,o);return this._validateStyleAst(d,o),d}_makeStyleAst(i,o){const d=[],g=Array.isArray(i.styles)?i.styles:[i.styles];for(let U of g)"string"==typeof U?U===gs.l3?d.push(U):o.errors.push(new y.vHH(3002,!1)):d.push(Km(U));let I=!1,A=null;return d.forEach(U=>{if(U instanceof Map&&(U.has("easing")&&(A=U.get("easing"),U.delete("easing")),!I))for(let Z of U.values())if(Z.toString().indexOf("{{")>=0){I=!0;break}}),{type:6,styles:d,easing:A,offset:i.offset,containsDynamicStyles:I,options:null}}_validateStyleAst(i,o){const d=o.currentAnimateTimings;let g=o.currentTime,I=o.currentTime;d&&I>0&&(I-=d.duration+d.delay),i.styles.forEach(A=>{"string"!=typeof A&&A.forEach((U,Z)=>{const ie=o.collectedStyles.get(o.currentQuerySelector),Ze=ie.get(Z);let ot=!0;Ze&&(I!=g&&I>=Ze.startTime&&g<=Ze.endTime&&(o.errors.push(function hp(u,i,o,d,g){return new y.vHH(3010,!1)}()),ot=!1),I=Ze.startTime),ot&&ie.set(Z,{startTime:I,endTime:g}),o.options&&function mv(u,i,o){const d=i.params||{},g=yv(u);g.length&&g.forEach(I=>{d.hasOwnProperty(I)||o.push(function ah(u){return new y.vHH(3001,!1)}())})}(U,o.options,o.errors)})})}visitKeyframes(i,o){const d={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push(function gv(){return new y.vHH(3011,!1)}()),d;let I=0;const A=[];let U=!1,Z=!1,ie=0;const Ze=i.steps.map(Zr=>{const Si=this._makeStyleAst(Zr,o);let Pi=null!=Si.offset?Si.offset:function $g(u){if("string"==typeof u)return null;let i=null;if(Array.isArray(u))u.forEach(o=>{if(o instanceof Map&&o.has("offset")){const d=o;i=parseFloat(d.get("offset")),d.delete("offset")}});else if(u instanceof Map&&u.has("offset")){const o=u;i=parseFloat(o.get("offset")),o.delete("offset")}return i}(Si.styles),ki=0;return null!=Pi&&(I++,ki=Si.offset=Pi),Z=Z||ki<0||ki>1,U=U||ki<ie,ie=ki,A.push(ki),Si});Z&&o.errors.push(function oc(){return new y.vHH(3012,!1)}()),U&&o.errors.push(function uh(){return new y.vHH(3200,!1)}());const ot=i.steps.length;let Mt=0;I>0&&I<ot?o.errors.push(function oa(){return new y.vHH(3202,!1)}()):0==I&&(Mt=1/(ot-1));const Zt=ot-1,Xt=o.currentTime,vn=o.currentAnimateTimings,ur=vn.duration;return Ze.forEach((Zr,Si)=>{const Pi=Mt>0?Si==Zt?1:Mt*Si:A[Si],ki=Pi*ur;o.currentTime=Xt+vn.delay+ki,vn.duration=ki,this._validateStyleAst(Zr,o),Zr.offset=Pi,d.styles.push(Zr)}),d}visitReference(i,o){return{type:8,animation:Oa(this,_h(i.animation),o),options:Cd(i.options)}}visitAnimateChild(i,o){return o.depCount++,{type:9,options:Cd(i.options)}}visitAnimateRef(i,o){return{type:10,animation:this.visitReference(i.animation,o),options:Cd(i.options)}}visitQuery(i,o){const d=o.currentQuerySelector,g=i.options||{};o.queryCount++,o.currentQuery=i;const[I,A]=function Qm(u){const i=!!u.split(/\s*,\s*/).find(o=>":self"==o);return i&&(u=u.replace(m_,"")),u=u.replace(/@\*/g,yf).replace(/@\w+/g,o=>yf+"-"+o.slice(1)).replace(/:animating/g,Og),[u,i]}(i.selector);o.currentQuerySelector=d.length?d+" "+I:I,al(o.collectedStyles,o.currentQuerySelector,new Map);const U=Oa(this,_h(i.animation),o);return o.currentQuery=null,o.currentQuerySelector=d,{type:11,selector:I,limit:g.limit||0,optional:!!g.optional,includeSelf:A,animation:U,originalSelector:i.selector,options:Cd(i.options)}}visitStagger(i,o){o.currentQuery||o.errors.push(function ch(){return new y.vHH(3013,!1)}());const d="full"===i.timings?{duration:0,delay:0,easing:"full"}:mh(i.timings,o.errors,!0);return{type:12,animation:Oa(this,_h(i.animation),o),timings:d,options:null}}}class y_{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Cd(u){return u?(u=bd(u)).params&&(u.params=function Xm(u){return u?bd(u):null}(u.params)):u={},u}function bf(u,i,o){return{duration:u,delay:i,easing:o}}function Lu(u,i,o,d,g,I,A=null,U=!1){return{type:1,element:u,keyframes:i,preStyleProps:o,postStyleProps:d,duration:g,delay:I,totalTime:g+I,easing:A,subTimeline:U}}class wp{constructor(){this._map=new Map}get(i){return this._map.get(i)||[]}append(i,o){let d=this._map.get(i);d||this._map.set(i,d=[]),d.push(...o)}has(i){return this._map.has(i)}clear(){this._map.clear()}}const uc=new RegExp(":enter","g"),__=new RegExp(":leave","g");function Hc(u,i,o,d,g,I=new Map,A=new Map,U,Z,ie=[]){return(new v_).buildKeyframes(u,i,o,d,g,I,A,U,Z,ie)}class v_{buildKeyframes(i,o,d,g,I,A,U,Z,ie,Ze=[]){ie=ie||new wp;const ot=new Ug(i,o,ie,g,I,Ze,[]);ot.options=Z;const Mt=Z.delay?uu(Z.delay):0;ot.currentTimeline.delayNextStep(Mt),ot.currentTimeline.setStyles([A],null,ot.errors,Z),Oa(this,d,ot);const Zt=ot.timelines.filter(Xt=>Xt.containsAnimation());if(Zt.length&&U.size){let Xt;for(let vn=Zt.length-1;vn>=0;vn--){const ur=Zt[vn];if(ur.element===o){Xt=ur;break}}Xt&&!Xt.allowOnlyTimelineStyles()&&Xt.setStyles([U],null,ot.errors,Z)}return Zt.length?Zt.map(Xt=>Xt.buildKeyframes()):[Lu(o,[],[],[],0,Mt,"",!1)]}visitTrigger(i,o){}visitState(i,o){}visitTransition(i,o){}visitAnimateChild(i,o){const d=o.subInstructions.get(o.element);if(d){const g=o.createSubContext(i.options),I=o.currentTimeline.currentTime,A=this._visitSubInstructions(d,g,g.options);I!=A&&o.transformIntoNewTimeline(A)}o.previousNode=i}visitAnimateRef(i,o){const d=o.createSubContext(i.options);d.transformIntoNewTimeline(),this._applyAnimationRefDelays([i.options,i.animation.options],o,d),this.visitReference(i.animation,d),o.transformIntoNewTimeline(d.currentTimeline.currentTime),o.previousNode=i}_applyAnimationRefDelays(i,o,d){for(const I of i){const A=null==I?void 0:I.delay;if(A){var g;const U="number"==typeof A?A:uu(vh(A,null!==(g=null==I?void 0:I.params)&&void 0!==g?g:{},o.errors));d.delayNextStep(U)}}}_visitSubInstructions(i,o,d){let I=o.currentTimeline.currentTime;const A=null!=d.duration?uu(d.duration):null,U=null!=d.delay?uu(d.delay):null;return 0!==A&&i.forEach(Z=>{const ie=o.appendInstructionToTimeline(Z,A,U);I=Math.max(I,ie.duration+ie.delay)}),I}visitReference(i,o){o.updateOptions(i.options,!0),Oa(this,i.animation,o),o.previousNode=i}visitSequence(i,o){const d=o.subContextCount;let g=o;const I=i.options;if(I&&(I.params||I.delay)&&(g=o.createSubContext(I),g.transformIntoNewTimeline(),null!=I.delay)){6==g.previousNode.type&&(g.currentTimeline.snapshotCurrentStyles(),g.previousNode=bh);const A=uu(I.delay);g.delayNextStep(A)}i.steps.length&&(i.steps.forEach(A=>Oa(this,A,g)),g.currentTimeline.applyStylesToKeyframe(),g.subContextCount>d&&g.transformIntoNewTimeline()),o.previousNode=i}visitGroup(i,o){const d=[];let g=o.currentTimeline.currentTime;const I=i.options&&i.options.delay?uu(i.options.delay):0;i.steps.forEach(A=>{const U=o.createSubContext(i.options);I&&U.delayNextStep(I),Oa(this,A,U),g=Math.max(g,U.currentTimeline.currentTime),d.push(U.currentTimeline)}),d.forEach(A=>o.currentTimeline.mergeTimelineCollectedStyles(A)),o.transformIntoNewTimeline(g),o.previousNode=i}_visitTiming(i,o){if(i.dynamic){const d=i.strValue;return mh(o.params?vh(d,o.params,o.errors):d,o.errors)}return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,o){const d=o.currentAnimateTimings=this._visitTiming(i.timings,o),g=o.currentTimeline;d.delay&&(o.incrementTime(d.delay),g.snapshotCurrentStyles());const I=i.style;5==I.type?this.visitKeyframes(I,o):(o.incrementTime(d.duration),this.visitStyle(I,o),g.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=i}visitStyle(i,o){const d=o.currentTimeline,g=o.currentAnimateTimings;!g&&d.hasCurrentStyleProperties()&&d.forwardFrame();const I=g&&g.easing||i.easing;i.isEmptyStep?d.applyEmptyStep(I):d.setStyles(i.styles,I,o.errors,o.options),o.previousNode=i}visitKeyframes(i,o){const d=o.currentAnimateTimings,g=o.currentTimeline.duration,I=d.duration,U=o.createSubContext().currentTimeline;U.easing=d.easing,i.styles.forEach(Z=>{U.forwardTime((Z.offset||0)*I),U.setStyles(Z.styles,Z.easing,o.errors,o.options),U.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles(U),o.transformIntoNewTimeline(g+I),o.previousNode=i}visitQuery(i,o){const d=o.currentTimeline.currentTime,g=i.options||{},I=g.delay?uu(g.delay):0;I&&(6===o.previousNode.type||0==d&&o.currentTimeline.hasCurrentStyleProperties())&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=bh);let A=d;const U=o.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!g.optional,o.errors);o.currentQueryTotal=U.length;let Z=null;U.forEach((ie,Ze)=>{o.currentQueryIndex=Ze;const ot=o.createSubContext(i.options,ie);I&&ot.delayNextStep(I),ie===o.element&&(Z=ot.currentTimeline),Oa(this,i.animation,ot),ot.currentTimeline.applyStylesToKeyframe(),A=Math.max(A,ot.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(A),Z&&(o.currentTimeline.mergeTimelineCollectedStyles(Z),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=i}visitStagger(i,o){const d=o.parentContext,g=o.currentTimeline,I=i.timings,A=Math.abs(I.duration),U=A*(o.currentQueryTotal-1);let Z=A*o.currentQueryIndex;switch(I.duration<0?"reverse":I.easing){case"reverse":Z=U-Z;break;case"full":Z=d.currentStaggerTime}const Ze=o.currentTimeline;Z&&Ze.delayNextStep(Z);const ot=Ze.currentTime;Oa(this,i.animation,o),o.previousNode=i,d.currentStaggerTime=g.currentTime-ot+(g.startTime-d.currentTimeline.startTime)}}const bh={};class Ug{constructor(i,o,d,g,I,A,U,Z){this._driver=i,this.element=o,this.subInstructions=d,this._enterClassName=g,this._leaveClassName=I,this.errors=A,this.timelines=U,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bh,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Z||new Dd(this._driver,o,0),U.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,o){if(!i)return;const d=i;let g=this.options;null!=d.duration&&(g.duration=uu(d.duration)),null!=d.delay&&(g.delay=uu(d.delay));const I=d.params;if(I){let A=g.params;A||(A=this.options.params={}),Object.keys(I).forEach(U=>{(!o||!A.hasOwnProperty(U))&&(A[U]=vh(I[U],A,this.errors))})}}_copyOptions(){const i={};if(this.options){const o=this.options.params;if(o){const d=i.params={};Object.keys(o).forEach(g=>{d[g]=o[g]})}}return i}createSubContext(i=null,o,d){const g=o||this.element,I=new Ug(this._driver,g,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(g,d||0));return I.previousNode=this.previousNode,I.currentAnimateTimings=this.currentAnimateTimings,I.options=this._copyOptions(),I.updateOptions(i),I.currentQueryIndex=this.currentQueryIndex,I.currentQueryTotal=this.currentQueryTotal,I.parentContext=this,this.subContextCount++,I}transformIntoNewTimeline(i){return this.previousNode=bh,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,o,d){const g={duration:null!=o?o:i.duration,delay:this.currentTimeline.currentTime+(null!=d?d:0)+i.delay,easing:""},I=new Vg(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,g,i.stretchStartingKeyframe);return this.timelines.push(I),g}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,o,d,g,I,A){let U=[];if(g&&U.push(this.element),i.length>0){i=(i=i.replace(uc,"."+this._enterClassName)).replace(__,"."+this._leaveClassName);let ie=this._driver.query(this.element,i,1!=d);0!==d&&(ie=d<0?ie.slice(ie.length+d,ie.length):ie.slice(0,d)),U.push(...ie)}return!I&&0==U.length&&A.push(function fp(u){return new y.vHH(3014,!1)}()),U}}class Dd{constructor(i,o,d,g){this._driver=i,this.element=o,this.startTime=d,this._elementTimelineStylesLookup=g,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(i){const o=1===this._keyframes.size&&this._pendingStyles.size;this.duration||o?(this.forwardTime(this.currentTime+i),o&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,o){return this.applyStylesToKeyframe(),new Dd(this._driver,i,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,o){this._localTimelineStyles.set(i,o),this._globalTimelineStyles.set(i,o),this._styleSummary.set(i,{time:this.currentTime,value:o})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&this._previousKeyframe.set("easing",i);for(let[o,d]of this._globalTimelineStyles)this._backFill.set(o,d||gs.l3),this._currentKeyframe.set(o,gs.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,o,d,g){o&&this._previousKeyframe.set("easing",o);const I=g&&g.params||{},A=function xs(u,i){const o=new Map;let d;return u.forEach(g=>{if("*"===g){d=d||i.keys();for(let I of d)o.set(I,gs.l3)}else ya(g,o)}),o}(i,this._globalTimelineStyles);for(let[Z,ie]of A){const Ze=vh(ie,I,d);var U;this._pendingStyles.set(Z,Ze),this._localTimelineStyles.has(Z)||this._backFill.set(Z,null!==(U=this._globalTimelineStyles.get(Z))&&void 0!==U?U:gs.l3),this._updateStyle(Z,Ze)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((i,o)=>{this._currentKeyframe.set(o,i)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i,o)=>{this._currentKeyframe.has(o)||this._currentKeyframe.set(o,i)}))}snapshotCurrentStyles(){for(let[i,o]of this._localTimelineStyles)this._pendingStyles.set(i,o),this._updateStyle(i,o)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const i=[];for(let o in this._currentKeyframe)i.push(o);return i}mergeTimelineCollectedStyles(i){i._styleSummary.forEach((o,d)=>{const g=this._styleSummary.get(d);(!g||o.time>g.time)&&this._updateStyle(d,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const i=new Set,o=new Set,d=1===this._keyframes.size&&0===this.duration;let g=[];this._keyframes.forEach((U,Z)=>{const ie=ya(U,new Map,this._backFill);ie.forEach((Ze,ot)=>{Ze===gs.k1?i.add(ot):Ze===gs.l3&&o.add(ot)}),d||ie.set("offset",Z/this.duration),g.push(ie)});const I=i.size?vf(i.values()):[],A=o.size?vf(o.values()):[];if(d){const U=g[0],Z=new Map(U);U.set("offset",0),Z.set("offset",1),g=[U,Z]}return Lu(this.element,g,I,A,this.duration,this.startTime,this.easing,!1)}}class Vg extends Dd{constructor(i,o,d,g,I,A,U=!1){super(i,o,A.delay),this.keyframes=d,this.preStyleProps=g,this.postStyleProps=I,this._stretchStartingKeyframe=U,this.timings={duration:A.duration,delay:A.delay,easing:A.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:o,duration:d,easing:g}=this.timings;if(this._stretchStartingKeyframe&&o){const I=[],A=d+o,U=o/A,Z=ya(i[0]);Z.set("offset",0),I.push(Z);const ie=ya(i[0]);ie.set("offset",ey(U)),I.push(ie);const Ze=i.length-1;for(let ot=1;ot<=Ze;ot++){let Mt=ya(i[ot]);const Zt=Mt.get("offset");Mt.set("offset",ey((o+Zt*d)/A)),I.push(Mt)}d=A,o=0,g="",i=I}return Lu(this.element,i,this.preStyleProps,this.postStyleProps,d,o,g,!0)}}function ey(u,i=3){const o=Math.pow(10,i-1);return Math.round(u*o)/o}class ty{}const ny=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class E_ extends ty{normalizePropertyName(i,o){return Ef(i)}normalizeStyleValue(i,o,d,g){let I="";const A=d.toString().trim();if(ny.has(o)&&0!==d&&"0"!==d)if("number"==typeof d)I="px";else{const U=d.match(/^[+-]?[\d\.]+([a-z]*)$/);U&&0==U[1].length&&g.push(function dp(u,i){return new y.vHH(3005,!1)}())}return A+I}}function ry(u,i,o,d,g,I,A,U,Z,ie,Ze,ot,Mt){return{type:0,element:u,triggerName:i,isRemovalTransition:g,fromState:o,fromStyles:I,toState:d,toStyles:A,timelines:U,queriedElements:Z,preStyleProps:ie,postStyleProps:Ze,totalTime:ot,errors:Mt}}const jg={};class w_{constructor(i,o,d){this._triggerName=i,this.ast=o,this._stateStyles=d}match(i,o,d,g){return function Ev(u,i,o,d,g){return u.some(I=>I(i,o,d,g))}(this.ast.matchers,i,o,d,g)}buildStyles(i,o,d){let g=this._stateStyles.get("*");return void 0!==i&&(g=this._stateStyles.get(null==i?void 0:i.toString())||g),g?g.buildStyles(o,d):new Map}build(i,o,d,g,I,A,U,Z,ie,Ze){var ot;const Mt=[],Zt=this.ast.options&&this.ast.options.params||jg,vn=this.buildStyles(d,U&&U.params||jg,Mt),ur=Z&&Z.params||jg,Zr=this.buildStyles(g,ur,Mt),Si=new Set,Pi=new Map,ki=new Map,ll="void"===g,Na={params:wv(ur,Zt),delay:null===(ot=this.ast.options)||void 0===ot?void 0:ot.delay},va=Ze?[]:Hc(i,o,this.ast.animation,I,A,vn,Zr,Na,ie,Mt);let aa=0;if(va.forEach(Bu=>{aa=Math.max(Bu.duration+Bu.delay,aa)}),Mt.length)return ry(o,this._triggerName,d,g,ll,vn,Zr,[],[],Pi,ki,aa,Mt);va.forEach(Bu=>{const pc=Bu.element,$u=al(Pi,pc,new Set);Bu.preStyleProps.forEach(Rh=>$u.add(Rh));const Xg=al(ki,pc,new Set);Bu.postStyleProps.forEach(Rh=>Xg.add(Rh)),pc!==o&&Si.add(pc)});const fc=vf(Si.values());return ry(o,this._triggerName,d,g,ll,vn,Zr,va,fc,Pi,ki,aa)}}function wv(u,i){const o=bd(i);for(const d in u)u.hasOwnProperty(d)&&null!=u[d]&&(o[d]=u[d]);return o}class zv{constructor(i,o,d){this.styles=i,this.defaultParams=o,this.normalizer=d}buildStyles(i,o){const d=new Map,g=bd(this.defaultParams);return Object.keys(i).forEach(I=>{const A=i[I];null!==A&&(g[I]=A)}),this.styles.styles.forEach(I=>{"string"!=typeof I&&I.forEach((A,U)=>{A&&(A=vh(A,g,o));const Z=this.normalizer.normalizePropertyName(U,o);A=this.normalizer.normalizeStyleValue(U,Z,A,o),d.set(U,A)})}),d}}class bv{constructor(i,o,d){this.name=i,this.ast=o,this._normalizer=d,this.transitionFactories=[],this.states=new Map,o.states.forEach(g=>{this.states.set(g.name,new zv(g.style,g.options&&g.options.params||{},d))}),Cf(this.states,"true","1"),Cf(this.states,"false","0"),o.transitions.forEach(g=>{this.transitionFactories.push(new w_(i,g,this.states))}),this.fallbackTransition=function I_(u,i,o){return new w_(u,{type:1,animation:{type:2,steps:[],options:null},matchers:[(A,U)=>!0],options:null,queryCount:0,depCount:0},i)}(i,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,o,d,g){return this.transitionFactories.find(A=>A.match(i,o,d,g))||null}matchStyles(i,o,d){return this.fallbackTransition.buildStyles(i,o,d)}}function Cf(u,i,o){u.has(i)?u.has(o)||u.set(o,u.get(i)):u.has(o)&&u.set(i,u.get(o))}const Cv=new wp;class cc{constructor(i,o,d){this.bodyNode=i,this._driver=o,this._normalizer=d,this._animations=new Map,this._playersById=new Map,this.players=[]}register(i,o){const d=[],g=[],I=cu(this._driver,o,d,g);if(d.length)throw function lf(u){return new y.vHH(3503,!1)}();this._animations.set(i,I)}_buildPlayer(i,o,d){const g=i.element,I=o_(0,this._normalizer,0,i.keyframes,o,d);return this._driver.animate(g,I,i.duration,i.delay,i.easing,[],!0)}create(i,o,d={}){const g=[],I=this._animations.get(i);let A;const U=new Map;if(I?(A=Hc(this._driver,o,I,mp,mf,new Map,new Map,d,Cv,g),A.forEach(Ze=>{const ot=al(U,Ze.element,new Map);Ze.postStyleProps.forEach(Mt=>ot.set(Mt,null))})):(g.push(function uf(){return new y.vHH(3300,!1)}()),A=[]),g.length)throw function cf(u){return new y.vHH(3504,!1)}();U.forEach((Ze,ot)=>{Ze.forEach((Mt,Zt)=>{Ze.set(Zt,this._driver.computeStyle(ot,Zt,gs.l3))})});const ie=ac(A.map(Ze=>{const ot=U.get(Ze.element);return this._buildPlayer(Ze,new Map,ot)}));return this._playersById.set(i,ie),ie.onDestroy(()=>this.destroy(i)),this.players.push(ie),ie}destroy(i){const o=this._getPlayer(i);o.destroy(),this._playersById.delete(i);const d=this.players.indexOf(o);d>=0&&this.players.splice(d,1)}_getPlayer(i){const o=this._playersById.get(i);if(!o)throw function wd(u){return new y.vHH(3301,!1)}();return o}listen(i,o,d,g){const I=hf(o,"","","");return df(this._getPlayer(i),d,I,g),()=>{}}command(i,o,d,g){if("register"==d)return void this.register(i,g[0]);if("create"==d)return void this.create(i,o,g[0]||{});const I=this._getPlayer(i);switch(d){case"play":I.play();break;case"pause":I.pause();break;case"reset":I.reset();break;case"restart":I.restart();break;case"finish":I.finish();break;case"init":I.init();break;case"setPosition":I.setPosition(parseFloat(g[0]));break;case"destroy":this.destroy(i)}}}const dc="ng-animate-queued",zc="ng-animate-disabled",iy=[],zg={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ip={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Yl="__ng_removed";class hc{get params(){return this.options.params}constructor(i,o=""){this.namespaceId=o;const d=i&&i.hasOwnProperty("value");if(this.value=function Ch(u){return null!=u?u:null}(d?i.value:i),d){const I=bd(i);delete I.value,this.options=I}else this.options={};this.options.params||(this.options.params={})}absorbOptions(i){const o=i.params;if(o){const d=this.options.params;Object.keys(o).forEach(g=>{null==d[g]&&(d[g]=o[g])})}}}const Gc="void",Td=new hc(Gc);class sy{constructor(i,o,d){this.id=i,this.hostElement=o,this._engine=d,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,du(o,this._hostClassName)}listen(i,o,d,g){if(!this._triggers.has(o))throw function Id(u,i){return new y.vHH(3302,!1)}();if(null==d||0==d.length)throw function Cg(u){return new y.vHH(3303,!1)}();if(!function oy(u){return"start"==u||"done"==u}(d))throw function i_(u,i){return new y.vHH(3400,!1)}();const I=al(this._elementListeners,i,[]),A={name:o,phase:d,callback:g};I.push(A);const U=al(this._engine.statesByElement,i,new Map);return U.has(o)||(du(i,gh),du(i,gh+"-"+o),U.set(o,Td)),()=>{this._engine.afterFlush(()=>{const Z=I.indexOf(A);Z>=0&&I.splice(Z,1),this._triggers.has(o)||U.delete(o)})}}register(i,o){return!this._triggers.has(i)&&(this._triggers.set(i,o),!0)}_getTrigger(i){const o=this._triggers.get(i);if(!o)throw function Dg(u){return new y.vHH(3401,!1)}();return o}trigger(i,o,d,g=!0){const I=this._getTrigger(o),A=new bp(this.id,o,i);let U=this._engine.statesByElement.get(i);U||(du(i,gh),du(i,gh+"-"+o),this._engine.statesByElement.set(i,U=new Map));let Z=U.get(o);const ie=new hc(d,this.id);if(!(d&&d.hasOwnProperty("value"))&&Z&&ie.absorbOptions(Z.options),U.set(o,ie),Z||(Z=Td),ie.value!==Gc&&Z.value===ie.value){if(!function Wg(u,i){const o=Object.keys(u),d=Object.keys(i);if(o.length!=d.length)return!1;for(let g=0;g<o.length;g++){const I=o[g];if(!i.hasOwnProperty(I)||u[I]!==i[I])return!1}return!0}(Z.params,ie.params)){const vn=[],ur=I.matchStyles(Z.value,Z.params,vn),Zr=I.matchStyles(ie.value,ie.params,vn);vn.length?this._engine.reportError(vn):this._engine.afterFlush(()=>{Pa(i,ur),Wl(i,Zr)})}return}const Mt=al(this._engine.playersByElement,i,[]);Mt.forEach(vn=>{vn.namespaceId==this.id&&vn.triggerName==o&&vn.queued&&vn.destroy()});let Zt=I.matchTransition(Z.value,ie.value,i,ie.params),Xt=!1;if(!Zt){if(!g)return;Zt=I.fallbackTransition,Xt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:o,transition:Zt,fromState:Z,toState:ie,player:A,isFallbackTransition:Xt}),Xt||(du(i,dc),A.onStart(()=>{Wc(i,dc)})),A.onDone(()=>{let vn=this.players.indexOf(A);vn>=0&&this.players.splice(vn,1);const ur=this._engine.playersByElement.get(i);if(ur){let Zr=ur.indexOf(A);Zr>=0&&ur.splice(Zr,1)}}),this.players.push(A),Mt.push(A),A}deregister(i){this._triggers.delete(i),this._engine.statesByElement.forEach(o=>o.delete(i)),this._elementListeners.forEach((o,d)=>{this._elementListeners.set(d,o.filter(g=>g.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);const o=this._engine.playersByElement.get(i);o&&(o.forEach(d=>d.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,o){const d=this._engine.driver.query(i,yf,!0);d.forEach(g=>{if(g[Yl])return;const I=this._engine.fetchNamespacesByElement(g);I.size?I.forEach(A=>A.triggerLeaveAnimation(g,o,!1,!0)):this.clearElementCache(g)}),this._engine.afterFlushAnimationsDone(()=>d.forEach(g=>this.clearElementCache(g)))}triggerLeaveAnimation(i,o,d,g){const I=this._engine.statesByElement.get(i),A=new Map;if(I){const U=[];if(I.forEach((Z,ie)=>{if(A.set(ie,Z.value),this._triggers.has(ie)){const Ze=this.trigger(i,ie,Gc,g);Ze&&U.push(Ze)}}),U.length)return this._engine.markElementAsRemoved(this.id,i,!0,o,A),d&&ac(U).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){const o=this._elementListeners.get(i),d=this._engine.statesByElement.get(i);if(o&&d){const g=new Set;o.forEach(I=>{const A=I.name;if(g.has(A))return;g.add(A);const Z=this._triggers.get(A).fallbackTransition,ie=d.get(A)||Td,Ze=new hc(Gc),ot=new bp(this.id,A,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:A,transition:Z,fromState:ie,toState:Ze,player:ot,isFallbackTransition:!0})})}}removeNode(i,o){const d=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,o),this.triggerLeaveAnimation(i,o,!0))return;let g=!1;if(d.totalAnimations){const I=d.players.length?d.playersByQueriedElement.get(i):[];if(I&&I.length)g=!0;else{let A=i;for(;A=A.parentNode;)if(d.statesByElement.get(A)){g=!0;break}}}if(this.prepareLeaveAnimationListeners(i),g)d.markElementAsRemoved(this.id,i,!1,o);else{const I=i[Yl];(!I||I===zg)&&(d.afterFlush(()=>this.clearElementCache(i)),d.destroyInnerAnimations(i),d._onRemovalComplete(i,o))}}insertNode(i,o){du(i,this._hostClassName)}drainQueuedTransitions(i){const o=[];return this._queue.forEach(d=>{const g=d.player;if(g.destroyed)return;const I=d.element,A=this._elementListeners.get(I);A&&A.forEach(U=>{if(U.name==d.triggerName){const Z=hf(I,d.triggerName,d.fromState.value,d.toState.value);Z._data=i,df(d.player,U.phase,Z,U.callback)}}),g.markedForDestroy?this._engine.afterFlush(()=>{g.destroy()}):o.push(d)}),this._queue=[],o.sort((d,g)=>{const I=d.transition.ast.depCount,A=g.transition.ast.depCount;return 0==I||0==A?I-A:this._engine.driver.containsElement(d.element,g.element)?1:-1})}destroy(i){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}elementContainsData(i){let o=!1;return this._elementListeners.has(i)&&(o=!0),o=!!this._queue.find(d=>d.element===i)||o,o}}class Gg{_onRemovalComplete(i,o){this.onRemovalComplete(i,o)}constructor(i,o,d){this.bodyNode=i,this.driver=o,this._normalizer=d,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(g,I)=>{}}get queuedPlayers(){const i=[];return this._namespaceList.forEach(o=>{o.players.forEach(d=>{d.queued&&i.push(d)})}),i}createNamespace(i,o){const d=new sy(i,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(d,o):(this.newHostElements.set(o,d),this.collectEnterElement(o)),this._namespaceLookup[i]=d}_balanceNamespaceList(i,o){const d=this._namespaceList,g=this.namespacesByHostElement;if(d.length-1>=0){let A=!1,U=this.driver.getParentElement(o);for(;U;){const Z=g.get(U);if(Z){const ie=d.indexOf(Z);d.splice(ie+1,0,i),A=!0;break}U=this.driver.getParentElement(U)}A||d.unshift(i)}else d.push(i);return g.set(o,i),i}register(i,o){let d=this._namespaceLookup[i];return d||(d=this.createNamespace(i,o)),d}registerTrigger(i,o,d){let g=this._namespaceLookup[i];g&&g.register(o,d)&&this.totalAnimations++}destroy(i,o){if(!i)return;const d=this._fetchNamespace(i);this.afterFlush(()=>{this.namespacesByHostElement.delete(d.hostElement),delete this._namespaceLookup[i];const g=this._namespaceList.indexOf(d);g>=0&&this._namespaceList.splice(g,1)}),this.afterFlushAnimationsDone(()=>d.destroy(o))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){const o=new Set,d=this.statesByElement.get(i);if(d)for(let g of d.values())if(g.namespaceId){const I=this._fetchNamespace(g.namespaceId);I&&o.add(I)}return o}trigger(i,o,d,g){if(Df(o)){const I=this._fetchNamespace(i);if(I)return I.trigger(o,d,g),!0}return!1}insertNode(i,o,d,g){if(!Df(o))return;const I=o[Yl];if(I&&I.setForRemoval){I.setForRemoval=!1,I.setForMove=!0;const A=this.collectedLeaveElements.indexOf(o);A>=0&&this.collectedLeaveElements.splice(A,1)}if(i){const A=this._fetchNamespace(i);A&&A.insertNode(o,d)}g&&this.collectEnterElement(o)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,o){o?this.disabledNodes.has(i)||(this.disabledNodes.add(i),du(i,zc)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),Wc(i,zc))}removeNode(i,o,d,g){if(Df(o)){const I=i?this._fetchNamespace(i):null;if(I?I.removeNode(o,g):this.markElementAsRemoved(i,o,!1,g),d){const A=this.namespacesByHostElement.get(o);A&&A.id!==i&&A.removeNode(o,g)}}else this._onRemovalComplete(o,g)}markElementAsRemoved(i,o,d,g,I){this.collectedLeaveElements.push(o),o[Yl]={namespaceId:i,setForRemoval:g,hasAnimation:d,removedBeforeQueried:!1,previousTriggersValues:I}}listen(i,o,d,g,I){return Df(o)?this._fetchNamespace(i).listen(o,d,g,I):()=>{}}_buildInstruction(i,o,d,g,I){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,d,g,i.fromState.options,i.toState.options,o,I)}destroyInnerAnimations(i){let o=this.driver.query(i,yf,!0);o.forEach(d=>this.destroyActiveAnimationsForElement(d)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(i,Og,!0),o.forEach(d=>this.finishActiveQueriedAnimationOnElement(d)))}destroyActiveAnimationsForElement(i){const o=this.playersByElement.get(i);o&&o.forEach(d=>{d.queued?d.markedForDestroy=!0:d.destroy()})}finishActiveQueriedAnimationOnElement(i){const o=this.playersByQueriedElement.get(i);o&&o.forEach(d=>d.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return ac(this.players).onDone(()=>i());i()})}processLeaveNode(i){var o;const d=i[Yl];if(d&&d.setForRemoval){if(i[Yl]=zg,d.namespaceId){this.destroyInnerAnimations(i);const g=this._fetchNamespace(d.namespaceId);g&&g.clearElementCache(i)}this._onRemovalComplete(i,d.setForRemoval)}null!==(o=i.classList)&&void 0!==o&&o.contains(zc)&&this.markElementAsDisabled(i,!1),this.driver.query(i,".ng-animate-disabled",!0).forEach(g=>{this.markElementAsDisabled(g,!1)})}flush(i=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((d,g)=>this._balanceNamespaceList(d,g)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let d=0;d<this.collectedEnterElements.length;d++)du(this.collectedEnterElements[d],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const d=[];try{o=this._flushAnimations(d,i)}finally{for(let g=0;g<d.length;g++)d[g]()}}else for(let d=0;d<this.collectedLeaveElements.length;d++)this.processLeaveNode(this.collectedLeaveElements[d]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(d=>d()),this._flushFns=[],this._whenQuietFns.length){const d=this._whenQuietFns;this._whenQuietFns=[],o.length?ac(o).onDone(()=>{d.forEach(g=>g())}):d.forEach(g=>g())}}reportError(i){throw function s_(u){return new y.vHH(3402,!1)}()}_flushAnimations(i,o){const d=new wp,g=[],I=new Map,A=[],U=new Map,Z=new Map,ie=new Map,Ze=new Set;this.disabledNodes.forEach(yr=>{Ze.add(yr);const Or=this.driver.query(yr,".ng-animate-queued",!0);for(let Hr=0;Hr<Or.length;Hr++)Ze.add(Or[Hr])});const ot=this.bodyNode,Mt=Array.from(this.statesByElement.keys()),Zt=Cp(Mt,this.collectedEnterElements),Xt=new Map;let vn=0;Zt.forEach((yr,Or)=>{const Hr=mp+vn++;Xt.set(Or,Hr),yr.forEach(ji=>du(ji,Hr))});const ur=[],Zr=new Set,Si=new Set;for(let yr=0;yr<this.collectedLeaveElements.length;yr++){const Or=this.collectedLeaveElements[yr],Hr=Or[Yl];Hr&&Hr.setForRemoval&&(ur.push(Or),Zr.add(Or),Hr.hasAnimation?this.driver.query(Or,".ng-star-inserted",!0).forEach(ji=>Zr.add(ji)):Si.add(Or))}const Pi=new Map,ki=Cp(Mt,Array.from(Zr));ki.forEach((yr,Or)=>{const Hr=mf+vn++;Pi.set(Or,Hr),yr.forEach(ji=>du(ji,Hr))}),i.push(()=>{Zt.forEach((yr,Or)=>{const Hr=Xt.get(Or);yr.forEach(ji=>Wc(ji,Hr))}),ki.forEach((yr,Or)=>{const Hr=Pi.get(Or);yr.forEach(ji=>Wc(ji,Hr))}),ur.forEach(yr=>{this.processLeaveNode(yr)})});const ll=[],Na=[];for(let yr=this._namespaceList.length-1;yr>=0;yr--)this._namespaceList[yr].drainQueuedTransitions(o).forEach(Hr=>{const ji=Hr.player,Xs=Hr.element;if(ll.push(ji),this.collectedEnterElements.length){const la=Xs[Yl];if(la&&la.setForMove){if(la.previousTriggersValues&&la.previousTriggersValues.has(Hr.triggerName)){const Rd=la.previousTriggersValues.get(Hr.triggerName),Oo=this.statesByElement.get(Hr.element);if(Oo&&Oo.has(Hr.triggerName)){const Jg=Oo.get(Hr.triggerName);Jg.value=Rd,Oo.set(Hr.triggerName,Jg)}}return void ji.destroy()}}const Kc=!ot||!this.driver.containsElement(ot,Xs),Zl=Pi.get(Xs),qc=Xt.get(Xs),Js=this._buildInstruction(Hr,d,qc,Zl,Kc);if(Js.errors&&Js.errors.length)return void Na.push(Js);if(Kc)return ji.onStart(()=>Pa(Xs,Js.fromStyles)),ji.onDestroy(()=>Wl(Xs,Js.toStyles)),void g.push(ji);if(Hr.isFallbackTransition)return ji.onStart(()=>Pa(Xs,Js.fromStyles)),ji.onDestroy(()=>Wl(Xs,Js.toStyles)),void g.push(ji);const M_=[];Js.timelines.forEach(la=>{la.stretchStartingKeyframe=!0,this.disabledNodes.has(la.element)||M_.push(la)}),Js.timelines=M_,d.append(Xs,Js.timelines),A.push({instruction:Js,player:ji,element:Xs}),Js.queriedElements.forEach(la=>al(U,la,[]).push(ji)),Js.preStyleProps.forEach((la,Rd)=>{if(la.size){let Oo=Z.get(Rd);Oo||Z.set(Rd,Oo=new Set),la.forEach((Jg,cy)=>Oo.add(cy))}}),Js.postStyleProps.forEach((la,Rd)=>{let Oo=ie.get(Rd);Oo||ie.set(Rd,Oo=new Set),la.forEach((Jg,cy)=>Oo.add(cy))})});if(Na.length){const yr=[];Na.forEach(Or=>{yr.push(function jm(u,i){return new y.vHH(3505,!1)}())}),ll.forEach(Or=>Or.destroy()),this.reportError(yr)}const va=new Map,aa=new Map;A.forEach(yr=>{const Or=yr.element;d.has(Or)&&(aa.set(Or,Or),this._beforeAnimationBuild(yr.player.namespaceId,yr.instruction,va))}),g.forEach(yr=>{const Or=yr.element;this._getPreviousPlayers(Or,!1,yr.namespaceId,yr.triggerName,null).forEach(ji=>{al(va,Or,[]).push(ji),ji.destroy()})});const fc=ur.filter(yr=>ay(yr,Z,ie)),Bu=new Map;Dh(Bu,this.driver,Si,ie,gs.l3).forEach(yr=>{ay(yr,Z,ie)&&fc.push(yr)});const $u=new Map;Zt.forEach((yr,Or)=>{Dh($u,this.driver,new Set(yr),Z,gs.k1)}),fc.forEach(yr=>{var Or,Hr;const ji=Bu.get(yr),Xs=$u.get(yr);Bu.set(yr,new Map([...Array.from(null!==(Or=null==ji?void 0:ji.entries())&&void 0!==Or?Or:[]),...Array.from(null!==(Hr=null==Xs?void 0:Xs.entries())&&void 0!==Hr?Hr:[])]))});const Xg=[],Rh=[],A_={};A.forEach(yr=>{const{element:Or,player:Hr,instruction:ji}=yr;if(d.has(Or)){if(Ze.has(Or))return Hr.onDestroy(()=>Wl(Or,ji.toStyles)),Hr.disabled=!0,Hr.overrideTotalTime(ji.totalTime),void g.push(Hr);let Xs=A_;if(aa.size>1){let Zl=Or;const qc=[];for(;Zl=Zl.parentNode;){const Js=aa.get(Zl);if(Js){Xs=Js;break}qc.push(Zl)}qc.forEach(Js=>aa.set(Js,Xs))}const Kc=this._buildAnimation(Hr.namespaceId,ji,va,I,$u,Bu);if(Hr.setRealPlayer(Kc),Xs===A_)Xg.push(Hr);else{const Zl=this.playersByElement.get(Xs);Zl&&Zl.length&&(Hr.parentPlayer=ac(Zl)),g.push(Hr)}}else Pa(Or,ji.fromStyles),Hr.onDestroy(()=>Wl(Or,ji.toStyles)),Rh.push(Hr),Ze.has(Or)&&g.push(Hr)}),Rh.forEach(yr=>{const Or=I.get(yr.element);if(Or&&Or.length){const Hr=ac(Or);yr.setRealPlayer(Hr)}}),g.forEach(yr=>{yr.parentPlayer?yr.syncPlayerEvents(yr.parentPlayer):yr.destroy()});for(let yr=0;yr<ur.length;yr++){const Or=ur[yr],Hr=Or[Yl];if(Wc(Or,mf),Hr&&Hr.hasAnimation)continue;let ji=[];if(U.size){let Kc=U.get(Or);Kc&&Kc.length&&ji.push(...Kc);let Zl=this.driver.query(Or,Og,!0);for(let qc=0;qc<Zl.length;qc++){let Js=U.get(Zl[qc]);Js&&Js.length&&ji.push(...Js)}}const Xs=ji.filter(Kc=>!Kc.destroyed);Xs.length?Tf(this,Or,Xs):this.processLeaveNode(Or)}return ur.length=0,Xg.forEach(yr=>{this.players.push(yr),yr.onDone(()=>{yr.destroy();const Or=this.players.indexOf(yr);this.players.splice(Or,1)}),yr.play()}),Xg}elementContainsData(i,o){let d=!1;const g=o[Yl];return g&&g.setForRemoval&&(d=!0),this.playersByElement.has(o)&&(d=!0),this.playersByQueriedElement.has(o)&&(d=!0),this.statesByElement.has(o)&&(d=!0),this._fetchNamespace(i).elementContainsData(o)||d}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,o,d,g,I){let A=[];if(o){const U=this.playersByQueriedElement.get(i);U&&(A=U)}else{const U=this.playersByElement.get(i);if(U){const Z=!I||I==Gc;U.forEach(ie=>{ie.queued||!Z&&ie.triggerName!=g||A.push(ie)})}}return(d||g)&&(A=A.filter(U=>!(d&&d!=U.namespaceId||g&&g!=U.triggerName))),A}_beforeAnimationBuild(i,o,d){const I=o.element,A=o.isRemovalTransition?void 0:i,U=o.isRemovalTransition?void 0:o.triggerName;for(const Z of o.timelines){const ie=Z.element,Ze=ie!==I,ot=al(d,ie,[]);this._getPreviousPlayers(ie,Ze,A,U,o.toState).forEach(Zt=>{const Xt=Zt.getRealPlayer();Xt.beforeDestroy&&Xt.beforeDestroy(),Zt.destroy(),ot.push(Zt)})}Pa(I,o.fromStyles)}_buildAnimation(i,o,d,g,I,A){const U=o.triggerName,Z=o.element,ie=[],Ze=new Set,ot=new Set,Mt=o.timelines.map(Xt=>{const vn=Xt.element;Ze.add(vn);const ur=vn[Yl];if(ur&&ur.removedBeforeQueried)return new gs.ZN(Xt.duration,Xt.delay);const Zr=vn!==Z,Si=function Wv(u){const i=[];return Pr(u,i),i}((d.get(vn)||iy).map(va=>va.getRealPlayer())).filter(va=>!!va.element&&va.element===vn),Pi=I.get(vn),ki=A.get(vn),ll=o_(0,this._normalizer,0,Xt.keyframes,Pi,ki),Na=this._buildPlayer(Xt,ll,Si);if(Xt.subTimeline&&g&&ot.add(vn),Zr){const va=new bp(i,U,vn);va.setRealPlayer(Na),ie.push(va)}return Na});ie.forEach(Xt=>{al(this.playersByQueriedElement,Xt.element,[]).push(Xt),Xt.onDone(()=>function b_(u,i,o){let d=u.get(i);if(d){if(d.length){const g=d.indexOf(o);d.splice(g,1)}0==d.length&&u.delete(i)}return d}(this.playersByQueriedElement,Xt.element,Xt))}),Ze.forEach(Xt=>du(Xt,Pg));const Zt=ac(Mt);return Zt.onDestroy(()=>{Ze.forEach(Xt=>Wc(Xt,Pg)),Wl(Z,o.toStyles)}),ot.forEach(Xt=>{al(g,Xt,[]).push(Zt)}),Zt}_buildPlayer(i,o,d){return o.length>0?this.driver.animate(i.element,o,i.duration,i.delay,i.easing,d):new gs.ZN(i.duration,i.delay)}}class bp{constructor(i,o,d){this.namespaceId=i,this.triggerName=o,this.element=d,this._player=new gs.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,this._queuedCallbacks.forEach((o,d)=>{o.forEach(g=>df(i,d,void 0,g))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){const o=this._player;o.triggerCallback&&i.onStart(()=>o.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,o){al(this._queuedCallbacks,i,[]).push(o)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){const o=this._player;o.triggerCallback&&o.triggerCallback(i)}}function Df(u){return u&&1===u.nodeType}function Sd(u,i){const o=u.style.display;return u.style.display=null!=i?i:"none",o}function Dh(u,i,o,d,g){const I=[];o.forEach(Z=>I.push(Sd(Z)));const A=[];d.forEach((Z,ie)=>{const Ze=new Map;Z.forEach(ot=>{const Mt=i.computeStyle(ie,ot,g);Ze.set(ot,Mt),(!Mt||0==Mt.length)&&(ie[Yl]=Ip,A.push(ie))}),u.set(ie,Ze)});let U=0;return o.forEach(Z=>Sd(Z,I[U++])),A}function Cp(u,i){const o=new Map;if(u.forEach(U=>o.set(U,[])),0==i.length)return o;const d=1,g=new Set(i),I=new Map;function A(U){if(!U)return d;let Z=I.get(U);if(Z)return Z;const ie=U.parentNode;return Z=o.has(ie)?ie:g.has(ie)?d:A(ie),I.set(U,Z),Z}return i.forEach(U=>{const Z=A(U);Z!==d&&o.get(Z).push(U)}),o}function du(u,i){var o;null===(o=u.classList)||void 0===o||o.add(i)}function Wc(u,i){var o;null===(o=u.classList)||void 0===o||o.remove(i)}function Tf(u,i,o){ac(o).onDone(()=>u.processLeaveNode(i))}function Pr(u,i){for(let o=0;o<u.length;o++){const d=u[o];d instanceof gs.ZE?Pr(d.players,i):i.push(d)}}function ay(u,i,o){const d=o.get(u);if(!d)return!1;let g=i.get(u);return g?d.forEach(I=>g.add(I)):i.set(u,d),o.delete(u),!0}class Ad{constructor(i,o,d){this.bodyNode=i,this._driver=o,this._normalizer=d,this._triggerCache={},this.onRemovalComplete=(g,I)=>{},this._transitionEngine=new Gg(i,o,d),this._timelineEngine=new cc(i,o,d),this._transitionEngine.onRemovalComplete=(g,I)=>this.onRemovalComplete(g,I)}registerTrigger(i,o,d,g,I){const A=i+"-"+g;let U=this._triggerCache[A];if(!U){const Z=[],ie=[],Ze=cu(this._driver,I,Z,ie);if(Z.length)throw function fh(u,i){return new y.vHH(3404,!1)}();U=function Iv(u,i,o){return new bv(u,i,o)}(g,Ze,this._normalizer),this._triggerCache[A]=U}this._transitionEngine.registerTrigger(o,g,U)}register(i,o){this._transitionEngine.register(i,o)}destroy(i,o){this._transitionEngine.destroy(i,o)}onInsert(i,o,d,g){this._transitionEngine.insertNode(i,o,d,g)}onRemove(i,o,d,g){this._transitionEngine.removeNode(i,o,g||!1,d)}disableAnimations(i,o){this._transitionEngine.markElementAsDisabled(i,o)}process(i,o,d,g){if("@"==d.charAt(0)){const[I,A]=ff(d);this._timelineEngine.command(I,o,A,g)}else this._transitionEngine.trigger(i,o,d,g)}listen(i,o,d,g,I){if("@"==d.charAt(0)){const[A,U]=ff(d);return this._timelineEngine.listen(A,o,U,I)}return this._transitionEngine.listen(i,o,d,g,I)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Kg=(()=>{class u{constructor(o,d,g){this._element=o,this._startStyles=d,this._endStyles=g,this._state=0;let I=u.initialStylesByElement.get(o);I||u.initialStylesByElement.set(o,I=new Map),this._initialStyles=I}start(){this._state<1&&(this._startStyles&&Wl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Wl(this._element,this._initialStyles),this._endStyles&&(Wl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(u.initialStylesByElement.delete(this._element),this._startStyles&&(Pa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pa(this._element,this._endStyles),this._endStyles=null),Wl(this._element,this._initialStyles),this._state=3)}}return u.initialStylesByElement=new WeakMap,u})();function Th(u){let i=null;return u.forEach((o,d)=>{(function Af(u){return"display"===u||"position"===u})(d)&&(i=i||new Map,i.set(d,o))}),i}class ws{constructor(i,o,d,g){this.element=i,this.keyframes=o,this.options=d,this._specialStyles=g,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=d.duration,this._delay=d.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(i){const o=[];return i.forEach(d=>{o.push(Object.fromEntries(d))}),o}_triggerWebAnimation(i,o,d){return i.animate(this._convertKeyframesToObject(o),d)}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const i=new Map;this.hasStarted()&&this._finalKeyframe.forEach((d,g)=>{"offset"!==g&&i.set(g,this._finished?d:Lg(this.element,g))}),this.currentSnapshot=i}triggerCallback(i){const o="start"===i?this._onStartFns:this._onDoneFns;o.forEach(d=>d()),o.length=0}}class Sh{validateStyleProperty(i){return!0}validateAnimatableStyleProperty(i){return!0}matchesElement(i,o){return!1}containsElement(i,o){return Gm(i,o)}getParentElement(i){return pf(i)}query(i,o,d){return xg(i,o,d)}computeStyle(i,o,d){return window.getComputedStyle(i)[o]}animate(i,o,d,g,I,A=[]){const Z={duration:d,delay:g,fill:0==g?"both":"forwards"};I&&(Z.easing=I);const ie=new Map,Ze=A.filter(Zt=>Zt instanceof ws);(function Do(u,i){return 0===u||0===i})(d,g)&&Ze.forEach(Zt=>{Zt.currentSnapshot.forEach((Xt,vn)=>ie.set(vn,Xt))});let ot=function _f(u){return u.length?u[0]instanceof Map?u:u.map(i=>Km(i)):[]}(o).map(Zt=>ya(Zt));ot=function Fg(u,i,o){if(o.size&&i.length){let d=i[0],g=[];if(o.forEach((I,A)=>{d.has(A)||g.push(A),d.set(A,I)}),g.length)for(let I=1;I<i.length;I++){let A=i[I];g.forEach(U=>A.set(U,Lg(u,U)))}}return i}(i,ot,ie);const Mt=function Sf(u,i){let o=null,d=null;return Array.isArray(i)&&i.length?(o=Th(i[0]),i.length>1&&(d=Th(i[i.length-1]))):i instanceof Map&&(o=Th(i)),o||d?new Kg(u,o,d):null}(i,ot);return new ws(i,ot,Z,Mt)}}var Ah=B(6895);let C_=(()=>{class u extends gs._j{constructor(o,d){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(d.body,{id:"0",encapsulation:y.ifc.None,styles:[],data:{animation:[]}})}build(o){const d=this._nextAnimationId.toString();this._nextAnimationId++;const g=Array.isArray(o)?(0,gs.vP)(o):o;return D_(this._renderer,null,d,"register",[g]),new Mf(d,this._renderer)}}return u.\u0275fac=function(o){return new(o||u)(y.LFG(y.FYo),y.LFG(Ah.K0))},u.\u0275prov=y.Yz7({token:u,factory:u.\u0275fac}),u})();class Mf extends gs.LC{constructor(i,o){super(),this._id=i,this._renderer=o}create(i,o){return new Sv(this._id,i,o||{},this._renderer)}}class Sv{constructor(i,o,d,g){this.id=i,this.element=o,this._renderer=g,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",d)}_listen(i,o){return this._renderer.listen(this.element,`@@${this.id}:${i}`,o)}_command(i,...o){return D_(this._renderer,this.element,this.id,i,o)}onDone(i){this._listen("done",i)}onStart(i){this._listen("start",i)}onDestroy(i){this._listen("destroy",i)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(i){this._command("setPosition",i)}getPosition(){var i,o;return null!==(i=null===(o=this._renderer.engine.players[+this.id])||void 0===o?void 0:o.getPosition())&&void 0!==i?i:0}}function D_(u,i,o,d,g){return u.setProperty(i,`@@${o}:${d}`,g)}const ly="@.disabled";let qg=(()=>{class u{constructor(o,d,g){this.delegate=o,this.engine=d,this._zone=g,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),d.onRemovalComplete=(I,A)=>{const U=null==A?void 0:A.parentNode(I);U&&A.removeChild(U,I)}}createRenderer(o,d){const I=this.delegate.createRenderer(o,d);if(!(o&&d&&d.data&&d.data.animation)){let Ze=this._rendererCache.get(I);return Ze||(Ze=new T_("",I,this.engine,()=>this._rendererCache.delete(I)),this._rendererCache.set(I,Ze)),Ze}const A=d.id,U=d.id+"-"+this._currentId;this._currentId++,this.engine.register(U,o);const Z=Ze=>{Array.isArray(Ze)?Ze.forEach(Z):this.engine.registerTrigger(A,U,o,Ze.name,Ze)};return d.data.animation.forEach(Z),new Av(this,U,I,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(o,d,g){o>=0&&o<this._microtaskId?this._zone.run(()=>d(g)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(I=>{const[A,U]=I;A(U)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([d,g]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return u.\u0275fac=function(o){return new(o||u)(y.LFG(y.FYo),y.LFG(Ad),y.LFG(y.R0b))},u.\u0275prov=y.Yz7({token:u,factory:u.\u0275fac}),u})();class T_{constructor(i,o,d,g){this.namespaceId=i,this.delegate=o,this.engine=d,this._onDestroy=g,this.destroyNode=this.delegate.destroyNode?I=>o.destroyNode(I):null}get data(){return this.delegate.data}destroy(){var i;this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),null===(i=this._onDestroy)||void 0===i||i.call(this)}createElement(i,o){return this.delegate.createElement(i,o)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,o){this.delegate.appendChild(i,o),this.engine.onInsert(this.namespaceId,o,i,!1)}insertBefore(i,o,d,g=!0){this.delegate.insertBefore(i,o,d),this.engine.onInsert(this.namespaceId,o,i,g)}removeChild(i,o,d){this.engine.onRemove(this.namespaceId,o,this.delegate,d)}selectRootElement(i,o){return this.delegate.selectRootElement(i,o)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,o,d,g){this.delegate.setAttribute(i,o,d,g)}removeAttribute(i,o,d){this.delegate.removeAttribute(i,o,d)}addClass(i,o){this.delegate.addClass(i,o)}removeClass(i,o){this.delegate.removeClass(i,o)}setStyle(i,o,d,g){this.delegate.setStyle(i,o,d,g)}removeStyle(i,o,d){this.delegate.removeStyle(i,o,d)}setProperty(i,o,d){"@"==o.charAt(0)&&o==ly?this.disableAnimations(i,!!d):this.delegate.setProperty(i,o,d)}setValue(i,o){this.delegate.setValue(i,o)}listen(i,o,d){return this.delegate.listen(i,o,d)}disableAnimations(i,o){this.engine.disableAnimations(i,o)}}class Av extends T_{constructor(i,o,d,g,I){super(o,d,g,I),this.factory=i,this.namespaceId=o}setProperty(i,o,d){"@"==o.charAt(0)?"."==o.charAt(1)&&o==ly?this.disableAnimations(i,d=void 0===d||!!d):this.engine.process(this.namespaceId,i,o.slice(1),d):this.delegate.setProperty(i,o,d)}listen(i,o,d){if("@"==o.charAt(0)){const g=function Md(u){switch(u){case"body":return document.body;case"document":return document;case"window":return window;default:return u}}(i);let I=o.slice(1),A="";return"@"!=I.charAt(0)&&([I,A]=function Mv(u){const i=u.indexOf(".");return[u.substring(0,i),u.slice(i+1)]}(I)),this.engine.listen(this.namespaceId,g,I,A,U=>{this.factory.scheduleListenerCallback(U._data||-1,d,U)})}return this.delegate.listen(i,o,d)}}const uy=[{provide:gs._j,useClass:C_},{provide:ty,useFactory:function Yg(){return new E_}},{provide:Ad,useClass:(()=>{class u extends Ad{constructor(o,d,g,I){super(o.body,d,g)}ngOnDestroy(){this.flush()}}return u.\u0275fac=function(o){return new(o||u)(y.LFG(Ah.K0),y.LFG(gf),y.LFG(ty),y.LFG(y.z2F))},u.\u0275prov=y.Yz7({token:u,factory:u.\u0275fac}),u})()},{provide:y.FYo,useFactory:function Zg(u,i,o){return new qg(u,i,o)},deps:[m.se,Ad,y.R0b]}],Dp=[{provide:gf,useFactory:()=>new Sh},{provide:y.QbO,useValue:"BrowserAnimations"},...uy],Qg=[{provide:gf,useClass:u_},{provide:y.QbO,useValue:"NoopAnimations"},...uy];let S_=(()=>{class u{static withConfig(o){return{ngModule:u,providers:o.disableAnimations?Qg:Dp}}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=y.oAB({type:u}),u.\u0275inj=y.cJS({providers:Dp,imports:[m.b2]}),u})();(0,y.G48)(),(0,m.Cg)(He,{providers:[{provide:q.wN,useClass:oe.r4},(0,y.RIp)(oe.Pc.forRoot({}),S_),(0,y.RIp)(me.hO.initializeApp({apiKey:"AIzaSyCdRRnBbX8R0qg3xauDHItMVmvdDAdzlxk",authDomain:"ionic-login-a9669.firebaseapp.com",projectId:"ionic-login-a9669",storageBucket:"ionic-login-a9669.appspot.com",messagingSenderId:"698057746644",appId:"1:698057746644:web:7558813a2e58ae92c73341",locationId:"us-central"})),(0,y.RIp)(De.ww),(0,y.RIp)(Dl.yb),(0,y.RIp)(Ia),(0,y.RIp)(Bm),(0,q.bU)(we)]})},1135:(ln,at,B)=>{"use strict";B.d(at,{X:()=>m});var y=B(7579);class m extends y.x{constructor(oe){super(),this._value=oe}get value(){return this.getValue()}_subscribe(oe){const xe=super._subscribe(oe);return!xe.closed&&oe.next(this._value),xe}getValue(){const{hasError:oe,thrownError:xe,_value:Pe}=this;if(oe)throw xe;return this._throwIfClosed(),Pe}next(oe){super.next(this._value=oe)}}},9751:(ln,at,B)=>{"use strict";B.d(at,{y:()=>we});var y=B(930),m=B(727),q=B(8822),oe=B(9635),xe=B(2416),Pe=B(576),Ce=B(2806);let we=(()=>{class De{constructor(je){je&&(this._subscribe=je)}lift(je){const Le=new De;return Le.source=this,Le.operator=je,Le}subscribe(je,Le,Xe){const Te=function me(De){return De&&De instanceof y.Lv||function Se(De){return De&&(0,Pe.m)(De.next)&&(0,Pe.m)(De.error)&&(0,Pe.m)(De.complete)}(De)&&(0,m.Nn)(De)}(je)?je:new y.Hp(je,Le,Xe);return(0,Ce.x)(()=>{const{operator:Ie,source:ae}=this;Te.add(Ie?Ie.call(Te,ae):ae?this._subscribe(Te):this._trySubscribe(Te))}),Te}_trySubscribe(je){try{return this._subscribe(je)}catch(Le){je.error(Le)}}forEach(je,Le){return new(Le=He(Le))((Xe,Te)=>{const Ie=new y.Hp({next:ae=>{try{je(ae)}catch(dt){Te(dt),Ie.unsubscribe()}},error:Te,complete:Xe});this.subscribe(Ie)})}_subscribe(je){var Le;return null===(Le=this.source)||void 0===Le?void 0:Le.subscribe(je)}[q.L](){return this}pipe(...je){return(0,oe.U)(je)(this)}toPromise(je){return new(je=He(je))((Le,Xe)=>{let Te;this.subscribe(Ie=>Te=Ie,Ie=>Xe(Ie),()=>Le(Te))})}}return De.create=ke=>new De(ke),De})();function He(De){var ke;return null!==(ke=null!=De?De:xe.v.Promise)&&void 0!==ke?ke:Promise}},7579:(ln,at,B)=>{"use strict";B.d(at,{x:()=>Ce});var y=B(9751),m=B(727);const oe=(0,B(3888).d)(He=>function(){He(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=B(8737),Pe=B(2806);let Ce=(()=>{class He extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(me){const De=new we(this,this);return De.operator=me,De}_throwIfClosed(){if(this.closed)throw new oe}next(me){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const De of this.currentObservers)De.next(me)}})}error(me){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=me;const{observers:De}=this;for(;De.length;)De.shift().error(me)}})}complete(){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:me}=this;for(;me.length;)me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var me;return(null===(me=this.observers)||void 0===me?void 0:me.length)>0}_trySubscribe(me){return this._throwIfClosed(),super._trySubscribe(me)}_subscribe(me){return this._throwIfClosed(),this._checkFinalizedStatuses(me),this._innerSubscribe(me)}_innerSubscribe(me){const{hasError:De,isStopped:ke,observers:je}=this;return De||ke?m.Lc:(this.currentObservers=null,je.push(me),new m.w0(()=>{this.currentObservers=null,(0,xe.P)(je,me)}))}_checkFinalizedStatuses(me){const{hasError:De,thrownError:ke,isStopped:je}=this;De?me.error(ke):je&&me.complete()}asObservable(){const me=new y.y;return me.source=this,me}}return He.create=(Se,me)=>new we(Se,me),He})();class we extends Ce{constructor(Se,me){super(),this.destination=Se,this.source=me}next(Se){var me,De;null===(De=null===(me=this.destination)||void 0===me?void 0:me.next)||void 0===De||De.call(me,Se)}error(Se){var me,De;null===(De=null===(me=this.destination)||void 0===me?void 0:me.error)||void 0===De||De.call(me,Se)}complete(){var Se,me;null===(me=null===(Se=this.destination)||void 0===Se?void 0:Se.complete)||void 0===me||me.call(Se)}_subscribe(Se){var me,De;return null!==(De=null===(me=this.source)||void 0===me?void 0:me.subscribe(Se))&&void 0!==De?De:m.Lc}}},930:(ln,at,B)=>{"use strict";B.d(at,{Hp:()=>Xe,Lv:()=>De});var y=B(576),m=B(727),q=B(2416),oe=B(7849),xe=B(5032);const Pe=He("C",void 0,void 0);function He(ze,Ae,Y){return{kind:ze,value:Ae,error:Y}}var Se=B(3410),me=B(2806);class De extends m.w0{constructor(Ae){super(),this.isStopped=!1,Ae?(this.destination=Ae,(0,m.Nn)(Ae)&&Ae.add(this)):this.destination=dt}static create(Ae,Y,ht){return new Xe(Ae,Y,ht)}next(Ae){this.isStopped?ae(function we(ze){return He("N",ze,void 0)}(Ae),this):this._next(Ae)}error(Ae){this.isStopped?ae(function Ce(ze){return He("E",void 0,ze)}(Ae),this):(this.isStopped=!0,this._error(Ae))}complete(){this.isStopped?ae(Pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ae){this.destination.next(Ae)}_error(Ae){try{this.destination.error(Ae)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function je(ze,Ae){return ke.call(ze,Ae)}class Le{constructor(Ae){this.partialObserver=Ae}next(Ae){const{partialObserver:Y}=this;if(Y.next)try{Y.next(Ae)}catch(ht){Te(ht)}}error(Ae){const{partialObserver:Y}=this;if(Y.error)try{Y.error(Ae)}catch(ht){Te(ht)}else Te(Ae)}complete(){const{partialObserver:Ae}=this;if(Ae.complete)try{Ae.complete()}catch(Y){Te(Y)}}}class Xe extends De{constructor(Ae,Y,ht){let Ke;if(super(),(0,y.m)(Ae)||!Ae)Ke={next:null!=Ae?Ae:void 0,error:null!=Y?Y:void 0,complete:null!=ht?ht:void 0};else{let fe;this&&q.v.useDeprecatedNextContext?(fe=Object.create(Ae),fe.unsubscribe=()=>this.unsubscribe(),Ke={next:Ae.next&&je(Ae.next,fe),error:Ae.error&&je(Ae.error,fe),complete:Ae.complete&&je(Ae.complete,fe)}):Ke=Ae}this.destination=new Le(Ke)}}function Te(ze){q.v.useDeprecatedSynchronousErrorHandling?(0,me.O)(ze):(0,oe.h)(ze)}function ae(ze,Ae){const{onStoppedNotification:Y}=q.v;Y&&Se.z.setTimeout(()=>Y(ze,Ae))}const dt={closed:!0,next:xe.Z,error:function Ie(ze){throw ze},complete:xe.Z}},727:(ln,at,B)=>{"use strict";B.d(at,{Lc:()=>Pe,w0:()=>xe,Nn:()=>Ce});var y=B(576);const q=(0,B(3888).d)(He=>function(me){He(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((De,ke)=>`${ke+1}) ${De.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me});var oe=B(8737);class xe{constructor(Se){this.initialTeardown=Se,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Se;if(!this.closed){this.closed=!0;const{_parentage:me}=this;if(me)if(this._parentage=null,Array.isArray(me))for(const je of me)je.remove(this);else me.remove(this);const{initialTeardown:De}=this;if((0,y.m)(De))try{De()}catch(je){Se=je instanceof q?je.errors:[je]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const je of ke)try{we(je)}catch(Le){Se=null!=Se?Se:[],Le instanceof q?Se=[...Se,...Le.errors]:Se.push(Le)}}if(Se)throw new q(Se)}}add(Se){var me;if(Se&&Se!==this)if(this.closed)we(Se);else{if(Se instanceof xe){if(Se.closed||Se._hasParent(this))return;Se._addParent(this)}(this._finalizers=null!==(me=this._finalizers)&&void 0!==me?me:[]).push(Se)}}_hasParent(Se){const{_parentage:me}=this;return me===Se||Array.isArray(me)&&me.includes(Se)}_addParent(Se){const{_parentage:me}=this;this._parentage=Array.isArray(me)?(me.push(Se),me):me?[me,Se]:Se}_removeParent(Se){const{_parentage:me}=this;me===Se?this._parentage=null:Array.isArray(me)&&(0,oe.P)(me,Se)}remove(Se){const{_finalizers:me}=this;me&&(0,oe.P)(me,Se),Se instanceof xe&&Se._removeParent(this)}}xe.EMPTY=(()=>{const He=new xe;return He.closed=!0,He})();const Pe=xe.EMPTY;function Ce(He){return He instanceof xe||He&&"closed"in He&&(0,y.m)(He.remove)&&(0,y.m)(He.add)&&(0,y.m)(He.unsubscribe)}function we(He){(0,y.m)(He)?He():He.unsubscribe()}},2416:(ln,at,B)=>{"use strict";B.d(at,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(ln,at,B)=>{"use strict";B.d(at,{c:()=>Pe});var y=B(9751),m=B(727),q=B(8343),oe=B(5403),xe=B(4482);class Pe extends y.y{constructor(we,He){super(),this.source=we,this.subjectFactory=He,this._subject=null,this._refCount=0,this._connection=null,(0,xe.A)(we)&&(this.lift=we.lift)}_subscribe(we){return this.getSubject().subscribe(we)}getSubject(){const we=this._subject;return(!we||we.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:we}=this;this._subject=this._connection=null,null==we||we.unsubscribe()}connect(){let we=this._connection;if(!we){we=this._connection=new m.w0;const He=this.getSubject();we.add(this.source.subscribe((0,oe.x)(He,void 0,()=>{this._teardown(),He.complete()},Se=>{this._teardown(),He.error(Se)},()=>this._teardown()))),we.closed&&(this._connection=null,we=m.w0.EMPTY)}return we}refCount(){return(0,q.x)()(this)}}},9841:(ln,at,B)=>{"use strict";B.d(at,{a:()=>Se});var y=B(9751),m=B(4742),q=B(8996),oe=B(4671),xe=B(3268),Pe=B(3269),Ce=B(1810),we=B(5403),He=B(9672);function Se(...ke){const je=(0,Pe.yG)(ke),Le=(0,Pe.jO)(ke),{args:Xe,keys:Te}=(0,m.D)(ke);if(0===Xe.length)return(0,q.D)([],je);const Ie=new y.y(function me(ke,je,Le=oe.y){return Xe=>{De(je,()=>{const{length:Te}=ke,Ie=new Array(Te);let ae=Te,dt=Te;for(let ze=0;ze<Te;ze++)De(je,()=>{const Ae=(0,q.D)(ke[ze],je);let Y=!1;Ae.subscribe((0,we.x)(Xe,ht=>{Ie[ze]=ht,Y||(Y=!0,dt--),dt||Xe.next(Le(Ie.slice()))},()=>{--ae||Xe.complete()}))},Xe)},Xe)}}(Xe,je,Te?ae=>(0,Ce.n)(Te,ae):oe.y));return Le?Ie.pipe((0,xe.Z)(Le)):Ie}function De(ke,je,Le){ke?(0,He.f)(Le,ke,je):je()}},7272:(ln,at,B)=>{"use strict";B.d(at,{z:()=>xe});var y=B(8189),q=B(3269),oe=B(8996);function xe(...Pe){return function m(){return(0,y.J)(1)}()((0,oe.D)(Pe,(0,q.yG)(Pe)))}},9770:(ln,at,B)=>{"use strict";B.d(at,{P:()=>q});var y=B(9751),m=B(8421);function q(oe){return new y.y(xe=>{(0,m.Xf)(oe()).subscribe(xe)})}},515:(ln,at,B)=>{"use strict";B.d(at,{E:()=>m});const m=new(B(9751).y)(xe=>xe.complete())},4128:(ln,at,B)=>{"use strict";B.d(at,{D:()=>we});var y=B(9751),m=B(4742),q=B(8421),oe=B(3269),xe=B(5403),Pe=B(3268),Ce=B(1810);function we(...He){const Se=(0,oe.jO)(He),{args:me,keys:De}=(0,m.D)(He),ke=new y.y(je=>{const{length:Le}=me;if(!Le)return void je.complete();const Xe=new Array(Le);let Te=Le,Ie=Le;for(let ae=0;ae<Le;ae++){let dt=!1;(0,q.Xf)(me[ae]).subscribe((0,xe.x)(je,ze=>{dt||(dt=!0,Ie--),Xe[ae]=ze},()=>Te--,void 0,()=>{(!Te||!dt)&&(Ie||je.next(De?(0,Ce.n)(De,Xe):Xe),je.complete())}))}});return Se?ke.pipe((0,Pe.Z)(Se)):ke}},8996:(ln,at,B)=>{"use strict";B.d(at,{D:()=>Ae});var y=B(8421),m=B(5363),q=B(9468),Pe=B(9751),we=B(2202),He=B(576),Se=B(9672);function De(Y,ht){if(!Y)throw new Error("Iterable cannot be null");return new Pe.y(Ke=>{(0,Se.f)(Ke,ht,()=>{const fe=Y[Symbol.asyncIterator]();(0,Se.f)(Ke,ht,()=>{fe.next().then(Ct=>{Ct.done?Ke.complete():Ke.next(Ct.value)})},0,!0)})})}var ke=B(3670),je=B(8239),Le=B(1144),Xe=B(6495),Te=B(2206),Ie=B(4532),ae=B(3260);function Ae(Y,ht){return ht?function ze(Y,ht){if(null!=Y){if((0,ke.c)(Y))return function oe(Y,ht){return(0,y.Xf)(Y).pipe((0,q.R)(ht),(0,m.Q)(ht))}(Y,ht);if((0,Le.z)(Y))return function Ce(Y,ht){return new Pe.y(Ke=>{let fe=0;return ht.schedule(function(){fe===Y.length?Ke.complete():(Ke.next(Y[fe++]),Ke.closed||this.schedule())})})}(Y,ht);if((0,je.t)(Y))return function xe(Y,ht){return(0,y.Xf)(Y).pipe((0,q.R)(ht),(0,m.Q)(ht))}(Y,ht);if((0,Te.D)(Y))return De(Y,ht);if((0,Xe.T)(Y))return function me(Y,ht){return new Pe.y(Ke=>{let fe;return(0,Se.f)(Ke,ht,()=>{fe=Y[we.h](),(0,Se.f)(Ke,ht,()=>{let Ct,Ue;try{({value:Ct,done:Ue}=fe.next())}catch(it){return void Ke.error(it)}Ue?Ke.complete():Ke.next(Ct)},0,!0)}),()=>(0,He.m)(null==fe?void 0:fe.return)&&fe.return()})}(Y,ht);if((0,ae.L)(Y))return function dt(Y,ht){return De((0,ae.Q)(Y),ht)}(Y,ht)}throw(0,Ie.z)(Y)}(Y,ht):(0,y.Xf)(Y)}},4968:(ln,at,B)=>{"use strict";B.d(at,{R:()=>Se});var y=B(8421),m=B(9751),q=B(5577),oe=B(1144),xe=B(576),Pe=B(3268);const Ce=["addListener","removeListener"],we=["addEventListener","removeEventListener"],He=["on","off"];function Se(Le,Xe,Te,Ie){if((0,xe.m)(Te)&&(Ie=Te,Te=void 0),Ie)return Se(Le,Xe,Te).pipe((0,Pe.Z)(Ie));const[ae,dt]=function je(Le){return(0,xe.m)(Le.addEventListener)&&(0,xe.m)(Le.removeEventListener)}(Le)?we.map(ze=>Ae=>Le[ze](Xe,Ae,Te)):function De(Le){return(0,xe.m)(Le.addListener)&&(0,xe.m)(Le.removeListener)}(Le)?Ce.map(me(Le,Xe)):function ke(Le){return(0,xe.m)(Le.on)&&(0,xe.m)(Le.off)}(Le)?He.map(me(Le,Xe)):[];if(!ae&&(0,oe.z)(Le))return(0,q.z)(ze=>Se(ze,Xe,Te))((0,y.Xf)(Le));if(!ae)throw new TypeError("Invalid event target");return new m.y(ze=>{const Ae=(...Y)=>ze.next(1<Y.length?Y:Y[0]);return ae(Ae),()=>dt(Ae)})}function me(Le,Xe){return Te=>Ie=>Le[Te](Xe,Ie)}},8421:(ln,at,B)=>{"use strict";B.d(at,{Xf:()=>ke});var y=B(655),m=B(1144),q=B(8239),oe=B(9751),xe=B(3670),Pe=B(2206),Ce=B(4532),we=B(6495),He=B(3260),Se=B(576),me=B(7849),De=B(8822);function ke(ze){if(ze instanceof oe.y)return ze;if(null!=ze){if((0,xe.c)(ze))return function je(ze){return new oe.y(Ae=>{const Y=ze[De.L]();if((0,Se.m)(Y.subscribe))return Y.subscribe(Ae);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ze);if((0,m.z)(ze))return function Le(ze){return new oe.y(Ae=>{for(let Y=0;Y<ze.length&&!Ae.closed;Y++)Ae.next(ze[Y]);Ae.complete()})}(ze);if((0,q.t)(ze))return function Xe(ze){return new oe.y(Ae=>{ze.then(Y=>{Ae.closed||(Ae.next(Y),Ae.complete())},Y=>Ae.error(Y)).then(null,me.h)})}(ze);if((0,Pe.D)(ze))return Ie(ze);if((0,we.T)(ze))return function Te(ze){return new oe.y(Ae=>{for(const Y of ze)if(Ae.next(Y),Ae.closed)return;Ae.complete()})}(ze);if((0,He.L)(ze))return function ae(ze){return Ie((0,He.Q)(ze))}(ze)}throw(0,Ce.z)(ze)}function Ie(ze){return new oe.y(Ae=>{(function dt(ze,Ae){var Y,ht,Ke,fe;return(0,y.mG)(this,void 0,void 0,function*(){try{for(Y=(0,y.KL)(ze);!(ht=yield Y.next()).done;)if(Ae.next(ht.value),Ae.closed)return}catch(Ct){Ke={error:Ct}}finally{try{ht&&!ht.done&&(fe=Y.return)&&(yield fe.call(Y))}finally{if(Ke)throw Ke.error}}Ae.complete()})})(ze,Ae).catch(Y=>Ae.error(Y))})}},6451:(ln,at,B)=>{"use strict";B.d(at,{T:()=>Pe});var y=B(8189),m=B(8421),q=B(515),oe=B(3269),xe=B(8996);function Pe(...Ce){const we=(0,oe.yG)(Ce),He=(0,oe._6)(Ce,1/0),Se=Ce;return Se.length?1===Se.length?(0,m.Xf)(Se[0]):(0,y.J)(He)((0,xe.D)(Se,we)):q.E}},9646:(ln,at,B)=>{"use strict";B.d(at,{of:()=>q});var y=B(3269),m=B(8996);function q(...oe){const xe=(0,y.yG)(oe);return(0,m.D)(oe,xe)}},2843:(ln,at,B)=>{"use strict";B.d(at,{_:()=>q});var y=B(9751),m=B(576);function q(oe,xe){const Pe=(0,m.m)(oe)?oe:()=>oe,Ce=we=>we.error(Pe());return new y.y(xe?we=>xe.schedule(Ce,0,we):Ce)}},5403:(ln,at,B)=>{"use strict";B.d(at,{x:()=>m});var y=B(930);function m(oe,xe,Pe,Ce,we){return new q(oe,xe,Pe,Ce,we)}class q extends y.Lv{constructor(xe,Pe,Ce,we,He,Se){super(xe),this.onFinalize=He,this.shouldUnsubscribe=Se,this._next=Pe?function(me){try{Pe(me)}catch(De){xe.error(De)}}:super._next,this._error=we?function(me){try{we(me)}catch(De){xe.error(De)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(me){xe.error(me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var xe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Pe}=this;super.unsubscribe(),!Pe&&(null===(xe=this.onFinalize)||void 0===xe||xe.call(this))}}}},262:(ln,at,B)=>{"use strict";B.d(at,{K:()=>oe});var y=B(8421),m=B(5403),q=B(4482);function oe(xe){return(0,q.e)((Pe,Ce)=>{let Se,we=null,He=!1;we=Pe.subscribe((0,m.x)(Ce,void 0,void 0,me=>{Se=(0,y.Xf)(xe(me,oe(xe)(Pe))),we?(we.unsubscribe(),we=null,Se.subscribe(Ce)):He=!0})),He&&(we.unsubscribe(),we=null,Se.subscribe(Ce))})}},4351:(ln,at,B)=>{"use strict";B.d(at,{b:()=>q});var y=B(5577),m=B(576);function q(oe,xe){return(0,m.m)(xe)?(0,y.z)(oe,xe,1):(0,y.z)(oe,1)}},8372:(ln,at,B)=>{"use strict";B.d(at,{b:()=>oe});var y=B(4986),m=B(4482),q=B(5403);function oe(xe,Pe=y.z){return(0,m.e)((Ce,we)=>{let He=null,Se=null,me=null;const De=()=>{if(He){He.unsubscribe(),He=null;const je=Se;Se=null,we.next(je)}};function ke(){const je=me+xe,Le=Pe.now();if(Le<je)return He=this.schedule(void 0,je-Le),void we.add(He);De()}Ce.subscribe((0,q.x)(we,je=>{Se=je,me=Pe.now(),He||(He=Pe.schedule(ke,xe),we.add(He))},()=>{De(),we.complete()},void 0,()=>{Se=He=null}))})}},6590:(ln,at,B)=>{"use strict";B.d(at,{d:()=>q});var y=B(4482),m=B(5403);function q(oe){return(0,y.e)((xe,Pe)=>{let Ce=!1;xe.subscribe((0,m.x)(Pe,we=>{Ce=!0,Pe.next(we)},()=>{Ce||Pe.next(oe),Pe.complete()}))})}},1884:(ln,at,B)=>{"use strict";B.d(at,{x:()=>oe});var y=B(4671),m=B(4482),q=B(5403);function oe(Pe,Ce=y.y){return Pe=null!=Pe?Pe:xe,(0,m.e)((we,He)=>{let Se,me=!0;we.subscribe((0,q.x)(He,De=>{const ke=Ce(De);(me||!Pe(Se,ke))&&(me=!1,Se=ke,He.next(De))}))})}function xe(Pe,Ce){return Pe===Ce}},9300:(ln,at,B)=>{"use strict";B.d(at,{h:()=>q});var y=B(4482),m=B(5403);function q(oe,xe){return(0,y.e)((Pe,Ce)=>{let we=0;Pe.subscribe((0,m.x)(Ce,He=>oe.call(xe,He,we++)&&Ce.next(He)))})}},8746:(ln,at,B)=>{"use strict";B.d(at,{x:()=>m});var y=B(4482);function m(q){return(0,y.e)((oe,xe)=>{try{oe.subscribe(xe)}finally{xe.add(q)}})}},590:(ln,at,B)=>{"use strict";B.d(at,{P:()=>Ce});var y=B(6805),m=B(9300),q=B(5698),oe=B(6590),xe=B(8068),Pe=B(4671);function Ce(we,He){const Se=arguments.length>=2;return me=>me.pipe(we?(0,m.h)((De,ke)=>we(De,ke,me)):Pe.y,(0,q.q)(1),Se?(0,oe.d)(He):(0,xe.T)(()=>new y.K))}},4004:(ln,at,B)=>{"use strict";B.d(at,{U:()=>q});var y=B(4482),m=B(5403);function q(oe,xe){return(0,y.e)((Pe,Ce)=>{let we=0;Pe.subscribe((0,m.x)(Ce,He=>{Ce.next(oe.call(xe,He,we++))}))})}},9718:(ln,at,B)=>{"use strict";B.d(at,{h:()=>m});var y=B(4004);function m(q){return(0,y.U)(()=>q)}},8189:(ln,at,B)=>{"use strict";B.d(at,{J:()=>q});var y=B(5577),m=B(4671);function q(oe=1/0){return(0,y.z)(m.y,oe)}},5577:(ln,at,B)=>{"use strict";B.d(at,{z:()=>we});var y=B(4004),m=B(8421),q=B(4482),oe=B(9672),xe=B(5403),Ce=B(576);function we(He,Se,me=1/0){return(0,Ce.m)(Se)?we((De,ke)=>(0,y.U)((je,Le)=>Se(De,je,ke,Le))((0,m.Xf)(He(De,ke))),me):("number"==typeof Se&&(me=Se),(0,q.e)((De,ke)=>function Pe(He,Se,me,De,ke,je,Le,Xe){const Te=[];let Ie=0,ae=0,dt=!1;const ze=()=>{dt&&!Te.length&&!Ie&&Se.complete()},Ae=ht=>Ie<De?Y(ht):Te.push(ht),Y=ht=>{je&&Se.next(ht),Ie++;let Ke=!1;(0,m.Xf)(me(ht,ae++)).subscribe((0,xe.x)(Se,fe=>{null==ke||ke(fe),je?Ae(fe):Se.next(fe)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(Ie--;Te.length&&Ie<De;){const fe=Te.shift();Le?(0,oe.f)(Se,Le,()=>Y(fe)):Y(fe)}ze()}catch(fe){Se.error(fe)}}))};return He.subscribe((0,xe.x)(Se,Ae,()=>{dt=!0,ze()})),()=>{null==Xe||Xe()}}(De,ke,He,me)))}},5363:(ln,at,B)=>{"use strict";B.d(at,{Q:()=>oe});var y=B(9672),m=B(4482),q=B(5403);function oe(xe,Pe=0){return(0,m.e)((Ce,we)=>{Ce.subscribe((0,q.x)(we,He=>(0,y.f)(we,xe,()=>we.next(He),Pe),()=>(0,y.f)(we,xe,()=>we.complete(),Pe),He=>(0,y.f)(we,xe,()=>we.error(He),Pe)))})}},8343:(ln,at,B)=>{"use strict";B.d(at,{x:()=>q});var y=B(4482),m=B(5403);function q(){return(0,y.e)((oe,xe)=>{let Pe=null;oe._refCount++;const Ce=(0,m.x)(xe,void 0,void 0,void 0,()=>{if(!oe||oe._refCount<=0||0<--oe._refCount)return void(Pe=null);const we=oe._connection,He=Pe;Pe=null,we&&(!He||we===He)&&we.unsubscribe(),xe.unsubscribe()});oe.subscribe(Ce),Ce.closed||(Pe=oe.connect())})}},5026:(ln,at,B)=>{"use strict";B.d(at,{R:()=>oe});var y=B(4482),m=B(5403);function oe(xe,Pe){return(0,y.e)(function q(xe,Pe,Ce,we,He){return(Se,me)=>{let De=Ce,ke=Pe,je=0;Se.subscribe((0,m.x)(me,Le=>{const Xe=je++;ke=De?xe(ke,Le,Xe):(De=!0,Le),we&&me.next(ke)},He&&(()=>{De&&me.next(ke),me.complete()})))}}(xe,Pe,arguments.length>=2,!0))}},3099:(ln,at,B)=>{"use strict";B.d(at,{B:()=>xe});var y=B(8421),m=B(7579),q=B(930),oe=B(4482);function xe(Ce={}){const{connector:we=(()=>new m.x),resetOnError:He=!0,resetOnComplete:Se=!0,resetOnRefCountZero:me=!0}=Ce;return De=>{let ke,je,Le,Xe=0,Te=!1,Ie=!1;const ae=()=>{null==je||je.unsubscribe(),je=void 0},dt=()=>{ae(),ke=Le=void 0,Te=Ie=!1},ze=()=>{const Ae=ke;dt(),null==Ae||Ae.unsubscribe()};return(0,oe.e)((Ae,Y)=>{Xe++,!Ie&&!Te&&ae();const ht=Le=null!=Le?Le:we();Y.add(()=>{Xe--,0===Xe&&!Ie&&!Te&&(je=Pe(ze,me))}),ht.subscribe(Y),!ke&&Xe>0&&(ke=new q.Hp({next:Ke=>ht.next(Ke),error:Ke=>{Ie=!0,ae(),je=Pe(dt,He,Ke),ht.error(Ke)},complete:()=>{Te=!0,ae(),je=Pe(dt,Se),ht.complete()}}),(0,y.Xf)(Ae).subscribe(ke))})(De)}}function Pe(Ce,we,...He){if(!0===we)return void Ce();if(!1===we)return;const Se=new q.Hp({next:()=>{Se.unsubscribe(),Ce()}});return we(...He).subscribe(Se)}},8675:(ln,at,B)=>{"use strict";B.d(at,{O:()=>oe});var y=B(7272),m=B(3269),q=B(4482);function oe(...xe){const Pe=(0,m.yG)(xe);return(0,q.e)((Ce,we)=>{(Pe?(0,y.z)(xe,Ce,Pe):(0,y.z)(xe,Ce)).subscribe(we)})}},9468:(ln,at,B)=>{"use strict";B.d(at,{R:()=>m});var y=B(4482);function m(q,oe=0){return(0,y.e)((xe,Pe)=>{Pe.add(q.schedule(()=>xe.subscribe(Pe),oe))})}},3900:(ln,at,B)=>{"use strict";B.d(at,{w:()=>oe});var y=B(8421),m=B(4482),q=B(5403);function oe(xe,Pe){return(0,m.e)((Ce,we)=>{let He=null,Se=0,me=!1;const De=()=>me&&!He&&we.complete();Ce.subscribe((0,q.x)(we,ke=>{null==He||He.unsubscribe();let je=0;const Le=Se++;(0,y.Xf)(xe(ke,Le)).subscribe(He=(0,q.x)(we,Xe=>we.next(Pe?Pe(ke,Xe,Le,je++):Xe),()=>{He=null,De()}))},()=>{me=!0,De()}))})}},5698:(ln,at,B)=>{"use strict";B.d(at,{q:()=>oe});var y=B(515),m=B(4482),q=B(5403);function oe(xe){return xe<=0?()=>y.E:(0,m.e)((Pe,Ce)=>{let we=0;Pe.subscribe((0,q.x)(Ce,He=>{++we<=xe&&(Ce.next(He),xe<=we&&Ce.complete())}))})}},8505:(ln,at,B)=>{"use strict";B.d(at,{b:()=>xe});var y=B(576),m=B(4482),q=B(5403),oe=B(4671);function xe(Pe,Ce,we){const He=(0,y.m)(Pe)||Ce||we?{next:Pe,error:Ce,complete:we}:Pe;return He?(0,m.e)((Se,me)=>{var De;null===(De=He.subscribe)||void 0===De||De.call(He);let ke=!0;Se.subscribe((0,q.x)(me,je=>{var Le;null===(Le=He.next)||void 0===Le||Le.call(He,je),me.next(je)},()=>{var je;ke=!1,null===(je=He.complete)||void 0===je||je.call(He),me.complete()},je=>{var Le;ke=!1,null===(Le=He.error)||void 0===Le||Le.call(He,je),me.error(je)},()=>{var je,Le;ke&&(null===(je=He.unsubscribe)||void 0===je||je.call(He)),null===(Le=He.finalize)||void 0===Le||Le.call(He)}))}):oe.y}},8068:(ln,at,B)=>{"use strict";B.d(at,{T:()=>oe});var y=B(6805),m=B(4482),q=B(5403);function oe(Pe=xe){return(0,m.e)((Ce,we)=>{let He=!1;Ce.subscribe((0,q.x)(we,Se=>{He=!0,we.next(Se)},()=>He?we.complete():we.error(Pe())))})}function xe(){return new y.K}},4408:(ln,at,B)=>{"use strict";B.d(at,{o:()=>xe});var y=B(727);class m extends y.w0{constructor(Ce,we){super()}schedule(Ce,we=0){return this}}const q={setInterval(Pe,Ce,...we){const{delegate:He}=q;return null!=He&&He.setInterval?He.setInterval(Pe,Ce,...we):setInterval(Pe,Ce,...we)},clearInterval(Pe){const{delegate:Ce}=q;return((null==Ce?void 0:Ce.clearInterval)||clearInterval)(Pe)},delegate:void 0};var oe=B(8737);class xe extends m{constructor(Ce,we){super(Ce,we),this.scheduler=Ce,this.work=we,this.pending=!1}schedule(Ce,we=0){var He;if(this.closed)return this;this.state=Ce;const Se=this.id,me=this.scheduler;return null!=Se&&(this.id=this.recycleAsyncId(me,Se,we)),this.pending=!0,this.delay=we,this.id=null!==(He=this.id)&&void 0!==He?He:this.requestAsyncId(me,this.id,we),this}requestAsyncId(Ce,we,He=0){return q.setInterval(Ce.flush.bind(Ce,this),He)}recycleAsyncId(Ce,we,He=0){if(null!=He&&this.delay===He&&!1===this.pending)return we;null!=we&&q.clearInterval(we)}execute(Ce,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const He=this._execute(Ce,we);if(He)return He;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,we){let Se,He=!1;try{this.work(Ce)}catch(me){He=!0,Se=me||new Error("Scheduled action threw falsy error")}if(He)return this.unsubscribe(),Se}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:we}=this,{actions:He}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(He,this),null!=Ce&&(this.id=this.recycleAsyncId(we,Ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(ln,at,B)=>{"use strict";B.d(at,{v:()=>q});var y=B(6063);class m{constructor(xe,Pe=m.now){this.schedulerActionCtor=xe,this.now=Pe}schedule(xe,Pe=0,Ce){return new this.schedulerActionCtor(this,xe).schedule(Ce,Pe)}}m.now=y.l.now;class q extends m{constructor(xe,Pe=m.now){super(xe,Pe),this.actions=[],this._active=!1}flush(xe){const{actions:Pe}=this;if(this._active)return void Pe.push(xe);let Ce;this._active=!0;do{if(Ce=xe.execute(xe.state,xe.delay))break}while(xe=Pe.shift());if(this._active=!1,Ce){for(;xe=Pe.shift();)xe.unsubscribe();throw Ce}}}},4986:(ln,at,B)=>{"use strict";B.d(at,{P:()=>oe,z:()=>q});var y=B(4408);const q=new(B(7565).v)(y.o),oe=q},6063:(ln,at,B)=>{"use strict";B.d(at,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(ln,at,B)=>{"use strict";B.d(at,{z:()=>y});const y={setTimeout(m,q,...oe){const{delegate:xe}=y;return null!=xe&&xe.setTimeout?xe.setTimeout(m,q,...oe):setTimeout(m,q,...oe)},clearTimeout(m){const{delegate:q}=y;return((null==q?void 0:q.clearTimeout)||clearTimeout)(m)},delegate:void 0}},2202:(ln,at,B)=>{"use strict";B.d(at,{h:()=>m});const m=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ln,at,B)=>{"use strict";B.d(at,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(ln,at,B)=>{"use strict";B.d(at,{K:()=>m});const m=(0,B(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(ln,at,B)=>{"use strict";B.d(at,{_6:()=>Pe,jO:()=>oe,yG:()=>xe});var y=B(576),m=B(3532);function q(Ce){return Ce[Ce.length-1]}function oe(Ce){return(0,y.m)(q(Ce))?Ce.pop():void 0}function xe(Ce){return(0,m.K)(q(Ce))?Ce.pop():void 0}function Pe(Ce,we){return"number"==typeof q(Ce)?Ce.pop():we}},4742:(ln,at,B)=>{"use strict";B.d(at,{D:()=>xe});const{isArray:y}=Array,{getPrototypeOf:m,prototype:q,keys:oe}=Object;function xe(Ce){if(1===Ce.length){const we=Ce[0];if(y(we))return{args:we,keys:null};if(function Pe(Ce){return Ce&&"object"==typeof Ce&&m(Ce)===q}(we)){const He=oe(we);return{args:He.map(Se=>we[Se]),keys:He}}}return{args:Ce,keys:null}}},8737:(ln,at,B)=>{"use strict";function y(m,q){if(m){const oe=m.indexOf(q);0<=oe&&m.splice(oe,1)}}B.d(at,{P:()=>y})},3888:(ln,at,B)=>{"use strict";function y(m){const oe=m(xe=>{Error.call(xe),xe.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}B.d(at,{d:()=>y})},1810:(ln,at,B)=>{"use strict";function y(m,q){return m.reduce((oe,xe,Pe)=>(oe[xe]=q[Pe],oe),{})}B.d(at,{n:()=>y})},2806:(ln,at,B)=>{"use strict";B.d(at,{O:()=>oe,x:()=>q});var y=B(2416);let m=null;function q(xe){if(y.v.useDeprecatedSynchronousErrorHandling){const Pe=!m;if(Pe&&(m={errorThrown:!1,error:null}),xe(),Pe){const{errorThrown:Ce,error:we}=m;if(m=null,Ce)throw we}}else xe()}function oe(xe){y.v.useDeprecatedSynchronousErrorHandling&&m&&(m.errorThrown=!0,m.error=xe)}},9672:(ln,at,B)=>{"use strict";function y(m,q,oe,xe=0,Pe=!1){const Ce=q.schedule(function(){oe(),Pe?m.add(this.schedule(null,xe)):this.unsubscribe()},xe);if(m.add(Ce),!Pe)return Ce}B.d(at,{f:()=>y})},4671:(ln,at,B)=>{"use strict";function y(m){return m}B.d(at,{y:()=>y})},1144:(ln,at,B)=>{"use strict";B.d(at,{z:()=>y});const y=m=>m&&"number"==typeof m.length&&"function"!=typeof m},2206:(ln,at,B)=>{"use strict";B.d(at,{D:()=>m});var y=B(576);function m(q){return Symbol.asyncIterator&&(0,y.m)(null==q?void 0:q[Symbol.asyncIterator])}},576:(ln,at,B)=>{"use strict";function y(m){return"function"==typeof m}B.d(at,{m:()=>y})},3670:(ln,at,B)=>{"use strict";B.d(at,{c:()=>q});var y=B(8822),m=B(576);function q(oe){return(0,m.m)(oe[y.L])}},6495:(ln,at,B)=>{"use strict";B.d(at,{T:()=>q});var y=B(2202),m=B(576);function q(oe){return(0,m.m)(null==oe?void 0:oe[y.h])}},8239:(ln,at,B)=>{"use strict";B.d(at,{t:()=>m});var y=B(576);function m(q){return(0,y.m)(null==q?void 0:q.then)}},3260:(ln,at,B)=>{"use strict";B.d(at,{L:()=>oe,Q:()=>q});var y=B(655),m=B(576);function q(xe){return(0,y.FC)(this,arguments,function*(){const Ce=xe.getReader();try{for(;;){const{value:we,done:He}=yield(0,y.qq)(Ce.read());if(He)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(we)}}finally{Ce.releaseLock()}})}function oe(xe){return(0,m.m)(null==xe?void 0:xe.getReader)}},3532:(ln,at,B)=>{"use strict";B.d(at,{K:()=>m});var y=B(576);function m(q){return q&&(0,y.m)(q.schedule)}},4482:(ln,at,B)=>{"use strict";B.d(at,{A:()=>m,e:()=>q});var y=B(576);function m(oe){return(0,y.m)(null==oe?void 0:oe.lift)}function q(oe){return xe=>{if(m(xe))return xe.lift(function(Pe){try{return oe(Pe,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(ln,at,B)=>{"use strict";B.d(at,{Z:()=>oe});var y=B(4004);const{isArray:m}=Array;function oe(xe){return(0,y.U)(Pe=>function q(xe,Pe){return m(Pe)?xe(...Pe):xe(Pe)}(xe,Pe))}},5032:(ln,at,B)=>{"use strict";function y(){}B.d(at,{Z:()=>y})},9635:(ln,at,B)=>{"use strict";B.d(at,{U:()=>q,z:()=>m});var y=B(4671);function m(...oe){return q(oe)}function q(oe){return 0===oe.length?y.y:1===oe.length?oe[0]:function(Pe){return oe.reduce((Ce,we)=>we(Ce),Pe)}}},7849:(ln,at,B)=>{"use strict";B.d(at,{h:()=>q});var y=B(2416),m=B(3410);function q(oe){m.z.setTimeout(()=>{const{onUnhandledError:xe}=y.v;if(!xe)throw oe;xe(oe)})}},4532:(ln,at,B)=>{"use strict";function y(m){return new TypeError(`You provided ${null!==m&&"object"==typeof m?"an invalid object":`'${m}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(at,{z:()=>y})},863:(ln,at,B)=>{var y={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,7879,9230],"./ion-datetime_3.entry.js":[4959,7879,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168]};function m(q){if(!B.o(y,q))return Promise.resolve().then(()=>{var Pe=new Error("Cannot find module '"+q+"'");throw Pe.code="MODULE_NOT_FOUND",Pe});var oe=y[q],xe=oe[0];return Promise.all(oe.slice(1).map(B.e)).then(()=>B(xe))}m.keys=()=>Object.keys(y),m.id=863,ln.exports=m},655:(ln,at,B)=>{"use strict";function oe(gt,wt){var yt={};for(var qe in gt)Object.prototype.hasOwnProperty.call(gt,qe)&&wt.indexOf(qe)<0&&(yt[qe]=gt[qe]);if(null!=gt&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(qe=Object.getOwnPropertySymbols(gt);We<qe.length;We++)wt.indexOf(qe[We])<0&&Object.prototype.propertyIsEnumerable.call(gt,qe[We])&&(yt[qe[We]]=gt[qe[We]])}return yt}function xe(gt,wt,yt,qe){var _t,We=arguments.length,Ge=We<3?wt:null===qe?qe=Object.getOwnPropertyDescriptor(wt,yt):qe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ge=Reflect.decorate(gt,wt,yt,qe);else for(var mt=gt.length-1;mt>=0;mt--)(_t=gt[mt])&&(Ge=(We<3?_t(Ge):We>3?_t(wt,yt,Ge):_t(wt,yt))||Ge);return We>3&&Ge&&Object.defineProperty(wt,yt,Ge),Ge}function De(gt,wt,yt,qe){return new(yt||(yt=Promise))(function(Ge,_t){function mt(hn){try{jt(qe.next(hn))}catch(Dt){_t(Dt)}}function St(hn){try{jt(qe.throw(hn))}catch(Dt){_t(Dt)}}function jt(hn){hn.done?Ge(hn.value):function We(Ge){return Ge instanceof yt?Ge:new yt(function(_t){_t(Ge)})}(hn.value).then(mt,St)}jt((qe=qe.apply(gt,wt||[])).next())})}function ze(gt){return this instanceof ze?(this.v=gt,this):new ze(gt)}function Ae(gt,wt,yt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,qe=yt.apply(gt,wt||[]),Ge=[];return We={},_t("next"),_t("throw"),_t("return"),We[Symbol.asyncIterator]=function(){return this},We;function _t(ut){qe[ut]&&(We[ut]=function(Rt){return new Promise(function(rn,Rn){Ge.push([ut,Rt,rn,Rn])>1||mt(ut,Rt)})})}function mt(ut,Rt){try{!function St(ut){ut.value instanceof ze?Promise.resolve(ut.value.v).then(jt,hn):Dt(Ge[0][2],ut)}(qe[ut](Rt))}catch(rn){Dt(Ge[0][3],rn)}}function jt(ut){mt("next",ut)}function hn(ut){mt("throw",ut)}function Dt(ut,Rt){ut(Rt),Ge.shift(),Ge.length&&mt(Ge[0][0],Ge[0][1])}}function ht(gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yt,wt=gt[Symbol.asyncIterator];return wt?wt.call(gt):(gt=function Xe(gt){var wt="function"==typeof Symbol&&Symbol.iterator,yt=wt&&gt[wt],qe=0;if(yt)return yt.call(gt);if(gt&&"number"==typeof gt.length)return{next:function(){return gt&&qe>=gt.length&&(gt=void 0),{value:gt&&gt[qe++],done:!gt}}};throw new TypeError(wt?"Object is not iterable.":"Symbol.iterator is not defined.")}(gt),yt={},qe("next"),qe("throw"),qe("return"),yt[Symbol.asyncIterator]=function(){return this},yt);function qe(Ge){yt[Ge]=gt[Ge]&&function(_t){return new Promise(function(mt,St){!function We(Ge,_t,mt,St){Promise.resolve(St).then(function(jt){Ge({value:jt,done:mt})},_t)}(mt,St,(_t=gt[Ge](_t)).done,_t.value)})}}}B.d(at,{FC:()=>Ae,KL:()=>ht,_T:()=>oe,gn:()=>xe,mG:()=>De,qq:()=>ze})},7340:(ln,at,B)=>{"use strict";B.d(at,{F4:()=>Se,IO:()=>Le,LC:()=>m,SB:()=>He,X$:()=>oe,ZE:()=>ae,ZN:()=>Ie,_j:()=>y,eR:()=>me,jt:()=>xe,k1:()=>dt,l3:()=>q,oB:()=>we,pV:()=>ke,ru:()=>Pe,vP:()=>Ce});class y{}class m{}const q="*";function oe(ze,Ae){return{type:7,name:ze,definitions:Ae,options:{}}}function xe(ze,Ae=null){return{type:4,styles:Ae,timings:ze}}function Pe(ze,Ae=null){return{type:3,steps:ze,options:Ae}}function Ce(ze,Ae=null){return{type:2,steps:ze,options:Ae}}function we(ze){return{type:6,styles:ze,offset:null}}function He(ze,Ae,Y){return{type:0,name:ze,styles:Ae,options:Y}}function Se(ze){return{type:5,steps:ze}}function me(ze,Ae,Y=null){return{type:1,expr:ze,animation:Ae,options:Y}}function ke(ze=null){return{type:9,options:ze}}function Le(ze,Ae,Y=null){return{type:11,selector:ze,animation:Ae,options:Y}}function Te(ze){Promise.resolve().then(ze)}class Ie{constructor(Ae=0,Y=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ae+Y}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ae=>Ae()),this._onDoneFns=[])}onStart(Ae){this._originalOnStartFns.push(Ae),this._onStartFns.push(Ae)}onDone(Ae){this._originalOnDoneFns.push(Ae),this._onDoneFns.push(Ae)}onDestroy(Ae){this._onDestroyFns.push(Ae)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Te(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ae=>Ae()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ae=>Ae()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ae){this._position=this.totalTime?Ae*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ae){const Y="start"==Ae?this._onStartFns:this._onDoneFns;Y.forEach(ht=>ht()),Y.length=0}}class ae{constructor(Ae){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ae;let Y=0,ht=0,Ke=0;const fe=this.players.length;0==fe?Te(()=>this._onFinish()):this.players.forEach(Ct=>{Ct.onDone(()=>{++Y==fe&&this._onFinish()}),Ct.onDestroy(()=>{++ht==fe&&this._onDestroy()}),Ct.onStart(()=>{++Ke==fe&&this._onStart()})}),this.totalTime=this.players.reduce((Ct,Ue)=>Math.max(Ct,Ue.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ae=>Ae()),this._onDoneFns=[])}init(){this.players.forEach(Ae=>Ae.init())}onStart(Ae){this._onStartFns.push(Ae)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ae=>Ae()),this._onStartFns=[])}onDone(Ae){this._onDoneFns.push(Ae)}onDestroy(Ae){this._onDestroyFns.push(Ae)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ae=>Ae.play())}pause(){this.players.forEach(Ae=>Ae.pause())}restart(){this.players.forEach(Ae=>Ae.restart())}finish(){this._onFinish(),this.players.forEach(Ae=>Ae.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ae=>Ae.destroy()),this._onDestroyFns.forEach(Ae=>Ae()),this._onDestroyFns=[])}reset(){this.players.forEach(Ae=>Ae.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ae){const Y=Ae*this.totalTime;this.players.forEach(ht=>{const Ke=ht.totalTime?Math.min(1,Y/ht.totalTime):1;ht.setPosition(Ke)})}getPosition(){const Ae=this.players.reduce((Y,ht)=>null===Y||ht.totalTime>Y.totalTime?ht:Y,null);return null!=Ae?Ae.getPosition():0}beforeDestroy(){this.players.forEach(Ae=>{Ae.beforeDestroy&&Ae.beforeDestroy()})}triggerCallback(Ae){const Y="start"==Ae?this._onStartFns:this._onDoneFns;Y.forEach(ht=>ht()),Y.length=0}}const dt="!"},6895:(ln,at,B)=>{"use strict";B.d(at,{Do:()=>ae,EM:()=>no,HT:()=>oe,JF:()=>wa,K0:()=>Pe,Mx:()=>as,NF:()=>ys,O5:()=>Me,PM:()=>js,RF:()=>nt,S$:()=>Xe,V_:()=>He,Ye:()=>dt,b0:()=>Ie,bD:()=>$a,ez:()=>So,mk:()=>gr,n9:()=>Lt,q:()=>q,sg:()=>$i,tP:()=>Ln,w_:()=>xe});var y=B(4650);let m=null;function q(){return m}function oe(F){m||(m=F)}class xe{}const Pe=new y.OlP("DocumentToken");let Ce=(()=>{class F{historyGo(V){throw new Error("Not implemented")}}return F.\u0275fac=function(V){return new(V||F)},F.\u0275prov=y.Yz7({token:F,factory:function(){return function we(){return(0,y.LFG)(Se)}()},providedIn:"platform"}),F})();const He=new y.OlP("Location Initialized");let Se=(()=>{class F extends Ce{constructor(V){super(),this._doc=V,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(V){const le=q().getGlobalEventTarget(this._doc,"window");return le.addEventListener("popstate",V,!1),()=>le.removeEventListener("popstate",V)}onHashChange(V){const le=q().getGlobalEventTarget(this._doc,"window");return le.addEventListener("hashchange",V,!1),()=>le.removeEventListener("hashchange",V)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(V){this._location.pathname=V}pushState(V,le,$e){me()?this._history.pushState(V,le,$e):this._location.hash=$e}replaceState(V,le,$e){me()?this._history.replaceState(V,le,$e):this._location.hash=$e}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return F.\u0275fac=function(V){return new(V||F)(y.LFG(Pe))},F.\u0275prov=y.Yz7({token:F,factory:function(){return function De(){return new Se((0,y.LFG)(Pe))}()},providedIn:"platform"}),F})();function me(){return!!window.history.pushState}function ke(F,ee){if(0==F.length)return ee;if(0==ee.length)return F;let V=0;return F.endsWith("/")&&V++,ee.startsWith("/")&&V++,2==V?F+ee.substring(1):1==V?F+ee:F+"/"+ee}function je(F){const ee=F.match(/#|\?|$/),V=ee&&ee.index||F.length;return F.slice(0,V-("/"===F[V-1]?1:0))+F.slice(V)}function Le(F){return F&&"?"!==F[0]?"?"+F:F}let Xe=(()=>{class F{historyGo(V){throw new Error("Not implemented")}}return F.\u0275fac=function(V){return new(V||F)},F.\u0275prov=y.Yz7({token:F,factory:function(){return(0,y.f3M)(Ie)},providedIn:"root"}),F})();const Te=new y.OlP("appBaseHref");let Ie=(()=>{class F extends Xe{constructor(V,le){var $e,Ut,qt;super(),this._platformLocation=V,this._removeListenerFns=[],this._baseHref=null!==($e=null!==(Ut=null!=le?le:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Ut?Ut:null===(qt=(0,y.f3M)(Pe).location)||void 0===qt?void 0:qt.origin)&&void 0!==$e?$e:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return ke(this._baseHref,V)}path(V=!1){const le=this._platformLocation.pathname+Le(this._platformLocation.search),$e=this._platformLocation.hash;return $e&&V?`${le}${$e}`:le}pushState(V,le,$e,Ut){const qt=this.prepareExternalUrl($e+Le(Ut));this._platformLocation.pushState(V,le,qt)}replaceState(V,le,$e,Ut){const qt=this.prepareExternalUrl($e+Le(Ut));this._platformLocation.replaceState(V,le,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){var le,$e;null===(le=($e=this._platformLocation).historyGo)||void 0===le||le.call($e,V)}}return F.\u0275fac=function(V){return new(V||F)(y.LFG(Ce),y.LFG(Te,8))},F.\u0275prov=y.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),ae=(()=>{class F extends Xe{constructor(V,le){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=le&&(this._baseHref=le)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let le=this._platformLocation.hash;return null==le&&(le="#"),le.length>0?le.substring(1):le}prepareExternalUrl(V){const le=ke(this._baseHref,V);return le.length>0?"#"+le:le}pushState(V,le,$e,Ut){let qt=this.prepareExternalUrl($e+Le(Ut));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.pushState(V,le,qt)}replaceState(V,le,$e,Ut){let qt=this.prepareExternalUrl($e+Le(Ut));0==qt.length&&(qt=this._platformLocation.pathname),this._platformLocation.replaceState(V,le,qt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){var le,$e;null===(le=($e=this._platformLocation).historyGo)||void 0===le||le.call($e,V)}}return F.\u0275fac=function(V){return new(V||F)(y.LFG(Ce),y.LFG(Te,8))},F.\u0275prov=y.Yz7({token:F,factory:F.\u0275fac}),F})(),dt=(()=>{class F{constructor(V){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=V;const le=this._locationStrategy.getBaseHref();this._basePath=function ht(F){if(new RegExp("^(https?:)?//").test(F)){const[,V]=F.split(/\/\/[^\/]+/);return V}return F}(je(Y(le))),this._locationStrategy.onPopState($e=>{this._subject.emit({url:this.path(!0),pop:!0,state:$e.state,type:$e.type})})}ngOnDestroy(){var V;null===(V=this._urlChangeSubscription)||void 0===V||V.unsubscribe(),this._urlChangeListeners=[]}path(V=!1){return this.normalize(this._locationStrategy.path(V))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(V,le=""){return this.path()==this.normalize(V+Le(le))}normalize(V){return F.stripTrailingSlash(function Ae(F,ee){if(!F||!ee.startsWith(F))return ee;const V=ee.substring(F.length);return""===V||["/",";","?","#"].includes(V[0])?V:ee}(this._basePath,Y(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._locationStrategy.prepareExternalUrl(V)}go(V,le="",$e=null){this._locationStrategy.pushState($e,"",V,le),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Le(le)),$e)}replaceState(V,le="",$e=null){this._locationStrategy.replaceState($e,"",V,le),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+Le(le)),$e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(V=0){var le,$e;null===(le=($e=this._locationStrategy).historyGo)||void 0===le||le.call($e,V)}onUrlChange(V){return this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(le=>{this._notifyUrlChangeListeners(le.url,le.state)})),()=>{const le=this._urlChangeListeners.indexOf(V);var $e;this._urlChangeListeners.splice(le,1),0===this._urlChangeListeners.length&&(null===($e=this._urlChangeSubscription)||void 0===$e||$e.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(V="",le){this._urlChangeListeners.forEach($e=>$e(V,le))}subscribe(V,le,$e){return this._subject.subscribe({next:V,error:le,complete:$e})}}return F.normalizeQueryParams=Le,F.joinWithSlash=ke,F.stripTrailingSlash=je,F.\u0275fac=function(V){return new(V||F)(y.LFG(Xe))},F.\u0275prov=y.Yz7({token:F,factory:function(){return function ze(){return new dt((0,y.LFG)(Xe))}()},providedIn:"root"}),F})();function Y(F){return F.replace(/\/index.html$/,"")}function as(F,ee){ee=encodeURIComponent(ee);for(const V of F.split(";")){const le=V.indexOf("="),[$e,Ut]=-1==le?[V,""]:[V.slice(0,le),V.slice(le+1)];if($e.trim()===ee)return decodeURIComponent(Ut)}return null}const li=/\s+/,_n=[];let gr=(()=>{class F{constructor(V,le,$e,Ut){this._iterableDiffers=V,this._keyValueDiffers=le,this._ngEl=$e,this._renderer=Ut,this.initialClasses=_n,this.stateMap=new Map}set klass(V){this.initialClasses=null!=V?V.trim().split(li):_n}set ngClass(V){this.rawClass="string"==typeof V?V.trim().split(li):V}ngDoCheck(){for(const le of this.initialClasses)this._updateState(le,!0);const V=this.rawClass;if(Array.isArray(V)||V instanceof Set)for(const le of V)this._updateState(le,!0);else if(null!=V)for(const le of Object.keys(V))this._updateState(le,Boolean(V[le]));this._applyStateDiff()}_updateState(V,le){const $e=this.stateMap.get(V);void 0!==$e?($e.enabled!==le&&($e.changed=!0,$e.enabled=le),$e.touched=!0):this.stateMap.set(V,{enabled:le,changed:!0,touched:!0})}_applyStateDiff(){for(const V of this.stateMap){const le=V[0],$e=V[1];$e.changed?(this._toggleClass(le,$e.enabled),$e.changed=!1):$e.touched||($e.enabled&&this._toggleClass(le,!1),this.stateMap.delete(le)),$e.touched=!1}}_toggleClass(V,le){(V=V.trim()).length>0&&V.split(li).forEach($e=>{le?this._renderer.addClass(this._ngEl.nativeElement,$e):this._renderer.removeClass(this._ngEl.nativeElement,$e)})}}return F.\u0275fac=function(V){return new(V||F)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),F})();class ui{constructor(ee,V,le,$e){this.$implicit=ee,this.ngForOf=V,this.index=le,this.count=$e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $i=(()=>{class F{set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}constructor(V,le,$e){this._viewContainer=V,this._template=le,this._differs=$e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const le=this._viewContainer;V.forEachOperation(($e,Ut,qt)=>{if(null==$e.previousIndex)le.createEmbeddedView(this._template,new ui($e.item,this._ngForOf,-1,-1),null===qt?void 0:qt);else if(null==qt)le.remove(null===Ut?void 0:Ut);else if(null!==Ut){const kn=le.get(Ut);le.move(kn,qt),ei(kn,$e)}});for(let $e=0,Ut=le.length;$e<Ut;$e++){const kn=le.get($e).context;kn.index=$e,kn.count=Ut,kn.ngForOf=this._ngForOf}V.forEachIdentityChange($e=>{ei(le.get($e.currentIndex),$e)})}static ngTemplateContextGuard(V,le){return!0}}return F.\u0275fac=function(V){return new(V||F)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function ei(F,ee){F.context.$implicit=ee.item}let Me=(()=>{class F{constructor(V,le){this._viewContainer=V,this._context=new Ye,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=le}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){be("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){be("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,le){return!0}}return F.\u0275fac=function(V){return new(V||F)(y.Y36(y.s_b),y.Y36(y.Rgc))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class Ye{constructor(){this.$implicit=null,this.ngIf=null}}function be(F,ee){if(ee&&!ee.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,y.AaK)(ee)}'.`)}class Je{constructor(ee,V){this._viewContainerRef=ee,this._templateRef=V,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ee){ee&&!this._created?this.create():!ee&&this._created&&this.destroy()}}let nt=(()=>{class F{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(V){this._ngSwitch=V,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(V){this._defaultViews.push(V)}_matchCase(V){const le=V==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||le,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),le}_updateDefaultCases(V){if(this._defaultViews.length>0&&V!==this._defaultUsed){this._defaultUsed=V;for(const le of this._defaultViews)le.enforceState(V)}}}return F.\u0275fac=function(V){return new(V||F)},F.\u0275dir=y.lG2({type:F,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),F})(),Lt=(()=>{class F{constructor(V,le,$e){this.ngSwitch=$e,$e._addCase(),this._view=new Je(V,le)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return F.\u0275fac=function(V){return new(V||F)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(nt,9))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),F})(),Ln=(()=>{class F{constructor(V){this._viewContainerRef=V,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(V){if(V.ngTemplateOutlet||V.ngTemplateOutletInjector){const le=this._viewContainerRef;if(this._viewRef&&le.remove(le.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:$e,ngTemplateOutletContext:Ut,ngTemplateOutletInjector:qt}=this;this._viewRef=le.createEmbeddedView($e,Ut,qt?{injector:qt}:void 0)}else this._viewRef=null}else this._viewRef&&V.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return F.\u0275fac=function(V){return new(V||F)(y.Y36(y.s_b))},F.\u0275dir=y.lG2({type:F,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[y.TTD]}),F})(),So=(()=>{class F{}return F.\u0275fac=function(V){return new(V||F)},F.\u0275mod=y.oAB({type:F}),F.\u0275inj=y.cJS({}),F})();const $a="browser",us="server";function ys(F){return F===$a}function js(F){return F===us}let no=(()=>{class F{}return F.\u0275prov=(0,y.Yz7)({token:F,providedIn:"root",factory:()=>new hu((0,y.LFG)(Pe),window)}),F})();class hu{constructor(ee,V){this.document=ee,this.window=V,this.offset=()=>[0,0]}setOffset(ee){this.offset=Array.isArray(ee)?()=>ee:ee}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ee){this.supportsScrolling()&&this.window.scrollTo(ee[0],ee[1])}scrollToAnchor(ee){if(!this.supportsScrolling())return;const V=function Ua(F,ee){const V=F.getElementById(ee)||F.getElementsByName(ee)[0];if(V)return V;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const le=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let $e=le.currentNode;for(;$e;){const Ut=$e.shadowRoot;if(Ut){const qt=Ut.getElementById(ee)||Ut.querySelector(`[name="${ee}"]`);if(qt)return qt}$e=le.nextNode()}}return null}(this.document,ee);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(ee){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=ee)}}scrollToElement(ee){const V=ee.getBoundingClientRect(),le=V.left+this.window.pageXOffset,$e=V.top+this.window.pageYOffset,Ut=this.offset();this.window.scrollTo(le-Ut[0],$e-Ut[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ee=Bo(this.window.history)||Bo(Object.getPrototypeOf(this.window.history));return!(!ee||!ee.writable&&!ee.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Bo(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class wa{}},4650:(ln,at,B)=>{"use strict";B.d(at,{$8M:()=>yu,$WT:()=>jn,$Z:()=>Jf,AFp:()=>VE,AaK:()=>we,BQk:()=>au,CHM:()=>Ia,CRH:()=>_E,CZH:()=>f0,CqO:()=>Gm,D6c:()=>xI,EJc:()=>Ww,EiD:()=>Hh,EpF:()=>Mg,F$t:()=>mf,F4k:()=>Rg,FYo:()=>sl,FiY:()=>kl,G48:()=>pI,Gf:()=>mE,GfV:()=>Gf,GkF:()=>lu,Gpc:()=>me,Hsn:()=>gh,Ikx:()=>bp,JOm:()=>ia,JVY:()=>lm,JZr:()=>Xe,KtG:()=>Dl,L6k:()=>jd,LAX:()=>V_,LFG:()=>tr,LMc:()=>OI,Lbi:()=>jw,Lck:()=>Xv,MAs:()=>hf,MMx:()=>Nv,MR2:()=>Kd,NdJ:()=>xg,O4$:()=>vs,OlP:()=>Zi,Oqu:()=>Dd,P3R:()=>jf,PXZ:()=>aI,Q6J:()=>al,QGY:()=>l_,QbO:()=>Hw,Qsj:()=>Qh,R0b:()=>xd,RDi:()=>sm,RIp:()=>Vp,Rgc:()=>Hi,SBq:()=>Ou,Sil:()=>qw,Suo:()=>yE,TTD:()=>Lo,TgZ:()=>ph,Tol:()=>m_,Udp:()=>If,W1O:()=>IE,X6Q:()=>fI,XFs:()=>pn,Xpm:()=>mn,Xts:()=>Gh,Y36:()=>Wo,YKP:()=>Cl,YNc:()=>df,Yjl:()=>vr,Yz7:()=>Dt,Z0I:()=>Rn,ZZ4:()=>aE,_Bn:()=>Rf,_UZ:()=>pf,_Vd:()=>ad,_uU:()=>Ug,aQg:()=>lE,c2e:()=>zw,cJS:()=>Rt,cg1:()=>Cp,dDg:()=>rI,dqk:()=>Dr,eBb:()=>U_,eJc:()=>G0,ekj:()=>Ih,eoX:()=>ZE,f3M:()=>Gr,g9A:()=>HE,h0i:()=>ul,hGG:()=>RI,hij:()=>Vg,iGM:()=>gE,iPO:()=>cI,ifc:()=>ye,ip1:()=>UE,jDz:()=>Mp,kL8:()=>Wc,kcU:()=>Mo,lG2:()=>Jn,lqb:()=>sd,lri:()=>qE,mCW:()=>Bp,n5z:()=>mu,n_E:()=>oi,oAB:()=>At,oxw:()=>d_,pB0:()=>Gs,q3G:()=>co,q4F:()=>Xd,qLn:()=>Pc,qOj:()=>up,qZA:()=>lc,qzn:()=>iu,rWj:()=>YE,sBO:()=>gI,s_b:()=>Fa,soG:()=>p0,tBr:()=>na,tb:()=>XE,tp0:()=>Fl,uIk:()=>bg,vHH:()=>Te,vpe:()=>Dn,wAp:()=>Pr,xp6:()=>Qf,ynx:()=>Ag,z2F:()=>g0,z3N:()=>ru,zSh:()=>qh,zs3:()=>dd});var y=B(7579),m=B(727),q=B(9751),oe=B(6451),xe=B(3099);function Pe(n){for(let s in n)if(n[s]===Pe)return s;throw Error("Could not find renamed property on target object.")}function Ce(n,s){for(const l in s)s.hasOwnProperty(l)&&!n.hasOwnProperty(l)&&(n[l]=s[l])}function we(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(we).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const s=n.toString();if(null==s)return""+s;const l=s.indexOf("\n");return-1===l?s:s.substring(0,l)}function He(n,s){return null==n||""===n?null===s?"":s:null==s||""===s?n:n+" "+s}const Se=Pe({__forward_ref__:Pe});function me(n){return n.__forward_ref__=me,n.toString=function(){return we(this())},n}function De(n){return ke(n)?n():n}function ke(n){return"function"==typeof n&&n.hasOwnProperty(Se)&&n.__forward_ref__===me}function je(n){return n&&!!n.\u0275providers}const Xe="https://g.co/ng/security#xss";class Te extends Error{constructor(s,l){super(Ie(s,l)),this.code=s}}function Ie(n,s){return`NG0${Math.abs(n)}${s?": "+s.trim():""}`}function ae(n){return"string"==typeof n?n:null==n?"":String(n)}function dt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ae(n)}function ht(n,s){throw new Te(-201,!1)}function _t(n,s){null==n&&function mt(n,s,l,h){throw new Error(`ASSERTION ERROR: ${n}`+(null==h?"":` [Expected=> ${l} ${h} ${s} <=Actual]`))}(s,n,null,"!=")}function Dt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Rt(n){return{providers:n.providers||[],imports:n.imports||[]}}function rn(n){return Un(n,En)||Un(n,cr)}function Rn(n){return null!==rn(n)}function Un(n,s){return n.hasOwnProperty(s)?n[s]:null}function tn(n){return n&&(n.hasOwnProperty(Ht)||n.hasOwnProperty(Zn))?n[Ht]:null}const En=Pe({\u0275prov:Pe}),Ht=Pe({\u0275inj:Pe}),cr=Pe({ngInjectableDef:Pe}),Zn=Pe({ngInjectorDef:Pe});var pn=(()=>((pn=pn||{})[pn.Default=0]="Default",pn[pn.Host=1]="Host",pn[pn.Self=2]="Self",pn[pn.SkipSelf=4]="SkipSelf",pn[pn.Optional=8]="Optional",pn))();let dr;function Mr(n){const s=dr;return dr=n,s}function Ri(n,s,l){const h=rn(n);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:l&pn.Optional?null:void 0!==s?s:void ht(we(n))}const Dr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Nr={},Xr="__NG_DI_FLAG__",pr="ngTempTokenPath",Ci="ngTokenPath",kr=/\n/gm,ai="\u0275",_r="__source";let yi;function sr(n){const s=yi;return yi=n,s}function Di(n,s=pn.Default){if(void 0===yi)throw new Te(-203,!1);return null===yi?Ri(n,void 0,s):yi.get(n,s&pn.Optional?null:void 0,s)}function tr(n,s=pn.Default){return(function Mi(){return dr}()||Di)(De(n),s)}function Gr(n,s=pn.Default){return tr(n,ri(s))}function ri(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Sr(n){const s=[];for(let l=0;l<n.length;l++){const h=De(n[l]);if(Array.isArray(h)){if(0===h.length)throw new Te(900,!1);let f,v=pn.Default;for(let T=0;T<h.length;T++){const N=h[T],j=Ur(N);"number"==typeof j?-1===j?f=N.token:v|=j:f=N}s.push(tr(f,v))}else s.push(tr(h))}return s}function _i(n,s){return n[Xr]=s,n.prototype[Xr]=s,n}function Ur(n){return n[Xr]}function Be(n){return{toString:n}.toString()}var he=(()=>((he=he||{})[he.OnPush=0]="OnPush",he[he.Default=1]="Default",he))(),ye=(()=>{return(n=ye||(ye={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ye;var n})();const de={},lt=[],Re=Pe({\u0275cmp:Pe}),Fe=Pe({\u0275dir:Pe}),Ee=Pe({\u0275pipe:Pe}),et=Pe({\u0275mod:Pe}),xt=Pe({\u0275fac:Pe}),Yt=Pe({__NG_ELEMENT_ID__:Pe});let gn=0;function mn(n){return Be(()=>{const s=Ps(n),l={...s,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===he.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||ye.Emulated,id:"c"+gn++,styles:n.styles||lt,_:null,schemas:n.schemas||null,tView:null};ns(l);const h=n.dependencies;return l.directiveDefs=as(h,!1),l.pipeDefs=as(h,!0),l})}function Wr(n){return Tn(n)||Fr(n)}function kt(n){return null!==n}function At(n){return Be(()=>({type:n.type,bootstrap:n.bootstrap||lt,declarations:n.declarations||lt,imports:n.imports||lt,exports:n.exports||lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function On(n,s){if(null==n)return de;const l={};for(const h in n)if(n.hasOwnProperty(h)){let f=n[h],v=f;Array.isArray(f)&&(v=f[1],f=f[0]),l[f]=h,s&&(s[f]=v)}return l}function Jn(n){return Be(()=>{const s=Ps(n);return ns(s),s})}function vr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Tn(n){return n[Re]||null}function Fr(n){return n[Fe]||null}function wr(n){return n[Ee]||null}function jn(n){const s=Tn(n)||Fr(n)||wr(n);return null!==s&&s.standalone}function Wn(n,s){const l=n[et]||null;if(!l&&!0===s)throw new Error(`Type ${we(n)} does not have '\u0275mod' property.`);return l}function Ps(n){const s={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:On(n.inputs,s),outputs:On(n.outputs)}}function ns(n){var s;null===(s=n.features)||void 0===s||s.forEach(l=>l(n))}function as(n,s){if(!n)return null;const l=s?wr:Wr;return()=>("function"==typeof n?n():n).map(h=>l(h)).filter(kt)}const li=0,_n=1,gr=2,si=3,Rr=4,vi=5,ui=6,$i=7,ei=8,ce=9,Me=10,Ye=11,be=12,Je=13,nt=14,Lt=15,$t=16,Gt=17,Wt=18,cn=19,Qn=20,Ln=21,ar=22,Li=1,ct=2,st=7,It=8,Kt=9,en=10;function Hn(n){return Array.isArray(n)&&"object"==typeof n[Li]}function mr(n){return Array.isArray(n)&&!0===n[Li]}function qr(n){return 0!=(4&n.flags)}function bs(n){return n.componentOffset>-1}function Ws(n){return 1==(1&n.flags)}function Yr(n){return!!n.template}function Ks(n){return 0!=(256&n[gr])}function pi(n,s){return n.hasOwnProperty(xt)?n[xt]:null}class po{constructor(s,l,h){this.previousValue=s,this.currentValue=l,this.firstChange=h}isFirstChange(){return this.firstChange}}function Lo(){return no}function no(n){return n.type.prototype.ngOnChanges&&(n.setInput=Bo),hu}function hu(){const n=ua(this),s=null==n?void 0:n.current;if(s){const l=n.previous;if(l===de)n.previous=s;else for(let h in s)l[h]=s[h];n.current=null,this.ngOnChanges(s)}}function Bo(n,s,l,h){const f=this.declaredInputs[l],v=ua(n)||function wa(n,s){return n[Ua]=s}(n,{previous:de,current:null}),T=v.current||(v.current={}),N=v.previous,j=N[f];T[f]=new po(j&&j.currentValue,s,N===de),n[h]=s}Lo.ngInherit=!0;const Ua="__ngSimpleChanges__";function ua(n){return n[Ua]||null}const Ei=function(n,s,l){},Xo="svg";function Yi(n){for(;Array.isArray(n);)n=n[li];return n}function Ao(n,s){return Yi(s[n])}function cs(n,s){return Yi(s[n.index])}function C(n,s){return n.data[s]}function D(n,s){const l=s[n];return Hn(l)?l:l[li]}function _e(n){return 64==(64&n[gr])}function Vn(n,s){return null==s?null:n[s]}function Kn(n){n[Wt]=0}function Ar(n,s){n[vi]+=s;let l=n,h=n[si];for(;null!==h&&(1===s&&1===l[vi]||-1===s&&0===l[vi]);)h[vi]+=s,l=h,h=h[si]}const Nn={lFrame:Ka(null),bindingsEnabled:!0};function Ft(){return Nn.bindingsEnabled}function Vt(){return Nn.lFrame.lView}function $n(){return Nn.lFrame.tView}function Ia(n){return Nn.lFrame.contextLView=n,n[ei]}function Dl(n){return Nn.lFrame.contextLView=null,n}function is(){let n=fu();for(;null!==n&&64===n.type;)n=n.parent;return n}function fu(){return Nn.lFrame.currentTNode}function ro(n,s){const l=Nn.lFrame;l.currentTNode=n,l.isParent=s}function Tl(){return Nn.lFrame.isParent}function cl(){Nn.lFrame.isParent=!1}function mo(){return Nn.lFrame.bindingIndex++}function Uo(n){const s=Nn.lFrame,l=s.bindingIndex;return s.bindingIndex=s.bindingIndex+n,l}function dl(n,s){const l=Nn.lFrame;l.bindingIndex=l.bindingRootIndex=n,Qi(s)}function Qi(n){Nn.lFrame.currentDirectiveIndex=n}function ha(){return Nn.lFrame.currentQueryIndex}function Ga(n){Nn.lFrame.currentQueryIndex=n}function yo(n){const s=n[_n];return 2===s.type?s.declTNode:1===s.type?n[ui]:null}function Jo(n,s,l){if(l&pn.SkipSelf){let f=s,v=n;for(;!(f=f.parent,null!==f||l&pn.Host||(f=yo(v),null===f||(v=v[Lt],10&f.type))););if(null===f)return!1;s=f,n=v}const h=Nn.lFrame=Wa();return h.currentTNode=s,h.lView=n,!0}function _o(n){const s=Wa(),l=n[_n];Nn.lFrame=s,s.currentTNode=l.firstChild,s.lView=n,s.tView=l,s.contextLView=n,s.bindingIndex=l.bindingStartIndex,s.inI18n=!1}function Wa(){const n=Nn.lFrame,s=null===n?null:n.child;return null===s?Ka(n):s}function Ka(n){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=s),s}function ba(){const n=Nn.lFrame;return Nn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Hs=ba;function Xl(){const n=ba();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ss(){return Nn.lFrame.selectedIndex}function qs(n){Nn.lFrame.selectedIndex=n}function Lr(){const n=Nn.lFrame;return C(n.tView,n.selectedIndex)}function vs(){Nn.lFrame.currentNamespace=Xo}function Mo(){!function gc(){Nn.lFrame.currentNamespace=null}()}function ii(n,s){for(let X=s.directiveStart,ge=s.directiveEnd;X<ge;X++){const pt=n.data[X].type.prototype,{ngAfterContentInit:Nt,ngAfterContentChecked:on,ngAfterViewInit:Cn,ngAfterViewChecked:Yn,ngOnDestroy:Cr}=pt;var l,h,f,v,T,N,j;Nt&&(null!==(l=n.contentHooks)&&void 0!==l?l:n.contentHooks=[]).push(-X,Nt),on&&((null!==(h=n.contentHooks)&&void 0!==h?h:n.contentHooks=[]).push(X,on),(null!==(f=n.contentCheckHooks)&&void 0!==f?f:n.contentCheckHooks=[]).push(X,on)),Cn&&(null!==(v=n.viewHooks)&&void 0!==v?v:n.viewHooks=[]).push(-X,Cn),Yn&&((null!==(T=n.viewHooks)&&void 0!==T?T:n.viewHooks=[]).push(X,Yn),(null!==(N=n.viewCheckHooks)&&void 0!==N?N:n.viewCheckHooks=[]).push(X,Yn)),null!=Cr&&(null!==(j=n.destroyHooks)&&void 0!==j?j:n.destroyHooks=[]).push(X,Cr)}}function Vu(n,s,l){ee(n,s,3,l)}function fa(n,s,l,h){(3&n[gr])===l&&ee(n,s,l,h)}function F(n,s){let l=n[gr];(3&l)===s&&(l&=2047,l+=1,n[gr]=l)}function ee(n,s,l,h){const v=null!=h?h:-1,T=s.length-1;let N=0;for(let j=void 0!==h?65535&n[Wt]:0;j<T;j++)if("number"==typeof s[j+1]){if(N=s[j],null!=h&&N>=h)break}else s[j]<0&&(n[Wt]+=65536),(N<v||-1==v)&&(V(n,l,s,j),n[Wt]=(4294901760&n[Wt])+j+2),j++}function V(n,s,l,h){const f=l[h]<0,v=l[h+1],N=n[f?-l[h]:l[h]];if(f){if(n[gr]>>11<n[Wt]>>16&&(3&n[gr])===s){n[gr]+=2048,Ei(4,N,v);try{v.call(N)}finally{Ei(5,N,v)}}}else{Ei(4,N,v);try{v.call(N)}finally{Ei(5,N,v)}}}const le=-1;class $e{constructor(s,l,h){this.factory=s,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=h}}function gi(n,s,l){let h=0;for(;h<l.length;){const f=l[h];if("number"==typeof f){if(0!==f)break;h++;const v=l[h++],T=l[h++],N=l[h++];n.setAttribute(s,T,N,v)}else{const v=f,T=l[++h];so(v)?n.setProperty(s,v,T):n.setAttribute(s,v,T),h++}}return h}function Gi(n){return 3===n||4===n||6===n}function so(n){return 64===n.charCodeAt(0)}function Cs(n,s){if(null!==s&&0!==s.length)if(null===n||0===n.length)n=s.slice();else{let l=-1;for(let h=0;h<s.length;h++){const f=s[h];"number"==typeof f?l=f:0===l||Ys(n,l,f,null,-1===l||2===l?s[++h]:null)}}return n}function Ys(n,s,l,h,f){let v=0,T=n.length;if(-1===s)T=-1;else for(;v<n.length;){const N=n[v++];if("number"==typeof N){if(N===s){T=-1;break}if(N>s){T=v-1;break}}}for(;v<n.length;){const N=n[v];if("number"==typeof N)break;if(N===l){if(null===h)return void(null!==f&&(n[v+1]=f));if(h===n[v+1])return void(n[v+2]=f)}v++,null!==h&&v++,null!==f&&v++}-1!==T&&(n.splice(T,0,s),v=T+1),n.splice(v++,0,l),null!==h&&n.splice(v++,0,h),null!==f&&n.splice(v++,0,f)}function Fs(n){return n!==le}function vo(n){return 32767&n}function jo(n,s){let l=function Eo(n){return n>>16}(n),h=s;for(;l>0;)h=h[Lt],l--;return h}let Ml=!0;function fl(n){const s=Ml;return Ml=n,s}const Ca=255,Rl=5;let Ds=0;const Ls={};function Jl(n,s){const l=dn(n,s);if(-1!==l)return l;const h=s[_n];h.firstCreatePass&&(n.injectorIndex=s.length,fs(h.data,n),fs(s,null),fs(h.blueprint,null));const f=jr(n,s),v=n.injectorIndex;if(Fs(f)){const T=vo(f),N=jo(f,s),j=N[_n].data;for(let X=0;X<8;X++)s[v+X]=N[T+X]|j[T+X]}return s[v+8]=f,v}function fs(n,s){n.push(0,0,0,0,0,0,0,0,s)}function dn(n,s){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===s[n.injectorIndex+8]?-1:n.injectorIndex}function jr(n,s){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let l=0,h=null,f=s;for(;null!==f;){if(h=Hu(f),null===h)return le;if(l++,f=f[Lt],-1!==h.injectorIndex)return h.injectorIndex|l<<16}return le}function Ts(n,s,l){!function xl(n,s,l){let h;"string"==typeof l?h=l.charCodeAt(0)||0:l.hasOwnProperty(Yt)&&(h=l[Yt]),null==h&&(h=l[Yt]=Ds++);const f=h&Ca;s.data[n+(f>>Rl)]|=1<<f}(n,s,l)}function zn(n,s,l){if(l&pn.Optional||void 0!==n)return n;ht()}function or(n,s,l,h){if(l&pn.Optional&&void 0===h&&(h=null),!(l&(pn.Self|pn.Host))){const f=n[ce],v=Mr(void 0);try{return f?f.get(s,h,l&pn.Optional):Ri(s,h,l&pn.Optional)}finally{Mr(v)}}return zn(h,0,l)}function Pd(n,s,l,h=pn.Default,f){if(null!==n){if(1024&s[gr]){const T=function Od(n,s,l,h,f){let v=n,T=s;for(;null!==v&&null!==T&&1024&T[gr]&&!(256&T[gr]);){const N=Fn(v,T,l,h|pn.Self,Ls);if(N!==Ls)return N;let j=v.parent;if(!j){const X=T[Ln];if(X){const ge=X.get(l,Ls,h);if(ge!==Ls)return ge}j=Hu(T),T=T[Lt]}v=j}return f}(n,s,l,h,Ls);if(T!==Ls)return T}const v=Fn(n,s,l,h,Ls);if(v!==Ls)return v}return or(s,l,h,f)}function Fn(n,s,l,h,f){const v=function ju(n){if("string"==typeof n)return n.charCodeAt(0)||0;const s=n.hasOwnProperty(Yt)?n[Yt]:void 0;return"number"==typeof s?s>=0?s&Ca:Da:s}(l);if("function"==typeof v){if(!Jo(s,n,h))return h&pn.Host?zn(f,0,h):or(s,l,h,f);try{const T=v(h);if(null!=T||h&pn.Optional)return T;ht()}finally{Hs()}}else if("number"==typeof v){let T=null,N=dn(n,s),j=le,X=h&pn.Host?s[$t][ui]:null;for((-1===N||h&pn.SkipSelf)&&(j=-1===N?jr(n,s):s[N+8],j!==le&&gu(h,!1)?(T=s[_n],N=vo(j),s=jo(j,s)):N=-1);-1!==N;){const ge=s[_n];if(ea(v,N,ge.data)){const Ne=Ot(N,s,l,T,h,X);if(Ne!==Ls)return Ne}j=s[N+8],j!==le&&gu(h,s[_n].data[N+8]===X)&&ea(v,N,s)?(T=ge,N=vo(j),s=jo(j,s)):N=-1}}return f}function Ot(n,s,l,h,f,v){const T=s[_n],N=T.data[n+8],ge=an(N,T,l,null==h?bs(N)&&Ml:h!=T&&0!=(3&N.type),f&pn.Host&&v===N);return null!==ge?Ir(s,T,ge,N):Ls}function an(n,s,l,h,f){const v=n.providerIndexes,T=s.data,N=1048575&v,j=n.directiveStart,ge=v>>20,pt=f?N+ge:n.directiveEnd;for(let Nt=h?N:N+ge;Nt<pt;Nt++){const on=T[Nt];if(Nt<j&&l===on||Nt>=j&&on.type===l)return Nt}if(f){const Nt=T[j];if(Nt&&Yr(Nt)&&Nt.type===l)return j}return null}function Ir(n,s,l,h){let f=n[l];const v=s.data;if(function Ut(n){return n instanceof $e}(f)){const T=f;T.resolving&&function ze(n,s){const l=s?`. Dependency path: ${s.join(" > ")} > ${n}`:"";throw new Te(-200,`Circular dependency in DI detected for ${n}${l}`)}(dt(v[l]));const N=fl(T.canSeeViewProviders);T.resolving=!0;const j=T.injectImpl?Mr(T.injectImpl):null;Jo(n,h,pn.Default);try{f=n[l]=T.factory(void 0,v,n,h),s.firstCreatePass&&l>=h.directiveStart&&function Vo(n,s,l){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:v}=s.type.prototype;if(h){var T,N;const Ne=no(s);(null!==(T=l.preOrderHooks)&&void 0!==T?T:l.preOrderHooks=[]).push(n,Ne),(null!==(N=l.preOrderCheckHooks)&&void 0!==N?N:l.preOrderCheckHooks=[]).push(n,Ne)}var j,X,ge;f&&(null!==(j=l.preOrderHooks)&&void 0!==j?j:l.preOrderHooks=[]).push(0-n,f),v&&((null!==(X=l.preOrderHooks)&&void 0!==X?X:l.preOrderHooks=[]).push(n,v),(null!==(ge=l.preOrderCheckHooks)&&void 0!==ge?ge:l.preOrderCheckHooks=[]).push(n,v))}(l,v[l],s)}finally{null!==j&&Mr(j),fl(N),T.resolving=!1,Hs()}}return f}function ea(n,s,l){return!!(l[s+(n>>Rl)]&1<<n)}function gu(n,s){return!(n&pn.Self||n&pn.Host&&s)}class Pl{constructor(s,l){this._tNode=s,this._lView=l}get(s,l,h){return Pd(this._tNode,this._lView,s,ri(h),l)}}function Da(){return new Pl(is(),Vt())}function mu(n){return Be(()=>{const s=n.prototype.constructor,l=s[xt]||Ya(s),h=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==h;){const v=f[xt]||Ya(f);if(v&&v!==l)return v;f=Object.getPrototypeOf(f)}return v=>new v})}function Ya(n){return ke(n)?()=>{const s=Ya(De(n));return s&&s()}:pi(n)}function Hu(n){const s=n[_n],l=s.type;return 2===l?s.declTNode:1===l?n[ui]:null}function yu(n){return function pu(n,s){if("class"===s)return n.classes;if("style"===s)return n.styles;const l=n.attrs;if(l){const h=l.length;let f=0;for(;f<h;){const v=l[f];if(Gi(v))break;if(0===v)f+=2;else if("number"==typeof v)for(f++;f<h&&"string"==typeof l[f];)f++;else{if(v===s)return l[f+1];f+=2}}}return null}(is(),n)}const hr="__parameters__";function qn(n,s,l){return Be(()=>{const h=function Xi(n){return function(...l){if(n){const h=n(...l);for(const f in h)this[f]=h[f]}}}(s);function f(...v){if(this instanceof f)return h.apply(this,v),this;const T=new f(...v);return N.annotation=T,N;function N(j,X,ge){const Ne=j.hasOwnProperty(hr)?j[hr]:Object.defineProperty(j,hr,{value:[]})[hr];for(;Ne.length<=ge;)Ne.push(null);return(Ne[ge]=Ne[ge]||[]).push(T),j}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class Zi{constructor(s,l){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Dt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function S(n,s){n.forEach(l=>Array.isArray(l)?S(l,s):s(l))}function R(n,s,l){s>=n.length?n.push(l):n.splice(s,0,l)}function w(n,s){return s>=n.length-1?n.pop():n.splice(s,1)[0]}function k(n,s){const l=[];for(let h=0;h<n;h++)l.push(s);return l}function Tt(n,s,l){let h=Gn(n,s);return h>=0?n[1|h]=l:(h=~h,function se(n,s,l,h){let f=n.length;if(f==s)n.push(l,h);else if(1===f)n.push(h,n[0]),n[0]=l;else{for(f--,n.push(n[f-1],n[f]);f>s;)n[f]=n[f-2],f--;n[s]=l,n[s+1]=h}}(n,h,s,l)),h}function un(n,s){const l=Gn(n,s);if(l>=0)return n[1|l]}function Gn(n,s){return function xi(n,s,l){let h=0,f=n.length>>l;for(;f!==h;){const v=h+(f-h>>1),T=n[v<<l];if(s===T)return v<<l;T>s?f=v:h=v+1}return~(f<<l)}(n,s,1)}const na=_i(qn("Inject",n=>({token:n})),-1),kl=_i(qn("Optional"),8),Fl=_i(qn("SkipSelf"),4);var ia=(()=>((ia=ia||{})[ia.Important=1]="Important",ia[ia.DashCase=2]="DashCase",ia))();const _l=new Map;let xo=0;const bt="__ngContext__";function Bt(n,s){Hn(s)?(n[bt]=s[Qn],function Sa(n){_l.set(n[Qn],n)}(s)):n[bt]=s}let Qs;function Ul(n,s){return Qs(n,s)}function Cu(n){const s=n[si];return mr(s)?s[si]:s}function wi(n){return bo(n[Je])}function qi(n){return bo(n[Rr])}function bo(n){for(;null!==n&&!mr(n);)n=n[Rr];return n}function tu(n,s,l,h,f){if(null!=h){let v,T=!1;mr(h)?v=h:Hn(h)&&(T=!0,h=h[li]);const N=Yi(h);0===n&&null!==l?null==f?hi(s,l,N):ti(s,l,N,f||null,!0):1===n&&null!==l?ti(s,l,N,f||null,!0):2===n?function Pp(n,s,l){const h=Zu(n,s);h&&function Tu(n,s,l,h){n.removeChild(s,l,h)}(n,h,s,l)}(s,N,T):3===n&&s.destroyNode(N),null!=v&&function gy(n,s,l,h,f){const v=l[st];v!==Yi(l)&&tu(s,n,h,v,f);for(let N=en;N<l.length;N++){const j=l[N];Sc(j[_n],j,n,s,h,v)}}(s,n,v,l,f)}}function Yu(n,s,l){return n.createElement(s,l)}function P(n,s){const l=n[Kt],h=l.indexOf(s),f=s[si];512&s[gr]&&(s[gr]&=-513,Ar(f,-1)),l.splice(h,1)}function ne(n,s){if(n.length<=en)return;const l=en+s,h=n[l];if(h){const f=h[Gt];null!==f&&f!==n&&P(f,h),s>0&&(n[l-1][Rr]=h[Rr]);const v=w(n,en+s);!function Du(n,s){Sc(n,s,s[Ye],2,null,null),s[li]=null,s[ui]=null}(h[_n],h);const T=v[cn];null!==T&&T.detachView(v[_n]),h[si]=null,h[Rr]=null,h[gr]&=-65}return h}function ve(n,s){if(!(128&s[gr])){const l=s[Ye];l.destroyNode&&Sc(n,s,l,3,null,null),function M(n){let s=n[Je];if(!s)return vt(n[_n],n);for(;s;){let l=null;if(Hn(s))l=s[Je];else{const h=s[en];h&&(l=h)}if(!l){for(;s&&!s[Rr]&&s!==n;)Hn(s)&&vt(s[_n],s),s=s[si];null===s&&(s=n),Hn(s)&&vt(s[_n],s),l=s&&s[Rr]}s=l}}(s)}}function vt(n,s){if(!(128&s[gr])){s[gr]&=-65,s[gr]|=128,function In(n,s){let l;if(null!=n&&null!=(l=n.destroyHooks))for(let h=0;h<l.length;h+=2){const f=s[l[h]];if(!(f instanceof $e)){const v=l[h+1];if(Array.isArray(v))for(let T=0;T<v.length;T+=2){const N=f[v[T]],j=v[T+1];Ei(4,N,j);try{j.call(N)}finally{Ei(5,N,j)}}else{Ei(4,f,v);try{v.call(f)}finally{Ei(5,f,v)}}}}}(n,s),function zt(n,s){const l=n.cleanup,h=s[$i];let f=-1;if(null!==l)for(let v=0;v<l.length-1;v+=2)if("string"==typeof l[v]){const T=l[v+3];T>=0?h[f=T]():h[f=-T].unsubscribe(),v+=2}else{const T=h[f=l[v+1]];l[v].call(T)}if(null!==h){for(let v=f+1;v<h.length;v++)(0,h[v])();s[$i]=null}}(n,s),1===s[_n].type&&s[Ye].destroy();const l=s[Gt];if(null!==l&&mr(s[si])){l!==s[si]&&P(l,s);const h=s[cn];null!==h&&h.detachView(n)}!function x(n){_l.delete(n[Qn])}(s)}}function Mn(n,s,l){return function lr(n,s,l){let h=s;for(;null!==h&&40&h.type;)h=(s=h).parent;if(null===h)return l[li];{const{componentOffset:f}=h;if(f>-1){const{encapsulation:v}=n.data[h.directiveStart+f];if(v===ye.None||v===ye.Emulated)return null}return cs(h,l)}}(n,s.parent,l)}function ti(n,s,l,h,f){n.insertBefore(s,l,h,f)}function hi(n,s,l){n.appendChild(s,l)}function lo(n,s,l,h,f){null!==h?ti(n,s,l,h,f):hi(n,s,l)}function Zu(n,s){return n.parentNode(s)}function nu(n,s,l){return nl(n,s,l)}let Qu,nd,mi,Bh,nl=function Cc(n,s,l){return 40&n.type?cs(n,l):null};function uo(n,s,l,h){const f=Mn(n,h,s),v=s[Ye],N=nu(h.parent||s[ui],h,s);if(null!=f)if(Array.isArray(l))for(let j=0;j<l.length;j++)lo(v,f,l[j],N,!1);else lo(v,f,l,N,!1);void 0!==Qu&&Qu(v,h,s,l,f)}function Au(n,s){if(null!==s){const l=s.type;if(3&l)return cs(s,n);if(4&l)return Tc(-1,n[s.index]);if(8&l){const h=s.child;if(null!==h)return Au(n,h);{const f=n[s.index];return mr(f)?Tc(-1,f):Yi(f)}}if(32&l)return Ul(s,n)()||Yi(n[s.index]);{const h=Dc(n,s);return null!==h?Array.isArray(h)?h[0]:Au(Cu(n[$t]),h):Au(n,s.next)}}return null}function Dc(n,s){return null!==s?n[$t][ui].projection[s.projection]:null}function Tc(n,s){const l=en+n+1;if(l<s.length){const h=s[l],f=h[_n].firstChild;if(null!==f)return Au(h,f)}return s[st]}function Ff(n,s,l,h,f,v,T){for(;null!=l;){const N=h[l.index],j=l.type;if(T&&0===s&&(N&&Bt(Yi(N),h),l.flags|=2),32!=(32&l.flags))if(8&j)Ff(n,s,l.child,h,f,v,!1),tu(s,n,f,N,v);else if(32&j){const X=Ul(l,h);let ge;for(;ge=X();)tu(s,n,f,ge,v);tu(s,n,f,N,v)}else 16&j?rm(n,s,h,l,f,v):tu(s,n,f,N,v);l=T?l.projectionNext:l.next}}function Sc(n,s,l,h,f,v){Ff(l,h,n.firstChild,s,f,v,!1)}function rm(n,s,l,h,f,v){const T=l[$t],j=T[ui].projection[h.projection];if(Array.isArray(j))for(let X=0;X<j.length;X++)tu(s,n,f,j[X],v);else Ff(n,s,j,T[si],f,v,!0)}function rl(n,s,l){""===l?n.removeAttribute(s,"class"):n.setAttribute(s,"class",l)}function im(n,s,l){const{mergedAttrs:h,classes:f,styles:v}=l;null!==h&&gi(n,s,h),null!==f&&rl(n,s,f),null!==v&&function B_(n,s,l){n.setAttribute(s,"style",l)}(n,s,v)}function il(n){var s;return(null===(s=function Op(){if(void 0===nd&&(nd=null,Dr.trustedTypes))try{nd=Dr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return nd}())||void 0===s?void 0:s.createHTML(n))||n}function sm(n){mi=n}function Fp(n){var s;return(null===(s=function kp(){if(void 0===Bh&&(Bh=null,Dr.trustedTypes))try{Bh=Dr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Bh}())||void 0===s?void 0:s.createScriptURL(n))||n}class Ud{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xe})`}}class my extends Ud{getTypeName(){return"HTML"}}class Uh extends Ud{getTypeName(){return"Style"}}class Vd extends Ud{getTypeName(){return"Script"}}class am extends Ud{getTypeName(){return"URL"}}class Ju extends Ud{getTypeName(){return"ResourceURL"}}function ru(n){return n instanceof Ud?n.changingThisBreaksApplicationSecurity:n}function iu(n,s){const l=function yy(n){return n instanceof Ud&&n.getTypeName()||null}(n);if(null!=l&&l!==s){if("ResourceURL"===l&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${l} (see ${Xe})`)}return l===s}function lm(n){return new my(n)}function jd(n){return new Uh(n)}function U_(n){return new Vd(n)}function V_(n){return new am(n)}function Gs(n){return new Ju(n)}class Lp{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const l=(new window.DOMParser).parseFromString(il(s),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(s):(l.removeChild(l.firstChild),l)}catch{return null}}}class _y{constructor(s){this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(s){const l=this.inertDocument.createElement("template");return l.innerHTML=il(s),l}}const Vh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Bp(n){return(n=String(n)).match(Vh)?n:"unsafe:"+n}function Mu(n){const s={};for(const l of n.split(","))s[l]=!0;return s}function Ru(...n){const s={};for(const l of n)for(const h in l)l.hasOwnProperty(h)&&(s[h]=!0);return s}const ec=Mu("area,br,col,hr,img,wbr"),$p=Mu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jh=Mu("rp,rt"),Vf=Ru(ec,Ru($p,Mu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ru(jh,Mu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ru(jh,$p)),Hd=Mu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wy=Ru(Hd,Mu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Mu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Co=Mu("script,style,template");class Ti{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let l=s.firstChild,h=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?h=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,h&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(s){const l=s.nodeName.toLowerCase();if(!Vf.hasOwnProperty(l))return this.sanitizedSomething=!0,!Co.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const h=s.attributes;for(let f=0;f<h.length;f++){const v=h.item(f),T=v.name,N=T.toLowerCase();if(!wy.hasOwnProperty(N)){this.sanitizedSomething=!0;continue}let j=v.value;Hd[N]&&(j=Bp(j)),this.buf.push(" ",T,'="',xu(j),'"')}return this.buf.push(">"),!0}endElement(s){const l=s.nodeName.toLowerCase();Vf.hasOwnProperty(l)&&!ec.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(s){this.buf.push(xu(s))}checkClobberedElement(s,l){if(l&&(s.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return l}}const cm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dm=/([^\#-~ |!])/g;function xu(n){return n.replace(/&/g,"&amp;").replace(cm,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(dm,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let tc;function Hh(n,s){let l=null;try{tc=tc||function $f(n){const s=new _y(n);return function j_(){try{return!!(new window.DOMParser).parseFromString(il(""),"text/html")}catch{return!1}}()?new Lp(s):s}(n);let h=s?String(s):"";l=tc.getInertBodyElement(h);let f=5,v=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=v,v=l.innerHTML,l=tc.getInertBodyElement(h)}while(h!==v);return il((new Ti).sanitizeChildren(hm(l)||l))}finally{if(l){const h=hm(l)||l;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function hm(n){return"content"in n&&function Iy(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var co=(()=>((co=co||{})[co.NONE=0]="NONE",co[co.HTML=1]="HTML",co[co.STYLE=2]="STYLE",co[co.SCRIPT=3]="SCRIPT",co[co.URL=4]="URL",co[co.RESOURCE_URL=5]="RESOURCE_URL",co))();function zh(n){const s=Gd();return s?s.sanitize(co.URL,n)||"":iu(n,"URL")?ru(n):Bp(ae(n))}function jl(n){const s=Gd();if(s)return Fp(s.sanitize(co.RESOURCE_URL,n)||"");if(iu(n,"ResourceURL"))return Fp(ru(n));throw new Te(904,!1)}function jf(n,s,l){return function Dy(n,s){return"src"===s&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===s&&("base"===n||"link"===n)?jl:zh}(s,l)(n)}function Gd(){const n=Vt();return n&&n[be]}const Gh=new Zi("ENVIRONMENT_INITIALIZER"),Sy=new Zi("INJECTOR",-1),Wd=new Zi("INJECTOR_DEF_TYPES");class Hf{get(s,l=Nr){if(l===Nr){const h=new Error(`NullInjectorError: No provider for ${we(s)}!`);throw h.name="NullInjectorError",h}return l}}function Kd(n){return{\u0275providers:n}}function Vp(...n){return{\u0275providers:Wh(0,n),\u0275fromNgModule:!0}}function Wh(n,...s){const l=[],h=new Set;let f;return S(s,v=>{const T=v;qd(T,l,[],h)&&(f||(f=[]),f.push(T))}),void 0!==f&&$s(f,l),l}function $s(n,s){for(let l=0;l<n.length;l++){const{providers:f}=n[l];Ac(f,v=>{s.push(v)})}}function qd(n,s,l,h){if(!(n=De(n)))return!1;let f=null,v=tn(n);const T=!v&&Tn(n);if(v||T){if(T&&!T.standalone)return!1;f=n}else{const j=n.ngModule;if(v=tn(j),!v)return!1;f=j}const N=h.has(f);if(T){if(N)return!1;if(h.add(f),T.dependencies){const j="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const X of j)qd(X,s,l,h)}}else{if(!v)return!1;{if(null!=v.imports&&!N){let X;h.add(f);try{S(v.imports,ge=>{qd(ge,s,l,h)&&(X||(X=[]),X.push(ge))})}finally{}void 0!==X&&$s(X,s)}if(!N){const X=pi(f)||(()=>new f);s.push({provide:f,useFactory:X,deps:lt},{provide:Wd,useValue:f,multi:!0},{provide:Gh,useValue:()=>tr(f),multi:!0})}const j=v.providers;null==j||N||Ac(j,ge=>{s.push(ge)})}}return f!==n&&void 0!==n.providers}function Ac(n,s){for(let l of n)je(l)&&(l=l.\u0275providers),Array.isArray(l)?Ac(l,s):s(l)}const nc=Pe({provide:String,useValue:Pe});function Mc(n){return null!==n&&"object"==typeof n&&nc in n}function id(n){return"function"==typeof n}const qh=new Zi("Set Injector scope."),Hp={},Ay={};let Yd;function Yh(){return void 0===Yd&&(Yd=new Hf),Yd}class sd{}class zf extends sd{get destroyed(){return this._destroyed}constructor(s,l,h,f){super(),this.parent=l,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xc(s,T=>this.processProvider(T)),this.records.set(Sy,od(void 0,this)),f.has("environment")&&this.records.set(sd,od(void 0,this));const v=this.records.get(qh);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Wd.multi,lt,pn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const l=sr(this),h=Mr(void 0);try{return s()}finally{sr(l),Mr(h)}}get(s,l=Nr,h=pn.Default){this.assertNotDestroyed(),h=ri(h);const f=sr(this),v=Mr(void 0);try{if(!(h&pn.SkipSelf)){let N=this.records.get(s);if(void 0===N){const j=function Pu(n){return"function"==typeof n||"object"==typeof n&&n instanceof Zi}(s)&&rn(s);N=j&&this.injectableDefInScope(j)?od(Zd(s),Hp):null,this.records.set(s,N)}if(null!=N)return this.hydrate(s,N)}return(h&pn.Self?Yh():this.parent).get(s,l=h&pn.Optional&&l===Nr?null:l)}catch(T){if("NullInjectorError"===T.name){if((T[pr]=T[pr]||[]).unshift(we(s)),f)throw T;return function Jr(n,s,l,h){const f=n[pr];throw s[_r]&&f.unshift(s[_r]),n.message=function Qe(n,s,l,h=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==ai?n.slice(2):n;let f=we(s);if(Array.isArray(s))f=s.map(we).join(" -> ");else if("object"==typeof s){let v=[];for(let T in s)if(s.hasOwnProperty(T)){let N=s[T];v.push(T+":"+("string"==typeof N?JSON.stringify(N):we(N)))}f=`{${v.join(", ")}}`}return`${l}${h?"("+h+")":""}[${f}]: ${n.replace(kr,"\n  ")}`}("\n"+n.message,f,l,h),n[Ci]=f,n[pr]=null,n}(T,s,"R3InjectorError",this.source)}throw T}finally{Mr(v),sr(f)}}resolveInjectorInitializers(){const s=sr(this),l=Mr(void 0);try{const h=this.get(Gh.multi,lt,pn.Self);for(const f of h)f()}finally{sr(s),Mr(l)}}toString(){const s=[],l=this.records;for(const h of l.keys())s.push(we(h));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(s){let l=id(s=De(s))?s:De(s&&s.provide);const h=function Gp(n){return Mc(n)?od(void 0,n.useValue):od(Rc(n),Hp)}(s);if(id(s)||!0!==s.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=od(void 0,Hp,!0),f.factory=()=>Sr(f.multi),this.records.set(l,f)),l=s,f.multi.push(s)}this.records.set(l,h)}hydrate(s,l){return l.value===Hp&&(l.value=Ay,l.value=l.factory()),"object"==typeof l.value&&l.value&&function z_(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(s){if(!s.providedIn)return!1;const l=De(s.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Zd(n){const s=rn(n),l=null!==s?s.factory:pi(n);if(null!==l)return l;if(n instanceof Zi)throw new Te(204,!1);if(n instanceof Function)return function zp(n){const s=n.length;if(s>0)throw k(s,"?"),new Te(204,!1);const l=function fn(n){return n&&(n[En]||n[cr])||null}(n);return null!==l?()=>l.factory(n):()=>new n}(n);throw new Te(204,!1)}function Rc(n,s,l){let h;if(id(n)){const f=De(n);return pi(f)||Zd(f)}if(Mc(n))h=()=>De(n.useValue);else if(function Kh(n){return!(!n||!n.useFactory)}(n))h=()=>n.useFactory(...Sr(n.deps||[]));else if(function pm(n){return!(!n||!n.useExisting)}(n))h=()=>tr(De(n.useExisting));else{const f=De(n&&(n.useClass||n.provide));if(!function My(n){return!!n.deps}(n))return pi(f)||Zd(f);h=()=>new f(...Sr(n.deps))}return h}function od(n,s,l=!1){return{factory:n,value:s,multi:l?[]:void 0}}function xc(n,s){for(const l of n)Array.isArray(l)?xc(l,s):l&&je(l)?xc(l.\u0275providers,s):s(l)}class Ry{}class Zh{}class W_{resolveComponentFactory(s){throw function Wp(n){const s=Error(`No component factory found for ${we(n)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=n,s}(s)}}let ad=(()=>{class n{}return n.NULL=new W_,n})();function Qd(){return Hl(is(),Vt())}function Hl(n,s){return new Ou(cs(n,s))}let Ou=(()=>{class n{constructor(l){this.nativeElement=l}}return n.__NG_ELEMENT_ID__=Qd,n})();function Nu(n){return n instanceof Ou?n.nativeElement:n}class sl{}let Qh=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function gm(){const n=Vt(),l=D(is().index,n);return(Hn(l)?l:n)[Ye]}(),n})(),Kp=(()=>{class n{}return n.\u0275prov=Dt({token:n,providedIn:"root",factory:()=>null}),n})();class Gf{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Xd=new Gf("15.2.9"),Jd={},qp="ngOriginalError";function eh(n){return n[qp]}class Pc{constructor(){this._console=console}handleError(s){const l=this._findOriginalError(s);this._console.error("ERROR",s),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(s){let l=s&&eh(s);for(;l&&eh(l);)l=eh(l);return l||null}}function Aa(n){return n instanceof Function?n():n}function Xh(n,s,l){let h=n.length;for(;;){const f=n.indexOf(s,l);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const v=s.length;if(f+v===h||n.charCodeAt(f+v)<=32)return f}l=f+1}}const Qp="ng-template";function qf(n,s,l){let h=0,f=!0;for(;h<n.length;){let v=n[h++];if("string"==typeof v&&f){const T=n[h++];if(l&&"class"===v&&-1!==Xh(T.toLowerCase(),s,0))return!0}else{if(1===v){for(;h<n.length&&"string"==typeof(v=n[h++]);)if(v.toLowerCase()===s)return!0;return!1}"number"==typeof v&&(f=!1)}}return!1}function ym(n){return 4===n.type&&n.value!==Qp}function Xp(n,s,l){return s===(4!==n.type||l?n.value:Qp)}function Y_(n,s,l){let h=4;const f=n.attrs||[],v=function th(n){for(let s=0;s<n.length;s++)if(Gi(n[s]))return s;return n.length}(f);let T=!1;for(let N=0;N<s.length;N++){const j=s[N];if("number"!=typeof j){if(!T)if(4&h){if(h=2|1&h,""!==j&&!Xp(n,j,l)||""===j&&1===s.length){if(El(h))return!1;T=!0}}else{const X=8&h?j:s[++N];if(8&h&&null!==n.attrs){if(!qf(n.attrs,X,l)){if(El(h))return!1;T=!0}continue}const Ne=Jp(8&h?"class":j,f,ym(n),l);if(-1===Ne){if(El(h))return!1;T=!0;continue}if(""!==X){let pt;pt=Ne>v?"":f[Ne+1].toLowerCase();const Nt=8&h?pt:null;if(Nt&&-1!==Xh(Nt,X,0)||2&h&&X!==pt){if(El(h))return!1;T=!0}}}}else{if(!T&&!El(h)&&!El(j))return!1;if(T&&El(j))continue;T=!1,h=j|1&h}}return El(h)||T}function El(n){return 0==(1&n)}function Jp(n,s,l,h){if(null===s)return-1;let f=0;if(h||!l){let v=!1;for(;f<s.length;){const T=s[f];if(T===n)return f;if(3===T||6===T)v=!0;else{if(1===T||2===T){let N=s[++f];for(;"string"==typeof N;)N=s[++f];continue}if(4===T)break;if(0===T){f+=4;continue}}f+=v?1:2}return-1}return function Yf(n,s){let l=n.indexOf(4);if(l>-1)for(l++;l<n.length;){const h=n[l];if("number"==typeof h)return-1;if(h===s)return l;l++}return-1}(s,n)}function ky(n,s,l=!1){for(let h=0;h<s.length;h++)if(Y_(n,s[h],l))return!0;return!1}function Zf(n,s){e:for(let l=0;l<s.length;l++){const h=s[l];if(n.length===h.length){for(let f=0;f<n.length;f++)if(n[f]!==h[f])continue e;return!0}}return!1}function ld(n,s){return n?":not("+s.trim()+")":s}function Oc(n){let s=n[0],l=1,h=2,f="",v=!1;for(;l<n.length;){let T=n[l];if("string"==typeof T)if(2&h){const N=n[++l];f+="["+T+(N.length>0?'="'+N+'"':"")+"]"}else 8&h?f+="."+T:4&h&&(f+=" "+T);else""!==f&&!El(T)&&(s+=ld(v,f),f=""),h=T,v=v||!El(h);l++}return""!==f&&(s+=ld(v,f)),s}const Kr={};function Qf(n){ud($n(),Vt(),ss()+n,!1)}function ud(n,s,l,h){if(!h)if(3==(3&s[gr])){const v=n.preOrderCheckHooks;null!==v&&Vu(s,v,l)}else{const v=n.preOrderHooks;null!==v&&fa(s,v,0,l)}qs(l)}function rg(n,s=null,l=null,h){const f=vm(n,s,l,h);return f.resolveInjectorInitializers(),f}function vm(n,s=null,l=null,h,f=new Set){const v=[l||lt,Vp(n)];return h=h||("object"==typeof n?void 0:we(n)),new zf(v,s||Yh(),h||null,f)}let dd=(()=>{class n{static create(l,h){if(Array.isArray(l))return rg({name:""},h,l,"");{var f;const v=null!==(f=l.name)&&void 0!==f?f:"";return rg({name:v},l.parent,l.providers,v)}}}return n.THROW_IF_NOT_FOUND=Nr,n.NULL=new Hf,n.\u0275prov=Dt({token:n,providedIn:"any",factory:()=>tr(Sy)}),n.__NG_ELEMENT_ID__=-1,n})();function Wo(n,s=pn.Default){const l=Vt();return null===l?tr(n,s):Pd(is(),l,De(n),s)}function Jf(){throw new Error("invalid")}function bm(n,s){const l=n.contentQueries;if(null!==l)for(let h=0;h<l.length;h+=2){const v=l[h+1];if(-1!==v){const T=n.data[v];Ga(l[h]),T.contentQueries(2,s[v],v)}}}function ep(n,s,l,h,f,v,T,N,j,X,ge){const Ne=s.blueprint.slice();return Ne[li]=f,Ne[gr]=76|h,(null!==ge||n&&1024&n[gr])&&(Ne[gr]|=1024),Kn(Ne),Ne[si]=Ne[Lt]=n,Ne[ei]=l,Ne[Me]=T||n&&n[Me],Ne[Ye]=N||n&&n[Ye],Ne[be]=j||n&&n[be]||null,Ne[ce]=X||n&&n[ce]||null,Ne[ui]=v,Ne[Qn]=function Bl(){return xo++}(),Ne[Ln]=ge,Ne[$t]=2==s.type?n[$t]:Ne,Ne}function gd(n,s,l,h,f){let v=n.data[s];if(null===v)v=function Dm(n,s,l,h,f){const v=fu(),T=Tl(),j=n.data[s]=function Sm(n,s,l,h,f,v){return{type:l,index:h,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?v:v&&v.parent,l,s,h,f);return null===n.firstChild&&(n.firstChild=j),null!==v&&(T?null==v.child&&null!==j.parent&&(v.child=j):null===v.next&&(v.next=j,j.prev=v)),j}(n,s,l,h,f),function za(){return Nn.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=l,v.value=h,v.attrs=f;const T=function ja(){const n=Nn.lFrame,s=n.currentTNode;return n.isParent?s:s.parent}();v.injectorIndex=null===T?-1:T.injectorIndex}return ro(v,!0),v}function ef(n,s,l,h){if(0===l)return-1;const f=s.length;for(let v=0;v<l;v++)s.push(h),n.blueprint.push(h),n.data.push(null);return f}function Tm(n,s,l){_o(s);try{const h=n.viewQuery;null!==h&&qo(1,h,l);const f=n.template;null!==f&&Uy(n,s,f,1,l),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&bm(n,s),n.staticViewQueries&&qo(2,n.viewQuery,l);const v=n.components;null!==v&&function Cm(n,s){for(let l=0;l<s.length;l++)cv(n,s[l])}(s,v)}catch(h){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),h}finally{s[gr]&=-5,Xl()}}function tp(n,s,l,h){const f=s[gr];if(128!=(128&f)){_o(s);try{Kn(s),function io(n){return Nn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==l&&Uy(n,s,l,2,h);const T=3==(3&f);if(T){const X=n.preOrderCheckHooks;null!==X&&Vu(s,X,null)}else{const X=n.preOrderHooks;null!==X&&fa(s,X,0,null),F(s,0)}if(function uv(n){for(let s=wi(n);null!==s;s=qi(s)){if(!s[ct])continue;const l=s[Kt];for(let h=0;h<l.length;h++){const f=l[h];512&f[gr]||Ar(f[si],1),f[gr]|=512}}}(s),function lv(n){for(let s=wi(n);null!==s;s=qi(s))for(let l=en;l<s.length;l++){const h=s[l],f=h[_n];_e(h)&&tp(f,h,f.template,h[ei])}}(s),null!==n.contentQueries&&bm(n,s),T){const X=n.contentCheckHooks;null!==X&&Vu(s,X)}else{const X=n.contentHooks;null!==X&&fa(s,X,1),F(s,1)}!function Im(n,s){const l=n.hostBindingOpCodes;if(null!==l)try{for(let h=0;h<l.length;h++){const f=l[h];if(f<0)qs(~f);else{const v=f,T=l[++h],N=l[++h];dl(T,v),N(2,s[v])}}}finally{qs(-1)}}(n,s);const N=n.components;null!==N&&function rv(n,s){for(let l=0;l<s.length;l++)Nm(n,s[l])}(s,N);const j=n.viewQuery;if(null!==j&&qo(2,j,h),T){const X=n.viewCheckHooks;null!==X&&Vu(s,X)}else{const X=n.viewHooks;null!==X&&fa(s,X,2),F(s,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s[gr]&=-41,512&s[gr]&&(s[gr]&=-513,Ar(s[si],-1))}finally{Xl()}}}function Uy(n,s,l,h,f){const v=ss(),T=2&h;try{qs(-1),T&&s.length>ar&&ud(n,s,ar,!1),Ei(T?2:0,f),l(h,f)}finally{qs(v),Ei(T?3:1,f)}}function md(n,s,l){if(qr(s)){const f=s.directiveEnd;for(let v=s.directiveStart;v<f;v++){const T=n.data[v];T.contentQueries&&T.contentQueries(1,l[v],v)}}}function yd(n,s,l){Ft()&&(function iv(n,s,l,h){const f=l.directiveStart,v=l.directiveEnd;bs(l)&&function gg(n,s,l){const h=cs(s,n),f=rp(l),v=n[Me],T=nf(n,ep(n,f,null,l.onPush?32:16,h,s,v,v.createRenderer(h,l),null,null,null));n[s.index]=T}(s,l,n.data[f+l.componentOffset]),n.firstCreatePass||Jl(l,s),Bt(h,s);const T=l.initialInputs;for(let N=f;N<v;N++){const j=n.data[N],X=Ir(s,n,N,l);Bt(X,s),null!==T&&Ky(0,N-f,X,j,0,T),Yr(j)&&(D(l.index,s)[ei]=Ir(s,n,N,l))}}(n,s,l,cs(l,s)),64==(64&l.flags)&&xm(n,s,l))}function np(n,s,l=cs){const h=s.localNames;if(null!==h){let f=s.index+1;for(let v=0;v<h.length;v+=2){const T=h[v+1],N=-1===T?l(s,n):n[T];n[f++]=N}}}function rp(n){const s=n.tView;return null===s||s.incompleteFirstPass?n.tView=cg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):s}function cg(n,s,l,h,f,v,T,N,j,X){const ge=ar+h,Ne=ge+f,pt=function Vy(n,s){const l=[];for(let h=0;h<s;h++)l.push(h<n?null:Kr);return l}(ge,Ne),Nt="function"==typeof X?X():X;return pt[_n]={type:n,blueprint:pt,template:l,queries:null,viewQuery:N,declTNode:s,data:pt.slice().fill(null,ge),bindingStartIndex:ge,expandoStartIndex:Ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:j,consts:Nt,incompleteFirstPass:!1}}function Hy(n,s,l,h){const f=km(s);null===l?f.push(h):(f.push(l),n.firstCreatePass&&yg(n).push(h,f.length-1))}function zy(n,s,l,h){for(let f in n)if(n.hasOwnProperty(f)){l=null===l?{}:l;const v=n[f];null===h?Il(l,s,f,v):h.hasOwnProperty(f)&&Il(l,s,h[f],v)}return l}function Il(n,s,l,h){n.hasOwnProperty(l)?n[l].push(s,h):n[l]=[s,h]}function Ra(n,s,l,h,f,v,T,N){const j=cs(s,l);let ge,X=s.inputs;!N&&null!=X&&(ge=X[h])?(vg(n,l,ge,h,f),bs(s)&&function hg(n,s){const l=D(s,n);16&l[gr]||(l[gr]|=32)}(l,s.index)):3&s.type&&(h=function dg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(h),f=null!=T?T(f,s.value||"",h):f,v.setProperty(j,h,f))}function ip(n,s,l,h){if(Ft()){const f=null===h?null:{"":-1},v=function pg(n,s){const l=n.directiveRegistry;let h=null,f=null;if(l)for(let T=0;T<l.length;T++){const N=l[T];if(ky(s,N.selectors,!1))if(h||(h=[]),Yr(N))if(null!==N.findHostDirectiveDefs){const j=[];f=f||new Map,N.findHostDirectiveDefs(N,j,f),h.unshift(...j,N),Om(n,s,j.length)}else h.unshift(N),Om(n,s,0);else{var v;f=f||new Map,null===(v=N.findHostDirectiveDefs)||void 0===v||v.call(N,N,h,f),h.push(N)}}return null===h?null:[h,f]}(n,l);let T,N;null===v?T=N=null:[T,N]=v,null!==T&&fg(n,s,l,T,f,N),f&&function sv(n,s,l){if(s){const h=n.localNames=[];for(let f=0;f<s.length;f+=2){const v=l[s[f+1]];if(null==v)throw new Te(-301,!1);h.push(s[f],v)}}}(l,h,f)}l.mergedAttrs=Cs(l.mergedAttrs,l.attrs)}function fg(n,s,l,h,f,v){for(let Ne=0;Ne<h.length;Ne++)Ts(Jl(l,s),n,h[Ne].type);!function ov(n,s,l){n.flags|=1,n.directiveStart=s,n.directiveEnd=s+l,n.providerIndexes=s}(l,n.data.length,h.length);for(let Ne=0;Ne<h.length;Ne++){const pt=h[Ne];pt.providersResolver&&pt.providersResolver(pt)}let T=!1,N=!1,j=ef(n,s,h.length,null);for(let Ne=0;Ne<h.length;Ne++){const pt=h[Ne];l.mergedAttrs=Cs(l.mergedAttrs,pt.hostAttrs),Wy(n,l,s,j,pt),xa(j,pt,f),null!==pt.contentQueries&&(l.flags|=4),(null!==pt.hostBindings||null!==pt.hostAttrs||0!==pt.hostVars)&&(l.flags|=64);const Nt=pt.type.prototype;var X,ge;!T&&(Nt.ngOnChanges||Nt.ngOnInit||Nt.ngDoCheck)&&((null!==(X=n.preOrderHooks)&&void 0!==X?X:n.preOrderHooks=[]).push(l.index),T=!0),N||!Nt.ngOnChanges&&!Nt.ngDoCheck||((null!==(ge=n.preOrderCheckHooks)&&void 0!==ge?ge:n.preOrderCheckHooks=[]).push(l.index),N=!0),j++}!function Gy(n,s,l){const f=s.directiveEnd,v=n.data,T=s.attrs,N=[];let j=null,X=null;for(let ge=s.directiveStart;ge<f;ge++){const Ne=v[ge],pt=l?l.get(Ne):null,on=pt?pt.outputs:null;j=zy(Ne.inputs,ge,j,pt?pt.inputs:null),X=zy(Ne.outputs,ge,X,on);const Cn=null===j||null===T||ym(s)?null:Uv(j,ge,T);N.push(Cn)}null!==j&&(j.hasOwnProperty("class")&&(s.flags|=8),j.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=N,s.inputs=j,s.outputs=X}(n,l,v)}function xm(n,s,l){const h=l.directiveStart,f=l.directiveEnd,v=l.index,T=function Al(){return Nn.lFrame.currentDirectiveIndex}();try{qs(v);for(let N=h;N<f;N++){const j=n.data[N],X=s[N];Qi(N),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&Pm(j,X)}}finally{qs(-1),Qi(T)}}function Pm(n,s){null!==n.hostBindings&&n.hostBindings(1,s)}function Om(n,s,l){var h;s.componentOffset=l,(null!==(h=n.components)&&void 0!==h?h:n.components=[]).push(s.index)}function xa(n,s,l){if(l){if(s.exportAs)for(let h=0;h<s.exportAs.length;h++)l[s.exportAs[h]]=n;Yr(s)&&(l[""]=n)}}function Wy(n,s,l,h,f){n.data[h]=f;const v=f.factory||(f.factory=pi(f.type)),T=new $e(v,Yr(f),Wo);n.blueprint[h]=T,l[h]=T,function Mm(n,s,l,h,f){const v=f.hostBindings;if(v){let T=n.hostBindingOpCodes;null===T&&(T=n.hostBindingOpCodes=[]);const N=~s.index;(function Rm(n){let s=n.length;for(;s>0;){const l=n[--s];if("number"==typeof l&&l<0)return l}return 0})(T)!=N&&T.push(N),T.push(l,h,v)}}(n,s,h,ef(n,l,f.hostVars,Kr),f)}function bl(n,s,l,h,f,v){const T=cs(n,s);!function sp(n,s,l,h,f,v,T){if(null==v)n.removeAttribute(s,f,l);else{const N=null==T?ae(v):T(v,h||"",f);n.setAttribute(s,f,N,l)}}(s[Ye],T,v,n.value,l,h,f)}function Ky(n,s,l,h,f,v){const T=v[s];if(null!==T){const N=h.setInput;for(let j=0;j<T.length;){const X=T[j++],ge=T[j++],Ne=T[j++];null!==N?h.setInput(l,Ne,X,ge):l[ge]=Ne}}}function Uv(n,s,l){let h=null,f=0;for(;f<l.length;){const v=l[f];if(0!==v)if(5!==v){if("number"==typeof v)break;if(n.hasOwnProperty(v)){null===h&&(h=[]);const T=n[v];for(let N=0;N<T.length;N+=2)if(T[N]===s){h.push(v,T[N+1],l[f+1]);break}}f+=2}else f+=2;else f+=4}return h}function av(n,s,l,h){return[n,!0,!1,s,null,0,h,l,null,null]}function Nm(n,s){const l=D(s,n);if(_e(l)){const h=l[_n];48&l[gr]?tp(h,l,h.template,l[ei]):l[vi]>0&&mg(l)}}function mg(n){for(let h=wi(n);null!==h;h=qi(h))for(let f=en;f<h.length;f++){const v=h[f];if(_e(v))if(512&v[gr]){const T=v[_n];tp(T,v,T.template,v[ei])}else v[vi]>0&&mg(v)}const l=n[_n].components;if(null!==l)for(let h=0;h<l.length;h++){const f=D(l[h],n);_e(f)&&f[vi]>0&&mg(f)}}function cv(n,s){const l=D(s,n),h=l[_n];(function op(n,s){for(let l=s.length;l<n.blueprint.length;l++)s.push(n.blueprint[l])})(h,l),Tm(h,l,l[ei])}function nf(n,s){return n[Je]?n[nt][Rr]=s:n[Je]=s,n[nt]=s,s}function Uc(n){for(;n;){n[gr]|=32;const s=Cu(n);if(Ks(n)&&!s)return n;n=s}return null}function Gl(n,s,l,h=!0){const f=s[Me];f.begin&&f.begin();try{tp(n,s,n.template,l)}catch(T){throw h&&Vc(s,T),T}finally{f.end&&f.end()}}function qo(n,s,l){Ga(0),s(n,l)}function km(n){return n[$i]||(n[$i]=[])}function yg(n){return n.cleanup||(n.cleanup=[])}function Vc(n,s){const l=n[ce],h=l?l.get(Pc,null):null;h&&h.handleError(s)}function vg(n,s,l,h,f){for(let v=0;v<l.length;){const T=l[v++],N=l[v++],j=s[T],X=n.data[T];null!==X.setInput?X.setInput(j,f,h,N):j[N]=f}}function sh(n,s,l){let h=l?n.styles:null,f=l?n.classes:null,v=0;if(null!==s)for(let T=0;T<s.length;T++){const N=s[T];"number"==typeof N?v=N:1==v?f=He(f,N):2==v&&(h=He(h,N+": "+s[++T]+";"))}l?n.styles=h:n.stylesWithoutHost=h,l?n.classes=f:n.classesWithoutHost=f}function ap(n,s,l,h,f=!1){for(;null!==l;){const v=s[l.index];if(null!==v&&h.push(Yi(v)),mr(v))for(let N=en;N<v.length;N++){const j=v[N],X=j[_n].firstChild;null!==X&&ap(j[_n],j,X,h)}const T=l.type;if(8&T)ap(n,s,l.child,h);else if(32&T){const N=Ul(l,s);let j;for(;j=N();)h.push(j)}else if(16&T){const N=Dc(s,l);if(Array.isArray(N))h.push(...N);else{const j=Cu(s[$t]);ap(j[_n],j,N,h,!0)}}l=f?l.projectionNext:l.next}return h}class _d{get rootNodes(){const s=this._lView,l=s[_n];return ap(l,s,l.firstChild,[])}constructor(s,l){this._lView=s,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ei]}set context(s){this._lView[ei]=s}get destroyed(){return 128==(128&this._lView[gr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[si];if(mr(s)){const l=s[It],h=l?l.indexOf(this):-1;h>-1&&(ne(s,h),w(l,h))}this._attachedToViewContainer=!1}ve(this._lView[_n],this._lView)}onDestroy(s){Hy(this._lView[_n],this._lView,null,s)}markForCheck(){Uc(this._cdRefInjectingView||this._lView)}detach(){this._lView[gr]&=-65}reattach(){this._lView[gr]|=64}detectChanges(){Gl(this._lView[_n],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function bc(n,s){Sc(n,s,s[Ye],2,null,null)}(this._lView[_n],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=s}}class qy extends _d{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Gl(s[_n],s,s[ei],!1)}checkNoChanges(){}get context(){return null}}class vd extends ad{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const l=Tn(s);return new sc(l,this.ngModule)}}function lp(n){const s=[];for(let l in n)n.hasOwnProperty(l)&&s.push({propName:n[l],templateName:l});return s}class Yy{constructor(s,l){this.injector=s,this.parentInjector=l}get(s,l,h){h=ri(h);const f=this.injector.get(s,Jd,h);return f!==Jd||l===Jd?f:this.parentInjector.get(s,l,h)}}class sc extends Zh{get inputs(){return lp(this.componentDef.inputs)}get outputs(){return lp(this.componentDef.outputs)}constructor(s,l){super(),this.componentDef=s,this.ngModule=l,this.componentType=s.type,this.selector=function Ma(n){return n.map(Oc).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!l}create(s,l,h,f){var v;let T=(f=f||this.ngModule)instanceof sd?f:null===(v=f)||void 0===v?void 0:v.injector;T&&null!==this.componentDef.getStandaloneInjector&&(T=this.componentDef.getStandaloneInjector(T)||T);const N=T?new Yy(s,T):s,j=N.get(sl,null);if(null===j)throw new Te(407,!1);const X=N.get(Kp,null),ge=j.createRenderer(null,this.componentDef),Ne=this.componentDef.selectors[0][0]||"div",pt=h?function jy(n,s,l){return n.selectRootElement(s,l===ye.ShadowDom)}(ge,h,this.componentDef.encapsulation):Yu(ge,Ne,function Eg(n){const s=n.toLowerCase();return"svg"===s?Xo:"math"===s?"math":null}(Ne)),Nt=this.componentDef.onPush?288:272,on=cg(0,null,null,1,0,null,null,null,null,null),Cn=ep(null,on,null,Nt,null,null,j,ge,X,N,null);let Yn,Cr;_o(Cn);try{const Qr=this.componentDef;let yn,Ii=null;Qr.findHostDirectiveDefs?(yn=[],Ii=new Map,Qr.findHostDirectiveDefs(Qr,yn,Ii),yn.push(Qr)):yn=[Qr];const eo=function Zy(n,s){const l=n[_n],h=ar;return n[h]=s,gd(l,h,2,"#host",null)}(Cn,pt),Yo=function Qy(n,s,l,h,f,v,T,N){const j=f[_n];!function Xy(n,s,l,h){for(const f of n)s.mergedAttrs=Cs(s.mergedAttrs,f.hostAttrs);null!==s.mergedAttrs&&(sh(s,s.mergedAttrs,!0),null!==l&&im(h,l,s))}(h,n,s,T);const X=v.createRenderer(s,l),ge=ep(f,rp(l),null,l.onPush?32:16,f[n.index],n,v,X,N||null,null,null);return j.firstCreatePass&&Om(j,n,h.length-1),nf(f,ge),f[n.index]=ge}(eo,pt,Qr,yn,Cn,j,ge);Cr=C(on,ar),pt&&function Ig(n,s,l,h){if(h)gi(n,l,["ng-version",Xd.full]);else{const{attrs:f,classes:v}=function eg(n){const s=[],l=[];let h=1,f=2;for(;h<n.length;){let v=n[h];if("string"==typeof v)2===f?""!==v&&s.push(v,n[++h]):8===f&&l.push(v);else{if(!El(f))break;f=v}h++}return{attrs:s,classes:l}}(s.selectors[0]);f&&gi(n,l,f),v&&v.length>0&&rl(n,l,v.join(" "))}}(ge,Qr,pt,h),void 0!==l&&function fv(n,s,l){const h=n.projection=[];for(let f=0;f<s.length;f++){const v=l[f];h.push(null!=v?Array.from(v):null)}}(Cr,this.ngContentSelectors,l),Yn=function hv(n,s,l,h,f,v){const T=is(),N=f[_n],j=cs(T,f);fg(N,f,T,l,null,h);for(let ge=0;ge<l.length;ge++)Bt(Ir(f,N,T.directiveStart+ge,T),f);xm(N,f,T),j&&Bt(j,f);const X=Ir(f,N,T.directiveStart+T.componentOffset,T);if(n[ei]=f[ei]=X,null!==v)for(const ge of v)ge(X,s);return md(N,T,n),X}(Yo,Qr,yn,Ii,Cn,[Fm]),Tm(on,Cn,null)}finally{Xl()}return new wg(this.componentType,Yn,Hl(Cr,Cn),Cn,Cr)}}class wg extends Ry{constructor(s,l,h,f,v){super(),this.location=h,this._rootLView=f,this._tNode=v,this.instance=l,this.hostView=this.changeDetectorRef=new qy(f),this.componentType=s}setInput(s,l){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[s])){const v=this._rootLView;vg(v[_n],v,f,s,l),Uc(D(this._tNode.index,v))}}get injector(){return new Pl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Fm(){const n=is();ii(Vt()[_n],n)}function up(n){let s=function Lm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),l=!0;const h=[n];for(;s;){let f;if(Yr(n))f=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Te(903,!1);f=s.\u0275dir}if(f){if(l){h.push(f);const T=n;T.inputs=cp(n.inputs),T.declaredInputs=cp(n.declaredInputs),T.outputs=cp(n.outputs);const N=f.hostBindings;N&&gs(n,N);const j=f.viewQuery,X=f.contentQueries;if(j&&Jy(n,j),X&&Bm(n,X),Ce(n.inputs,f.inputs),Ce(n.declaredInputs,f.declaredInputs),Ce(n.outputs,f.outputs),Yr(f)&&f.data.animation){const ge=n.data;ge.animation=(ge.animation||[]).concat(f.data.animation)}}const v=f.features;if(v)for(let T=0;T<v.length;T++){const N=v[T];N&&N.ngInherit&&N(n),N===up&&(l=!1)}}s=Object.getPrototypeOf(s)}!function pv(n){let s=0,l=null;for(let h=n.length-1;h>=0;h--){const f=n[h];f.hostVars=s+=f.hostVars,f.hostAttrs=Cs(f.hostAttrs,l=Cs(l,f.hostAttrs))}}(h)}function cp(n){return n===de?{}:n===lt?[]:n}function Jy(n,s){const l=n.viewQuery;n.viewQuery=l?(h,f)=>{s(h,f),l(h,f)}:s}function Bm(n,s){const l=n.contentQueries;n.contentQueries=l?(h,f,v)=>{s(h,f,v),l(h,f,v)}:s}function gs(n,s){const l=n.hostBindings;n.hostBindings=l?(h,f)=>{s(h,f),l(h,f)}:s}function sf(n){return!!hp(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function hp(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function oa(n,s,l){return!Object.is(n[s],l)&&(n[s]=l,!0)}function bg(n,s,l,h){const f=Vt();return oa(f,mo(),s)&&($n(),bl(Lr(),f,n,s,l,h)),bg}function df(n,s,l,h,f,v,T,N){const j=Vt(),X=$n(),ge=n+ar,Ne=X.firstCreatePass?function o_(n,s,l,h,f,v,T,N,j){const X=s.consts,ge=gd(s,n,4,T||null,Vn(X,N));ip(s,l,ge,Vn(X,j)),ii(s,ge);const Ne=ge.tView=cg(2,ge,h,f,v,s.directiveRegistry,s.pipeRegistry,null,s.schemas,X);return null!==s.queries&&(s.queries.template(s,ge),Ne.queries=s.queries.embeddedTView(ge)),ge}(ge,X,j,s,l,h,f,v,T):X.data[ge];ro(Ne,!1);const pt=j[Ye].createComment("");uo(X,j,pt,Ne),Bt(pt,j),nf(j,j[ge]=av(pt,j,pt,Ne)),Ws(Ne)&&yd(X,j,Ne),null!=T&&np(j,Ne,N)}function hf(n){return function Q(n,s){return n[s]}(function Sl(){return Nn.lFrame.contextLView}(),ar+n)}function al(n,s,l){const h=Vt();return oa(h,mo(),s)&&Ra($n(),Lr(),h,n,s,h[Ye],l,!1),al}function ff(n,s,l,h,f){const T=f?"class":"style";vg(n,l,s.inputs[T],T,h)}function ph(n,s,l,h){const f=Vt(),v=$n(),T=ar+n,N=f[Ye],j=v.firstCreatePass?function pp(n,s,l,h,f,v){const T=s.consts,j=gd(s,n,2,h,Vn(T,f));return ip(s,l,j,Vn(T,v)),null!==j.attrs&&sh(j,j.attrs,!1),null!==j.mergedAttrs&&sh(j,j.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,j),j}(T,v,f,s,l,h):v.data[T],X=f[T]=Yu(N,s,function Es(){return Nn.lFrame.currentNamespace}()),ge=Ws(j);return ro(j,!0),im(N,X,j),32!=(32&j.flags)&&uo(v,f,X,j),0===function H(){return Nn.lFrame.elementDepthCount}()&&Bt(X,f),function L(){Nn.lFrame.elementDepthCount++}(),ge&&(yd(v,f,j),md(v,j,f)),null!==h&&np(f,j),ph}function lc(){let n=is();Tl()?cl():(n=n.parent,ro(n,!1));const s=n;!function ue(){Nn.lFrame.elementDepthCount--}();const l=$n();return l.firstCreatePass&&(ii(l,n),qr(n)&&l.queries.elementEnd(n)),null!=s.classesWithoutHost&&function Vr(n){return 0!=(8&n.flags)}(s)&&ff(l,s,Vt(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Br(n){return 0!=(16&n.flags)}(s)&&ff(l,s,Vt(),s.stylesWithoutHost,!1),lc}function pf(n,s,l,h){return ph(n,s,l,h),lc(),pf}function Ag(n,s,l){const h=Vt(),f=$n(),v=n+ar,T=f.firstCreatePass?function a_(n,s,l,h,f){const v=s.consts,T=Vn(v,h),N=gd(s,n,8,"ng-container",T);return null!==T&&sh(N,T,!0),ip(s,l,N,Vn(v,f)),null!==s.queries&&s.queries.elementStart(s,N),N}(v,f,h,s,l):f.data[v];ro(T,!0);const N=h[v]=h[Ye].createComment("");return uo(f,h,N,T),Bt(N,h),Ws(T)&&(yd(f,h,T),md(f,T,h)),null!=l&&np(h,T),Ag}function au(){let n=is();const s=$n();return Tl()?cl():(n=n.parent,ro(n,!1)),s.firstCreatePass&&(ii(s,n),qr(n)&&s.queries.elementEnd(n)),au}function lu(n,s,l){return Ag(n,s,l),au(),lu}function Mg(){return Vt()}function l_(n){return!!n&&"function"==typeof n.then}function Rg(n){return!!n&&"function"==typeof n.subscribe}const Gm=Rg;function xg(n,s,l,h){const f=Vt(),v=$n(),T=is();return function gf(n,s,l,h,f,v,T){const N=Ws(h),X=n.firstCreatePass&&yg(n),ge=s[ei],Ne=km(s);let pt=!0;if(3&h.type||T){const Cn=cs(h,s),Yn=T?T(Cn):Cn,Cr=Ne.length,Qr=T?Ii=>T(Yi(Ii[h.index])):h.index;let yn=null;if(!T&&N&&(yn=function u_(n,s,l,h){const f=n.cleanup;if(null!=f)for(let v=0;v<f.length-1;v+=2){const T=f[v];if(T===l&&f[v+1]===h){const N=s[$i],j=f[v+2];return N.length>j?N[j]:null}"string"==typeof T&&(v+=2)}return null}(n,s,f,h.index)),null!==yn)(yn.__ngLastListenerFn__||yn).__ngNextListenerFn__=v,yn.__ngLastListenerFn__=v,pt=!1;else{v=gp(h,s,ge,v,!1);const Ii=l.listen(Yn,f,v);Ne.push(v,Ii),X&&X.push(f,Qr,Cr,Cr+1)}}else v=gp(h,s,ge,v,!1);const Nt=h.outputs;let on;if(pt&&null!==Nt&&(on=Nt[f])){const Cn=on.length;if(Cn)for(let Yn=0;Yn<Cn;Yn+=2){const eo=s[on[Yn]][on[Yn+1]].subscribe(v),Yo=Ne.length;Ne.push(v,eo),X&&X.push(f,h.index,Yo,-(Yo+1))}}}(v,f,f[Ye],T,n,s,h),xg}function c_(n,s,l,h){try{return Ei(6,s,l),!1!==l(h)}catch(f){return Vc(n,f),!1}finally{Ei(7,s,l)}}function gp(n,s,l,h,f){return function v(T){if(T===Function)return h;Uc(n.componentOffset>-1?D(n.index,s):s);let j=c_(s,l,h,T),X=v.__ngNextListenerFn__;for(;X;)j=c_(s,l,X,T)&&j,X=X.__ngNextListenerFn__;return f&&!1===j&&(T.preventDefault(),T.returnValue=!1),j}}function d_(n=1){return function hl(n){return(Nn.lFrame.contextLView=function hs(n,s){for(;n>0;)s=s[Lt],n--;return s}(n,Nn.lFrame.contextLView))[ei]}(n)}function mp(n,s){let l=null;const h=function Fy(n){const s=n.attrs;if(null!=s){const l=s.indexOf(5);if(!(1&l))return s[l+1]}return null}(n);for(let f=0;f<s.length;f++){const v=s[f];if("*"!==v){if(null===h?ky(n,v,!0):Zf(h,v))return f}else l=f}return l}function mf(n){const s=Vt()[$t][ui];if(!s.projection){const h=s.projection=k(n?n.length:1,null),f=h.slice();let v=s.child;for(;null!==v;){const T=n?mp(v,n):0;null!==T&&(f[T]?f[T].projectionNext=v:h[T]=v,f[T]=v),v=v.next}}}function gh(n,s=0,l){const h=Vt(),f=$n(),v=gd(f,ar+n,16,null,l||null);null===v.projection&&(v.projection=s),cl(),32!=(32&v.flags)&&function py(n,s,l){rm(s[Ye],0,s,l,Mn(n,l,s),nu(l.parent||s[ui],l,s))}(f,h,v)}function yp(n,s){return n<<17|s<<2}function ya(n){return n>>17&32767}function Wl(n){return 2|n}function Pa(n){return(131068&n)>>2}function _h(n,s){return-131069&n|s<<2}function _p(n){return 1|n}function Ef(n,s,l,h,f){const v=n[l+1],T=null===s;let N=h?ya(v):Pa(v),j=!1;for(;0!==N&&(!1===j||T);){const ge=n[N+1];h_(n[N],s)&&(j=!0,n[N+1]=h?_p(ge):Wl(ge)),N=h?ya(ge):Pa(ge)}j&&(n[l+1]=h?Wl(v):_p(v))}function h_(n,s){return null===n||null==s||(Array.isArray(n)?n[1]:n)===s||!(!Array.isArray(n)||"string"!=typeof s)&&Gn(n,s)>=0}const Do={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Fg(n){return n.substring(Do.key,Do.keyEnd)}function wf(n,s){const l=Do.textEnd;return l===s?-1:(s=Do.keyEnd=function vp(n,s,l){for(;s<l&&n.charCodeAt(s)>32;)s++;return s}(n,Do.key=s,l),wh(n,s,l))}function wh(n,s,l){for(;s<l&&n.charCodeAt(s)<=32;)s++;return s}function If(n,s,l){return Kl(n,s,l,!1),If}function Ih(n,s){return Kl(n,s,null,!0),Ih}function m_(n){!function ql(n,s,l,h){const f=$n(),v=Uo(2);f.firstUpdatePass&&Xm(f,null,v,h);const T=Vt();if(l!==Kr&&oa(T,v,l)){const N=f.data[ss()];if(bh(N,h)&&!Qm(f,v)){let j=h?N.classesWithoutHost:N.stylesWithoutHost;null!==j&&(l=He(j,l||"")),ff(f,N,T,l,h)}else!function uc(n,s,l,h,f,v,T,N){f===Kr&&(f=lt);let j=0,X=0,ge=0<f.length?f[0]:null,Ne=0<v.length?v[0]:null;for(;null!==ge||null!==Ne;){const pt=j<f.length?f[j+1]:void 0,Nt=X<v.length?v[X+1]:void 0;let Cn,on=null;ge===Ne?(j+=2,X+=2,pt!==Nt&&(on=Ne,Cn=Nt)):null===Ne||null!==ge&&ge<Ne?(j+=2,on=ge):(X+=2,on=Ne,Cn=Nt),null!==on&&Jm(n,s,l,h,on,Cn,T,N),ge=j<f.length?f[j]:null,Ne=X<v.length?v[X]:null}}(f,N,T,T[Ye],T[v+1],T[v+1]=function wp(n,s,l){if(null==l||""===l)return lt;const h=[],f=ru(l);if(Array.isArray(f))for(let v=0;v<f.length;v++)n(h,f[v],!0);else if("object"==typeof f)for(const v in f)f.hasOwnProperty(v)&&n(h,v,f[v]);else"string"==typeof f&&s(h,f);return h}(n,s,l),h,v)}}(_a,cu,n,!0)}function cu(n,s){for(let l=function Lg(n){return function Bg(n){Do.key=0,Do.keyEnd=0,Do.value=0,Do.valueEnd=0,Do.textEnd=n.length}(n),wf(n,wh(n,0,Do.textEnd))}(s);l>=0;l=wf(s,l))Tt(n,Fg(s),!0)}function Kl(n,s,l,h){const f=Vt(),v=$n(),T=Uo(2);v.firstUpdatePass&&Xm(v,n,T,h),s!==Kr&&oa(f,T,s)&&Jm(v,v.data[ss()],f,f[Ye],n,f[T+1]=function v_(n,s){return null==n||""===n||("string"==typeof s?n+=s:"object"==typeof n&&(n=we(ru(n)))),n}(s,l),h,T)}function Qm(n,s){return s>=n.expandoStartIndex}function Xm(n,s,l,h){const f=n.data;if(null===f[l+1]){const v=f[ss()],T=Qm(n,l);bh(v,h)&&null===s&&!T&&(s=!1),s=function y_(n,s,l,h){const f=function da(n){const s=Nn.lFrame.currentDirectiveIndex;return-1===s?null:n[s]}(n);let v=h?s.residualClasses:s.residualStyles;if(null===f)0===(h?s.classBindings:s.styleBindings)&&(l=Lu(l=bf(null,n,s,l,h),s.attrs,h),v=null);else{const T=s.directiveStylingLast;if(-1===T||n[T]!==f)if(l=bf(f,n,s,l,h),null===v){let j=function $g(n,s,l){const h=l?s.classBindings:s.styleBindings;if(0!==Pa(h))return n[ya(h)]}(n,s,h);void 0!==j&&Array.isArray(j)&&(j=bf(null,n,s,j[1],h),j=Lu(j,s.attrs,h),function Vi(n,s,l,h){n[ya(l?s.classBindings:s.styleBindings)]=h}(n,s,h,j))}else v=function Cd(n,s,l){let h;const f=s.directiveEnd;for(let v=1+s.directiveStylingLast;v<f;v++)h=Lu(h,n[v].hostAttrs,l);return Lu(h,s.attrs,l)}(n,s,h)}return void 0!==v&&(h?s.residualClasses=v:s.residualStyles=v),l}(f,v,s,h),function vf(n,s,l,h,f,v){let T=v?s.classBindings:s.styleBindings,N=ya(T),j=Pa(T);n[h]=l;let ge,X=!1;if(Array.isArray(l)?(ge=l[1],(null===ge||Gn(l,ge)>0)&&(X=!0)):ge=l,f)if(0!==j){const pt=ya(n[N+1]);n[h+1]=yp(pt,N),0!==pt&&(n[pt+1]=_h(n[pt+1],h)),n[N+1]=function yh(n,s){return 131071&n|s<<17}(n[N+1],h)}else n[h+1]=yp(N,0),0!==N&&(n[N+1]=_h(n[N+1],h)),N=h;else n[h+1]=yp(j,0),0===N?N=h:n[j+1]=_h(n[j+1],h),j=h;X&&(n[h+1]=Wl(n[h+1])),Ef(n,ge,h,!0),Ef(n,ge,h,!1),function Ym(n,s,l,h,f){const v=f?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof s&&Gn(v,s)>=0&&(l[h+1]=_p(l[h+1]))}(s,ge,n,h,v),T=yp(N,j),v?s.classBindings=T:s.styleBindings=T}(f,v,s,l,T,h)}}function bf(n,s,l,h,f){let v=null;const T=l.directiveEnd;let N=l.directiveStylingLast;for(-1===N?N=l.directiveStart:N++;N<T&&(v=s[N],h=Lu(h,v.hostAttrs,f),v!==n);)N++;return null!==n&&(l.directiveStylingLast=N),h}function Lu(n,s,l){const h=l?1:2;let f=-1;if(null!==s)for(let v=0;v<s.length;v++){const T=s[v];"number"==typeof T?f=T:f===h&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Tt(n,T,!!l||s[++v]))}return void 0===n?null:n}function _a(n,s,l){const h=String(s);""!==h&&!h.includes(" ")&&Tt(n,h,l)}function Jm(n,s,l,h,f,v,T,N){if(!(3&s.type))return;const j=n.data,X=j[N+1],ge=function mv(n){return 1==(1&n)}(X)?__(j,s,l,f,Pa(X),T):void 0;Hc(ge)||(Hc(v)||function qm(n){return 2==(2&n)}(X)&&(v=__(j,null,l,f,N,T)),function Xu(n,s,l,h,f){if(s)f?n.addClass(l,h):n.removeClass(l,h);else{let v=-1===h.indexOf("-")?void 0:ia.DashCase;null==f?n.removeStyle(l,h,v):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),v|=ia.Important),n.setStyle(l,h,f,v))}}(h,T,Ao(ss(),l),f,v))}function __(n,s,l,h,f,v){const T=null===s;let N;for(;f>0;){const j=n[f],X=Array.isArray(j),ge=X?j[1]:j,Ne=null===ge;let pt=l[f+1];pt===Kr&&(pt=Ne?lt:void 0);let Nt=Ne?un(pt,h):ge===h?pt:void 0;if(X&&!Hc(Nt)&&(Nt=un(j,h)),Hc(Nt)&&(N=Nt,T))return N;const on=n[f+1];f=T?ya(on):Pa(on)}if(null!==s){let j=v?s.residualClasses:s.residualStyles;null!=j&&(N=un(j,h))}return N}function Hc(n){return void 0!==n}function bh(n,s){return 0!=(n.flags&(s?8:16))}function Ug(n,s=""){const l=Vt(),h=$n(),f=n+ar,v=h.firstCreatePass?gd(h,f,1,s,null):h.data[f],T=l[f]=function wc(n,s){return n.createText(s)}(l[Ye],s);uo(h,l,T,v),ro(v,!1)}function Dd(n){return Vg("",n,""),Dd}function Vg(n,s,l){const h=Vt(),f=function hh(n,s,l,h){return oa(n,mo(),l)?s+ae(l)+h:Kr}(h,n,s,l);return f!==Kr&&function jc(n,s,l){const h=Ao(s,n);!function Bd(n,s,l){n.setValue(s,l)}(n[Ye],h,l)}(h,ss(),f),Vg}function bp(n,s,l){const h=Vt();return oa(h,mo(),s)&&Ra($n(),Lr(),h,n,s,h[Ye],l,!0),bp}const Ch=void 0;var oy=["en",[["a","p"],["AM","PM"],Ch],[["AM","PM"],Ch,Ch],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ch,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ch,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ch,"{1} 'at' {0}",Ch],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Df(n){const l=Math.floor(Math.abs(n)),h=n.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===h?1:5}];let Sd={};function Cp(n){const s=function Wg(n){return n.toLowerCase().replace(/_/g,"-")}(n);let l=Tf(s);if(l)return l;const h=s.split("-")[0];if(l=Tf(h),l)return l;if("en"===h)return oy;throw new Te(701,!1)}function Wc(n){return Cp(n)[Pr.PluralCase]}function Tf(n){return n in Sd||(Sd[n]=Dr.ng&&Dr.ng.common&&Dr.ng.common.locales&&Dr.ng.common.locales[n]),Sd[n]}var Pr=(()=>((Pr=Pr||{})[Pr.LocaleId=0]="LocaleId",Pr[Pr.DayPeriodsFormat=1]="DayPeriodsFormat",Pr[Pr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pr[Pr.DaysFormat=3]="DaysFormat",Pr[Pr.DaysStandalone=4]="DaysStandalone",Pr[Pr.MonthsFormat=5]="MonthsFormat",Pr[Pr.MonthsStandalone=6]="MonthsStandalone",Pr[Pr.Eras=7]="Eras",Pr[Pr.FirstDayOfWeek=8]="FirstDayOfWeek",Pr[Pr.WeekendRange=9]="WeekendRange",Pr[Pr.DateFormat=10]="DateFormat",Pr[Pr.TimeFormat=11]="TimeFormat",Pr[Pr.DateTimeFormat=12]="DateTimeFormat",Pr[Pr.NumberSymbols=13]="NumberSymbols",Pr[Pr.NumberFormats=14]="NumberFormats",Pr[Pr.CurrencyCode=15]="CurrencyCode",Pr[Pr.CurrencySymbol=16]="CurrencySymbol",Pr[Pr.CurrencyName=17]="CurrencyName",Pr[Pr.Currencies=18]="Currencies",Pr[Pr.Directionality=19]="Directionality",Pr[Pr.PluralCase=20]="PluralCase",Pr[Pr.ExtraData=21]="ExtraData",Pr))();const Sf="en-US";let Ah=Sf;function hy(n,s,l,h,f){if(n=De(n),Array.isArray(n))for(let v=0;v<n.length;v++)hy(n[v],s,l,h,f);else{const v=$n(),T=Vt();let N=id(n)?n:De(n.provide),j=Rc(n);const X=is(),ge=1048575&X.providerIndexes,Ne=X.directiveStart,pt=X.providerIndexes>>20;if(id(n)||!n.multi){const Nt=new $e(j,f,Wo),on=x_(N,s,f?ge:ge+pt,Ne);-1===on?(Ts(Jl(X,T),v,N),Ov(v,n,s.length),s.push(N),X.directiveStart++,X.directiveEnd++,f&&(X.providerIndexes+=1048576),l.push(Nt),T.push(Nt)):(l[on]=Nt,T[on]=Nt)}else{const Nt=x_(N,s,ge+pt,Ne),on=x_(N,s,ge,ge+pt),Yn=on>=0&&l[on];if(f&&!Yn||!f&&!(Nt>=0&&l[Nt])){Ts(Jl(X,T),v,N);const Cr=function Qv(n,s,l,h,f){const v=new $e(n,l,Wo);return v.multi=[],v.index=s,v.componentProviders=0,Zv(v,f,h&&!l),v}(f?S0:P_,l.length,f,h,j);!f&&Yn&&(l[on].providerFactory=Cr),Ov(v,n,s.length,0),s.push(N),X.directiveStart++,X.directiveEnd++,f&&(X.providerIndexes+=1048576),l.push(Cr),T.push(Cr)}else Ov(v,n,Nt>-1?Nt:on,Zv(l[f?on:Nt],j,!f&&h));!f&&h&&Yn&&l[on].componentProviders++}}}function Ov(n,s,l,h){const f=id(s),v=function jp(n){return!!n.useClass}(s);if(f||v){const j=(v?De(s.useClass):s).prototype.ngOnDestroy;if(j){const X=n.destroyHooks||(n.destroyHooks=[]);if(!f&&s.multi){const ge=X.indexOf(l);-1===ge?X.push(l,[h,j]):X[ge+1].push(h,j)}else X.push(l,j)}}}function Zv(n,s,l){return l&&n.componentProviders++,n.multi.push(s)-1}function x_(n,s,l,h){for(let f=l;f<h;f++)if(s[f]===n)return f;return-1}function P_(n,s,l,h){return O_(this.multi,[])}function S0(n,s,l,h){const f=this.multi;let v;if(this.providerFactory){const T=this.providerFactory.componentProviders,N=Ir(l,l[_n],this.providerFactory.index,h);v=N.slice(0,T),O_(f,v);for(let j=T;j<N.length;j++)v.push(N[j])}else v=[],O_(f,v);return v}function O_(n,s){for(let l=0;l<n.length;l++)s.push((0,n[l])());return s}function Rf(n,s=[]){return l=>{l.providersResolver=(h,f)=>function dy(n,s,l){const h=$n();if(h.firstCreatePass){const f=Yr(n);hy(l,h.data,h.blueprint,f,!0),hy(s,h.data,h.blueprint,f,!1)}}(h,f?f(n):n,s)}}class ul{}class Cl{}function Xv(n,s){return new em(n,null!=s?s:null)}class em extends ul{constructor(s,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vd(this);const h=Wn(s);this._bootstrapComponents=Aa(h.bootstrap),this._r3Injector=vm(s,l,[{provide:ul,useValue:this},{provide:ad,useValue:this.componentFactoryResolver}],we(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Ap extends Cl{constructor(s){super(),this.moduleType=s}create(s){return new em(this.moduleType,s)}}class Ql extends ul{constructor(s,l,h){super(),this.componentFactoryResolver=new vd(this),this.instance=null;const f=new zf([...s,{provide:ul,useValue:this},{provide:ad,useValue:this.componentFactoryResolver}],l||Yh(),h,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Nv(n,s,l=null){return new Ql(n,s,l).injector}let kv=(()=>{class n{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const h=Wh(0,l.type),f=h.length>0?Nv([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Dt({token:n,providedIn:"environment",factory:()=>new n(tr(sd))}),n})();function Mp(n){n.getStandaloneInjector=s=>s.get(kv).getOrCreateStandaloneInjector(n)}function bn(n){return s=>{setTimeout(n,void 0,s)}}const Dn=class Jt extends y.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,l,h){let f=s,v=l||(()=>null),T=h;if(s&&"object"==typeof s){var N,j,X;const Ne=s;f=null===(N=Ne.next)||void 0===N?void 0:N.bind(Ne),v=null===(j=Ne.error)||void 0===j?void 0:j.bind(Ne),T=null===(X=Ne.complete)||void 0===X?void 0:X.bind(Ne)}this.__isAsync&&(v=bn(v),f&&(f=bn(f)),T&&(T=bn(T)));const ge=super.subscribe({next:f,error:v,complete:T});return s instanceof m.w0&&s.add(ge),ge}};function fr(){return this._results[Symbol.iterator]()}class oi{get changes(){return this._changes||(this._changes=new Dn)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=oi.prototype;l[Symbol.iterator]||(l[Symbol.iterator]=fr)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,l){return this._results.reduce(s,l)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,l){const h=this;h.dirty=!1;const f=function wo(n){return n.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function vu(n,s,l){if(n.length!==s.length)return!1;for(let h=0;h<n.length;h++){let f=n[h],v=s[h];if(l&&(f=l(f),v=l(v)),v!==f)return!1}return!0}(h._results,f,l))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Hi=(()=>{class n{}return n.__NG_ELEMENT_ID__=Us,n})();const fi=Hi,ka=class extends fi{constructor(s,l,h){super(),this._declarationLView=s,this._declarationTContainer=l,this.elementRef=h}createEmbeddedView(s,l){const h=this._declarationTContainer.tView,f=ep(this._declarationLView,h,s,16,null,h.declTNode,null,null,null,null,l||null);f[Gt]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[cn];return null!==T&&(f[cn]=T.createEmbeddedView(h)),Tm(h,f,s),new _d(f)}};function Us(){return Is(is(),Vt())}function Is(n,s){return 4&n.type?new ka(s,n,Hl(n,s)):null}let Fa=(()=>{class n{}return n.__NG_ELEMENT_ID__=Of,n})();function Of(){return hE(is(),Vt())}const mw=Fa,cE=class extends mw{constructor(s,l,h){super(),this._lContainer=s,this._hostTNode=l,this._hostLView=h}get element(){return Hl(this._hostTNode,this._hostLView)}get injector(){return new Pl(this._hostTNode,this._hostLView)}get parentInjector(){const s=jr(this._hostTNode,this._hostLView);if(Fs(s)){const l=jo(s,this._hostLView),h=vo(s);return new Pl(l[_n].data[h+8],l)}return new Pl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const l=dE(this._lContainer);return null!==l&&l[s]||null}get length(){return this._lContainer.length-en}createEmbeddedView(s,l,h){let f,v;"number"==typeof h?f=h:null!=h&&(f=h.index,v=h.injector);const T=s.createEmbeddedView(l||{},v);return this.insert(T,f),T}createComponent(s,l,h,f,v){const T=s&&!function gl(n){return"function"==typeof n}(s);let N;if(T)N=l;else{const Ne=l||{};N=Ne.index,h=Ne.injector,f=Ne.projectableNodes,v=Ne.environmentInjector||Ne.ngModuleRef}const j=T?s:new sc(Tn(s)),X=h||this.parentInjector;if(!v&&null==j.ngModule){const pt=(T?X:this.parentInjector).get(sd,null);pt&&(v=pt)}const ge=j.create(X,f,void 0,v);return this.insert(ge.hostView,N),ge}insert(s,l){const h=s._lView,f=h[_n];if(function Qt(n){return mr(n[si])}(h)){const ge=this.indexOf(s);if(-1!==ge)this.detach(ge);else{const Ne=h[si],pt=new cE(Ne,Ne[ui],Ne[si]);pt.detach(pt.indexOf(s))}}const v=this._adjustIndex(l),T=this._lContainer;!function _(n,s,l,h){const f=en+h,v=l.length;h>0&&(l[f-1][Rr]=s),h<v-en?(s[Rr]=l[f],R(l,en+h,s)):(l.push(s),s[Rr]=null),s[si]=l;const T=s[Gt];null!==T&&l!==T&&function b(n,s){const l=n[Kt];s[$t]!==s[si][si][$t]&&(n[ct]=!0),null===l?n[Kt]=[s]:l.push(s)}(T,s);const N=s[cn];null!==N&&N.insertView(n),s[gr]|=64}(f,h,T,v);const N=Tc(v,T),j=h[Ye],X=Zu(j,T[st]);return null!==X&&function Ic(n,s,l,h,f,v){h[li]=f,h[ui]=s,Sc(n,h,l,1,f,v)}(f,T[ui],j,h,X,N),s.attachToViewContainerRef(),R($0(T),v,s),s}move(s,l){return this.insert(s,l)}indexOf(s){const l=dE(this._lContainer);return null!==l?l.indexOf(s):-1}remove(s){const l=this._adjustIndex(s,-1),h=ne(this._lContainer,l);h&&(w($0(this._lContainer),l),ve(h[_n],h))}detach(s){const l=this._adjustIndex(s,-1),h=ne(this._lContainer,l);return h&&null!=w($0(this._lContainer),l)?new _d(h):null}_adjustIndex(s,l=0){return null==s?this.length+l:s}};function dE(n){return n[It]}function $0(n){return n[It]||(n[It]=[])}function hE(n,s){let l;const h=s[n.index];if(mr(h))l=h;else{let f;if(8&n.type)f=Yi(h);else{const v=s[Ye];f=v.createComment("");const T=cs(n,s);ti(v,Zu(v,T),f,function Su(n,s){return n.nextSibling(s)}(v,T),!1)}s[n.index]=l=av(h,s,f,n),nf(s,l)}return new cE(l,n,s)}class U0{constructor(s){this.queryList=s,this.matches=null}clone(){return new U0(this.queryList)}setDirty(){this.queryList.setDirty()}}class V0{constructor(s=[]){this.queries=s}createEmbeddedView(s){const l=s.queries;if(null!==l){const h=null!==s.contentQueries?s.contentQueries[0]:l.length,f=[];for(let v=0;v<h;v++){const T=l.getByIndex(v);f.push(this.queries[T.indexInDeclarationView].clone())}return new V0(f)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let l=0;l<this.queries.length;l++)null!==wE(s,l).matches&&this.queries[l].setDirty()}}class fE{constructor(s,l,h=null){this.predicate=s,this.flags=l,this.read=h}}class j0{constructor(s=[]){this.queries=s}elementStart(s,l){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(s,l)}elementEnd(s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(s)}embeddedTView(s){let l=null;for(let h=0;h<this.length;h++){const f=null!==l?l.length:0,v=this.getByIndex(h).embeddedTView(s,f);v&&(v.indexInDeclarationView=h,null!==l?l.push(v):l=[v])}return null!==l?new j0(l):null}template(s,l){for(let h=0;h<this.queries.length;h++)this.queries[h].template(s,l)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class H0{constructor(s,l=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(s,l){this.isApplyingToNode(l)&&this.matchTNode(s,l)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,l){this.elementStart(s,l)}embeddedTView(s,l){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,l),new H0(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let h=s.parent;for(;null!==h&&8&h.type&&h.index!==l;)h=h.parent;return l===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(s,l){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const v=h[f];this.matchTNodeWithReadOption(s,l,yw(l,v)),this.matchTNodeWithReadOption(s,l,an(l,s,v,!1,!1))}else h===Hi?4&l.type&&this.matchTNodeWithReadOption(s,l,-1):this.matchTNodeWithReadOption(s,l,an(l,s,h,!1,!1))}matchTNodeWithReadOption(s,l,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===Ou||f===Fa||f===Hi&&4&l.type)this.addMatch(l.index,-2);else{const v=an(l,s,f,!1,!1);null!==v&&this.addMatch(l.index,v)}else this.addMatch(l.index,h)}}addMatch(s,l){null===this.matches?this.matches=[s,l]:this.matches.push(s,l)}}function yw(n,s){const l=n.localNames;if(null!==l)for(let h=0;h<l.length;h+=2)if(l[h]===s)return l[h+1];return null}function vw(n,s,l,h){return-1===l?function _w(n,s){return 11&n.type?Hl(n,s):4&n.type?Is(n,s):null}(s,n):-2===l?function Ew(n,s,l){return l===Ou?Hl(s,n):l===Hi?Is(s,n):l===Fa?hE(s,n):void 0}(n,s,h):Ir(n,n[_n],l,s)}function pE(n,s,l,h){const f=s[cn].queries[h];if(null===f.matches){const v=n.data,T=l.matches,N=[];for(let j=0;j<T.length;j+=2){const X=T[j];N.push(X<0?null:vw(s,v[X],T[j+1],l.metadata.read))}f.matches=N}return f.matches}function z0(n,s,l,h){const f=n.queries.getByIndex(l),v=f.matches;if(null!==v){const T=pE(n,s,f,l);for(let N=0;N<v.length;N+=2){const j=v[N];if(j>0)h.push(T[N/2]);else{const X=v[N+1],ge=s[-j];for(let Ne=en;Ne<ge.length;Ne++){const pt=ge[Ne];pt[Gt]===pt[si]&&z0(pt[_n],pt,X,h)}if(null!==ge[Kt]){const Ne=ge[Kt];for(let pt=0;pt<Ne.length;pt++){const Nt=Ne[pt];z0(Nt[_n],Nt,X,h)}}}}}return h}function gE(n){const s=Vt(),l=$n(),h=ha();Ga(h+1);const f=wE(l,h);if(n.dirty&&function K(n){return 4==(4&n[gr])}(s)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const v=f.crossesNgTemplate?z0(l,s,h,[]):pE(l,s,f,h);n.reset(v,Nu),n.notifyOnChanges()}return!0}return!1}function mE(n,s,l){const h=$n();h.firstCreatePass&&(EE(h,new fE(n,s,l),-1),2==(2&s)&&(h.staticViewQueries=!0)),vE(h,Vt(),s)}function yE(n,s,l,h){const f=$n();if(f.firstCreatePass){const v=is();EE(f,new fE(s,l,h),v.index),function Iw(n,s){const l=n.contentQueries||(n.contentQueries=[]);s!==(l.length?l[l.length-1]:-1)&&l.push(n.queries.length-1,s)}(f,n),2==(2&l)&&(f.staticContentQueries=!0)}vE(f,Vt(),l)}function _E(){return function ww(n,s){return n[cn].queries[s].queryList}(Vt(),ha())}function vE(n,s,l){const h=new oi(4==(4&l));Hy(n,s,h,h.destroy),null===s[cn]&&(s[cn]=new V0),s[cn].queries.push(new U0(h))}function EE(n,s,l){null===n.queries&&(n.queries=new j0),n.queries.track(new H0(s,l))}function wE(n,s){return n.queries.getByIndex(s)}function IE(n,s){return Is(n,s)}function G0(n){return!!Wn(n)}function h0(...n){}const UE=new Zi("Application Initializer");let f0=(()=>{class n{constructor(l){this.appInits=l,this.resolve=h0,this.reject=h0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const v=this.appInits[f]();if(l_(v))l.push(v);else if(Gm(v)){const T=new Promise((N,j)=>{v.subscribe({complete:N,error:j})});l.push(T)}}Promise.all(l).then(()=>{h()}).catch(f=>{this.reject(f)}),0===l.length&&h(),this.initialized=!0}}return n.\u0275fac=function(l){return new(l||n)(tr(UE,8))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VE=new Zi("AppId",{providedIn:"root",factory:function jE(){return`${Z0()}${Z0()}${Z0()}`}});function Z0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const HE=new Zi("Platform Initializer"),jw=new Zi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Hw=new Zi("AnimationModuleType");let zw=(()=>{class n{log(l){console.log(l)}warn(l){console.warn(l)}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const p0=new Zi("LocaleId",{providedIn:"root",factory:()=>Gr(p0,pn.Optional|pn.SkipSelf)||function Gw(){return typeof $localize<"u"&&$localize.locale||Sf}()}),Ww=new Zi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Kw{constructor(s,l){this.ngModuleFactory=s,this.componentFactories=l}}let qw=(()=>{class n{compileModuleSync(l){return new Ap(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),v=Aa(Wn(l).declarations).reduce((T,N)=>{const j=Tn(N);return j&&T.push(new sc(j)),T},[]);return new Kw(h,v)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qw=(()=>Promise.resolve(0))();function Q0(n){typeof Zone>"u"?Qw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class xd{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dn(!1),this.onMicrotaskEmpty=new Dn(!1),this.onStable=new Dn(!1),this.onError=new Dn(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&l,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Xw(){let n=Dr.requestAnimationFrame,s=Dr.cancelAnimationFrame;if(typeof Zone<"u"&&n&&s){const l=n[Zone.__symbol__("OriginalDelegate")];l&&(n=l);const h=s[Zone.__symbol__("OriginalDelegate")];h&&(s=h)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function tI(n){const s=()=>{!function eI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Dr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,J0(n),n.isCheckStableRunning=!0,X0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),J0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,h,f,v,T,N)=>{try{return WE(n),l.invokeTask(f,v,T,N)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&s(),KE(n)}},onInvoke:(l,h,f,v,T,N,j)=>{try{return WE(n),l.invoke(f,v,T,N,j)}finally{n.shouldCoalesceRunChangeDetection&&s(),KE(n)}},onHasTask:(l,h,f,v)=>{l.hasTask(f,v),h===f&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,J0(n),X0(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(l,h,f,v)=>(l.handleError(f,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xd.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(xd.isInAngularZone())throw new Te(909,!1)}run(s,l,h){return this._inner.run(s,l,h)}runTask(s,l,h,f){const v=this._inner,T=v.scheduleEventTask("NgZoneEvent: "+f,s,Jw,h0,h0);try{return v.runTask(T,l,h)}finally{v.cancelTask(T)}}runGuarded(s,l,h){return this._inner.runGuarded(s,l,h)}runOutsideAngular(s){return this._outer.run(s)}}const Jw={};function X0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function J0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function WE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KE(n){n._nesting--,X0(n)}class nI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dn,this.onMicrotaskEmpty=new Dn,this.onStable=new Dn,this.onError=new Dn}run(s,l,h){return s.apply(l,h)}runGuarded(s,l,h){return s.apply(l,h)}runOutsideAngular(s){return s()}runTask(s,l,h,f){return s.apply(l,h)}}const qE=new Zi(""),YE=new Zi("");let eE,rI=(()=>{class n{constructor(l,h,f){this._ngZone=l,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,eE||(function iI(n){eE=n}(f),f.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xd.assertNotInAngularZone(),Q0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Q0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,f){let v=-1;h&&h>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==v),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:f})}whenStable(l,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,f){return[]}}return n.\u0275fac=function(l){return new(l||n)(tr(xd),tr(ZE),tr(YE))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac}),n})(),ZE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){var f,v;return null!==(f=null===(v=eE)||void 0===v?void 0:v.findTestabilityInTree(this,l,h))&&void 0!==f?f:null}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Rp=!1;let nm=null;const tE=new Zi("PlatformDestroyListeners"),XE=new Zi("appBootstrapListener");class aI{constructor(s,l){this.name=s,this.token=l}}function cI(n){const{rootComponent:s,appProviders:l,platformProviders:h}=n;Rp&&void 0!==s&&function mm(n){if(function Kf(n){if(!Tn(n))throw new Te(906,`The ${dt(n)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}(n),!Tn(n).standalone)throw new Te(907,`The ${dt(n)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${dt(n)} component has the \`standalone: true\` flag in the decorator.`)}(s);const f=function uI(n=[]){if(nm)return nm;const s=function ew(n=[],s){return dd.create({name:s,providers:[{provide:qh,useValue:"platform"},{provide:tE,useValue:new Set([()=>nm=null])},...n]})}(n);return nm=s,function JE(n){const s=n.get(HE,null);s&&s.forEach(l=>l())}(s),s}(h),v=function rw(n,s){let l;return l="noop"===n?new nI:("zone.js"===n?void 0:n)||new xd(s),l}("zone.js",function nw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}());return v.run(()=>{const N=Nv([{provide:xd,useValue:v},...l||[]],f,"Environment Injector"),j=N.get(Pc,null);if(Rp&&!j)throw new Te(402,"No `ErrorHandler` found in the Dependency Injection tree.");let X;v.runOutsideAngular(()=>{X=v.onError.subscribe({next:pt=>{j.handleError(pt)}})});const ge=()=>N.destroy(),Ne=f.get(tE);return Ne.add(ge),N.onDestroy(()=>{X.unsubscribe(),Ne.delete(ge)}),function iw(n,s,l){try{const h=l();return l_(h)?h.catch(f=>{throw s.runOutsideAngular(()=>n.handleError(f)),f}):h}catch(h){throw s.runOutsideAngular(()=>n.handleError(h)),h}}(j,v,()=>{const pt=N.get(f0);return pt.runInitializers(),pt.donePromise.then(()=>{!function C_(n){_t(n,"Expected localeId to be defined"),"string"==typeof n&&(Ah=n.toLowerCase().replace(/_/g,"-"))}(N.get(p0,Sf)||Sf);const on=N.get(g0);return void 0!==s&&on.bootstrap(s),on})})})}let g0=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(l,h,f){this._zone=l,this._injector=h,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new q.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),T=new q.y(N=>{let j;this._zone.runOutsideAngular(()=>{j=this._zone.onStable.subscribe(()=>{xd.assertNotInAngularZone(),Q0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const X=this._zone.onUnstable.subscribe(()=>{xd.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{j.unsubscribe(),X.unsubscribe()}});this.isStable=(0,oe.T)(v,T.pipe((0,xe.B)()))}bootstrap(l,h){Rp&&this.warnIfDestroyed();const f=l instanceof Zh;if(!this._injector.get(f0).done){const Nt="Cannot bootstrap as there are still asynchronous initializers running."+(!f&&jn(l)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new Te(405,Rp&&Nt)}let T;T=f?l:this._injector.get(ad).resolveComponentFactory(l),this.componentTypes.push(T.componentType);const N=function oI(n){return n.isBoundToModule}(T)?void 0:this._injector.get(ul),X=T.create(dd.NULL,[],h||T.selector,N),ge=X.location.nativeElement,Ne=X.injector.get(qE,null);return null==Ne||Ne.registerApplication(ge),X.onDestroy(()=>{this.detachView(X.hostView),m0(this.components,X),null==Ne||Ne.unregisterApplication(ge)}),this._loadComponent(X),X}tick(){if(Rp&&this.warnIfDestroyed(),this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){Rp&&this.warnIfDestroyed();const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){Rp&&this.warnIfDestroyed();const h=l;m0(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const h=this._injector.get(XE,[]);h.push(...this._bootstrapListeners),h.forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return Rp&&this.warnIfDestroyed(),this._destroyListeners.push(l),()=>m0(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Te(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){Rp&&this._destroyed&&console.warn(Ie(406,"This instance of the `ApplicationRef` has already been destroyed."))}}return n.\u0275fac=function(l){return new(l||n)(tr(xd),tr(sd),tr(Pc))},n.\u0275prov=Dt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function m0(n,s){const l=n.indexOf(s);l>-1&&n.splice(l,1)}function fI(){return!1}function pI(){}let gI=(()=>{class n{}return n.__NG_ELEMENT_ID__=mI,n})();function mI(n){return function yI(n,s,l){if(bs(n)&&!l){const h=D(n.index,s);return new _d(h,h)}return 47&n.type?new _d(s[$t],s):null}(is(),Vt(),16==(16&n))}class cw{constructor(){}supports(s){return sf(s)}create(s){return new bI(s)}}const II=(n,s)=>s;class bI{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||II}forEachItem(s){let l;for(l=this._itHead;null!==l;l=l._next)s(l)}forEachOperation(s){let l=this._itHead,h=this._removalsHead,f=0,v=null;for(;l||h;){const T=!h||l&&l.currentIndex<hw(h,f,v)?l:h,N=hw(T,f,v),j=T.currentIndex;if(T===h)f--,h=h._nextRemoved;else if(l=l._next,null==T.previousIndex)f++;else{v||(v=[]);const X=N-f,ge=j-f;if(X!=ge){for(let pt=0;pt<X;pt++){const Nt=pt<v.length?v[pt]:v[pt]=0,on=Nt+pt;ge<=on&&on<X&&(v[pt]=Nt+1)}v[T.previousIndex]=ge-X}}N!==j&&s(T,N,j)}}forEachPreviousItem(s){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)s(l)}forEachAddedItem(s){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)s(l)}forEachMovedItem(s){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)s(l)}forEachRemovedItem(s){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)s(l)}forEachIdentityChange(s){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)s(l)}diff(s){if(null==s&&(s=[]),!sf(s))throw new Te(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let f,v,T,l=this._itHead,h=!1;if(Array.isArray(s)){this.length=s.length;for(let N=0;N<this.length;N++)v=s[N],T=this._trackByFn(N,v),null!==l&&Object.is(l.trackById,T)?(h&&(l=this._verifyReinsertion(l,v,T,N)),Object.is(l.item,v)||this._addIdentityChange(l,v)):(l=this._mismatch(l,v,T,N),h=!0),l=l._next}else f=0,function r_(n,s){if(Array.isArray(n))for(let l=0;l<n.length;l++)s(n[l]);else{const l=n[Symbol.iterator]();let h;for(;!(h=l.next()).done;)s(h.value)}}(s,N=>{T=this._trackByFn(f,N),null!==l&&Object.is(l.trackById,T)?(h&&(l=this._verifyReinsertion(l,N,T,f)),Object.is(l.item,N)||this._addIdentityChange(l,N)):(l=this._mismatch(l,N,T,f),h=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,l,h,f){let v;return null===s?v=this._itTail:(v=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(s.item,l)||this._addIdentityChange(s,l),this._reinsertAfter(s,v,f)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(s.item,l)||this._addIdentityChange(s,l),this._moveAfter(s,v,f)):s=this._addAfter(new CI(l,h),v,f),s}_verifyReinsertion(s,l,h,f){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==v?s=this._reinsertAfter(v,s._prev,f):s.currentIndex!=f&&(s.currentIndex=f,this._addToMoves(s,f)),s}_truncate(s){for(;null!==s;){const l=s._next;this._addToRemovals(this._unlink(s)),s=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,l,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const f=s._prevRemoved,v=s._nextRemoved;return null===f?this._removalsHead=v:f._nextRemoved=v,null===v?this._removalsTail=f:v._prevRemoved=f,this._insertAfter(s,l,h),this._addToMoves(s,h),s}_moveAfter(s,l,h){return this._unlink(s),this._insertAfter(s,l,h),this._addToMoves(s,h),s}_addAfter(s,l,h){return this._insertAfter(s,l,h),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,l,h){const f=null===l?this._itHead:l._next;return s._next=f,s._prev=l,null===f?this._itTail=s:f._prev=s,null===l?this._itHead=s:l._next=s,null===this._linkedRecords&&(this._linkedRecords=new dw),this._linkedRecords.put(s),s.currentIndex=h,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const l=s._prev,h=s._next;return null===l?this._itHead=h:l._next=h,null===h?this._itTail=l:h._prev=l,s}_addToMoves(s,l){return s.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dw),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,l){return s.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class CI{constructor(s,l){this.item=s,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DI{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,l){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===l||l<=h.currentIndex)&&Object.is(h.trackById,s))return h;return null}remove(s){const l=s._prevDup,h=s._nextDup;return null===l?this._head=h:l._nextDup=h,null===h?this._tail=l:h._prevDup=l,null===this._head}}class dw{constructor(){this.map=new Map}put(s){const l=s.trackById;let h=this.map.get(l);h||(h=new DI,this.map.set(l,h)),h.add(s)}get(s,l){const f=this.map.get(s);return f?f.get(s,l):null}remove(s){const l=s.trackById;return this.map.get(l).remove(s)&&this.map.delete(l),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hw(n,s,l){const h=n.previousIndex;if(null===h)return h;let f=0;return l&&h<l.length&&(f=l[h]),h+s+f}class fw{constructor(){}supports(s){return s instanceof Map||hp(s)}create(){return new TI}}class TI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let l;for(l=this._mapHead;null!==l;l=l._next)s(l)}forEachPreviousItem(s){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)s(l)}forEachChangedItem(s){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)s(l)}forEachAddedItem(s){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)s(l)}forEachRemovedItem(s){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)s(l)}diff(s){if(s){if(!(s instanceof Map||hp(s)))throw new Te(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(s,(h,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,h),this._appendAfter=l,l=l._next;else{const v=this._getOrCreateRecordForKey(f,h);l=this._insertBeforeOrAppend(l,v)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let h=l;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,l){if(s){const h=s._prev;return l._next=s,l._prev=h,s._prev=l,h&&(h._next=l),s===this._mapHead&&(this._mapHead=l),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(s,l){if(this._records.has(s)){const f=this._records.get(s);this._maybeAddToChanges(f,l);const v=f._prev,T=f._next;return v&&(v._next=T),T&&(T._prev=v),f._next=null,f._prev=null,f}const h=new SI(s);return this._records.set(s,h),h.currentValue=l,this._addToAdditions(h),h}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,l){Object.is(l,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=l,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,l){s instanceof Map?s.forEach(l):Object.keys(s).forEach(h=>l(s[h],h))}}class SI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function pw(){return new aE([new cw])}let aE=(()=>{class n{constructor(l){this.factories=l}static create(l,h){if(null!=h){const f=h.factories.slice();l=l.concat(f)}return new n(l)}static extend(l){return{provide:n,useFactory:h=>n.create(l,h||pw()),deps:[[n,new Fl,new kl]]}}find(l){const h=this.factories.find(f=>f.supports(l));if(null!=h)return h;throw new Te(901,!1)}}return n.\u0275prov=Dt({token:n,providedIn:"root",factory:pw}),n})();function gw(){return new lE([new fw])}let lE=(()=>{class n{constructor(l){this.factories=l}static create(l,h){if(h){const f=h.factories.slice();l=l.concat(f)}return new n(l)}static extend(l){return{provide:n,useFactory:h=>n.create(l,h||gw()),deps:[[n,new Fl,new kl]]}}find(l){const h=this.factories.find(f=>f.supports(l));if(h)return h;throw new Te(901,!1)}}return n.\u0275prov=Dt({token:n,providedIn:"root",factory:gw}),n})(),RI=(()=>{class n{constructor(l){}}return n.\u0275fac=function(l){return new(l||n)(tr(g0))},n.\u0275mod=At({type:n}),n.\u0275inj=Rt({}),n})();function xI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function OI(n,s){const l=Tn(n),h=s.elementInjector||Yh();return new sc(l).create(h,s.projectableNodes,s.hostElement,s.environmentInjector)}},4006:(ln,at,B)=>{"use strict";B.d(at,{Cf:()=>Ie,F:()=>ui,JJ:()=>Zn,JL:()=>pn,JU:()=>we,UX:()=>ts,Zs:()=>ua,_Y:()=>ar,a5:()=>tn,kI:()=>ze,qu:()=>Qt,sg:()=>Yr,u:()=>Zo,u5:()=>Nn});var y=B(4650),m=B(6895),q=B(8996),oe=B(4128),xe=B(4004);let Pe=(()=>{class W{constructor(L,ue){this._renderer=L,this._elementRef=ue,this.onChange=Ft=>{},this.onTouched=()=>{}}setProperty(L,ue){this._renderer.setProperty(this._elementRef.nativeElement,L,ue)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return W.\u0275fac=function(L){return new(L||W)(y.Y36(y.Qsj),y.Y36(y.SBq))},W.\u0275dir=y.lG2({type:W}),W})(),Ce=(()=>{class W extends Pe{}return W.\u0275fac=function(){let H;return function(ue){return(H||(H=y.n5z(W)))(ue||W)}}(),W.\u0275dir=y.lG2({type:W,features:[y.qOj]}),W})();const we=new y.OlP("NgValueAccessor"),me={provide:we,useExisting:(0,y.Gpc)(()=>je),multi:!0},ke=new y.OlP("CompositionEventMode");let je=(()=>{class W extends Pe{constructor(L,ue,Ft){super(L,ue),this._compositionMode=Ft,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function De(){const W=(0,m.q)()?(0,m.q)().getUserAgent():"";return/android (\d+)/.test(W.toLowerCase())}())}writeValue(L){this.setProperty("value",null==L?"":L)}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return W.\u0275fac=function(L){return new(L||W)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(ke,8))},W.\u0275dir=y.lG2({type:W,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,ue){1&L&&y.NdJ("input",function(Bn){return ue._handleInput(Bn.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(Bn){return ue._compositionEnd(Bn.target.value)})},features:[y._Bn([me]),y.qOj]}),W})();const Le=!1;function Xe(W){return null==W||("string"==typeof W||Array.isArray(W))&&0===W.length}function Te(W){return null!=W&&"number"==typeof W.length}const Ie=new y.OlP("NgValidators"),ae=new y.OlP("NgAsyncValidators"),dt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ze{static min(H){return function Ae(W){return H=>{if(Xe(H.value)||Xe(W))return null;const L=parseFloat(H.value);return!isNaN(L)&&L<W?{min:{min:W,actual:H.value}}:null}}(H)}static max(H){return function Y(W){return H=>{if(Xe(H.value)||Xe(W))return null;const L=parseFloat(H.value);return!isNaN(L)&&L>W?{max:{max:W,actual:H.value}}:null}}(H)}static required(H){return ht(H)}static requiredTrue(H){return Ke(H)}static email(H){return function fe(W){return Xe(W.value)||dt.test(W.value)?null:{email:!0}}(H)}static minLength(H){return function Ct(W){return H=>Xe(H.value)||!Te(H.value)?null:H.value.length<W?{minlength:{requiredLength:W,actualLength:H.value.length}}:null}(H)}static maxLength(H){return function Ue(W){return H=>Te(H.value)&&H.value.length>W?{maxlength:{requiredLength:W,actualLength:H.value.length}}:null}(H)}static pattern(H){return function it(W){if(!W)return Et;let H,L;return"string"==typeof W?(L="","^"!==W.charAt(0)&&(L+="^"),L+=W,"$"!==W.charAt(W.length-1)&&(L+="$"),H=new RegExp(L)):(L=W.toString(),H=W),ue=>{if(Xe(ue.value))return null;const Ft=ue.value;return H.test(Ft)?null:{pattern:{requiredPattern:L,actualValue:Ft}}}}(H)}static nullValidator(H){return null}static compose(H){return Ge(H)}static composeAsync(H){return mt(H)}}function ht(W){return Xe(W.value)?{required:!0}:null}function Ke(W){return!0===W.value?null:{required:!0}}function Et(W){return null}function Ve(W){return null!=W}function gt(W){const H=(0,y.QGY)(W)?(0,q.D)(W):W;if(Le&&!(0,y.CqO)(H)){let L="Expected async validator to return Promise or Observable.";throw"object"==typeof W&&(L+=" Are you using a synchronous validator where an async validator is expected?"),new y.vHH(-1101,L)}return H}function wt(W){let H={};return W.forEach(L=>{H=null!=L?{...H,...L}:H}),0===Object.keys(H).length?null:H}function yt(W,H){return H.map(L=>L(W))}function We(W){return W.map(H=>function qe(W){return!W.validate}(H)?H:L=>H.validate(L))}function Ge(W){if(!W)return null;const H=W.filter(Ve);return 0==H.length?null:function(L){return wt(yt(L,H))}}function _t(W){return null!=W?Ge(We(W)):null}function mt(W){if(!W)return null;const H=W.filter(Ve);return 0==H.length?null:function(L){const ue=yt(L,H).map(gt);return(0,oe.D)(ue).pipe((0,xe.U)(wt))}}function St(W){return null!=W?mt(We(W)):null}function jt(W,H){return null===W?[H]:Array.isArray(W)?[...W,H]:[W,H]}function hn(W){return W._rawValidators}function Dt(W){return W._rawAsyncValidators}function ut(W){return W?Array.isArray(W)?W:[W]:[]}function Rt(W,H){return Array.isArray(W)?W.includes(H):W===H}function rn(W,H){const L=ut(H);return ut(W).forEach(Ft=>{Rt(L,Ft)||L.push(Ft)}),L}function Rn(W,H){return ut(H).filter(L=>!Rt(W,L))}class Un{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(H){this._rawValidators=H||[],this._composedValidatorFn=_t(this._rawValidators)}_setAsyncValidators(H){this._rawAsyncValidators=H||[],this._composedAsyncValidatorFn=St(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(H){this._onDestroyCallbacks.push(H)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(H=>H()),this._onDestroyCallbacks=[]}reset(H){this.control&&this.control.reset(H)}hasError(H,L){return!!this.control&&this.control.hasError(H,L)}getError(H,L){return this.control?this.control.getError(H,L):null}}class fn extends Un{get formDirective(){return null}get path(){return null}}class tn extends Un{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class En{constructor(H){this._cd=H}get isTouched(){var H,L;return!(null===(H=this._cd)||void 0===H||null===(L=H.control)||void 0===L||!L.touched)}get isUntouched(){var H,L;return!(null===(H=this._cd)||void 0===H||null===(L=H.control)||void 0===L||!L.untouched)}get isPristine(){var H,L;return!(null===(H=this._cd)||void 0===H||null===(L=H.control)||void 0===L||!L.pristine)}get isDirty(){var H,L;return!(null===(H=this._cd)||void 0===H||null===(L=H.control)||void 0===L||!L.dirty)}get isValid(){var H,L;return!(null===(H=this._cd)||void 0===H||null===(L=H.control)||void 0===L||!L.valid)}get isInvalid(){var H,L;return!(null===(H=this._cd)||void 0===H||null===(L=H.control)||void 0===L||!L.invalid)}get isPending(){var H,L;return!(null===(H=this._cd)||void 0===H||null===(L=H.control)||void 0===L||!L.pending)}get isSubmitted(){var H;return!(null===(H=this._cd)||void 0===H||!H.submitted)}}let Zn=(()=>{class W extends En{constructor(L){super(L)}}return W.\u0275fac=function(L){return new(L||W)(y.Y36(tn,2))},W.\u0275dir=y.lG2({type:W,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,ue){2&L&&y.ekj("ng-untouched",ue.isUntouched)("ng-touched",ue.isTouched)("ng-pristine",ue.isPristine)("ng-dirty",ue.isDirty)("ng-valid",ue.isValid)("ng-invalid",ue.isInvalid)("ng-pending",ue.isPending)},features:[y.qOj]}),W})(),pn=(()=>{class W extends En{constructor(L){super(L)}}return W.\u0275fac=function(L){return new(L||W)(y.Y36(fn,10))},W.\u0275dir=y.lG2({type:W,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,ue){2&L&&y.ekj("ng-untouched",ue.isUntouched)("ng-touched",ue.isTouched)("ng-pristine",ue.isPristine)("ng-dirty",ue.isDirty)("ng-valid",ue.isValid)("ng-invalid",ue.isInvalid)("ng-pending",ue.isPending)("ng-submitted",ue.isSubmitted)},features:[y.qOj]}),W})();function kr(W,H){return W?`with name: '${H}'`:`at index: ${H}`}const sr=!1,Di="VALID",tr="INVALID",ni="PENDING",Gr="DISABLED";function ri(W){return(Jr(W)?W.validators:W)||null}function _i(W,H){return(Jr(H)?H.asyncValidators:W)||null}function Jr(W){return null!=W&&!Array.isArray(W)&&"object"==typeof W}function Qe(W,H,L){const ue=W.controls;if(!(H?Object.keys(ue):ue).length)throw new y.vHH(1e3,sr?function ai(W){return`\n    There are no form controls registered with this ${W?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(H):"");if(!ue[L])throw new y.vHH(1001,sr?function _r(W,H){return`Cannot find form control ${kr(W,H)}`}(H,L):"")}function Be(W,H,L){W._forEachChild((ue,Ft)=>{if(void 0===L[Ft])throw new y.vHH(1002,sr?function yi(W,H){return`Must supply a value for form control ${kr(W,H)}`}(H,Ft):"")})}class he{constructor(H,L){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(H),this._assignAsyncValidators(L)}get validator(){return this._composedValidatorFn}set validator(H){this._rawValidators=this._composedValidatorFn=H}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(H){this._rawAsyncValidators=this._composedAsyncValidatorFn=H}get parent(){return this._parent}get valid(){return this.status===Di}get invalid(){return this.status===tr}get pending(){return this.status==ni}get disabled(){return this.status===Gr}get enabled(){return this.status!==Gr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(H){this._assignValidators(H)}setAsyncValidators(H){this._assignAsyncValidators(H)}addValidators(H){this.setValidators(rn(H,this._rawValidators))}addAsyncValidators(H){this.setAsyncValidators(rn(H,this._rawAsyncValidators))}removeValidators(H){this.setValidators(Rn(H,this._rawValidators))}removeAsyncValidators(H){this.setAsyncValidators(Rn(H,this._rawAsyncValidators))}hasValidator(H){return Rt(this._rawValidators,H)}hasAsyncValidator(H){return Rt(this._rawAsyncValidators,H)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(H={}){this.touched=!0,this._parent&&!H.onlySelf&&this._parent.markAsTouched(H)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(H=>H.markAllAsTouched())}markAsUntouched(H={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}markAsDirty(H={}){this.pristine=!1,this._parent&&!H.onlySelf&&this._parent.markAsDirty(H)}markAsPristine(H={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}markAsPending(H={}){this.status=ni,!1!==H.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!H.onlySelf&&this._parent.markAsPending(H)}disable(H={}){const L=this._parentMarkedDirty(H.onlySelf);this.status=Gr,this.errors=null,this._forEachChild(ue=>{ue.disable({...H,onlySelf:!0})}),this._updateValue(),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...H,skipPristineCheck:L}),this._onDisabledChange.forEach(ue=>ue(!0))}enable(H={}){const L=this._parentMarkedDirty(H.onlySelf);this.status=Di,this._forEachChild(ue=>{ue.enable({...H,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent}),this._updateAncestors({...H,skipPristineCheck:L}),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(H){this._parent&&!H.onlySelf&&(this._parent.updateValueAndValidity(H),H.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(H){this._parent=H}getRawValue(){return this.value}updateValueAndValidity(H={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Di||this.status===ni)&&this._runAsyncValidator(H.emitEvent)),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!H.onlySelf&&this._parent.updateValueAndValidity(H)}_updateTreeValidity(H={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(H)),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gr:Di}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(H){if(this.asyncValidator){this.status=ni,this._hasOwnPendingAsyncValidator=!0;const L=gt(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:H})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(H,L={}){this.errors=H,this._updateControlsErrors(!1!==L.emitEvent)}get(H){let L=H;return null==L||(Array.isArray(L)||(L=L.split(".")),0===L.length)?null:L.reduce((ue,Ft)=>ue&&ue._find(Ft),this)}getError(H,L){const ue=L?this.get(L):this;return ue&&ue.errors?ue.errors[H]:null}hasError(H,L){return!!this.getError(H,L)}get root(){let H=this;for(;H._parent;)H=H._parent;return H}_updateControlsErrors(H){this.status=this._calculateStatus(),H&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(H)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?Gr:this.errors?tr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ni)?ni:this._anyControlsHaveStatus(tr)?tr:Di}_anyControlsHaveStatus(H){return this._anyControls(L=>L.status===H)}_anyControlsDirty(){return this._anyControls(H=>H.dirty)}_anyControlsTouched(){return this._anyControls(H=>H.touched)}_updatePristine(H={}){this.pristine=!this._anyControlsDirty(),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}_updateTouched(H={}){this.touched=this._anyControlsTouched(),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}_registerOnCollectionChange(H){this._onCollectionChange=H}_setUpdateStrategy(H){Jr(H)&&null!=H.updateOn&&(this._updateOn=H.updateOn)}_parentMarkedDirty(H){return!H&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(H){return null}_assignValidators(H){this._rawValidators=Array.isArray(H)?H.slice():H,this._composedValidatorFn=function Sr(W){return Array.isArray(W)?_t(W):W||null}(this._rawValidators)}_assignAsyncValidators(H){this._rawAsyncValidators=Array.isArray(H)?H.slice():H,this._composedAsyncValidatorFn=function Ur(W){return Array.isArray(W)?St(W):W||null}(this._rawAsyncValidators)}}class ye extends he{constructor(H,L,ue){super(ri(L),_i(ue,L)),this.controls=H,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(H,L){return this.controls[H]?this.controls[H]:(this.controls[H]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(H,L,ue={}){this.registerControl(H,L),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(H,L={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(H,L,ue={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],L&&this.registerControl(H,L),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(H){return this.controls.hasOwnProperty(H)&&this.controls[H].enabled}setValue(H,L={}){Be(this,!0,H),Object.keys(H).forEach(ue=>{Qe(this,!0,ue),this.controls[ue].setValue(H[ue],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(H,L={}){null!=H&&(Object.keys(H).forEach(ue=>{const Ft=this.controls[ue];Ft&&Ft.patchValue(H[ue],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(H={},L={}){this._forEachChild((ue,Ft)=>{ue.reset(H[Ft],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(H,L,ue)=>(H[ue]=L.getRawValue(),H))}_syncPendingControls(){let H=this._reduceChildren(!1,(L,ue)=>!!ue._syncPendingControls()||L);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_forEachChild(H){Object.keys(this.controls).forEach(L=>{const ue=this.controls[L];ue&&H(ue,L)})}_setUpControls(){this._forEachChild(H=>{H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(H){for(const[L,ue]of Object.entries(this.controls))if(this.contains(L)&&H(ue))return!0;return!1}_reduceValue(){return this._reduceChildren({},(L,ue,Ft)=>((ue.enabled||this.disabled)&&(L[Ft]=ue.value),L))}_reduceChildren(H,L){let ue=H;return this._forEachChild((Ft,Bn)=>{ue=L(ue,Ft,Bn)}),ue}_allControlsDisabled(){for(const H of Object.keys(this.controls))if(this.controls[H].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(H){return this.controls.hasOwnProperty(H)?this.controls[H]:null}}class Re extends ye{}const Ee=new y.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>et}),et="always";function Yt(W,H,L=et){var ue,Ft;Wr(W,H),H.valueAccessor.writeValue(W.value),(W.disabled||"always"===L)&&(null===(ue=(Ft=H.valueAccessor).setDisabledState)||void 0===ue||ue.call(Ft,W.disabled)),function At(W,H){H.valueAccessor.registerOnChange(L=>{W._pendingValue=L,W._pendingChange=!0,W._pendingDirty=!0,"change"===W.updateOn&&On(W,H)})}(W,H),function Jn(W,H){const L=(ue,Ft)=>{H.valueAccessor.writeValue(ue),Ft&&H.viewToModelUpdate(ue)};W.registerOnChange(L),H._registerOnDestroy(()=>{W._unregisterOnChange(L)})}(W,H),function nn(W,H){H.valueAccessor.registerOnTouched(()=>{W._pendingTouched=!0,"blur"===W.updateOn&&W._pendingChange&&On(W,H),"submit"!==W.updateOn&&W.markAsTouched()})}(W,H),function nr(W,H){if(H.valueAccessor.setDisabledState){const L=ue=>{H.valueAccessor.setDisabledState(ue)};W.registerOnDisabledChange(L),H._registerOnDestroy(()=>{W._unregisterOnDisabledChange(L)})}}(W,H)}function gn(W,H,L=!0){const ue=()=>{};H.valueAccessor&&(H.valueAccessor.registerOnChange(ue),H.valueAccessor.registerOnTouched(ue)),kt(W,H),W&&(H._invokeOnDestroyCallbacks(),W._registerOnCollectionChange(()=>{}))}function mn(W,H){W.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(H)})}function Wr(W,H){const L=hn(W);null!==H.validator?W.setValidators(jt(L,H.validator)):"function"==typeof L&&W.setValidators([L]);const ue=Dt(W);null!==H.asyncValidator?W.setAsyncValidators(jt(ue,H.asyncValidator)):"function"==typeof ue&&W.setAsyncValidators([ue]);const Ft=()=>W.updateValueAndValidity();mn(H._rawValidators,Ft),mn(H._rawAsyncValidators,Ft)}function kt(W,H){let L=!1;if(null!==W){if(null!==H.validator){const Ft=hn(W);if(Array.isArray(Ft)&&Ft.length>0){const Bn=Ft.filter(Oi=>Oi!==H.validator);Bn.length!==Ft.length&&(L=!0,W.setValidators(Bn))}}if(null!==H.asyncValidator){const Ft=Dt(W);if(Array.isArray(Ft)&&Ft.length>0){const Bn=Ft.filter(Oi=>Oi!==H.asyncValidator);Bn.length!==Ft.length&&(L=!0,W.setAsyncValidators(Bn))}}}const ue=()=>{};return mn(H._rawValidators,ue),mn(H._rawAsyncValidators,ue),L}function On(W,H){W._pendingDirty&&W.markAsDirty(),W.setValue(W._pendingValue,{emitModelToViewChange:!1}),H.viewToModelUpdate(W._pendingValue),W._pendingChange=!1}function vr(W,H){Wr(W,H)}function li(W,H){W._syncPendingControls(),H.forEach(L=>{const ue=L.control;"submit"===ue.updateOn&&ue._pendingChange&&(L.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}const Rr={provide:fn,useExisting:(0,y.Gpc)(()=>ui)},vi=(()=>Promise.resolve())();let ui=(()=>{class W extends fn{constructor(L,ue,Ft){super(),this.callSetDisabledState=Ft,this.submitted=!1,this._directives=new Set,this.ngSubmit=new y.vpe,this.form=new ye({},_t(L),St(ue))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(L){vi.then(()=>{const ue=this._findContainer(L.path);L.control=ue.registerControl(L.name,L.control),Yt(L.control,L,this.callSetDisabledState),L.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(L)})}getControl(L){return this.form.get(L.path)}removeControl(L){vi.then(()=>{const ue=this._findContainer(L.path);ue&&ue.removeControl(L.name),this._directives.delete(L)})}addFormGroup(L){vi.then(()=>{const ue=this._findContainer(L.path),Ft=new ye({});vr(Ft,L),ue.registerControl(L.name,Ft),Ft.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(L){vi.then(()=>{const ue=this._findContainer(L.path);ue&&ue.removeControl(L.name)})}getFormGroup(L){return this.form.get(L.path)}updateModel(L,ue){vi.then(()=>{this.form.get(L.path).setValue(ue)})}setValue(L){this.control.setValue(L)}onSubmit(L){var ue;return this.submitted=!0,li(this.form,this._directives),this.ngSubmit.emit(L),"dialog"===(null==L||null===(ue=L.target)||void 0===ue?void 0:ue.method)}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(L){return L.pop(),L.length?this.form.get(L):this.form}}return W.\u0275fac=function(L){return new(L||W)(y.Y36(Ie,10),y.Y36(ae,10),y.Y36(Ee,8))},W.\u0275dir=y.lG2({type:W,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(L,ue){1&L&&y.NdJ("submit",function(Bn){return ue.onSubmit(Bn)})("reset",function(){return ue.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Rr]),y.qOj]}),W})();function $i(W,H){const L=W.indexOf(H);L>-1&&W.splice(L,1)}function ei(W){return"object"==typeof W&&null!==W&&2===Object.keys(W).length&&"value"in W&&"disabled"in W}const ce=class extends he{constructor(H=null,L,ue){super(ri(L),_i(ue,L)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(H),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jr(L)&&(L.nonNullable||L.initialValueIsDefault)&&(this.defaultValue=ei(H)?H.value:H)}setValue(H,L={}){this.value=this._pendingValue=H,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(H,L={}){this.setValue(H,L)}reset(H=this.defaultValue,L={}){this._applyFormState(H),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(H){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(H){this._onChange.push(H)}_unregisterOnChange(H){$i(this._onChange,H)}registerOnDisabledChange(H){this._onDisabledChange.push(H)}_unregisterOnDisabledChange(H){$i(this._onDisabledChange,H)}_forEachChild(H){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(H){ei(H)?(this.value=this._pendingValue=H.value,H.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=H}};let ar=(()=>{class W{}return W.\u0275fac=function(L){return new(L||W)},W.\u0275dir=y.lG2({type:W,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),W})(),It=(()=>{class W{}return W.\u0275fac=function(L){return new(L||W)},W.\u0275mod=y.oAB({type:W}),W.\u0275inj=y.cJS({}),W})();const mr=new y.OlP("NgModelWithFormControlWarning"),Ws={provide:fn,useExisting:(0,y.Gpc)(()=>Yr)};let Yr=(()=>{class W extends fn{constructor(L,ue,Ft){super(),this.callSetDisabledState=Ft,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(L),this._setAsyncValidators(ue)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const ue=this.form.get(L.path);return Yt(ue,L,this.callSetDisabledState),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),ue}getControl(L){return this.form.get(L.path)}removeControl(L){gn(L.control||null,L,!1),function gr(W,H){const L=W.indexOf(H);L>-1&&W.splice(L,1)}(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,ue){this.form.get(L.path).setValue(ue)}onSubmit(L){var ue;return this.submitted=!0,li(this.form,this.directives),this.ngSubmit.emit(L),"dialog"===(null==L||null===(ue=L.target)||void 0===ue?void 0:ue.method)}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const ue=L.control,Ft=this.form.get(L.path);ue!==Ft&&(gn(ue||null,L),(W=>W instanceof ce)(Ft)&&(Yt(Ft,L,this.callSetDisabledState),L.control=Ft))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const ue=this.form.get(L.path);vr(ue,L),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const ue=this.form.get(L.path);ue&&function Tn(W,H){return kt(W,H)}(ue,L)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Wr(this.form,this),this._oldForm&&kt(this._oldForm,this)}_checkFormPresent(){}}return W.\u0275fac=function(L){return new(L||W)(y.Y36(Ie,10),y.Y36(ae,10),y.Y36(Ee,8))},W.\u0275dir=y.lG2({type:W,selectors:[["","formGroup",""]],hostBindings:function(L,ue){1&L&&y.NdJ("submit",function(Bn){return ue.onSubmit(Bn)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Ws]),y.qOj,y.TTD]}),W})();const fo={provide:tn,useExisting:(0,y.Gpc)(()=>Zo)};let Zo=(()=>{class W extends tn{set isDisabled(L){}constructor(L,ue,Ft,Bn,Oi){super(),this._ngModelWarningConfig=Oi,this._added=!1,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(ue),this._setAsyncValidators(Ft),this.valueAccessor=function _n(W,H){if(!H)return null;let L,ue,Ft;return Array.isArray(H),H.forEach(Bn=>{Bn.constructor===je?L=Bn:function as(W){return Object.getPrototypeOf(W.constructor)===Ce}(Bn)?ue=Bn:Ft=Bn}),Ft||ue||L||null}(0,Bn)}ngOnChanges(L){this._added||this._setUpControl(),function ns(W,H){if(!W.hasOwnProperty("model"))return!1;const L=W.model;return!!L.isFirstChange()||!Object.is(H,L.currentValue)}(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return function xt(W,H){return[...H.path,W]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return W._ngModelWarningSentOnce=!1,W.\u0275fac=function(L){return new(L||W)(y.Y36(fn,13),y.Y36(Ie,10),y.Y36(ae,10),y.Y36(we,10),y.Y36(mr,8))},W.\u0275dir=y.lG2({type:W,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([fo]),y.qOj,y.TTD]}),W})(),js=(()=>{class W{constructor(){this._validator=Et}ngOnChanges(L){if(this.inputName in L){const ue=this.normalizeInput(L[this.inputName].currentValue);this._enabled=this.enabled(ue),this._validator=this._enabled?this.createValidator(ue):Et,this._onChange&&this._onChange()}}validate(L){return this._validator(L)}registerOnValidatorChange(L){this._onChange=L}enabled(L){return null!=L}}return W.\u0275fac=function(L){return new(L||W)},W.\u0275dir=y.lG2({type:W,features:[y.TTD]}),W})();const hu={provide:Ie,useExisting:(0,y.Gpc)(()=>Ua),multi:!0},Bo={provide:Ie,useExisting:(0,y.Gpc)(()=>ua),multi:!0};let Ua=(()=>{class W extends js{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=y.D6c,this.createValidator=L=>ht}enabled(L){return L}}return W.\u0275fac=function(){let H;return function(ue){return(H||(H=y.n5z(W)))(ue||W)}}(),W.\u0275dir=y.lG2({type:W,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(L,ue){2&L&&y.uIk("required",ue._enabled?"":null)},inputs:{required:"required"},features:[y._Bn([hu]),y.qOj]}),W})(),ua=(()=>{class W extends Ua{constructor(){super(...arguments),this.createValidator=L=>Ke}}return W.\u0275fac=function(){let H;return function(ue){return(H||(H=y.n5z(W)))(ue||W)}}(),W.\u0275dir=y.lG2({type:W,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(L,ue){2&L&&y.uIk("required",ue._enabled?"":null)},features:[y._Bn([Bo]),y.qOj]}),W})(),C=(()=>{class W{}return W.\u0275fac=function(L){return new(L||W)},W.\u0275mod=y.oAB({type:W}),W.\u0275inj=y.cJS({imports:[It]}),W})();class Q extends he{constructor(H,L,ue){super(ri(L),_i(ue,L)),this.controls=H,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(H){return this.controls[this._adjustIndex(H)]}push(H,L={}){this.controls.push(H),this._registerControl(H),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(H,L,ue={}){this.controls.splice(H,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(H,L={}){let ue=this._adjustIndex(H);ue<0&&(ue=0),this.controls[ue]&&this.controls[ue]._registerOnCollectionChange(()=>{}),this.controls.splice(ue,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(H,L,ue={}){let Ft=this._adjustIndex(H);Ft<0&&(Ft=0),this.controls[Ft]&&this.controls[Ft]._registerOnCollectionChange(()=>{}),this.controls.splice(Ft,1),L&&(this.controls.splice(Ft,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(H,L={}){Be(this,!1,H),H.forEach((ue,Ft)=>{Qe(this,!1,Ft),this.at(Ft).setValue(ue,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(H,L={}){null!=H&&(H.forEach((ue,Ft)=>{this.at(Ft)&&this.at(Ft).patchValue(ue,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(H=[],L={}){this._forEachChild((ue,Ft)=>{ue.reset(H[Ft],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(H=>H.getRawValue())}clear(H={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:H.emitEvent}))}_adjustIndex(H){return H<0?H+this.length:H}_syncPendingControls(){let H=this.controls.reduce((L,ue)=>!!ue._syncPendingControls()||L,!1);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_forEachChild(H){this.controls.forEach((L,ue)=>{H(L,ue)})}_updateValue(){this.value=this.controls.filter(H=>H.enabled||this.disabled).map(H=>H.value)}_anyControls(H){return this.controls.some(L=>L.enabled&&H(L))}_setUpControls(){this._forEachChild(H=>this._registerControl(H))}_allControlsDisabled(){for(const H of this.controls)if(H.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(H){H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)}_find(H){var L;return null!==(L=this.at(H))&&void 0!==L?L:null}}function _e(W){return!!W&&(void 0!==W.asyncValidators||void 0!==W.validators||void 0!==W.updateOn)}let Qt=(()=>{class W{constructor(){this.useNonNullable=!1}get nonNullable(){const L=new W;return L.useNonNullable=!0,L}group(L,ue=null){const Ft=this._reduceControls(L);let Bn={};return _e(ue)?Bn=ue:null!==ue&&(Bn.validators=ue.validator,Bn.asyncValidators=ue.asyncValidator),new ye(Ft,Bn)}record(L,ue=null){const Ft=this._reduceControls(L);return new Re(Ft,ue)}control(L,ue,Ft){let Bn={};return this.useNonNullable?(_e(ue)?Bn=ue:(Bn.validators=ue,Bn.asyncValidators=Ft),new ce(L,{...Bn,nonNullable:!0})):new ce(L,ue,Ft)}array(L,ue,Ft){const Bn=L.map(Oi=>this._createControl(Oi));return new Q(Bn,ue,Ft)}_reduceControls(L){const ue={};return Object.keys(L).forEach(Ft=>{ue[Ft]=this._createControl(L[Ft])}),ue}_createControl(L){return L instanceof ce||L instanceof he?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}}return W.\u0275fac=function(L){return new(L||W)},W.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})(),Nn=(()=>{class W{static withConfig(L){var ue;return{ngModule:W,providers:[{provide:Ee,useValue:null!==(ue=L.callSetDisabledState)&&void 0!==ue?ue:et}]}}}return W.\u0275fac=function(L){return new(L||W)},W.\u0275mod=y.oAB({type:W}),W.\u0275inj=y.cJS({imports:[C]}),W})(),ts=(()=>{class W{static withConfig(L){var ue,Ft;return{ngModule:W,providers:[{provide:mr,useValue:null!==(ue=L.warnOnNgModelWithFormControl)&&void 0!==ue?ue:"always"},{provide:Ee,useValue:null!==(Ft=L.callSetDisabledState)&&void 0!==Ft?Ft:et}]}}}return W.\u0275fac=function(L){return new(L||W)},W.\u0275mod=y.oAB({type:W}),W.\u0275inj=y.cJS({imports:[C]}),W})()},1481:(ln,at,B)=>{"use strict";B.d(at,{Cg:()=>Rt,Dx:()=>Xn,H7:()=>he,b2:()=>Mi,se:()=>Ve});var y=B(6895),m=B(4650);class q extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oe extends q{static makeCurrent(){(0,y.HT)(new oe)}onAndCancel(Fe,Ee,et){return Fe.addEventListener(Ee,et,!1),()=>{Fe.removeEventListener(Ee,et,!1)}}dispatchEvent(Fe,Ee){Fe.dispatchEvent(Ee)}remove(Fe){Fe.parentNode&&Fe.parentNode.removeChild(Fe)}createElement(Fe,Ee){return(Ee=Ee||this.getDefaultDocument()).createElement(Fe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Fe){return Fe.nodeType===Node.ELEMENT_NODE}isShadowRoot(Fe){return Fe instanceof DocumentFragment}getGlobalEventTarget(Fe,Ee){return"window"===Ee?window:"document"===Ee?Fe:"body"===Ee?Fe.body:null}getBaseHref(Fe){const Ee=function Pe(){return xe=xe||document.querySelector("base"),xe?xe.getAttribute("href"):null}();return null==Ee?null:function we(Re){Ce=Ce||document.createElement("a"),Ce.setAttribute("href",Re);const Fe=Ce.pathname;return"/"===Fe.charAt(0)?Fe:`/${Fe}`}(Ee)}resetBaseElement(){xe=null}getUserAgent(){return window.navigator.userAgent}getCookie(Fe){return(0,y.Mx)(document.cookie,Fe)}}let Ce,xe=null;const He=new m.OlP("TRANSITION_ID"),me=[{provide:m.ip1,useFactory:function Se(Re,Fe,Ee){return()=>{Ee.get(m.CZH).donePromise.then(()=>{const et=(0,y.q)(),xt=Fe.querySelectorAll(`style[ng-transition="${Re}"]`);for(let Yt=0;Yt<xt.length;Yt++)et.remove(xt[Yt])})}},deps:[He,y.K0,m.zs3],multi:!0}];let ke=(()=>{class Re{build(){return new XMLHttpRequest}}return Re.\u0275fac=function(Ee){return new(Ee||Re)},Re.\u0275prov=m.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const je=new m.OlP("EventManagerPlugins");let Le=(()=>{class Re{constructor(Ee,et){this._zone=et,this._eventNameToPlugin=new Map,Ee.forEach(xt=>{xt.manager=this}),this._plugins=Ee.slice().reverse()}addEventListener(Ee,et,xt){return this._findPluginFor(et).addEventListener(Ee,et,xt)}addGlobalEventListener(Ee,et,xt){return this._findPluginFor(et).addGlobalEventListener(Ee,et,xt)}getZone(){return this._zone}_findPluginFor(Ee){const et=this._eventNameToPlugin.get(Ee);if(et)return et;const xt=this._plugins;for(let Yt=0;Yt<xt.length;Yt++){const gn=xt[Yt];if(gn.supports(Ee))return this._eventNameToPlugin.set(Ee,gn),gn}throw new Error(`No event manager plugin found for event ${Ee}`)}}return Re.\u0275fac=function(Ee){return new(Ee||Re)(m.LFG(je),m.LFG(m.R0b))},Re.\u0275prov=m.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class Xe{constructor(Fe){this._doc=Fe}addGlobalEventListener(Fe,Ee,et){const xt=(0,y.q)().getGlobalEventTarget(this._doc,Fe);if(!xt)throw new Error(`Unsupported event target ${xt} for event ${Ee}`);return this.addEventListener(xt,Ee,et)}}let Te=(()=>{class Re{constructor(){this.usageCount=new Map}addStyles(Ee){for(const et of Ee)1===this.changeUsageCount(et,1)&&this.onStyleAdded(et)}removeStyles(Ee){for(const et of Ee)0===this.changeUsageCount(et,-1)&&this.onStyleRemoved(et)}onStyleRemoved(Ee){}onStyleAdded(Ee){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(Ee,et){var xt;const Yt=this.usageCount;let gn=null!==(xt=Yt.get(Ee))&&void 0!==xt?xt:0;return gn+=et,gn>0?Yt.set(Ee,gn):Yt.delete(Ee),gn}ngOnDestroy(){for(const Ee of this.getAllStyles())this.onStyleRemoved(Ee);this.usageCount.clear()}}return Re.\u0275fac=function(Ee){return new(Ee||Re)},Re.\u0275prov=m.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),Ie=(()=>{class Re extends Te{constructor(Ee){super(),this.doc=Ee,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(Ee){for(const et of this.hostNodes)this.addStyleToHost(et,Ee)}onStyleRemoved(Ee){const et=this.styleRef,xt=et.get(Ee);null==xt||xt.forEach(Yt=>Yt.remove()),et.delete(Ee)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(Ee){this.hostNodes.add(Ee);for(const et of this.getAllStyles())this.addStyleToHost(Ee,et)}removeHost(Ee){this.hostNodes.delete(Ee)}addStyleToHost(Ee,et){const xt=this.doc.createElement("style");xt.textContent=et,Ee.appendChild(xt);const Yt=this.styleRef.get(et);Yt?Yt.push(xt):this.styleRef.set(et,[xt])}resetHostNodes(){const Ee=this.hostNodes;Ee.clear(),Ee.add(this.doc.head)}}return Re.\u0275fac=function(Ee){return new(Ee||Re)(m.LFG(y.K0))},Re.\u0275prov=m.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const ae={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},dt=/%COMP%/g,fe=new m.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function it(Re,Fe){return Fe.flat(100).map(Ee=>Ee.replace(dt,Re))}function Et(Re){return Fe=>{if("__ngUnwrap__"===Fe)return Re;!1===Re(Fe)&&(Fe.preventDefault(),Fe.returnValue=!1)}}let Ve=(()=>{class Re{constructor(Ee,et,xt,Yt){this.eventManager=Ee,this.sharedStylesHost=et,this.appId=xt,this.removeStylesOnCompDestory=Yt,this.rendererByCompId=new Map,this.defaultRenderer=new gt(Ee)}createRenderer(Ee,et){if(!Ee||!et)return this.defaultRenderer;const xt=this.getOrCreateRenderer(Ee,et);return xt instanceof _t?xt.applyToHost(Ee):xt instanceof Ge&&xt.applyStyles(),xt}getOrCreateRenderer(Ee,et){const xt=this.rendererByCompId;let Yt=xt.get(et.id);if(!Yt){const gn=this.eventManager,mn=this.sharedStylesHost,nr=this.removeStylesOnCompDestory;switch(et.encapsulation){case m.ifc.Emulated:Yt=new _t(gn,mn,et,this.appId,nr);break;case m.ifc.ShadowDom:return new We(gn,mn,Ee,et);default:Yt=new Ge(gn,mn,et,nr)}Yt.onDestroy=()=>xt.delete(et.id),xt.set(et.id,Yt)}return Yt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Re.\u0275fac=function(Ee){return new(Ee||Re)(m.LFG(Le),m.LFG(Ie),m.LFG(m.AFp),m.LFG(fe))},Re.\u0275prov=m.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class gt{constructor(Fe){this.eventManager=Fe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Fe,Ee){return Ee?document.createElementNS(ae[Ee]||Ee,Fe):document.createElement(Fe)}createComment(Fe){return document.createComment(Fe)}createText(Fe){return document.createTextNode(Fe)}appendChild(Fe,Ee){(qe(Fe)?Fe.content:Fe).appendChild(Ee)}insertBefore(Fe,Ee,et){Fe&&(qe(Fe)?Fe.content:Fe).insertBefore(Ee,et)}removeChild(Fe,Ee){Fe&&Fe.removeChild(Ee)}selectRootElement(Fe,Ee){let et="string"==typeof Fe?document.querySelector(Fe):Fe;if(!et)throw new Error(`The selector "${Fe}" did not match any elements`);return Ee||(et.textContent=""),et}parentNode(Fe){return Fe.parentNode}nextSibling(Fe){return Fe.nextSibling}setAttribute(Fe,Ee,et,xt){if(xt){Ee=xt+":"+Ee;const Yt=ae[xt];Yt?Fe.setAttributeNS(Yt,Ee,et):Fe.setAttribute(Ee,et)}else Fe.setAttribute(Ee,et)}removeAttribute(Fe,Ee,et){if(et){const xt=ae[et];xt?Fe.removeAttributeNS(xt,Ee):Fe.removeAttribute(`${et}:${Ee}`)}else Fe.removeAttribute(Ee)}addClass(Fe,Ee){Fe.classList.add(Ee)}removeClass(Fe,Ee){Fe.classList.remove(Ee)}setStyle(Fe,Ee,et,xt){xt&(m.JOm.DashCase|m.JOm.Important)?Fe.style.setProperty(Ee,et,xt&m.JOm.Important?"important":""):Fe.style[Ee]=et}removeStyle(Fe,Ee,et){et&m.JOm.DashCase?Fe.style.removeProperty(Ee):Fe.style[Ee]=""}setProperty(Fe,Ee,et){Fe[Ee]=et}setValue(Fe,Ee){Fe.nodeValue=Ee}listen(Fe,Ee,et){return"string"==typeof Fe?this.eventManager.addGlobalEventListener(Fe,Ee,Et(et)):this.eventManager.addEventListener(Fe,Ee,Et(et))}}function qe(Re){return"TEMPLATE"===Re.tagName&&void 0!==Re.content}class We extends gt{constructor(Fe,Ee,et,xt){super(Fe),this.sharedStylesHost=Ee,this.hostEl=et,this.shadowRoot=et.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Yt=it(xt.id,xt.styles);for(const gn of Yt){const mn=document.createElement("style");mn.textContent=gn,this.shadowRoot.appendChild(mn)}}nodeOrShadowRoot(Fe){return Fe===this.hostEl?this.shadowRoot:Fe}appendChild(Fe,Ee){return super.appendChild(this.nodeOrShadowRoot(Fe),Ee)}insertBefore(Fe,Ee,et){return super.insertBefore(this.nodeOrShadowRoot(Fe),Ee,et)}removeChild(Fe,Ee){return super.removeChild(this.nodeOrShadowRoot(Fe),Ee)}parentNode(Fe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Fe)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ge extends gt{constructor(Fe,Ee,et,xt,Yt=et.id){super(Fe),this.sharedStylesHost=Ee,this.removeStylesOnCompDestory=xt,this.rendererUsageCount=0,this.styles=it(Yt,et.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var Fe;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(Fe=this.onDestroy)||void 0===Fe||Fe.call(this))}}class _t extends Ge{constructor(Fe,Ee,et,xt,Yt){const gn=xt+"-"+et.id;super(Fe,Ee,et,Yt,gn),this.contentAttr=function Ct(Re){return"_ngcontent-%COMP%".replace(dt,Re)}(gn),this.hostAttr=function Ue(Re){return"_nghost-%COMP%".replace(dt,Re)}(gn)}applyToHost(Fe){this.applyStyles(),this.setAttribute(Fe,this.hostAttr,"")}createElement(Fe,Ee){const et=super.createElement(Fe,Ee);return super.setAttribute(et,this.contentAttr,""),et}}let mt=(()=>{class Re extends Xe{constructor(Ee){super(Ee)}supports(Ee){return!0}addEventListener(Ee,et,xt){return Ee.addEventListener(et,xt,!1),()=>this.removeEventListener(Ee,et,xt)}removeEventListener(Ee,et,xt){return Ee.removeEventListener(et,xt)}}return Re.\u0275fac=function(Ee){return new(Ee||Re)(m.LFG(y.K0))},Re.\u0275prov=m.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const St=["alt","control","meta","shift"],jt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hn={alt:Re=>Re.altKey,control:Re=>Re.ctrlKey,meta:Re=>Re.metaKey,shift:Re=>Re.shiftKey};let Dt=(()=>{class Re extends Xe{constructor(Ee){super(Ee)}supports(Ee){return null!=Re.parseEventName(Ee)}addEventListener(Ee,et,xt){const Yt=Re.parseEventName(et),gn=Re.eventCallback(Yt.fullKey,xt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(Ee,Yt.domEventName,gn))}static parseEventName(Ee){const et=Ee.toLowerCase().split("."),xt=et.shift();if(0===et.length||"keydown"!==xt&&"keyup"!==xt)return null;const Yt=Re._normalizeKey(et.pop());let gn="",mn=et.indexOf("code");if(mn>-1&&(et.splice(mn,1),gn="code."),St.forEach(Wr=>{const kt=et.indexOf(Wr);kt>-1&&(et.splice(kt,1),gn+=Wr+".")}),gn+=Yt,0!=et.length||0===Yt.length)return null;const nr={};return nr.domEventName=xt,nr.fullKey=gn,nr}static matchEventFullKeyCode(Ee,et){let xt=jt[Ee.key]||Ee.key,Yt="";return et.indexOf("code.")>-1&&(xt=Ee.code,Yt="code."),!(null==xt||!xt)&&(xt=xt.toLowerCase()," "===xt?xt="space":"."===xt&&(xt="dot"),St.forEach(gn=>{gn!==xt&&(0,hn[gn])(Ee)&&(Yt+=gn+".")}),Yt+=xt,Yt===et)}static eventCallback(Ee,et,xt){return Yt=>{Re.matchEventFullKeyCode(Yt,Ee)&&xt.runGuarded(()=>et(Yt))}}static _normalizeKey(Ee){return"esc"===Ee?"escape":Ee}}return Re.\u0275fac=function(Ee){return new(Ee||Re)(m.LFG(y.K0))},Re.\u0275prov=m.Yz7({token:Re,factory:Re.\u0275fac}),Re})();function Rt(Re,Fe){return(0,m.iPO)({rootComponent:Re,...Rn(Fe)})}function Rn(Re){var Fe;return{appProviders:[...dr,...null!==(Fe=null==Re?void 0:Re.providers)&&void 0!==Fe?Fe:[]],platformProviders:Ht}}const Ht=[{provide:m.Lbi,useValue:y.bD},{provide:m.g9A,useValue:function fn(){oe.makeCurrent()},multi:!0},{provide:y.K0,useFactory:function En(){return(0,m.RDi)(document),document},deps:[]}],Zn=new m.OlP(""),pn=[{provide:m.rWj,useClass:class De{addToWindow(Fe){m.dqk.getAngularTestability=(et,xt=!0)=>{const Yt=Fe.findTestabilityInTree(et,xt);if(null==Yt)throw new Error("Could not find testability for element.");return Yt},m.dqk.getAllAngularTestabilities=()=>Fe.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>Fe.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(et=>{const xt=m.dqk.getAllAngularTestabilities();let Yt=xt.length,gn=!1;const mn=function(nr){gn=gn||nr,Yt--,0==Yt&&et(gn)};xt.forEach(function(nr){nr.whenStable(mn)})})}findTestabilityInTree(Fe,Ee,et){if(null==Ee)return null;const xt=Fe.getTestability(Ee);return null!=xt?xt:et?(0,y.q)().isShadowRoot(Ee)?this.findTestabilityInTree(Fe,Ee.host,!0):this.findTestabilityInTree(Fe,Ee.parentElement,!0):null}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],dr=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function tn(){return new m.qLn},deps:[]},{provide:je,useClass:mt,multi:!0,deps:[y.K0,m.R0b,m.Lbi]},{provide:je,useClass:Dt,multi:!0,deps:[y.K0]},{provide:Ve,useClass:Ve,deps:[Le,Ie,m.AFp,fe]},{provide:m.FYo,useExisting:Ve},{provide:Te,useExisting:Ie},{provide:Ie,useClass:Ie,deps:[y.K0]},{provide:Le,useClass:Le,deps:[je,m.R0b]},{provide:y.JF,useClass:ke,deps:[]},[]];let Mi=(()=>{class Re{constructor(Ee){}static withServerTransition(Ee){return{ngModule:Re,providers:[{provide:m.AFp,useValue:Ee.appId},{provide:He,useExisting:m.AFp},me]}}}return Re.\u0275fac=function(Ee){return new(Ee||Re)(m.LFG(Zn,12))},Re.\u0275mod=m.oAB({type:Re}),Re.\u0275inj=m.cJS({providers:[...dr,...pn],imports:[y.ez,m.hGG]}),Re})(),Xn=(()=>{class Re{constructor(Ee){this._doc=Ee}getTitle(){return this._doc.title}setTitle(Ee){this._doc.title=Ee||""}}return Re.\u0275fac=function(Ee){return new(Ee||Re)(m.LFG(y.K0))},Re.\u0275prov=m.Yz7({token:Re,factory:function(Ee){let et=null;return et=Ee?new Ee:function Dr(){return new Xn((0,m.LFG)(y.K0))}(),et},providedIn:"root"}),Re})();typeof window<"u"&&window;let he=(()=>{class Re{}return Re.\u0275fac=function(Ee){return new(Ee||Re)},Re.\u0275prov=m.Yz7({token:Re,factory:function(Ee){let et=null;return et=Ee?new(Ee||Re):m.LFG(de),et},providedIn:"root"}),Re})(),de=(()=>{class Re extends he{constructor(Ee){super(),this._doc=Ee}sanitize(Ee,et){if(null==et)return null;switch(Ee){case m.q3G.NONE:return et;case m.q3G.HTML:return(0,m.qzn)(et,"HTML")?(0,m.z3N)(et):(0,m.EiD)(this._doc,String(et)).toString();case m.q3G.STYLE:return(0,m.qzn)(et,"Style")?(0,m.z3N)(et):et;case m.q3G.SCRIPT:if((0,m.qzn)(et,"Script"))return(0,m.z3N)(et);throw new Error("unsafe value used in a script context");case m.q3G.URL:return(0,m.qzn)(et,"URL")?(0,m.z3N)(et):(0,m.mCW)(String(et));case m.q3G.RESOURCE_URL:if((0,m.qzn)(et,"ResourceURL"))return(0,m.z3N)(et);throw new Error(`unsafe value used in a resource URL context (see ${m.JZr})`);default:throw new Error(`Unexpected SecurityContext ${Ee} (see ${m.JZr})`)}}bypassSecurityTrustHtml(Ee){return(0,m.JVY)(Ee)}bypassSecurityTrustStyle(Ee){return(0,m.L6k)(Ee)}bypassSecurityTrustScript(Ee){return(0,m.eBb)(Ee)}bypassSecurityTrustUrl(Ee){return(0,m.LAX)(Ee)}bypassSecurityTrustResourceUrl(Ee){return(0,m.pB0)(Ee)}}return Re.\u0275fac=function(Ee){return new(Ee||Re)(m.LFG(y.K0))},Re.\u0275prov=m.Yz7({token:Re,factory:function(Ee){let et=null;return et=Ee?new Ee:function ye(Re){return new de(Re.get(y.K0))}(m.LFG(m.zs3)),et},providedIn:"root"}),Re})()},6159:(ln,at,B)=>{"use strict";B.d(at,{gz:()=>Yr,y6:()=>Vs,OD:()=>ui,eC:()=>St,wN:()=>vo,F0:()=>fs,rH:()=>jr,Od:()=>Ts,Bz:()=>Gu,Hx:()=>kr,bU:()=>gu});var y=B(4650),m=B(8996),q=B(9646),oe=B(1135),xe=B(6805),Pe=B(9841),Ce=B(7272),we=B(9770),He=B(9635),Se=B(2843),me=B(9751),De=B(515),ke=B(4033),je=B(7579),Le=B(6895),Xe=B(4004),Te=B(3900),Ie=B(5698),ae=B(8675),dt=B(9300),ze=B(5577),Ae=B(590),Y=B(4351),ht=B(8505),Ke=B(262),fe=B(5026),Ct=B(4482),Ue=B(5403);function it(S){return S<=0?()=>De.E:(0,Ct.e)((R,w)=>{let k=[];R.subscribe((0,Ue.x)(w,z=>{k.push(z),S<k.length&&k.shift()},()=>{for(const z of k)w.next(z);w.complete()},void 0,()=>{k=null}))})}var Et=B(8068),Ve=B(6590),gt=B(4671);function wt(S,R){const w=arguments.length>=2;return k=>k.pipe(S?(0,dt.h)((z,re)=>S(z,re,k)):gt.y,it(1),w?(0,Ve.d)(R):(0,Et.T)(()=>new xe.K))}var qe=B(9718),We=B(8746),Ge=B(8343),_t=B(8189),mt=B(1481);const St="primary",jt=Symbol("RouteTitle");class hn{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const w=this.params[R];return Array.isArray(w)?w[0]:w}return null}getAll(R){if(this.has(R)){const w=this.params[R];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function Dt(S){return new hn(S)}function ut(S,R,w){const k=w.path.split("/");if(k.length>S.length||"full"===w.pathMatch&&(R.hasChildren()||k.length<S.length))return null;const z={};for(let re=0;re<k.length;re++){const se=k[re],rt=S[re];if(se.startsWith(":"))z[se.substring(1)]=rt;else if(se!==rt.path)return null}return{consumed:S.slice(0,k.length),posParams:z}}function rn(S,R){const w=S?Object.keys(S):void 0,k=R?Object.keys(R):void 0;if(!w||!k||w.length!=k.length)return!1;let z;for(let re=0;re<w.length;re++)if(z=w[re],!Rn(S[z],R[z]))return!1;return!0}function Rn(S,R){if(Array.isArray(S)&&Array.isArray(R)){if(S.length!==R.length)return!1;const w=[...S].sort(),k=[...R].sort();return w.every((z,re)=>k[re]===z)}return S===R}function Un(S){return Array.prototype.concat.apply([],S)}function fn(S){return S.length>0?S[S.length-1]:null}function En(S,R){for(const w in S)S.hasOwnProperty(w)&&R(S[w],w)}function Ht(S){return(0,y.CqO)(S)?S:(0,y.QGY)(S)?(0,m.D)(Promise.resolve(S)):(0,q.of)(S)}const cr=!1,Zn={exact:function Mr(S,R,w){if(!pr(S.segments,R.segments)||!Xn(S.segments,R.segments,w)||S.numberOfChildren!==R.numberOfChildren)return!1;for(const k in R.children)if(!S.children[k]||!Mr(S.children[k],R.children[k],w))return!1;return!0},subset:bi},pn={exact:function Mi(S,R){return rn(S,R)},subset:function Ri(S,R){return Object.keys(R).length<=Object.keys(S).length&&Object.keys(R).every(w=>Rn(S[w],R[w]))},ignored:()=>!0};function dr(S,R,w){return Zn[w.paths](S.root,R.root,w.matrixParams)&&pn[w.queryParams](S.queryParams,R.queryParams)&&!("exact"===w.fragment&&S.fragment!==R.fragment)}function bi(S,R,w){return Dr(S,R,R.segments,w)}function Dr(S,R,w,k){if(S.segments.length>w.length){const z=S.segments.slice(0,w.length);return!(!pr(z,w)||R.hasChildren()||!Xn(z,w,k))}if(S.segments.length===w.length){if(!pr(S.segments,w)||!Xn(S.segments,w,k))return!1;for(const z in R.children)if(!S.children[z]||!bi(S.children[z],R.children[z],k))return!1;return!0}{const z=w.slice(0,S.segments.length),re=w.slice(S.segments.length);return!!(pr(S.segments,z)&&Xn(S.segments,z,k)&&S.children[St])&&Dr(S.children[St],R,re,k)}}function Xn(S,R,w){return R.every((k,z)=>pn[w](S[z].parameters,k.parameters))}class wn{constructor(R=new sn([],{}),w={},k=null){this.root=R,this.queryParams=w,this.fragment=k}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dt(this.queryParams)),this._queryParamMap}toString(){return _r.serialize(this)}}class sn{constructor(R,w){this.segments=R,this.children=w,this.parent=null,En(w,(k,z)=>k.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yi(this)}}class Nr{constructor(R,w){this.path=R,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=Dt(this.parameters)),this._parameterMap}toString(){return _i(this)}}function pr(S,R){return S.length===R.length&&S.every((w,k)=>w.path===R[k].path)}let kr=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:function(){return new ai},providedIn:"root"}),S})();class ai{parse(R){const w=new Re(R);return new wn(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(R){const w=`/${sr(R.root,!0)}`,k=function Jr(S){const R=Object.keys(S).map(w=>{const k=S[w];return Array.isArray(k)?k.map(z=>`${tr(w)}=${tr(z)}`).join("&"):`${tr(w)}=${tr(k)}`}).filter(w=>!!w);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${w}${k}${"string"==typeof R.fragment?`#${function ni(S){return encodeURI(S)}(R.fragment)}`:""}`}}const _r=new ai;function yi(S){return S.segments.map(R=>_i(R)).join("/")}function sr(S,R){if(!S.hasChildren())return yi(S);if(R){const w=S.children[St]?sr(S.children[St],!1):"",k=[];return En(S.children,(z,re)=>{re!==St&&k.push(`${re}:${sr(z,!1)}`)}),k.length>0?`${w}(${k.join("//")})`:w}{const w=function Ci(S,R){let w=[];return En(S.children,(k,z)=>{z===St&&(w=w.concat(R(k,z)))}),En(S.children,(k,z)=>{z!==St&&(w=w.concat(R(k,z)))}),w}(S,(k,z)=>z===St?[sr(S.children[St],!1)]:[`${z}:${sr(k,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[St]?`${yi(S)}/${w[0]}`:`${yi(S)}/(${w.join("//")})`}}function Di(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tr(S){return Di(S).replace(/%3B/gi,";")}function Gr(S){return Di(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ri(S){return decodeURIComponent(S)}function Sr(S){return ri(S.replace(/\+/g,"%20"))}function _i(S){return`${Gr(S.path)}${function Ur(S){return Object.keys(S).map(R=>`;${Gr(R)}=${Gr(S[R])}`).join("")}(S.parameters)}`}const Qe=/^[^\/()?;=#]+/;function Be(S){const R=S.match(Qe);return R?R[0]:""}const he=/^[^=?&#]+/,de=/^[^&#]+/;class Re{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let k={};return this.peekStartsWith("(")&&(k=this.parseParens(!1)),(R.length>0||Object.keys(w).length>0)&&(k[St]=new sn(R,w)),k}parseSegment(){const R=Be(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new y.vHH(4009,cr);return this.capture(R),new Nr(ri(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const w=Be(this.remaining);if(!w)return;this.capture(w);let k="";if(this.consumeOptional("=")){const z=Be(this.remaining);z&&(k=z,this.capture(k))}R[ri(w)]=ri(k)}parseQueryParam(R){const w=function ye(S){const R=S.match(he);return R?R[0]:""}(this.remaining);if(!w)return;this.capture(w);let k="";if(this.consumeOptional("=")){const se=function lt(S){const R=S.match(de);return R?R[0]:""}(this.remaining);se&&(k=se,this.capture(k))}const z=Sr(w),re=Sr(k);if(R.hasOwnProperty(z)){let se=R[z];Array.isArray(se)||(se=[se],R[z]=se),se.push(re)}else R[z]=re}parseParens(R){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const k=Be(this.remaining),z=this.remaining[k.length];if("/"!==z&&")"!==z&&";"!==z)throw new y.vHH(4010,cr);let re;k.indexOf(":")>-1?(re=k.slice(0,k.indexOf(":")),this.capture(re),this.capture(":")):R&&(re=St);const se=this.parseChildren();w[re]=1===Object.keys(se).length?se[St]:new sn([],se),this.consumeOptional("//")}return w}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new y.vHH(4011,cr)}}function Fe(S){return S.segments.length>0?new sn([],{[St]:S}):S}function Ee(S){const R={};for(const k of Object.keys(S.children)){const re=Ee(S.children[k]);(re.segments.length>0||re.hasChildren())&&(R[k]=re)}return function et(S){if(1===S.numberOfChildren&&S.children[St]){const R=S.children[St];return new sn(S.segments.concat(R.segments),R.children)}return S}(new sn(S.segments,R))}function xt(S){return S instanceof wn}const Yt=!1;function Wr(S,R,w,k,z){var re;if(0===w.length)return nn(R.root,R.root,R.root,k,z);const se=function vr(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new Jn(!0,0,S);let R=0,w=!1;const k=S.reduce((z,re,se)=>{if("object"==typeof re&&null!=re){if(re.outlets){const rt={};return En(re.outlets,(Tt,un)=>{rt[un]="string"==typeof Tt?Tt.split("/"):Tt}),[...z,{outlets:rt}]}if(re.segmentPath)return[...z,re.segmentPath]}return"string"!=typeof re?[...z,re]:0===se?(re.split("/").forEach((rt,Tt)=>{0==Tt&&"."===rt||(0==Tt&&""===rt?w=!0:".."===rt?R++:""!=rt&&z.push(rt))}),z):[...z,re]},[]);return new Jn(w,R,k)}(w);return se.toRoot()?nn(R.root,R.root,new sn([],{}),k,z):function rt(un){var Gn;const xn=function wr(S,R,w,k){if(S.isAbsolute)return new Tn(R.root,!0,0);if(-1===k)return new Tn(w,w===R.root,0);return function jn(S,R,w){let k=S,z=R,re=w;for(;re>z;){if(re-=z,k=k.parent,!k)throw new y.vHH(4005,Yt&&"Invalid number of '../'");z=k.segments.length}return new Tn(k,!1,z-re)}(w,k+(kt(S.commands[0])?0:1),S.numberOfDoubleDots)}(se,R,null===(Gn=S.snapshot)||void 0===Gn?void 0:Gn._urlSegment,un),xi=xn.processChildren?ns(xn.segmentGroup,xn.index,se.commands):Ps(xn.segmentGroup,xn.index,se.commands);return nn(R.root,xn.segmentGroup,xi,k,z)}(null===(re=S.snapshot)||void 0===re?void 0:re._lastPathIndex)}function kt(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function At(S){return"object"==typeof S&&null!=S&&S.outlets}function nn(S,R,w,k,z){let se,re={};k&&En(k,(Tt,un)=>{re[un]=Array.isArray(Tt)?Tt.map(Gn=>`${Gn}`):`${Tt}`}),se=S===R?w:On(S,R,w);const rt=Fe(Ee(se));return new wn(rt,re,z)}function On(S,R,w){const k={};return En(S.children,(z,re)=>{k[re]=z===R?w:On(z,R,w)}),new sn(S.segments,k)}class Jn{constructor(R,w,k){if(this.isAbsolute=R,this.numberOfDoubleDots=w,this.commands=k,R&&k.length>0&&kt(k[0]))throw new y.vHH(4003,Yt&&"Root segment cannot have matrix parameters");const z=k.find(At);if(z&&z!==fn(k))throw new y.vHH(4004,Yt&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tn{constructor(R,w,k){this.segmentGroup=R,this.processChildren=w,this.index=k}}function Ps(S,R,w){if(S||(S=new sn([],{})),0===S.segments.length&&S.hasChildren())return ns(S,R,w);const k=function as(S,R,w){let k=0,z=R;const re={match:!1,pathIndex:0,commandIndex:0};for(;z<S.segments.length;){if(k>=w.length)return re;const se=S.segments[z],rt=w[k];if(At(rt))break;const Tt=`${rt}`,un=k<w.length-1?w[k+1]:null;if(z>0&&void 0===Tt)break;if(Tt&&un&&"object"==typeof un&&void 0===un.outlets){if(!si(Tt,un,se))return re;k+=2}else{if(!si(Tt,{},se))return re;k++}z++}return{match:!0,pathIndex:z,commandIndex:k}}(S,R,w),z=w.slice(k.commandIndex);if(k.match&&k.pathIndex<S.segments.length){const re=new sn(S.segments.slice(0,k.pathIndex),{});return re.children[St]=new sn(S.segments.slice(k.pathIndex),S.children),ns(re,0,z)}return k.match&&0===z.length?new sn(S.segments,{}):k.match&&!S.hasChildren()?li(S,R,w):k.match?ns(S,0,z):li(S,R,w)}function ns(S,R,w){if(0===w.length)return new sn(S.segments,{});{const k=function Wn(S){return At(S[0])?S[0].outlets:{[St]:S}}(w),z={};if(!k[St]&&S.children[St]&&1===S.numberOfChildren&&0===S.children[St].segments.length){const re=ns(S.children[St],R,w);return new sn(S.segments,re.children)}return En(k,(re,se)=>{"string"==typeof re&&(re=[re]),null!==re&&(z[se]=Ps(S.children[se],R,re))}),En(S.children,(re,se)=>{void 0===k[se]&&(z[se]=re)}),new sn(S.segments,z)}}function li(S,R,w){const k=S.segments.slice(0,R);let z=0;for(;z<w.length;){const re=w[z];if(At(re)){const Tt=_n(re.outlets);return new sn(k,Tt)}if(0===z&&kt(w[0])){k.push(new Nr(S.segments[R].path,gr(w[0]))),z++;continue}const se=At(re)?re.outlets[St]:`${re}`,rt=z<w.length-1?w[z+1]:null;se&&rt&&kt(rt)?(k.push(new Nr(se,gr(rt))),z+=2):(k.push(new Nr(se,{})),z++)}return new sn(k,{})}function _n(S){const R={};return En(S,(w,k)=>{"string"==typeof w&&(w=[w]),null!==w&&(R[k]=li(new sn([],{}),0,w))}),R}function gr(S){const R={};return En(S,(w,k)=>R[k]=`${w}`),R}function si(S,R,w){return S==w.path&&rn(R,w.parameters)}const Rr="imperative";class vi{constructor(R,w){this.id=R,this.url=w}}class ui extends vi{constructor(R,w,k="imperative",z=null){super(R,w),this.type=0,this.navigationTrigger=k,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $i extends vi{constructor(R,w,k){super(R,w),this.urlAfterRedirects=k,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ei extends vi{constructor(R,w,k,z){super(R,w),this.reason=k,this.code=z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ce extends vi{constructor(R,w,k,z){super(R,w),this.reason=k,this.code=z,this.type=16}}class Me extends vi{constructor(R,w,k,z){super(R,w),this.error=k,this.target=z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ye extends vi{constructor(R,w,k,z){super(R,w),this.urlAfterRedirects=k,this.state=z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class be extends vi{constructor(R,w,k,z){super(R,w),this.urlAfterRedirects=k,this.state=z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Je extends vi{constructor(R,w,k,z,re){super(R,w),this.urlAfterRedirects=k,this.state=z,this.shouldActivate=re,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nt extends vi{constructor(R,w,k,z){super(R,w),this.urlAfterRedirects=k,this.state=z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lt extends vi{constructor(R,w,k,z){super(R,w),this.urlAfterRedirects=k,this.state=z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $t{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gt{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Wt{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cn{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qn{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ln{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ar{constructor(R,w,k){this.routerEvent=R,this.position=w,this.anchor=k,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ct=(()=>{class S{createUrlTree(w,k,z,re,se,rt){return Wr(w||k.root,z,re,se,rt)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac}),S})(),It=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:function(R){return ct.\u0275fac(R)},providedIn:"root"}),S})();class Kt{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const w=this.pathFromRoot(R);return w.length>1?w[w.length-2]:null}children(R){const w=en(R,this._root);return w?w.children.map(k=>k.value):[]}firstChild(R){const w=en(R,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(R){const w=rr(R,this._root);return w.length<2?[]:w[w.length-2].children.map(z=>z.value).filter(z=>z!==R)}pathFromRoot(R){return rr(R,this._root).map(w=>w.value)}}function en(S,R){if(S===R.value)return R;for(const w of R.children){const k=en(S,w);if(k)return k}return null}function rr(S,R){if(S===R.value)return[R];for(const w of R.children){const k=rr(S,w);if(k.length)return k.unshift(R),k}return[]}class Hn{constructor(R,w){this.value=R,this.children=w}toString(){return`TreeNode(${this.value})`}}function mr(S){const R={};return S&&S.children.forEach(w=>R[w.value.outlet]=w),R}class qr extends Kt{constructor(R,w){super(R),this.snapshot=w,La(this,R)}toString(){return this.snapshot.toString()}}function bs(S,R){const w=function Ws(S,R){const se=new No([],{},{},"",{},St,R,null,S.root,-1,{});return new ms("",new Hn(se,[]))}(S,R),k=new oe.X([new Nr("",{})]),z=new oe.X({}),re=new oe.X({}),se=new oe.X({}),rt=new oe.X(""),Tt=new Yr(k,z,se,rt,re,St,R,w.root);return Tt.snapshot=w.root,new qr(new Hn(Tt,[]),w)}class Yr{constructor(R,w,k,z,re,se,rt,Tt){var un,Gn;this.url=R,this.params=w,this.queryParams=k,this.fragment=z,this.data=re,this.outlet=se,this.component=rt,this.title=null!==(un=null===(Gn=this.data)||void 0===Gn?void 0:Gn.pipe((0,Xe.U)(xn=>xn[jt])))&&void 0!==un?un:(0,q.of)(void 0),this._futureSnapshot=Tt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(R=>Dt(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(R=>Dt(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ks(S,R="emptyOnly"){const w=S.pathFromRoot;let k=0;if("always"!==R)for(k=w.length-1;k>=1;){const z=w[k],re=w[k-1];if(z.routeConfig&&""===z.routeConfig.path)k--;else{if(re.component)break;k--}}return function ho(S){return S.reduce((R,w)=>{var k;return{params:{...R.params,...w.params},data:{...R.data,...w.data},resolve:{...w.data,...R.resolve,...null===(k=w.routeConfig)||void 0===k?void 0:k.data,...w._resolvedData}}},{params:{},data:{},resolve:{}})}(w.slice(k))}class No{get title(){var R;return null===(R=this.data)||void 0===R?void 0:R[jt]}constructor(R,w,k,z,re,se,rt,Tt,un,Gn,xn){this.url=R,this.params=w,this.queryParams=k,this.fragment=z,this.data=re,this.outlet=se,this.component=rt,this.routeConfig=Tt,this._urlSegment=un,this._lastPathIndex=Gn,this._resolve=xn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(k=>k.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ms extends Kt{constructor(R,w){super(w),this.url=R,La(this,w)}toString(){return fo(this._root)}}function La(S,R){R.value._routerState=S,R.children.forEach(w=>La(S,w))}function fo(S){const R=S.children.length>0?` { ${S.children.map(fo).join(", ")} } `:"";return`${S.value}${R}`}function Zo(S){if(S.snapshot){const R=S.snapshot,w=S._futureSnapshot;S.snapshot=w,rn(R.queryParams,w.queryParams)||S.queryParams.next(w.queryParams),R.fragment!==w.fragment&&S.fragment.next(w.fragment),rn(R.params,w.params)||S.params.next(w.params),function Rt(S,R){if(S.length!==R.length)return!1;for(let w=0;w<S.length;++w)if(!rn(S[w],R[w]))return!1;return!0}(R.url,w.url)||S.url.next(w.url),rn(R.data,w.data)||S.data.next(w.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function ko(S,R){const w=rn(S.params,R.params)&&function Xr(S,R){return pr(S,R)&&S.every((w,k)=>rn(w.parameters,R[k].parameters))}(S.url,R.url);return w&&!(!S.parent!=!R.parent)&&(!S.parent||ko(S.parent,R.parent))}function Os(S,R,w){if(w&&S.shouldReuseRoute(R.value,w.value.snapshot)){const k=w.value;k._futureSnapshot=R.value;const z=function Qo(S,R,w){return R.children.map(k=>{for(const z of w.children)if(S.shouldReuseRoute(k.value,z.value.snapshot))return Os(S,k,z);return Os(S,k)})}(S,R,w);return new Hn(k,z)}{if(S.shouldAttach(R.value)){const re=S.retrieve(R.value);if(null!==re){const se=re.route;return se.value._futureSnapshot=R.value,se.children=R.children.map(rt=>Os(S,rt)),se}}const k=function Ba(S){return new Yr(new oe.X(S.url),new oe.X(S.params),new oe.X(S.queryParams),new oe.X(S.fragment),new oe.X(S.data),S.outlet,S.component,S)}(R.value),z=R.children.map(re=>Os(S,re));return new Hn(k,z)}}const Ea="ngNavigationCancelingError";function ls(S,R){const{redirectTo:w,navigationBehaviorOptions:k}=xt(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,z=So(!1,0,R);return z.url=w,z.navigationBehaviorOptions=k,z}function So(S,R,w){const k=new Error("NavigationCancelingError: "+(S||""));return k[Ea]=!0,k.cancellationCode=R,w&&(k.url=w),k}function $a(S){return us(S)&&xt(S.url)}function us(S){return S&&S[Ea]}class to{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vs,this.attachRef=null}}let Vs=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(w,k){const z=this.getOrCreateContext(w);z.outlet=k,this.contexts.set(w,z)}onChildOutletDestroyed(w){const k=this.getContext(w);k&&(k.outlet=null,k.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let k=this.getContext(w);return k||(k=new to,this.contexts.set(w,k)),k}getContext(w){return this.contexts.get(w)||null}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const ys=!1;let js=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(Vs),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb)}ngOnChanges(w){if(w.name){const{firstChange:k,previousValue:z}=w.name;if(k)return;this.isTrackedInParentContexts(z)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(z)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(w){var k;return(null===(k=this.parentContexts.getContext(w))||void 0===k?void 0:k.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);null!=w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,ys);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,ys);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,ys);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,k){this.activated=w,this._activatedRoute=k,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,k){if(this.isActivated)throw new y.vHH(4013,ys);this._activatedRoute=w;const z=this.location,se=w.snapshot.component,rt=this.parentContexts.getOrCreateContext(this.name).children,Tt=new pi(w,rt,z.injector);if(k&&function po(S){return!!S.resolveComponentFactory}(k)){const un=k.resolveComponentFactory(se);this.activated=z.createComponent(un,z.length,Tt)}else this.activated=z.createComponent(se,{index:z.length,injector:Tt,environmentInjector:null!=k?k:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275dir=y.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]}),S})();class pi{constructor(R,w,k){this.route=R,this.childContexts=w,this.parent=k}get(R,w){return R===Yr?this.route:R===Vs?this.childContexts:this.parent.get(R,w)}}let Lo=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275cmp=y.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(w,k){1&w&&y._UZ(0,"router-outlet")},dependencies:[js],encapsulation:2}),S})();function no(S,R){var w;return S.providers&&!S._injector&&(S._injector=(0,y.MMx)(S.providers,R,`Route: ${S.path}`)),null!==(w=S._injector)&&void 0!==w?w:R}function Xo(S){const R=S.children&&S.children.map(Xo),w=R?{...S,children:R}:{...S};return!w.component&&!w.loadComponent&&(R||w.loadChildren)&&w.outlet&&w.outlet!==St&&(w.component=Lo),w}function _s(S){return S.outlet||St}function Yi(S,R){const w=S.filter(k=>_s(k)===R);return w.push(...S.filter(k=>_s(k)!==R)),w}function rs(S){var R;if(!S)return null;if(null!==(R=S.routeConfig)&&void 0!==R&&R._injector)return S.routeConfig._injector;for(let w=S.parent;w;w=w.parent){const k=w.routeConfig;if(null!=k&&k._loadedInjector)return k._loadedInjector;if(null!=k&&k._injector)return k._injector}return null}class cs{constructor(R,w,k,z){this.routeReuseStrategy=R,this.futureState=w,this.currState=k,this.forwardEvent=z}activate(R){const w=this.futureState._root,k=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,k,R),Zo(this.futureState.root),this.activateChildRoutes(w,k,R)}deactivateChildRoutes(R,w,k){const z=mr(w);R.children.forEach(re=>{const se=re.value.outlet;this.deactivateRoutes(re,z[se],k),delete z[se]}),En(z,(re,se)=>{this.deactivateRouteAndItsChildren(re,k)})}deactivateRoutes(R,w,k){const z=R.value,re=w?w.value:null;if(z===re)if(z.component){const se=k.getContext(z.outlet);se&&this.deactivateChildRoutes(R,w,se.children)}else this.deactivateChildRoutes(R,w,k);else re&&this.deactivateRouteAndItsChildren(w,k)}deactivateRouteAndItsChildren(R,w){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,w):this.deactivateRouteAndOutlet(R,w)}detachAndStoreRouteSubtree(R,w){const k=w.getContext(R.value.outlet),z=k&&R.value.component?k.children:w,re=mr(R);for(const se of Object.keys(re))this.deactivateRouteAndItsChildren(re[se],z);if(k&&k.outlet){const se=k.outlet.detach(),rt=k.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:se,route:R,contexts:rt})}}deactivateRouteAndOutlet(R,w){const k=w.getContext(R.value.outlet),z=k&&R.value.component?k.children:w,re=mr(R);for(const se of Object.keys(re))this.deactivateRouteAndItsChildren(re[se],z);k&&(k.outlet&&(k.outlet.deactivate(),k.children.onOutletDeactivated()),k.attachRef=null,k.resolver=null,k.route=null)}activateChildRoutes(R,w,k){const z=mr(w);R.children.forEach(re=>{this.activateRoutes(re,z[re.value.outlet],k),this.forwardEvent(new Ln(re.value.snapshot))}),R.children.length&&this.forwardEvent(new cn(R.value.snapshot))}activateRoutes(R,w,k){const z=R.value,re=w?w.value:null;if(Zo(z),z===re)if(z.component){const rt=k.getOrCreateContext(z.outlet);this.activateChildRoutes(R,w,rt.children)}else this.activateChildRoutes(R,w,k);else if(z.component){const rt=k.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const Tt=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),rt.children.onOutletReAttached(Tt.contexts),rt.attachRef=Tt.componentRef,rt.route=Tt.route.value,rt.outlet&&rt.outlet.attach(Tt.componentRef,Tt.route.value),Zo(Tt.route.value),this.activateChildRoutes(R,null,rt.children)}else{var se;const Tt=rs(z.snapshot),un=null!==(se=null==Tt?void 0:Tt.get(y._Vd))&&void 0!==se?se:null;rt.attachRef=null,rt.route=z,rt.resolver=un,rt.injector=Tt,rt.outlet&&rt.outlet.activateWith(z,rt.injector),this.activateChildRoutes(R,null,rt.children)}}else this.activateChildRoutes(R,null,k)}}class Va{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class C{constructor(R,w){this.component=R,this.route=w}}function Q(S,R,w){const k=S._root;return _e(k,R?R._root:null,w,[k.value])}function K(S,R){const w=Symbol(),k=R.get(S,w);return k===w?"function"!=typeof S||(0,y.Z0I)(S)?R.get(S):S:k}function _e(S,R,w,k,z={canDeactivateChecks:[],canActivateChecks:[]}){const re=mr(R);return S.children.forEach(se=>{(function Qt(S,R,w,k,z={canDeactivateChecks:[],canActivateChecks:[]}){const re=S.value,se=R?R.value:null,rt=w?w.getContext(S.value.outlet):null;if(se&&re.routeConfig===se.routeConfig){const Tt=function Vn(S,R,w){if("function"==typeof w)return w(S,R);switch(w){case"pathParamsChange":return!pr(S.url,R.url);case"pathParamsOrQueryParamsChange":return!pr(S.url,R.url)||!rn(S.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ko(S,R)||!rn(S.queryParams,R.queryParams);default:return!ko(S,R)}}(se,re,re.routeConfig.runGuardsAndResolvers);Tt?z.canActivateChecks.push(new Va(k)):(re.data=se.data,re._resolvedData=se._resolvedData),_e(S,R,re.component?rt?rt.children:null:w,k,z),Tt&&rt&&rt.outlet&&rt.outlet.isActivated&&z.canDeactivateChecks.push(new C(rt.outlet.component,se))}else se&&Kn(R,rt,z),z.canActivateChecks.push(new Va(k)),_e(S,null,re.component?rt?rt.children:null:w,k,z)})(se,re[se.value.outlet],w,k.concat([se.value]),z),delete re[se.value.outlet]}),En(re,(se,rt)=>Kn(se,w.getContext(rt),z)),z}function Kn(S,R,w){const k=mr(S),z=S.value;En(k,(re,se)=>{Kn(re,z.component?R?R.children.getContext(se):null:R,w)}),w.canDeactivateChecks.push(new C(z.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,z))}function Ar(S){return"function"==typeof S}function Oi(S){return S instanceof xe.K||"EmptyError"===(null==S?void 0:S.name)}const Vt=Symbol("INITIAL_VALUE");function $n(){return(0,Te.w)(S=>(0,Pe.a)(S.map(R=>R.pipe((0,Ie.q)(1),(0,ae.O)(Vt)))).pipe((0,Xe.U)(R=>{for(const w of R)if(!0!==w){if(w===Vt)return Vt;if(!1===w||w instanceof wn)return w}return!0}),(0,dt.h)(R=>R!==Vt),(0,Ie.q)(1)))}function Ns(S){return(0,He.z)((0,ht.b)(R=>{if(xt(R))throw ls(0,R)}),(0,Xe.U)(R=>!0===R))}const ds={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ks(S,R,w,k,z){const re=io(S,R,w);return re.matched?function Ha(S,R,w,k){const z=R.canMatch;if(!z||0===z.length)return(0,q.of)(!0);const re=z.map(se=>{const rt=K(se,S);return Ht(function ue(S){return S&&Ar(S.canMatch)}(rt)?rt.canMatch(R,w):S.runInContext(()=>rt(R,w)))});return(0,q.of)(re).pipe($n(),Ns())}(k=no(R,k),R,w).pipe((0,Xe.U)(se=>!0===se?re:{...ds})):(0,q.of)(re)}function io(S,R,w){var k;if(""===R.path)return"full"===R.pathMatch&&(S.hasChildren()||w.length>0)?{...ds}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const re=(R.matcher||ut)(w,S,R);if(!re)return{...ds};const se={};En(re.posParams,(Tt,un)=>{se[un]=Tt.path});const rt=re.consumed.length>0?{...se,...re.consumed[re.consumed.length-1].parameters}:se;return{matched:!0,consumedSegments:re.consumed,remainingSegments:w.slice(re.consumed.length),parameters:rt,positionalParamSegments:null!==(k=re.posParams)&&void 0!==k?k:{}}}function mo(S,R,w,k){if(w.length>0&&function ca(S,R,w){return w.some(k=>Al(S,R,k)&&_s(k)!==St)}(S,w,k)){const re=new sn(R,function za(S,R,w,k){const z={};z[St]=k,k._sourceSegment=S,k._segmentIndexShift=R.length;for(const re of w)if(""===re.path&&_s(re)!==St){const se=new sn([],{});se._sourceSegment=S,se._segmentIndexShift=R.length,z[_s(re)]=se}return z}(S,R,k,new sn(w,S.children)));return re._sourceSegment=S,re._segmentIndexShift=R.length,{segmentGroup:re,slicedSegments:[]}}if(0===w.length&&function dl(S,R,w){return w.some(k=>Al(S,R,k))}(S,w,k)){const re=new sn(S.segments,function Uo(S,R,w,k,z){const re={};for(const se of k)if(Al(S,w,se)&&!z[_s(se)]){const rt=new sn([],{});rt._sourceSegment=S,rt._segmentIndexShift=R.length,re[_s(se)]=rt}return{...z,...re}}(S,R,w,k,S.children));return re._sourceSegment=S,re._segmentIndexShift=R.length,{segmentGroup:re,slicedSegments:w}}const z=new sn(S.segments,S.children);return z._sourceSegment=S,z._segmentIndexShift=R.length,{segmentGroup:z,slicedSegments:w}}function Al(S,R,w){return(!(S.hasChildren()||R.length>0)||"full"!==w.pathMatch)&&""===w.path}function Qi(S,R,w,k){return!!(_s(S)===k||k!==St&&Al(R,w,S))&&("**"===S.path||io(R,S,w).matched)}function da(S,R,w){return 0===R.length&&!S.children[w]}const ha=!1;class Ga{constructor(R){this.segmentGroup=R||null}}class yo{constructor(R){this.urlTree=R}}function Jo(S){return(0,Se._)(new Ga(S))}function _o(S){return(0,Se._)(new yo(S))}class Hs{constructor(R,w,k,z,re){this.injector=R,this.configLoader=w,this.urlSerializer=k,this.urlTree=z,this.config=re,this.allowRedirects=!0}apply(){const R=mo(this.urlTree.root,[],[],this.config).segmentGroup,w=new sn(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,w,St).pipe((0,Xe.U)(re=>this.createUrlTree(Ee(re),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ke.K)(re=>{if(re instanceof yo)return this.allowRedirects=!1,this.match(re.urlTree);throw re instanceof Ga?this.noMatchError(re):re}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,St).pipe((0,Xe.U)(z=>this.createUrlTree(Ee(z),R.queryParams,R.fragment))).pipe((0,Ke.K)(z=>{throw z instanceof Ga?this.noMatchError(z):z}))}noMatchError(R){return new y.vHH(4002,ha)}createUrlTree(R,w,k){const z=Fe(R);return new wn(z,w,k)}expandSegmentGroup(R,w,k,z){return 0===k.segments.length&&k.hasChildren()?this.expandChildren(R,w,k).pipe((0,Xe.U)(re=>new sn([],re))):this.expandSegment(R,k,w,k.segments,z,!0)}expandChildren(R,w,k){const z=[];for(const re of Object.keys(k.children))"primary"===re?z.unshift(re):z.push(re);return(0,m.D)(z).pipe((0,Y.b)(re=>{const se=k.children[re],rt=Yi(w,re);return this.expandSegmentGroup(R,rt,se,re).pipe((0,Xe.U)(Tt=>({segment:Tt,outlet:re})))}),(0,fe.R)((re,se)=>(re[se.outlet]=se.segment,re),{}),wt())}expandSegment(R,w,k,z,re,se){return(0,m.D)(k).pipe((0,Y.b)(rt=>this.expandSegmentAgainstRoute(R,w,k,rt,z,re,se).pipe((0,Ke.K)(un=>{if(un instanceof Ga)return(0,q.of)(null);throw un}))),(0,Ae.P)(rt=>!!rt),(0,Ke.K)((rt,Tt)=>{if(Oi(rt))return da(w,z,re)?(0,q.of)(new sn([],{})):Jo(w);throw rt}))}expandSegmentAgainstRoute(R,w,k,z,re,se,rt){return Qi(z,w,re,se)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(R,w,z,re,se):rt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,w,k,z,re,se):Jo(w):Jo(w)}expandSegmentAgainstRouteUsingRedirect(R,w,k,z,re,se){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,k,z,se):this.expandRegularSegmentAgainstRouteUsingRedirect(R,w,k,z,re,se)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,w,k,z){const re=this.applyRedirectCommands([],k.redirectTo,{});return k.redirectTo.startsWith("/")?_o(re):this.lineralizeSegments(k,re).pipe((0,ze.z)(se=>{const rt=new sn(se,{});return this.expandSegment(R,rt,w,se,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,w,k,z,re,se){const{matched:rt,consumedSegments:Tt,remainingSegments:un,positionalParamSegments:Gn}=io(w,z,re);if(!rt)return Jo(w);const xn=this.applyRedirectCommands(Tt,z.redirectTo,Gn);return z.redirectTo.startsWith("/")?_o(xn):this.lineralizeSegments(z,xn).pipe((0,ze.z)(xi=>this.expandSegment(R,w,k,xi.concat(un),se,!1)))}matchSegmentAgainstRoute(R,w,k,z,re){return"**"===k.path?(R=no(k,R),k.loadChildren?(k._loadedRoutes?(0,q.of)({routes:k._loadedRoutes,injector:k._loadedInjector}):this.configLoader.loadChildren(R,k)).pipe((0,Xe.U)(rt=>(k._loadedRoutes=rt.routes,k._loadedInjector=rt.injector,new sn(z,{})))):(0,q.of)(new sn(z,{}))):ks(w,k,z,R).pipe((0,Te.w)(({matched:se,consumedSegments:rt,remainingSegments:Tt})=>{var un;return se?(R=null!==(un=k._injector)&&void 0!==un?un:R,this.getChildConfig(R,k,z).pipe((0,ze.z)(xn=>{var xi;const xr=null!==(xi=xn.injector)&&void 0!==xi?xi:R,ir=xn.routes,{segmentGroup:Wi,slicedSegments:Ss}=mo(w,rt,Tt,ir),Ro=new sn(Wi.segments,Wi.children);if(0===Ss.length&&Ro.hasChildren())return this.expandChildren(xr,ir,Ro).pipe((0,Xe.U)(na=>new sn(rt,na)));if(0===ir.length&&0===Ss.length)return(0,q.of)(new sn(rt,{}));const Ni=_s(k)===re;return this.expandSegment(xr,Ro,ir,Ss,Ni?St:re,!0).pipe((0,Xe.U)(Bs=>new sn(rt.concat(Bs.segments),Bs.children)))}))):Jo(w)}))}getChildConfig(R,w,k){return w.children?(0,q.of)({routes:w.children,injector:R}):w.loadChildren?void 0!==w._loadedRoutes?(0,q.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Sl(S,R,w,k){const z=R.canLoad;if(void 0===z||0===z.length)return(0,q.of)(!0);const re=z.map(se=>{const rt=K(se,S);return Ht(function ts(S){return S&&Ar(S.canLoad)}(rt)?rt.canLoad(R,w):S.runInContext(()=>rt(R,w)))});return(0,q.of)(re).pipe($n(),Ns())}(R,w,k).pipe((0,ze.z)(z=>z?this.configLoader.loadChildren(R,w).pipe((0,ht.b)(re=>{w._loadedRoutes=re.routes,w._loadedInjector=re.injector})):function Ka(S){return(0,Se._)(So(ha,3))}())):(0,q.of)({routes:[],injector:R})}lineralizeSegments(R,w){let k=[],z=w.root;for(;;){if(k=k.concat(z.segments),0===z.numberOfChildren)return(0,q.of)(k);if(z.numberOfChildren>1||!z.children[St])return R.redirectTo,(0,Se._)(new y.vHH(4e3,ha));z=z.children[St]}}applyRedirectCommands(R,w,k){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),R,k)}applyRedirectCreateUrlTree(R,w,k,z){const re=this.createSegmentGroup(R,w.root,k,z);return new wn(re,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(R,w){const k={};return En(R,(z,re)=>{if("string"==typeof z&&z.startsWith(":")){const rt=z.substring(1);k[re]=w[rt]}else k[re]=z}),k}createSegmentGroup(R,w,k,z){const re=this.createSegments(R,w.segments,k,z);let se={};return En(w.children,(rt,Tt)=>{se[Tt]=this.createSegmentGroup(R,rt,k,z)}),new sn(re,se)}createSegments(R,w,k,z){return w.map(re=>re.path.startsWith(":")?this.findPosParam(R,re,z):this.findOrReturn(re,k))}findPosParam(R,w,k){const z=k[w.path.substring(1)];if(!z)throw new y.vHH(4001,ha);return z}findOrReturn(R,w){let k=0;for(const z of w){if(z.path===R.path)return w.splice(k),z;k++}return R}}class hs{}class Lr{constructor(R,w,k,z,re,se,rt){this.injector=R,this.rootComponentType=w,this.config=k,this.urlTree=z,this.url=re,this.paramsInheritanceStrategy=se,this.urlSerializer=rt}recognize(){const R=mo(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,St).pipe((0,Xe.U)(w=>{if(null===w)return null;const k=new No([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new Hn(k,w),re=new ms(this.url,z);return this.inheritParamsAndData(re._root),re}))}inheritParamsAndData(R){const w=R.value,k=Ks(w,this.paramsInheritanceStrategy);w.params=Object.freeze(k.params),w.data=Object.freeze(k.data),R.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(R,w,k,z){return 0===k.segments.length&&k.hasChildren()?this.processChildren(R,w,k):this.processSegment(R,w,k,k.segments,z)}processChildren(R,w,k){return(0,m.D)(Object.keys(k.children)).pipe((0,Y.b)(z=>{const re=k.children[z],se=Yi(w,z);return this.processSegmentGroup(R,se,re,z)}),(0,fe.R)((z,re)=>z&&re?(z.push(...re),z):null),function yt(S,R=!1){return(0,Ct.e)((w,k)=>{let z=0;w.subscribe((0,Ue.x)(k,re=>{const se=S(re,z++);(se||R)&&k.next(re),!se&&k.complete()}))})}(z=>null!==z),(0,Ve.d)(null),wt(),(0,Xe.U)(z=>{if(null===z)return null;const re=gc(z);return function vs(S){S.sort((R,w)=>R.value.outlet===St?-1:w.value.outlet===St?1:R.value.outlet.localeCompare(w.value.outlet))}(re),re}))}processSegment(R,w,k,z,re){return(0,m.D)(w).pipe((0,Y.b)(se=>{var rt;return this.processSegmentAgainstRoute(null!==(rt=se._injector)&&void 0!==rt?rt:R,se,k,z,re)}),(0,Ae.P)(se=>!!se),(0,Ke.K)(se=>{if(Oi(se))return da(k,z,re)?(0,q.of)([]):(0,q.of)(null);throw se}))}processSegmentAgainstRoute(R,w,k,z,re){if(w.redirectTo||!Qi(w,k,z,re))return(0,q.of)(null);let se;if("**"===w.path){var rt,Tt;const un=z.length>0?fn(z).parameters:{},Gn=ii(k)+z.length,xn=new No(z,un,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fa(w),_s(w),null!==(rt=null!==(Tt=w.component)&&void 0!==Tt?Tt:w._loadedComponent)&&void 0!==rt?rt:null,w,Vo(k),Gn,F(w));se=(0,q.of)({snapshot:xn,consumedSegments:[],remainingSegments:[]})}else se=ks(k,w,z,R).pipe((0,Xe.U)(({matched:un,consumedSegments:Gn,remainingSegments:xn,parameters:xi})=>{var xr,ir;if(!un)return null;const Wi=ii(k)+Gn.length;return{snapshot:new No(Gn,xi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fa(w),_s(w),null!==(xr=null!==(ir=w.component)&&void 0!==ir?ir:w._loadedComponent)&&void 0!==xr?xr:null,w,Vo(k),Wi,F(w)),consumedSegments:Gn,remainingSegments:xn}}));return se.pipe((0,Te.w)(un=>{var Gn,xn;if(null===un)return(0,q.of)(null);const{snapshot:xi,consumedSegments:xr,remainingSegments:ir}=un;R=null!==(Gn=w._injector)&&void 0!==Gn?Gn:R;const Wi=null!==(xn=w._loadedInjector)&&void 0!==xn?xn:R,Ss=function qa(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(w),{segmentGroup:Ro,slicedSegments:Ni}=mo(k,xr,ir,Ss.filter(Bs=>void 0===Bs.redirectTo));if(0===Ni.length&&Ro.hasChildren())return this.processChildren(Wi,Ss,Ro).pipe((0,Xe.U)(Bs=>null===Bs?null:[new Hn(xi,Bs)]));if(0===Ss.length&&0===Ni.length)return(0,q.of)([new Hn(xi,[])]);const Ho=_s(w)===re;return this.processSegment(Wi,Ss,Ro,Ni,Ho?St:re).pipe((0,Xe.U)(Bs=>null===Bs?null:[new Hn(xi,Bs)]))}))}}function Mo(S){const R=S.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function gc(S){const R=[],w=new Set;for(const k of S){if(!Mo(k)){R.push(k);continue}const z=R.find(re=>k.value.routeConfig===re.value.routeConfig);void 0!==z?(z.children.push(...k.children),w.add(z)):R.push(k)}for(const k of w){const z=gc(k.children);R.push(new Hn(k.value,z))}return R.filter(k=>!w.has(k))}function Vo(S){let R=S;for(;R._sourceSegment;)R=R._sourceSegment;return R}function ii(S){var R;let w=S,k=null!==(R=w._segmentIndexShift)&&void 0!==R?R:0;for(;w._sourceSegment;){var z;w=w._sourceSegment,k+=null!==(z=w._segmentIndexShift)&&void 0!==z?z:0}return k-1}function fa(S){return S.data||{}}function F(S){return S.resolve||{}}function kn(S){return"string"==typeof S.title||null===S.title}function Tr(S){return(0,Te.w)(R=>{const w=S(R);return w?(0,m.D)(w).pipe((0,Xe.U)(()=>R)):(0,q.of)(R)})}const Br=new y.OlP("ROUTES");let Er=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,q.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const k=Ht(w.loadComponent()).pipe((0,Xe.U)(gi),(0,ht.b)(re=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=re}),(0,We.x)(()=>{this.componentLoaders.delete(w)})),z=new ke.c(k,()=>new je.x).pipe((0,Ge.x)());return this.componentLoaders.set(w,z),z}loadChildren(w,k){if(this.childrenLoaders.get(k))return this.childrenLoaders.get(k);if(k._loadedRoutes)return(0,q.of)({routes:k._loadedRoutes,injector:k._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(k);const re=this.loadModuleFactoryOrRoutes(k.loadChildren).pipe((0,Xe.U)(rt=>{this.onLoadEndListener&&this.onLoadEndListener(k);let Tt,un,Gn=!1;Array.isArray(rt)?un=rt:(Tt=rt.create(w).injector,un=Un(Tt.get(Br,[],y.XFs.Self|y.XFs.Optional)));return{routes:un.map(Xo),injector:Tt}}),(0,We.x)(()=>{this.childrenLoaders.delete(k)})),se=new ke.c(re,()=>new je.x).pipe((0,Ge.x)());return this.childrenLoaders.set(k,se),se}loadModuleFactoryOrRoutes(w){return Ht(w()).pipe((0,Xe.U)(gi),(0,ze.z)(k=>k instanceof y.YKP||Array.isArray(k)?(0,q.of)(k):(0,m.D)(this.compiler.compileModuleAsync(k))))}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function gi(S){return function zi(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let so=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new je.x,this.configLoader=(0,y.f3M)(Er),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(kr),this.rootContexts=(0,y.f3M)(Vs),this.navigationId=0,this.afterPreactivation=()=>(0,q.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=z=>this.events.next(new Gt(z)),this.configLoader.onLoadStartListener=z=>this.events.next(new $t(z))}complete(){var w;null===(w=this.transitions)||void 0===w||w.complete()}handleNavigationRequest(w){var k;const z=++this.navigationId;null===(k=this.transitions)||void 0===k||k.next({...this.transitions.value,...w,id:z})}setupNavigations(w){return this.transitions=new oe.X({id:0,targetPageId:0,currentUrlTree:w.currentUrlTree,currentRawUrl:w.currentUrlTree,extractedUrl:w.urlHandlingStrategy.extract(w.currentUrlTree),urlAfterRedirects:w.urlHandlingStrategy.extract(w.currentUrlTree),rawUrl:w.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Rr,restoredState:null,currentSnapshot:w.routerState.snapshot,targetSnapshot:null,currentRouterState:w.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,dt.h)(k=>0!==k.id),(0,Xe.U)(k=>({...k,extractedUrl:w.urlHandlingStrategy.extract(k.rawUrl)})),(0,Te.w)(k=>{let z=!1,re=!1;return(0,q.of)(k).pipe((0,ht.b)(se=>{this.currentNavigation={id:se.id,initialUrl:se.rawUrl,extractedUrl:se.extractedUrl,trigger:se.source,extras:se.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Te.w)(se=>{var rt;const Tt=w.browserUrlTree.toString(),un=!w.navigated||se.extractedUrl.toString()!==Tt||Tt!==w.currentUrlTree.toString(),Gn=null!==(rt=se.extras.onSameUrlNavigation)&&void 0!==rt?rt:w.onSameUrlNavigation;if(!un&&"reload"!==Gn){const xn="";return this.events.next(new ce(se.id,w.serializeUrl(k.rawUrl),xn,0)),w.rawUrlTree=se.rawUrl,se.resolve(null),De.E}if(w.urlHandlingStrategy.shouldProcessUrl(se.rawUrl))return Cs(se.source)&&(w.browserUrlTree=se.extractedUrl),(0,q.of)(se).pipe((0,Te.w)(xn=>{var xi,xr;const ir=null===(xi=this.transitions)||void 0===xi?void 0:xi.getValue();return this.events.next(new ui(xn.id,this.urlSerializer.serialize(xn.extractedUrl),xn.source,xn.restoredState)),ir!==(null===(xr=this.transitions)||void 0===xr?void 0:xr.getValue())?De.E:Promise.resolve(xn)}),function Xl(S,R,w,k){return(0,Te.w)(z=>function ba(S,R,w,k,z){return new Hs(S,R,w,k,z).apply()}(S,R,w,z.extractedUrl,k).pipe((0,Xe.U)(re=>({...z,urlAfterRedirects:re}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,w.config),(0,ht.b)(xn=>{this.currentNavigation={...this.currentNavigation,finalUrl:xn.urlAfterRedirects},k.urlAfterRedirects=xn.urlAfterRedirects}),function ee(S,R,w,k,z){return(0,ze.z)(re=>function qs(S,R,w,k,z,re,se="emptyOnly"){return new Lr(S,R,w,k,z,se,re).recognize().pipe((0,Te.w)(rt=>null===rt?function ss(S){return new me.y(R=>R.error(S))}(new hs):(0,q.of)(rt)))}(S,R,w,re.urlAfterRedirects,k.serialize(re.urlAfterRedirects),k,z).pipe((0,Xe.U)(se=>({...re,targetSnapshot:se}))))}(this.environmentInjector,this.rootComponentType,w.config,this.urlSerializer,w.paramsInheritanceStrategy),(0,ht.b)(xn=>{if(k.targetSnapshot=xn.targetSnapshot,"eager"===w.urlUpdateStrategy){if(!xn.extras.skipLocationChange){const xr=w.urlHandlingStrategy.merge(xn.urlAfterRedirects,xn.rawUrl);w.setBrowserUrl(xr,xn)}w.browserUrlTree=xn.urlAfterRedirects}const xi=new Ye(xn.id,this.urlSerializer.serialize(xn.extractedUrl),this.urlSerializer.serialize(xn.urlAfterRedirects),xn.targetSnapshot);this.events.next(xi)}));if(un&&w.urlHandlingStrategy.shouldProcessUrl(w.rawUrlTree)){const{id:xn,extractedUrl:xi,source:xr,restoredState:ir,extras:Wi}=se,Ss=new ui(xn,this.urlSerializer.serialize(xi),xr,ir);this.events.next(Ss);const Ro=bs(xi,this.rootComponentType).snapshot;return k={...se,targetSnapshot:Ro,urlAfterRedirects:xi,extras:{...Wi,skipLocationChange:!1,replaceUrl:!1}},(0,q.of)(k)}{const xn="";return this.events.next(new ce(se.id,w.serializeUrl(k.extractedUrl),xn,1)),w.rawUrlTree=se.rawUrl,se.resolve(null),De.E}}),(0,ht.b)(se=>{const rt=new be(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(se.urlAfterRedirects),se.targetSnapshot);this.events.next(rt)}),(0,Xe.U)(se=>k={...se,guards:Q(se.targetSnapshot,se.currentSnapshot,this.rootContexts)}),function Ia(S,R){return(0,ze.z)(w=>{const{targetSnapshot:k,currentSnapshot:z,guards:{canActivateChecks:re,canDeactivateChecks:se}}=w;return 0===se.length&&0===re.length?(0,q.of)({...w,guardsResult:!0}):function Dl(S,R,w,k){return(0,m.D)(S).pipe((0,ze.z)(z=>function cl(S,R,w,k,z){const re=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!re||0===re.length)return(0,q.of)(!0);const se=re.map(rt=>{var Tt;const un=null!==(Tt=rs(R))&&void 0!==Tt?Tt:z,Gn=K(rt,un);return Ht(function L(S){return S&&Ar(S.canDeactivate)}(Gn)?Gn.canDeactivate(S,R,w,k):un.runInContext(()=>Gn(S,R,w,k))).pipe((0,Ae.P)())});return(0,q.of)(se).pipe($n())}(z.component,z.route,w,R,k)),(0,Ae.P)(z=>!0!==z,!0))}(se,k,z,S).pipe((0,ze.z)(rt=>rt&&function Nn(S){return"boolean"==typeof S}(rt)?function is(S,R,w,k){return(0,m.D)(R).pipe((0,Y.b)(z=>(0,Ce.z)(function ja(S,R){return null!==S&&R&&R(new Wt(S)),(0,q.of)(!0)}(z.route.parent,k),function fu(S,R){return null!==S&&R&&R(new Qn(S)),(0,q.of)(!0)}(z.route,k),function Tl(S,R,w){const k=R[R.length-1],re=R.slice(0,R.length-1).reverse().map(se=>function D(S){const R=S.routeConfig?S.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:S,guards:R}:null}(se)).filter(se=>null!==se).map(se=>(0,we.P)(()=>{const rt=se.guards.map(Tt=>{var un;const Gn=null!==(un=rs(se.node))&&void 0!==un?un:w,xn=K(Tt,Gn);return Ht(function H(S){return S&&Ar(S.canActivateChild)}(xn)?xn.canActivateChild(k,S):Gn.runInContext(()=>xn(k,S))).pipe((0,Ae.P)())});return(0,q.of)(rt).pipe($n())}));return(0,q.of)(re).pipe($n())}(S,z.path,w),function ro(S,R,w){const k=R.routeConfig?R.routeConfig.canActivate:null;if(!k||0===k.length)return(0,q.of)(!0);const z=k.map(re=>(0,we.P)(()=>{var se;const rt=null!==(se=rs(R))&&void 0!==se?se:w,Tt=K(re,rt);return Ht(function W(S){return S&&Ar(S.canActivate)}(Tt)?Tt.canActivate(R,S):rt.runInContext(()=>Tt(R,S))).pipe((0,Ae.P)())}));return(0,q.of)(z).pipe($n())}(S,z.route,w))),(0,Ae.P)(z=>!0!==z,!0))}(k,re,S,R):(0,q.of)(rt)),(0,Xe.U)(rt=>({...w,guardsResult:rt})))})}(this.environmentInjector,se=>this.events.next(se)),(0,ht.b)(se=>{if(k.guardsResult=se.guardsResult,xt(se.guardsResult))throw ls(0,se.guardsResult);const rt=new Je(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(se.urlAfterRedirects),se.targetSnapshot,!!se.guardsResult);this.events.next(rt)}),(0,dt.h)(se=>!!se.guardsResult||(w.restoreHistory(se),this.cancelNavigationTransition(se,"",3),!1)),Tr(se=>{if(se.guards.canActivateChecks.length)return(0,q.of)(se).pipe((0,ht.b)(rt=>{const Tt=new nt(rt.id,this.urlSerializer.serialize(rt.extractedUrl),this.urlSerializer.serialize(rt.urlAfterRedirects),rt.targetSnapshot);this.events.next(Tt)}),(0,Te.w)(rt=>{let Tt=!1;return(0,q.of)(rt).pipe(function V(S,R){return(0,ze.z)(w=>{const{targetSnapshot:k,guards:{canActivateChecks:z}}=w;if(!z.length)return(0,q.of)(w);let re=0;return(0,m.D)(z).pipe((0,Y.b)(se=>function le(S,R,w,k){const z=S.routeConfig,re=S._resolve;return void 0!==(null==z?void 0:z.title)&&!kn(z)&&(re[jt]=z.title),function $e(S,R,w,k){const z=function Ut(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===z.length)return(0,q.of)({});const re={};return(0,m.D)(z).pipe((0,ze.z)(se=>function qt(S,R,w,k){var z;const re=null!==(z=rs(R))&&void 0!==z?z:k,se=K(S,re);return Ht(se.resolve?se.resolve(R,w):re.runInContext(()=>se(R,w)))}(S[se],R,w,k).pipe((0,Ae.P)(),(0,ht.b)(rt=>{re[se]=rt}))),it(1),(0,qe.h)(re),(0,Ke.K)(se=>Oi(se)?De.E:(0,Se._)(se)))}(re,S,R,k).pipe((0,Xe.U)(se=>(S._resolvedData=se,S.data=Ks(S,w).resolve,z&&kn(z)&&(S.data[jt]=z.title),null)))}(se.route,k,S,R)),(0,ht.b)(()=>re++),it(1),(0,ze.z)(se=>re===z.length?(0,q.of)(w):De.E))})}(w.paramsInheritanceStrategy,this.environmentInjector),(0,ht.b)({next:()=>Tt=!0,complete:()=>{Tt||(w.restoreHistory(rt),this.cancelNavigationTransition(rt,"",2))}}))}),(0,ht.b)(rt=>{const Tt=new Lt(rt.id,this.urlSerializer.serialize(rt.extractedUrl),this.urlSerializer.serialize(rt.urlAfterRedirects),rt.targetSnapshot);this.events.next(Tt)}))}),Tr(se=>{const rt=Tt=>{var un;const Gn=[];null!==(un=Tt.routeConfig)&&void 0!==un&&un.loadComponent&&!Tt.routeConfig._loadedComponent&&Gn.push(this.configLoader.loadComponent(Tt.routeConfig).pipe((0,ht.b)(xn=>{Tt.component=xn}),(0,Xe.U)(()=>{})));for(const xn of Tt.children)Gn.push(...rt(xn));return Gn};return(0,Pe.a)(rt(se.targetSnapshot.root)).pipe((0,Ve.d)(),(0,Ie.q)(1))}),Tr(()=>this.afterPreactivation()),(0,Xe.U)(se=>{const rt=function Fo(S,R,w){const k=Os(S,R._root,w?w._root:void 0);return new qr(k,R)}(w.routeReuseStrategy,se.targetSnapshot,se.currentRouterState);return k={...se,targetRouterState:rt}}),(0,ht.b)(se=>{w.currentUrlTree=se.urlAfterRedirects,w.rawUrlTree=w.urlHandlingStrategy.merge(se.urlAfterRedirects,se.rawUrl),w.routerState=se.targetRouterState,"deferred"===w.urlUpdateStrategy&&(se.extras.skipLocationChange||w.setBrowserUrl(w.rawUrlTree,se),w.browserUrlTree=se.urlAfterRedirects)}),((S,R,w)=>(0,Xe.U)(k=>(new cs(R,k.targetRouterState,k.currentRouterState,w).activate(S),k)))(this.rootContexts,w.routeReuseStrategy,se=>this.events.next(se)),(0,Ie.q)(1),(0,ht.b)({next:se=>{var rt;z=!0,this.lastSuccessfulNavigation=this.currentNavigation,w.navigated=!0,this.events.next(new $i(se.id,this.urlSerializer.serialize(se.extractedUrl),this.urlSerializer.serialize(w.currentUrlTree))),null===(rt=w.titleStrategy)||void 0===rt||rt.updateTitle(se.targetRouterState.snapshot),se.resolve(!0)},complete:()=>{z=!0}}),(0,We.x)(()=>{var se;z||re||this.cancelNavigationTransition(k,"",1),(null===(se=this.currentNavigation)||void 0===se?void 0:se.id)===k.id&&(this.currentNavigation=null)}),(0,Ke.K)(se=>{if(re=!0,us(se)){$a(se)||(w.navigated=!0,w.restoreHistory(k,!0));const Tt=new ei(k.id,this.urlSerializer.serialize(k.extractedUrl),se.message,se.cancellationCode);if(this.events.next(Tt),$a(se)){const un=w.urlHandlingStrategy.merge(se.url,w.rawUrlTree),Gn={skipLocationChange:k.extras.skipLocationChange,replaceUrl:"eager"===w.urlUpdateStrategy||Cs(k.source)};w.scheduleNavigation(un,Rr,null,Gn,{resolve:k.resolve,reject:k.reject,promise:k.promise})}else k.resolve(!1)}else{var rt;w.restoreHistory(k,!0);const Tt=new Me(k.id,this.urlSerializer.serialize(k.extractedUrl),se,null!==(rt=k.targetSnapshot)&&void 0!==rt?rt:void 0);this.events.next(Tt);try{k.resolve(w.errorHandler(se))}catch(un){k.reject(un)}}return De.E}))}))}cancelNavigationTransition(w,k,z){const re=new ei(w.id,this.urlSerializer.serialize(w.extractedUrl),k,z);this.events.next(re),w.resolve(!1)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Cs(S){return S!==Rr}let Ys=(()=>{class S{buildTitle(w){let k,z=w.root;for(;void 0!==z;){var re;k=null!==(re=this.getResolvedTitleForRoute(z))&&void 0!==re?re:k,z=z.children.find(se=>se.outlet===St)}return k}getResolvedTitleForRoute(w){return w.data[jt]}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(Fs)},providedIn:"root"}),S})(),Fs=(()=>{class S extends Ys{constructor(w){super(),this.title=w}updateTitle(w){const k=this.buildTitle(w);void 0!==k&&this.title.setTitle(k)}}return S.\u0275fac=function(w){return new(w||S)(y.LFG(mt.Dx))},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),vo=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(jo)},providedIn:"root"}),S})();class Eo{shouldDetach(R){return!1}store(R,w){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,w){return R.routeConfig===w.routeConfig}}let jo=(()=>{class S extends Eo{}return S.\u0275fac=function(){let R;return function(k){return(R||(R=y.n5z(S)))(k||S)}}(),S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const fl=new y.OlP("",{providedIn:"root",factory:()=>({})});let Yc=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(Ca)},providedIn:"root"}),S})(),Ca=(()=>{class S{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,k){return w}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Ds(S){throw S}function Ls(S,R,w){return R.parse("/")}const xl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fs=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var w;if("computed"===this.canceledNavigationResolution)return null===(w=this.location.getState())||void 0===w?void 0:w.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var w;this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this.options=(0,y.f3M)(fl,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Ds,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ls,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(Yc),this.routeReuseStrategy=(0,y.f3M)(vo),this.urlCreationStrategy=(0,y.f3M)(It),this.titleStrategy=(0,y.f3M)(Ys),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Un(null!==(w=(0,y.f3M)(Br,{optional:!0}))&&void 0!==w?w:[]),this.navigationTransitions=(0,y.f3M)(so),this.urlSerializer=(0,y.f3M)(kr),this.location=(0,y.f3M)(Le.Ye),this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new wn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bs(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(k=>{var z;this.lastSuccessfulId=k.id,this.currentPageId=null!==(z=this.browserPageId)&&void 0!==z?z:0},k=>{this.console.warn(`Unhandled Navigation Error: ${k}`)})}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const w=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Rr,w)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const k="popstate"===w.type?"popstate":"hashchange";"popstate"===k&&setTimeout(()=>{this.navigateToSyncWithBrowser(w.url,k,w.state)},0)}))}navigateToSyncWithBrowser(w,k,z){const re={replaceUrl:!0},se=null!=z&&z.navigationId?z:null;if(z){const Tt={...z};delete Tt.navigationId,delete Tt.\u0275routerPageId,0!==Object.keys(Tt).length&&(re.state=Tt)}const rt=this.parseUrl(w);this.scheduleNavigation(rt,k,se,re)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(w){this.config=w.map(Xo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,k={}){const{relativeTo:z,queryParams:re,fragment:se,queryParamsHandling:rt,preserveFragment:Tt}=k,un=Tt?this.currentUrlTree.fragment:se;let Gn=null;switch(rt){case"merge":Gn={...this.currentUrlTree.queryParams,...re};break;case"preserve":Gn=this.currentUrlTree.queryParams;break;default:Gn=re||null}return null!==Gn&&(Gn=this.removeEmptyProps(Gn)),this.urlCreationStrategy.createUrlTree(z,this.routerState,this.currentUrlTree,w,Gn,null!=un?un:null)}navigateByUrl(w,k={skipLocationChange:!1}){const z=xt(w)?w:this.parseUrl(w),re=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(re,Rr,null,k)}navigate(w,k={skipLocationChange:!1}){return function dn(S){for(let R=0;R<S.length;R++){const w=S[R];if(null==w)throw new y.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,k),k)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let k;try{k=this.urlSerializer.parse(w)}catch(z){k=this.malformedUriErrorHandler(z,this.urlSerializer,w)}return k}isActive(w,k){let z;if(z=!0===k?{...xl}:!1===k?{...Jl}:k,xt(w))return dr(this.currentUrlTree,w,z);const re=this.parseUrl(w);return dr(this.currentUrlTree,re,z)}removeEmptyProps(w){return Object.keys(w).reduce((k,z)=>{const re=w[z];return null!=re&&(k[z]=re),k},{})}scheduleNavigation(w,k,z,re,se){if(this.disposed)return Promise.resolve(!1);let rt,Tt,un,Gn;if(se?(rt=se.resolve,Tt=se.reject,un=se.promise):un=new Promise((xi,xr)=>{rt=xi,Tt=xr}),"computed"===this.canceledNavigationResolution)if(z&&z.\u0275routerPageId)Gn=z.\u0275routerPageId;else{var xn;Gn=(null!==(xn=this.browserPageId)&&void 0!==xn?xn:0)+1}else Gn=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:Gn,source:k,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:re,resolve:rt,reject:Tt,promise:un,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),un.catch(xi=>Promise.reject(xi))}setBrowserUrl(w,k){const z=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo(z)||k.extras.replaceUrl){const se={...k.extras.state,...this.generateNgRouterState(k.id,this.browserPageId)};this.location.replaceState(z,"",se)}else{const re={...k.extras.state,...this.generateNgRouterState(k.id,k.targetPageId)};this.location.go(z,"",re)}}restoreHistory(w,k=!1){if("computed"===this.canceledNavigationResolution){var z,re;const se=null!==(z=this.browserPageId)&&void 0!==z?z:this.currentPageId,rt=this.currentPageId-se;0!==rt?this.location.historyGo(rt):this.currentUrlTree===(null===(re=this.getCurrentNavigation())||void 0===re?void 0:re.finalUrl)&&0===rt&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(k&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,k){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:k}:{navigationId:w}}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),jr=(()=>{class S{constructor(w,k,z,re,se,rt){var Tt;this.router=w,this.route=k,this.tabIndexAttribute=z,this.renderer=re,this.el=se,this.locationStrategy=rt,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new je.x;const un=null===(Tt=se.nativeElement.tagName)||void 0===Tt?void 0:Tt.toLowerCase();this.isAnchorElement="a"===un||"area"===un,this.isAnchorElement?this.subscription=w.events.subscribe(Gn=>{Gn instanceof $i&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(w){this._preserveFragment=(0,y.D6c)(w)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(w){this._skipLocationChange=(0,y.D6c)(w)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(w){this._replaceUrl=(0,y.D6c)(w)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,k,z,re,se){return!!(null===this.urlTree||this.isAnchorElement&&(0!==w||k||z||re||se||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var w;null===(w=this.subscription)||void 0===w||w.unsubscribe()}updateHref(){var w;this.href=null!==this.urlTree&&this.locationStrategy?null===(w=this.locationStrategy)||void 0===w?void 0:w.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const k=null===this.href?null:(0,y.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",k)}applyAttributeValue(w,k){const z=this.renderer,re=this.el.nativeElement;null!==k?z.setAttribute(re,w,k):z.removeAttribute(re,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return S.\u0275fac=function(w){return new(w||S)(y.Y36(fs),y.Y36(Yr),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Le.S$))},S.\u0275dir=y.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(w,k){1&w&&y.NdJ("click",function(re){return k.onClick(re.button,re.ctrlKey,re.shiftKey,re.altKey,re.metaKey)}),2&w&&y.uIk("target",k.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[y.TTD]}),S})(),Ts=(()=>{class S{get isActive(){return this._isActive}constructor(w,k,z,re,se){this.router=w,this.element=k,this.renderer=z,this.cdr=re,this.link=se,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new y.vpe,this.routerEventsSubscription=w.events.subscribe(rt=>{rt instanceof $i&&this.update()})}ngAfterContentInit(){(0,q.of)(this.links.changes,(0,q.of)(null)).pipe((0,_t.J)()).subscribe(w=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var w;null===(w=this.linkInputChangesSubscription)||void 0===w||w.unsubscribe();const k=[...this.links.toArray(),this.link].filter(z=>!!z).map(z=>z.onChanges);this.linkInputChangesSubscription=(0,m.D)(k).pipe((0,_t.J)()).subscribe(z=>{this._isActive!==this.isLinkActive(this.router)(z)&&this.update()})}set routerLinkActive(w){const k=Array.isArray(w)?w:w.split(" ");this.classes=k.filter(z=>!!z)}ngOnChanges(w){this.update()}ngOnDestroy(){var w;this.routerEventsSubscription.unsubscribe(),null===(w=this.linkInputChangesSubscription)||void 0===w||w.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const w=this.hasActiveLinks();this._isActive!==w&&(this._isActive=w,this.cdr.markForCheck(),this.classes.forEach(k=>{w?this.renderer.addClass(this.element.nativeElement,k):this.renderer.removeClass(this.element.nativeElement,k)}),w&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(w))})}isLinkActive(w){const k=function pu(S){return!!S.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return z=>!!z.urlTree&&w.isActive(z.urlTree,k)}hasActiveLinks(){const w=this.isLinkActive(this.router);return this.link&&w(this.link)||this.links.some(w)}}return S.\u0275fac=function(w){return new(w||S)(y.Y36(fs),y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(y.sBO),y.Y36(jr,8))},S.\u0275dir=y.lG2({type:S,selectors:[["","routerLinkActive",""]],contentQueries:function(w,k,z){if(1&w&&y.Suo(z,jr,5),2&w){let re;y.iGM(re=y.CRH())&&(k.links=re)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[y.TTD]}),S})();class zn{}let Fn=(()=>{class S{constructor(w,k,z,re,se){this.router=w,this.injector=z,this.preloadingStrategy=re,this.loader=se}setUpPreloading(){this.subscription=this.router.events.pipe((0,dt.h)(w=>w instanceof $i),(0,Y.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,k){const z=[];for(const Tt of k){var re,se;Tt.providers&&!Tt._injector&&(Tt._injector=(0,y.MMx)(Tt.providers,w,`Route: ${Tt.path}`));const un=null!==(re=Tt._injector)&&void 0!==re?re:w,Gn=null!==(se=Tt._loadedInjector)&&void 0!==se?se:un;var rt;(Tt.loadChildren&&!Tt._loadedRoutes&&void 0===Tt.canLoad||Tt.loadComponent&&!Tt._loadedComponent)&&z.push(this.preloadConfig(un,Tt)),(Tt.children||Tt._loadedRoutes)&&z.push(this.processRoutes(Gn,null!==(rt=Tt.children)&&void 0!==rt?rt:Tt._loadedRoutes))}return(0,m.D)(z).pipe((0,_t.J)())}preloadConfig(w,k){return this.preloadingStrategy.preload(k,()=>{let z;z=k.loadChildren&&void 0===k.canLoad?this.loader.loadChildren(w,k):(0,q.of)(null);const re=z.pipe((0,ze.z)(se=>{var rt;return null===se?(0,q.of)(void 0):(k._loadedRoutes=se.routes,k._loadedInjector=se.injector,this.processRoutes(null!==(rt=se.injector)&&void 0!==rt?rt:w,se.routes))}));if(k.loadComponent&&!k._loadedComponent){const se=this.loader.loadComponent(k);return(0,m.D)([re,se]).pipe((0,_t.J)())}return re})}}return S.\u0275fac=function(w){return new(w||S)(y.LFG(fs),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(zn),y.LFG(Er))},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Ot=new y.OlP("");let an=(()=>{class S{constructor(w,k,z,re,se={}){this.urlSerializer=w,this.transitions=k,this.viewportScroller=z,this.zone=re,this.options=se,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},se.scrollPositionRestoration=se.scrollPositionRestoration||"disabled",se.anchorScrolling=se.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof ui?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof $i&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof ar&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,k){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ar(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,k))})},0)})}ngOnDestroy(){var w,k;null===(w=this.routerEventsSubscription)||void 0===w||w.unsubscribe(),null===(k=this.scrollEventsSubscription)||void 0===k||k.unsubscribe()}}return S.\u0275fac=function(w){y.$Z()},S.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac}),S})();var Ir=(()=>((Ir=Ir||{})[Ir.COMPLETE=0]="COMPLETE",Ir[Ir.FAILED=1]="FAILED",Ir[Ir.REDIRECTING=2]="REDIRECTING",Ir))();const ea=!1;function gu(S,...R){return(0,y.MR2)([{provide:Br,multi:!0,useValue:S},ea?{provide:mu,useValue:!0}:[],{provide:Yr,useFactory:Pl,deps:[fs]},{provide:y.tb,multi:!0,useFactory:yu},R.map(w=>w.\u0275providers)])}function Pl(S){return S.routerState.root}function Da(S,R){return{\u0275kind:S,\u0275providers:R}}const mu=new y.OlP("",{providedIn:"root",factory:()=>!1});function yu(){const S=(0,y.f3M)(y.zs3);return R=>{var w,k;const z=S.get(y.z2F);if(R!==z.components[0])return;const re=S.get(fs),se=S.get(pl);1===S.get(hr)&&re.initialNavigation(),null===(w=S.get(qn,null,y.XFs.Optional))||void 0===w||w.setUpPreloading(),null===(k=S.get(Ot,null,y.XFs.Optional))||void 0===k||k.init(),re.resetRootComponentType(z.componentTypes[0]),se.closed||(se.next(),se.complete(),se.unsubscribe())}}const pl=new y.OlP(ea?"bootstrap done indicator":"",{factory:()=>new je.x}),hr=new y.OlP(ea?"initial navigation":"",{providedIn:"root",factory:()=>1});function Xi(){let S=[];return S=ea?[{provide:y.Xts,multi:!0,useFactory:()=>{const R=(0,y.f3M)(fs);return()=>R.events.subscribe(w=>{var k,z,re,se;null===(k=(z=console).group)||void 0===k||k.call(z,`Router Event: ${w.constructor.name}`),console.log(function Fi(S){var R,w,k,z;if(!("type"in S))return`Unknown Router Event: ${S.constructor.name}`;switch(S.type){case 14:return`ActivationEnd(path: '${(null===(R=S.snapshot.routeConfig)||void 0===R?void 0:R.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(w=S.snapshot.routeConfig)||void 0===w?void 0:w.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(k=S.snapshot.routeConfig)||void 0===k?void 0:k.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(z=S.snapshot.routeConfig)||void 0===z?void 0:z.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state}, shouldActivate: ${S.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 2:return`NavigationCancel(id: ${S.id}, url: '${S.url}')`;case 16:return`NavigationSkipped(id: ${S.id}, url: '${S.url}')`;case 1:return`NavigationEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${S.id}, url: '${S.url}', error: ${S.error})`;case 0:return`NavigationStart(id: ${S.id}, url: '${S.url}')`;case 6:return`ResolveEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 5:return`ResolveStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 10:return`RouteConfigLoadEnd(path: ${S.route.path})`;case 9:return`RouteConfigLoadStart(path: ${S.route.path})`;case 4:return`RoutesRecognized(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 15:return`Scroll(anchor: '${S.anchor}', position: '${S.position?`${S.position[0]}, ${S.position[1]}`:null}')`}}(w)),console.log(w),null===(re=(se=console).groupEnd)||void 0===re||re.call(se)})}}]:[],Da(1,S)}const qn=new y.OlP(ea?"router preloader":"");function Za(S){return Da(0,[{provide:qn,useExisting:Fn},{provide:zn,useExisting:S}])}const An=!1,Ol=new y.OlP(An?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Qa=[Le.Ye,{provide:kr,useClass:ai},fs,Vs,{provide:Yr,useFactory:Pl,deps:[fs]},Er,An?{provide:mu,useValue:!0}:[]];function Oh(){return new y.PXZ("Router",fs)}let Gu=(()=>{class S{constructor(w){}static forRoot(w,k){return{ngModule:S,providers:[Qa,An&&null!=k&&k.enableTracing?Xi().\u0275providers:[],{provide:Br,multi:!0,useValue:w},{provide:Ol,useFactory:ps,deps:[[fs,new y.FiY,new y.tp0]]},{provide:fl,useValue:k||{}},null!=k&&k.useHash?{provide:Le.S$,useClass:Le.Do}:{provide:Le.S$,useClass:Le.b0},{provide:Ot,useFactory:()=>{const S=(0,y.f3M)(Le.EM),R=(0,y.f3M)(y.R0b),w=(0,y.f3M)(fl),k=(0,y.f3M)(so),z=(0,y.f3M)(kr);return w.scrollOffset&&S.setOffset(w.scrollOffset),new an(z,k,S,R,w)}},null!=k&&k.preloadingStrategy?Za(k.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:Oh},null!=k&&k.initialNavigation?zs(k):[],[{provide:gl,useFactory:yu},{provide:y.tb,multi:!0,useExisting:gl}]]}}static forChild(w){return{ngModule:S,providers:[{provide:Br,multi:!0,useValue:w}]}}}return S.\u0275fac=function(w){return new(w||S)(y.LFG(Ol,8))},S.\u0275mod=y.oAB({type:S}),S.\u0275inj=y.cJS({imports:[Lo]}),S})();function ps(S){if(An&&S)throw new y.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function zs(S){return["disabled"===S.initialNavigation?Da(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const R=(0,y.f3M)(fs);return()=>{R.setUpLocationChangeListener()}}},{provide:hr,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?Da(2,[{provide:hr,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:R=>{const w=R.get(Le.V_,Promise.resolve());return()=>w.then(()=>new Promise(k=>{const z=R.get(fs),re=R.get(pl);(function ju(S,R){S.events.pipe((0,dt.h)(w=>w instanceof $i||w instanceof ei||w instanceof Me||w instanceof ce),(0,Xe.U)(w=>w instanceof $i||w instanceof ce?Ir.COMPLETE:w instanceof ei&&(0===w.code||1===w.code)?Ir.REDIRECTING:Ir.FAILED),(0,dt.h)(w=>w!==Ir.REDIRECTING),(0,Ie.q)(1)).subscribe(()=>{R()})})(z,()=>{k(!0)}),R.get(so).afterPreactivation=()=>(k(!0),re.closed?(0,q.of)(void 0):re),z.initialNavigation()}))}}]).\u0275providers:[]]}const gl=new y.OlP(An?"Router Initializer":"")},3942:(ln,at,B)=>{"use strict";B.d(at,{Z:()=>Le});var y=B(2090),m=B(4859),q=B(6881),oe=B(1877);class xe{constructor(Te,Ie){this._delegate=Te,this.firebase=Ie,(0,q._addComponent)(Te,new m.wA("app-compat",()=>this,"PUBLIC")),this.container=Te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this._delegate.automaticDataCollectionEnabled=Te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Te=>{this._delegate.checkDestroyed(),Te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(Te,Ie=q._DEFAULT_ENTRY_NAME){var ae;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(Te);return!dt.isInitialized()&&"EXPLICIT"===(null===(ae=dt.getComponent())||void 0===ae?void 0:ae.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:Ie})}_removeServiceInstance(Te,Ie=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Te).clearInstance(Ie)}_addComponent(Te){(0,q._addComponent)(this._delegate,Te)}_addOrOverwriteComponent(Te){(0,q._addOrOverwriteComponent)(this._delegate,Te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Se=function He(){const Xe=function we(Xe){const Te={},Ie={__esModule:!0,initializeApp:function ze(Ke,fe={}){const Ct=q.initializeApp(Ke,fe);if((0,y.r3)(Te,Ct.name))return Te[Ct.name];const Ue=new Xe(Ct,Ie);return Te[Ct.name]=Ue,Ue},app:dt,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function Y(Ke){const fe=Ke.name,Ct=fe.replace("-compat","");if(q._registerComponent(Ke)&&"PUBLIC"===Ke.type){const Ue=(it=dt())=>{if("function"!=typeof it[Ct])throw Ce.create("invalid-app-argument",{appName:fe});return it[Ct]()};void 0!==Ke.serviceProps&&(0,y.ZB)(Ue,Ke.serviceProps),Ie[Ct]=Ue,Xe.prototype[Ct]=function(...it){return this._getService.bind(this,fe).apply(this,Ke.multipleInstances?it:[])}}return"PUBLIC"===Ke.type?Ie[Ct]:null},removeApp:function ae(Ke){delete Te[Ke]},useAsService:function ht(Ke,fe){return"serverAuth"===fe?null:fe},modularAPIs:q}};function dt(Ke){if(!(0,y.r3)(Te,Ke=Ke||q._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Ke});return Te[Ke]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function Ae(){return Object.keys(Te).map(Ke=>Te[Ke])}}),dt.App=Xe,Ie}(xe);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:He,extendNamespace:function Te(Ie){(0,y.ZB)(Xe,Ie)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),Xe}(),me=new oe.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=Se;!function je(Xe){(0,q.registerVersion)("@firebase/app-compat","0.2.9",Xe)}()},6881:(ln,at,B)=>{"use strict";B.r(at),B.d(at,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>yi,_DEFAULT_ENTRY_NAME:()=>Ri,_addComponent:()=>wn,_addOrOverwriteComponent:()=>sn,_apps:()=>Dr,_clearComponents:()=>Ci,_components:()=>Xn,_getProvider:()=>Xr,_registerComponent:()=>Nr,_removeServiceInstance:()=>pr,deleteApp:()=>ni,getApp:()=>Di,getApps:()=>tr,initializeApp:()=>sr,onLog:()=>Sr,registerVersion:()=>ri,setLogLevel:()=>_i});var y=B(5861),m=B(4859),q=B(1877),oe=B(2090);const xe=(kt,At)=>At.some(nn=>kt instanceof nn);let Pe,Ce;const Se=new WeakMap,me=new WeakMap,De=new WeakMap,ke=new WeakMap,je=new WeakMap;let Te={get(kt,At,nn){if(kt instanceof IDBTransaction){if("done"===At)return me.get(kt);if("objectStoreNames"===At)return kt.objectStoreNames||De.get(kt);if("store"===At)return nn.objectStoreNames[1]?void 0:nn.objectStore(nn.objectStoreNames[0])}return ze(kt[At])},set:(kt,At,nn)=>(kt[At]=nn,!0),has:(kt,At)=>kt instanceof IDBTransaction&&("done"===At||"store"===At)||At in kt};function dt(kt){return"function"==typeof kt?function ae(kt){return kt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function He(){return Ce||(Ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(kt)?function(...At){return kt.apply(Ae(this),At),ze(Se.get(this))}:function(...At){return ze(kt.apply(Ae(this),At))}:function(At,...nn){const On=kt.call(Ae(this),At,...nn);return De.set(On,At.sort?At.sort():[At]),ze(On)}}(kt):(kt instanceof IDBTransaction&&function Xe(kt){if(me.has(kt))return;const At=new Promise((nn,On)=>{const Jn=()=>{kt.removeEventListener("complete",vr),kt.removeEventListener("error",Tn),kt.removeEventListener("abort",Tn)},vr=()=>{nn(),Jn()},Tn=()=>{On(kt.error||new DOMException("AbortError","AbortError")),Jn()};kt.addEventListener("complete",vr),kt.addEventListener("error",Tn),kt.addEventListener("abort",Tn)});me.set(kt,At)}(kt),xe(kt,function we(){return Pe||(Pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(kt,Te):kt)}function ze(kt){if(kt instanceof IDBRequest)return function Le(kt){const At=new Promise((nn,On)=>{const Jn=()=>{kt.removeEventListener("success",vr),kt.removeEventListener("error",Tn)},vr=()=>{nn(ze(kt.result)),Jn()},Tn=()=>{On(kt.error),Jn()};kt.addEventListener("success",vr),kt.addEventListener("error",Tn)});return At.then(nn=>{nn instanceof IDBCursor&&Se.set(nn,kt)}).catch(()=>{}),je.set(At,kt),At}(kt);if(ke.has(kt))return ke.get(kt);const At=dt(kt);return At!==kt&&(ke.set(kt,At),je.set(At,kt)),At}const Ae=kt=>je.get(kt),Ke=["get","getKey","getAll","getAllKeys","count"],fe=["put","add","delete","clear"],Ct=new Map;function Ue(kt,At){if(!(kt instanceof IDBDatabase)||At in kt||"string"!=typeof At)return;if(Ct.get(At))return Ct.get(At);const nn=At.replace(/FromIndex$/,""),On=At!==nn,Jn=fe.includes(nn);if(!(nn in(On?IDBIndex:IDBObjectStore).prototype)||!Jn&&!Ke.includes(nn))return;const vr=function(){var Tn=(0,y.Z)(function*(Fr,...wr){const jn=this.transaction(Fr,Jn?"readwrite":"readonly");let Wn=jn.store;return On&&(Wn=Wn.index(wr.shift())),(yield Promise.all([Wn[nn](...wr),Jn&&jn.done]))[0]});return function(wr){return Tn.apply(this,arguments)}}();return Ct.set(At,vr),vr}!function Ie(kt){Te=kt(Te)}(kt=>({...kt,get:(At,nn,On)=>Ue(At,nn)||kt.get(At,nn,On),has:(At,nn)=>!!Ue(At,nn)||kt.has(At,nn)}));class it{constructor(At){this.container=At}getPlatformInfoString(){return this.container.getProviders().map(nn=>{if(function Et(kt){const At=kt.getComponent();return"VERSION"===(null==At?void 0:At.type)}(nn)){const On=nn.getImmediate();return`${On.library}/${On.version}`}return null}).filter(nn=>nn).join(" ")}}const Ve="@firebase/app",wt=new q.Yd("@firebase/app"),Ri="[DEFAULT]",bi={[Ve]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Dr=new Map,Xn=new Map;function wn(kt,At){try{kt.container.addComponent(At)}catch(nn){wt.debug(`Component ${At.name} failed to register with FirebaseApp ${kt.name}`,nn)}}function sn(kt,At){kt.container.addOrOverwriteComponent(At)}function Nr(kt){const At=kt.name;if(Xn.has(At))return wt.debug(`There were multiple attempts to register component ${At}.`),!1;Xn.set(At,kt);for(const nn of Dr.values())wn(nn,kt);return!0}function Xr(kt,At){const nn=kt.container.getProvider("heartbeat").getImmediate({optional:!0});return nn&&nn.triggerHeartbeat(),kt.container.getProvider(At)}function pr(kt,At,nn=Ri){Xr(kt,At).clearInstance(nn)}function Ci(){Xn.clear()}const ai=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class _r{constructor(At,nn,On){this._isDeleted=!1,this._options=Object.assign({},At),this._config=Object.assign({},nn),this._name=nn.name,this._automaticDataCollectionEnabled=nn.automaticDataCollectionEnabled,this._container=On,this.container.addComponent(new m.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(At){this.checkDestroyed(),this._automaticDataCollectionEnabled=At}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(At){this._isDeleted=At}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}const yi="9.21.0";function sr(kt,At={}){let nn=kt;"object"!=typeof At&&(At={name:At});const On=Object.assign({name:Ri,automaticDataCollectionEnabled:!1},At),Jn=On.name;if("string"!=typeof Jn||!Jn)throw ai.create("bad-app-name",{appName:String(Jn)});if(nn||(nn=(0,oe.aH)()),!nn)throw ai.create("no-options");const vr=Dr.get(Jn);if(vr){if((0,oe.vZ)(nn,vr.options)&&(0,oe.vZ)(On,vr.config))return vr;throw ai.create("duplicate-app",{appName:Jn})}const Tn=new m.H0(Jn);for(const wr of Xn.values())Tn.addComponent(wr);const Fr=new _r(nn,On,Tn);return Dr.set(Jn,Fr),Fr}function Di(kt=Ri){const At=Dr.get(kt);if(!At&&kt===Ri)return sr();if(!At)throw ai.create("no-app",{appName:kt});return At}function tr(){return Array.from(Dr.values())}function ni(kt){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,y.Z)(function*(kt){const At=kt.name;Dr.has(At)&&(Dr.delete(At),yield Promise.all(kt.container.getProviders().map(nn=>nn.delete())),kt.isDeleted=!0)})).apply(this,arguments)}function ri(kt,At,nn){var On;let Jn=null!==(On=bi[kt])&&void 0!==On?On:kt;nn&&(Jn+=`-${nn}`);const vr=Jn.match(/\s|\//),Tn=At.match(/\s|\//);if(vr||Tn){const Fr=[`Unable to register library "${Jn}" with version "${At}":`];return vr&&Fr.push(`library name "${Jn}" contains illegal characters (whitespace or "/")`),vr&&Tn&&Fr.push("and"),Tn&&Fr.push(`version name "${At}" contains illegal characters (whitespace or "/")`),void wt.warn(Fr.join(" "))}Nr(new m.wA(`${Jn}-version`,()=>({library:Jn,version:At}),"VERSION"))}function Sr(kt,At){if(null!==kt&&"function"!=typeof kt)throw ai.create("invalid-log-argument");(0,q.Am)(kt,At)}function _i(kt){(0,q.Ub)(kt)}const Ur="firebase-heartbeat-database",Jr=1,Qe="firebase-heartbeat-store";let Be=null;function he(){return Be||(Be=function Y(kt,At,{blocked:nn,upgrade:On,blocking:Jn,terminated:vr}={}){const Tn=indexedDB.open(kt,At),Fr=ze(Tn);return On&&Tn.addEventListener("upgradeneeded",wr=>{On(ze(Tn.result),wr.oldVersion,wr.newVersion,ze(Tn.transaction),wr)}),nn&&Tn.addEventListener("blocked",wr=>nn(wr.oldVersion,wr.newVersion,wr)),Fr.then(wr=>{vr&&wr.addEventListener("close",()=>vr()),Jn&&wr.addEventListener("versionchange",jn=>Jn(jn.oldVersion,jn.newVersion,jn))}).catch(()=>{}),Fr}(Ur,Jr,{upgrade:(kt,At)=>{0===At&&kt.createObjectStore(Qe)}}).catch(kt=>{throw ai.create("idb-open",{originalErrorMessage:kt.message})})),Be}function de(){return(de=(0,y.Z)(function*(kt){try{return(yield he()).transaction(Qe).objectStore(Qe).get(Fe(kt))}catch(At){if(At instanceof oe.ZR)wt.warn(At.message);else{const nn=ai.create("idb-get",{originalErrorMessage:null==At?void 0:At.message});wt.warn(nn.message)}}})).apply(this,arguments)}function lt(kt,At){return Re.apply(this,arguments)}function Re(){return(Re=(0,y.Z)(function*(kt,At){try{const On=(yield he()).transaction(Qe,"readwrite");return yield On.objectStore(Qe).put(At,Fe(kt)),On.done}catch(nn){if(nn instanceof oe.ZR)wt.warn(nn.message);else{const On=ai.create("idb-set",{originalErrorMessage:null==nn?void 0:nn.message});wt.warn(On.message)}}})).apply(this,arguments)}function Fe(kt){return`${kt.name}!${kt.options.appId}`}class xt{constructor(At){this.container=At,this._heartbeatsCache=null;const nn=this.container.getProvider("app").getImmediate();this._storage=new mn(nn),this._heartbeatsCachePromise=this._storage.read().then(On=>(this._heartbeatsCache=On,On))}triggerHeartbeat(){var At=this;return(0,y.Z)(function*(){const On=At.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Jn=Yt();if(null===At._heartbeatsCache&&(At._heartbeatsCache=yield At._heartbeatsCachePromise),At._heartbeatsCache.lastSentHeartbeatDate!==Jn&&!At._heartbeatsCache.heartbeats.some(vr=>vr.date===Jn))return At._heartbeatsCache.heartbeats.push({date:Jn,agent:On}),At._heartbeatsCache.heartbeats=At._heartbeatsCache.heartbeats.filter(vr=>{const Tn=new Date(vr.date).valueOf();return Date.now()-Tn<=2592e6}),At._storage.overwrite(At._heartbeatsCache)})()}getHeartbeatsHeader(){var At=this;return(0,y.Z)(function*(){if(null===At._heartbeatsCache&&(yield At._heartbeatsCachePromise),null===At._heartbeatsCache||0===At._heartbeatsCache.heartbeats.length)return"";const nn=Yt(),{heartbeatsToSend:On,unsentEntries:Jn}=function gn(kt,At=1024){const nn=[];let On=kt.slice();for(const Jn of kt){const vr=nn.find(Tn=>Tn.agent===Jn.agent);if(vr){if(vr.dates.push(Jn.date),nr(nn)>At){vr.dates.pop();break}}else if(nn.push({agent:Jn.agent,dates:[Jn.date]}),nr(nn)>At){nn.pop();break}On=On.slice(1)}return{heartbeatsToSend:nn,unsentEntries:On}}(At._heartbeatsCache.heartbeats),vr=(0,oe.L)(JSON.stringify({version:2,heartbeats:On}));return At._heartbeatsCache.lastSentHeartbeatDate=nn,Jn.length>0?(At._heartbeatsCache.heartbeats=Jn,yield At._storage.overwrite(At._heartbeatsCache)):(At._heartbeatsCache.heartbeats=[],At._storage.overwrite(At._heartbeatsCache)),vr})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class mn{constructor(At){this.app=At,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var At=this;return(0,y.Z)(function*(){return(yield At._canUseIndexedDBPromise)&&(yield function ye(kt){return de.apply(this,arguments)}(At.app))||{heartbeats:[]}})()}overwrite(At){var nn=this;return(0,y.Z)(function*(){var On;if(yield nn._canUseIndexedDBPromise){const vr=yield nn.read();return lt(nn.app,{lastSentHeartbeatDate:null!==(On=At.lastSentHeartbeatDate)&&void 0!==On?On:vr.lastSentHeartbeatDate,heartbeats:At.heartbeats})}})()}add(At){var nn=this;return(0,y.Z)(function*(){var On;if(yield nn._canUseIndexedDBPromise){const vr=yield nn.read();return lt(nn.app,{lastSentHeartbeatDate:null!==(On=At.lastSentHeartbeatDate)&&void 0!==On?On:vr.lastSentHeartbeatDate,heartbeats:[...vr.heartbeats,...At.heartbeats]})}})()}}function nr(kt){return(0,oe.L)(JSON.stringify({version:2,heartbeats:kt})).length}!function Wr(kt){Nr(new m.wA("platform-logger",At=>new it(At),"PRIVATE")),Nr(new m.wA("heartbeat",At=>new xt(At),"PRIVATE")),ri(Ve,"0.9.9",kt),ri(Ve,"0.9.9","esm2017"),ri("fire-js","")}("")},4859:(ln,at,B)=>{"use strict";B.d(at,{H0:()=>we,wA:()=>q,zt:()=>xe});var y=B(5861),m=B(2090);class q{constructor(Se,me,De){this.name=Se,this.instanceFactory=me,this.type=De,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Se){return this.instantiationMode=Se,this}setMultipleInstances(Se){return this.multipleInstances=Se,this}setServiceProps(Se){return this.serviceProps=Se,this}setInstanceCreatedCallback(Se){return this.onInstanceCreated=Se,this}}const oe="[DEFAULT]";class xe{constructor(Se,me){this.name=Se,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Se){const me=this.normalizeInstanceIdentifier(Se);if(!this.instancesDeferred.has(me)){const De=new m.BH;if(this.instancesDeferred.set(me,De),this.isInitialized(me)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:me});ke&&De.resolve(ke)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(Se){var me;const De=this.normalizeInstanceIdentifier(null==Se?void 0:Se.identifier),ke=null!==(me=null==Se?void 0:Se.optional)&&void 0!==me&&me;if(!this.isInitialized(De)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:De})}catch(je){if(ke)return null;throw je}}getComponent(){return this.component}setComponent(Se){if(Se.name!==this.name)throw Error(`Mismatching Component ${Se.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Se,this.shouldAutoInitialize()){if(function Ce(He){return"EAGER"===He.instantiationMode}(Se))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[me,De]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(me);try{const je=this.getOrInitializeService({instanceIdentifier:ke});De.resolve(je)}catch{}}}}clearInstance(Se=oe){this.instancesDeferred.delete(Se),this.instancesOptions.delete(Se),this.instances.delete(Se)}delete(){var Se=this;return(0,y.Z)(function*(){const me=Array.from(Se.instances.values());yield Promise.all([...me.filter(De=>"INTERNAL"in De).map(De=>De.INTERNAL.delete()),...me.filter(De=>"_delete"in De).map(De=>De._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Se=oe){return this.instances.has(Se)}getOptions(Se=oe){return this.instancesOptions.get(Se)||{}}initialize(Se={}){const{options:me={}}=Se,De=this.normalizeInstanceIdentifier(Se.instanceIdentifier);if(this.isInitialized(De))throw Error(`${this.name}(${De}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:De,options:me});for(const[je,Le]of this.instancesDeferred.entries())De===this.normalizeInstanceIdentifier(je)&&Le.resolve(ke);return ke}onInit(Se,me){var De;const ke=this.normalizeInstanceIdentifier(me),je=null!==(De=this.onInitCallbacks.get(ke))&&void 0!==De?De:new Set;je.add(Se),this.onInitCallbacks.set(ke,je);const Le=this.instances.get(ke);return Le&&Se(Le,ke),()=>{je.delete(Se)}}invokeOnInitCallbacks(Se,me){const De=this.onInitCallbacks.get(me);if(De)for(const ke of De)try{ke(Se,me)}catch{}}getOrInitializeService({instanceIdentifier:Se,options:me={}}){let De=this.instances.get(Se);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:(He=Se,He===oe?void 0:He),options:me}),this.instances.set(Se,De),this.instancesOptions.set(Se,me),this.invokeOnInitCallbacks(De,Se),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Se,De)}catch{}var He;return De||null}normalizeInstanceIdentifier(Se=oe){return this.component?this.component.multipleInstances?Se:oe:Se}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor(Se){this.name=Se,this.providers=new Map}addComponent(Se){const me=this.getProvider(Se.name);if(me.isComponentSet())throw new Error(`Component ${Se.name} has already been registered with ${this.name}`);me.setComponent(Se)}addOrOverwriteComponent(Se){this.getProvider(Se.name).isComponentSet()&&this.providers.delete(Se.name),this.addComponent(Se)}getProvider(Se){if(this.providers.has(Se))return this.providers.get(Se);const me=new xe(Se,this);return this.providers.set(Se,me),me}getProviders(){return Array.from(this.providers.values())}}},1877:(ln,at,B)=>{"use strict";B.d(at,{Am:()=>He,Ub:()=>we,Yd:()=>Ce,in:()=>m});const y=[];var m=(()=>{return(Se=m||(m={}))[Se.DEBUG=0]="DEBUG",Se[Se.VERBOSE=1]="VERBOSE",Se[Se.INFO=2]="INFO",Se[Se.WARN=3]="WARN",Se[Se.ERROR=4]="ERROR",Se[Se.SILENT=5]="SILENT",m;var Se})();const q={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},oe=m.INFO,xe={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},Pe=(Se,me,...De)=>{if(me<Se.logLevel)return;const ke=(new Date).toISOString(),je=xe[me];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[je](`[${ke}]  ${Se.name}:`,...De)};class Ce{constructor(me){this.name=me,this._logLevel=oe,this._logHandler=Pe,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in m))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?q[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...me),this._logHandler(this,m.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...me),this._logHandler(this,m.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,m.INFO,...me),this._logHandler(this,m.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,m.WARN,...me),this._logHandler(this,m.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...me),this._logHandler(this,m.ERROR,...me)}}function we(Se){y.forEach(me=>{me.setLogLevel(Se)})}function He(Se,me){for(const De of y){let ke=null;me&&me.level&&(ke=q[me.level]),De.userLogHandler=null===Se?null:(je,Le,...Xe)=>{const Te=Xe.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch{return null}}).filter(Ie=>Ie).join(" ");Le>=(null!=ke?ke:je.logLevel)&&Se({level:m[Le].toLowerCase(),message:Te,args:Xe,type:je.name})}}}},9972:(ln,at,B)=>{"use strict";B.d(at,{Br:()=>no,dr:()=>Mi,YG:()=>sn,W2:()=>Di,IJ:()=>Gr,W4:()=>ri,zq:()=>Sr,gu:()=>Qe,Xz:()=>Be,pK:()=>de,Ie:()=>lt,Q$:()=>Yt,uN:()=>Jn,d8:()=>pi,jP:()=>ls,PQ:()=>ei,Pc:()=>Va,r4:()=>Yi,Fo:()=>ys,j9:()=>Rn,yF:()=>$o});var y=B(5861),m=B(4650),q=B(4006),oe=B(655),xe=B(4968),Pe=B(7579),Ce=B(1135),we=B(6159),ke=(B(9613),B(3551),B(1138),B(1898),B(5273)),je=B(3577),Le=B(3982),Xe=B(9866),Ie=(B(8126),B(2583)),ze=(B(3457),B(4349),B(4083)),Y=B(9300),ht=B(3900),Ke=B(1884),fe=B(6895);const Ue=ke.i,Ve=["*"];function We(C,Q){if(1&C&&m.GkF(0,1),2&C){const D=m.oxw();m.Q6J("ngTemplateOutlet",D.template)}}const Ge=C=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(C):"function"==typeof requestAnimationFrame?requestAnimationFrame(C):setTimeout(C);let _t=(()=>{class C{constructor(D,K){this.injector=D,this.el=K,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(D){this.el.nativeElement.value=this.lastValue=D,mt(this.el)}handleValueChange(D,K){D===this.el.nativeElement&&(K!==this.lastValue&&(this.lastValue=K,this.onChange(K)),mt(this.el))}_handleBlurEvent(D){D===this.el.nativeElement&&(this.onTouched(),mt(this.el))}registerOnChange(D){this.onChange=D}registerOnTouched(D){this.onTouched=D}setDisabledState(D){this.el.nativeElement.disabled=D}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let D;try{D=this.injector.get(q.a5)}catch{}if(!D)return;D.statusChanges&&(this.statusChanges=D.statusChanges.subscribe(()=>mt(this.el)));const K=D.control;K&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Qt=>{if(typeof K[Qt]<"u"){const Vn=K[Qt].bind(K);K[Qt]=(...Kn)=>{Vn(...Kn),mt(this.el)}}})}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.zs3),m.Y36(m.SBq))},C.\u0275dir=m.lG2({type:C,hostBindings:function(D,K){1&D&&m.NdJ("ionBlur",function(Qt){return K._handleBlurEvent(Qt.target)})}}),C})();const mt=C=>{Ge(()=>{const Q=C.nativeElement,D=null!=Q.value&&Q.value.toString().length>0,K=St(Q);jt(Q,K);const _e=Q.closest("ion-item");_e&&jt(_e,D?[...K,"item-has-value"]:K)})},St=C=>{const Q=C.classList,D=[];for(let K=0;K<Q.length;K++){const _e=Q.item(K);null!==_e&&hn(_e,"ng-")&&D.push(`ion-${_e.substring(3)}`)}return D},jt=(C,Q)=>{const D=C.classList;D.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),D.add(...Q)},hn=(C,Q)=>C.substring(0,Q.length)===Q;let Rn=(()=>{class C extends _t{constructor(D,K){super(D,K)}_handleInputEvent(D){this.handleValueChange(D,D.value)}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.zs3),m.Y36(m.SBq))},C.\u0275dir=m.lG2({type:C,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(D,K){1&D&&m.NdJ("ionInput",function(Qt){return K._handleInputEvent(Qt.target)})},features:[m._Bn([{provide:q.JU,useExisting:C,multi:!0}]),m.qOj]}),C})();const Un=(C,Q)=>{const D=C.prototype;Q.forEach(K=>{Object.defineProperty(D,K,{get(){return this.el[K]},set(_e){this.z.runOutsideAngular(()=>this.el[K]=_e)}})})},fn=(C,Q)=>{const D=C.prototype;Q.forEach(K=>{D[K]=function(){const _e=arguments;return this.z.runOutsideAngular(()=>this.el[K].apply(this.el,_e))}})},tn=(C,Q,D)=>{D.forEach(K=>C[K]=(0,xe.R)(Q,K))};function Ht(C){return function(D){const{defineCustomElementFn:K,inputs:_e,methods:Qt}=C;return void 0!==K&&K(),_e&&Un(D,_e),Qt&&fn(D,Qt),D}}let Mi=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-app"]],ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({})],C),C})(),sn=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement,tn(this,this.el,["ionFocus","ionBlur"])}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],C),C})(),Di=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement,tn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],C),C})(),Gr=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],C),C})(),ri=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement,tn(this,this.el,["ionFocus","ionBlur"])}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],C),C})(),Sr=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-fab-list"]],inputs:{activated:"activated",side:"side"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["activated","side"]})],C),C})(),Qe=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],C),C})(),Be=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement,tn(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["alt","src"]})],C),C})(),de=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement,tn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],C),C})(),lt=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],C),C})(),Yt=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["color","mode","position"]})],C),C})(),Jn=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-note"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["color","mode"]})],C),C})(),ei=(()=>{let C=class{constructor(D,K,_e){this.z=_e,D.detach(),this.el=K.nativeElement}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},ngContentSelectors:Ve,decls:1,vars:0,template:function(D,K){1&D&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["color","duration","name","paused"]})],C),C})(),cn=(()=>{class C{get(D,K){const _e=Ln();return _e?_e.get(D,K):null}getBoolean(D,K){const _e=Ln();return!!_e&&_e.getBoolean(D,K)}getNumber(D,K){const _e=Ln();return _e?_e.getNumber(D,K):0}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Qn=new m.OlP("USERCONFIG"),Ln=()=>{if(typeof window<"u"){const C=window.Ionic;if(null!=C&&C.config)return C.config}return null};let ar=(()=>{class C{constructor(D,K){this.doc=D,this.backButton=new Pe.x,this.keyboardDidShow=new Pe.x,this.keyboardDidHide=new Pe.x,this.pause=new Pe.x,this.resume=new Pe.x,this.resize=new Pe.x,K.run(()=>{var _e;let Qt;this.win=D.defaultView,this.backButton.subscribeWithPriority=function(Vn,Kn){return this.subscribe(Ar=>Ar.register(Vn,Nn=>K.run(()=>Kn(Nn))))},Li(this.pause,D,"pause"),Li(this.resume,D,"resume"),Li(this.backButton,D,"ionBackButton"),Li(this.resize,this.win,"resize"),Li(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Li(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(Vn=>{Qt=Vn}),null!==(_e=this.win)&&void 0!==_e&&_e.cordova?D.addEventListener("deviceready",()=>{Qt("cordova")},{once:!0}):Qt("dom")})}is(D){return(0,ke.a)(this.win,D)}platforms(){return(0,ke.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(D){return Fi(this.win.location.href,D)}isLandscape(){return!this.isPortrait()}isPortrait(){var D,K;return null===(D=(K=this.win).matchMedia)||void 0===D?void 0:D.call(K,"(orientation: portrait)").matches}testUserAgent(D){const K=this.win.navigator;return!!(null!=K&&K.userAgent&&K.userAgent.indexOf(D)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return C.\u0275fac=function(D){return new(D||C)(m.LFG(fe.K0),m.LFG(m.R0b))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Fi=(C,Q)=>{Q=Q.replace(/[[\]\\]/g,"\\$&");const K=new RegExp("[\\?&]"+Q+"=([^&#]*)").exec(C);return K?decodeURIComponent(K[1].replace(/\+/g," ")):null},Li=(C,Q,D)=>{Q&&Q.addEventListener(D,K=>{C.next(null!=K?K.detail:void 0)})};let ct=(()=>{class C{constructor(D,K,_e,Qt){this.location=K,this.serializer=_e,this.router=Qt,this.direction=It,this.animated=Kt,this.guessDirection="forward",this.lastNavId=-1,Qt&&Qt.events.subscribe(Vn=>{if(Vn instanceof we.OD){const Kn=Vn.restoredState?Vn.restoredState.navigationId:Vn.id;this.guessDirection=Kn<this.lastNavId?"back":"forward",this.guessAnimation=Vn.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?Vn.id:Kn}}),D.backButton.subscribeWithPriority(0,Vn=>{this.pop(),Vn()})}navigateForward(D,K={}){return this.setDirection("forward",K.animated,K.animationDirection,K.animation),this.navigate(D,K)}navigateBack(D,K={}){return this.setDirection("back",K.animated,K.animationDirection,K.animation),this.navigate(D,K)}navigateRoot(D,K={}){return this.setDirection("root",K.animated,K.animationDirection,K.animation),this.navigate(D,K)}back(D={animated:!0,animationDirection:"back"}){return this.setDirection("back",D.animated,D.animationDirection,D.animation),this.location.back()}pop(){var D=this;return(0,y.Z)(function*(){let K=D.topOutlet;for(;K&&!(yield K.pop());)K=K.parentOutlet})()}setDirection(D,K,_e,Qt){this.direction=D,this.animated=st(D,K,_e),this.animationBuilder=Qt}setTopOutlet(D){this.topOutlet=D}consumeTransition(){let K,D="root";const _e=this.animationBuilder;return"auto"===this.direction?(D=this.guessDirection,K=this.guessAnimation):(K=this.animated,D=this.direction),this.direction=It,this.animated=Kt,this.animationBuilder=void 0,{direction:D,animation:K,animationBuilder:_e}}navigate(D,K){if(Array.isArray(D))return this.router.navigate(D,K);{const _e=this.serializer.parse(D.toString());return void 0!==K.queryParams&&(_e.queryParams={...K.queryParams}),void 0!==K.fragment&&(_e.fragment=K.fragment),this.router.navigateByUrl(_e,K)}}}return C.\u0275fac=function(D){return new(D||C)(m.LFG(ar),m.LFG(fe.Ye),m.LFG(we.Hx),m.LFG(we.F0,8))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const st=(C,Q,D)=>{if(!1!==Q){if(void 0!==D)return D;if("forward"===C||"back"===C)return C;if("root"===C&&!0===Q)return"forward"}},It="auto",Kt=void 0;class en{constructor(Q={}){this.data=Q}get(Q){return this.data[Q]}}let rr=(()=>{class C{constructor(){this.zone=(0,m.f3M)(m.R0b),this.applicationRef=(0,m.f3M)(m.z2F)}create(D,K,_e){return new Hn(D,K,this.applicationRef,this.zone,_e)}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac}),C})();class Hn{constructor(Q,D,K,_e,Qt){this.environmentInjector=Q,this.injector=D,this.applicationRef=K,this.zone=_e,this.elementReferenceKey=Qt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(Q,D,K,_e){return this.zone.run(()=>new Promise(Qt=>{const Vn={...K};void 0!==this.elementReferenceKey&&(Vn[this.elementReferenceKey]=Q),Qt(mr(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,Q,D,Vn,_e))}))}removeViewFromDom(Q,D){return this.zone.run(()=>new Promise(K=>{const _e=this.elRefMap.get(D);if(_e){_e.destroy(),this.elRefMap.delete(D);const Qt=this.elEventsMap.get(D);Qt&&(Qt(),this.elEventsMap.delete(D))}K()}))}}const mr=(C,Q,D,K,_e,Qt,Vn,Kn,Ar,Nn)=>{const ts=m.zs3.create({providers:Yr(Ar),parent:D}),W=(0,m.LMc)(Kn,{environmentInjector:Q,elementInjector:ts}),H=W.instance,L=W.location.nativeElement;if(Ar&&Object.assign(H,Ar),Nn)for(const Ft of Nn)L.classList.add(Ft);const ue=bs(C,H,L);return Vn.appendChild(L),K.attachView(W.hostView),_e.set(L,W),Qt.set(L,ue),L},qr=[Xe.L,Xe.a,Xe.b,Xe.c,Xe.d],bs=(C,Q,D)=>C.run(()=>{const K=qr.filter(_e=>"function"==typeof Q[_e]).map(_e=>{const Qt=Vn=>Q[_e](Vn.detail);return D.addEventListener(_e,Qt),()=>D.removeEventListener(_e,Qt)});return()=>K.forEach(_e=>_e())}),Ws=new m.OlP("NavParamsToken"),Yr=C=>[{provide:Ws,useValue:C},{provide:en,useFactory:Ks,deps:[Ws]}],Ks=C=>new en(C),No=(C,Q)=>((C=C.filter(D=>D.stackId!==Q.stackId)).push(Q),C),fo=(C,Q)=>{const D=C.createUrlTree(["."],{relativeTo:Q});return C.serializeUrl(D)},ko=(C,Q)=>{if(!C)return;const D=Fo(Q);for(let K=0;K<D.length;K++){if(K>=C.length)return D[K];if(D[K]!==C[K])return}},Fo=C=>C.split("/").map(Q=>Q.trim()).filter(Q=>""!==Q),Os=C=>{C&&(C.ref.destroy(),C.unlistenEvents())};class Qo{constructor(Q,D,K,_e,Qt,Vn){this.containerEl=D,this.router=K,this.navCtrl=_e,this.zone=Qt,this.location=Vn,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==Q?Fo(Q):void 0}createView(Q,D){var K;const _e=fo(this.router,D),Qt=null==Q||null===(K=Q.location)||void 0===K?void 0:K.nativeElement,Vn=bs(this.zone,Q.instance,Qt);return{id:this.nextId++,stackId:ko(this.tabsPrefix,_e),unlistenEvents:Vn,element:Qt,ref:Q,url:_e}}getExistingView(Q){const D=fo(this.router,Q),K=this.views.find(_e=>_e.url===D);return K&&K.ref.changeDetectorRef.reattach(),K}setActive(Q){var D,K,_e;const Qt=this.navCtrl.consumeTransition();let{direction:Vn,animation:Kn,animationBuilder:Ar}=Qt;const Nn=this.activeView,ts=((C,Q)=>!Q||C.stackId!==Q.stackId)(Q,Nn);ts&&(Vn="back",Kn=void 0);const W=this.views.slice();let H;const L=this.router;L.getCurrentNavigation?H=L.getCurrentNavigation():null!==(D=L.navigations)&&void 0!==D&&D.value&&(H=L.navigations.value),null!==(K=H)&&void 0!==K&&null!==(_e=K.extras)&&void 0!==_e&&_e.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const ue=this.views.includes(Q),Ft=this.insertView(Q,Vn);ue||Q.ref.changeDetectorRef.detectChanges();const Bn=Q.animationBuilder;return void 0===Ar&&"back"===Vn&&!ts&&void 0!==Bn&&(Ar=Bn),Nn&&(Nn.animationBuilder=Ar),this.zone.runOutsideAngular(()=>this.wait(()=>(Nn&&Nn.ref.changeDetectorRef.detach(),Q.ref.changeDetectorRef.reattach(),this.transition(Q,Nn,Kn,this.canGoBack(1),!1,Ar).then(()=>Ba(Q,Ft,W,this.location,this.zone)).then(()=>({enteringView:Q,direction:Vn,animation:Kn,tabSwitch:ts})))))}canGoBack(Q,D=this.getActiveStackId()){return this.getStack(D).length>Q}pop(Q,D=this.getActiveStackId()){return this.zone.run(()=>{const K=this.getStack(D);if(K.length<=Q)return Promise.resolve(!1);const _e=K[K.length-Q-1];let Qt=_e.url;const Vn=_e.savedData;if(Vn){var Kn,Ar;const ts=Vn.get("primary");null!=ts&&null!==(Kn=ts.route)&&void 0!==Kn&&null!==(Ar=Kn._routerState)&&void 0!==Ar&&Ar.snapshot.url&&(Qt=ts.route._routerState.snapshot.url)}const{animationBuilder:Nn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Qt,{..._e.savedExtras,animation:Nn}).then(()=>!0)})}startBackTransition(){const Q=this.activeView;if(Q){const D=this.getStack(Q.stackId),K=D[D.length-2],_e=K.animationBuilder;return this.wait(()=>this.transition(K,Q,"back",this.canGoBack(2),!0,_e))}return Promise.resolve()}endBackTransition(Q){Q?(this.skipTransition=!0,this.pop(1)):this.activeView&&Ea(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(Q){const D=this.getStack(Q);return D.length>0?D[D.length-1]:void 0}getRootUrl(Q){const D=this.getStack(Q);return D.length>0?D[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Os),this.activeView=void 0,this.views=[]}getStack(Q){return this.views.filter(D=>D.stackId===Q)}insertView(Q,D){return this.activeView=Q,this.views=((C,Q,D)=>"root"===D?No(C,Q):"forward"===D?((C,Q)=>(C.indexOf(Q)>=0?C=C.filter(K=>K.stackId!==Q.stackId||K.id<=Q.id):C.push(Q),C))(C,Q):((C,Q)=>C.indexOf(Q)>=0?C.filter(K=>K.stackId!==Q.stackId||K.id<=Q.id):No(C,Q))(C,Q))(this.views,Q,D),this.views.slice()}transition(Q,D,K,_e,Qt,Vn){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(D===Q)return Promise.resolve(!1);const Kn=Q?Q.element:void 0,Ar=D?D.element:void 0,Nn=this.containerEl;return Kn&&Kn!==Ar&&(Kn.classList.add("ion-page"),Kn.classList.add("ion-page-invisible"),Kn.parentElement!==Nn&&Nn.appendChild(Kn),Nn.commit)?Nn.commit(Kn,Ar,{duration:void 0===K?0:void 0,direction:K,showGoBack:_e,progressAnimation:Qt,animationBuilder:Vn}):Promise.resolve(!1)}wait(Q){var D=this;return(0,y.Z)(function*(){void 0!==D.runningTask&&(yield D.runningTask,D.runningTask=void 0);const K=D.runningTask=Q();return K.finally(()=>D.runningTask=void 0),K})()}}const Ba=(C,Q,D,K,_e)=>"function"==typeof requestAnimationFrame?new Promise(Qt=>{requestAnimationFrame(()=>{Ea(C,Q,D,K,_e),Qt()})}):Promise.resolve(),Ea=(C,Q,D,K,_e)=>{_e.run(()=>D.filter(Qt=>!Q.includes(Qt)).forEach(Os)),Q.forEach(Qt=>{const Kn=K.path().split("?")[0].split("#")[0];if(Qt!==C&&Qt.url!==Kn){const Ar=Qt.element;Ar.setAttribute("aria-hidden","true"),Ar.classList.add("ion-page-hidden"),Qt.ref.changeDetectorRef.detach()}})};let ls=(()=>{class C{constructor(D,K,_e,Qt,Vn,Kn,Ar,Nn){this.parentOutlet=Nn,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Ce.X(null),this.stackEvents=new m.vpe,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.parentContexts=(0,m.f3M)(we.y6),this.location=(0,m.f3M)(m.s_b),this.environmentInjector=(0,m.f3M)(m.lqb),this.config=(0,m.f3M)(cn),this.navCtrl=(0,m.f3M)(ct),this.nativeEl=Qt.nativeElement,this.name=D||we.eC,this.tabsPrefix="true"===K?fo(Vn,Ar):void 0,this.stackCtrl=new Qo(this.tabsPrefix,this.nativeEl,Vn,this.navCtrl,Kn,_e),this.parentContexts.onChildOutletCreated(this.name,this)}set animation(D){this.nativeEl.animation=D}set animated(D){this.nativeEl.animated=D}set swipeGesture(D){this._swipeGesture=D,this.nativeEl.swipeHandler=D?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:K=>this.stackCtrl.endBackTransition(K)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const D=this.getContext();null!=D&&D.route&&this.activateWith(D.route,D.injector)}new Promise(D=>(0,je.c)(this.nativeEl,D)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(D,K){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const K=this.getContext();this.activatedView.savedData=new Map(K.children.contexts);const _e=this.activatedView.savedData.get("primary");if(_e&&K.route&&(_e.route={...K.route}),this.activatedView.savedExtras={},K.route){const Qt=K.route.snapshot;this.activatedView.savedExtras.queryParams=Qt.queryParams,this.activatedView.savedExtras.fragment=Qt.fragment}}const D=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,K){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=D;let _e,Qt=this.stackCtrl.getExistingView(D);if(Qt){_e=this.activated=Qt.ref;const Kn=Qt.savedData;Kn&&(this.getContext().children.contexts=Kn),this.updateActivatedRouteProxy(_e.instance,D)}else{var Vn;const Kn=D._futureSnapshot,Ar=this.parentContexts.getOrCreateContext(this.name).children,Nn=new Ce.X(null),ts=this.createActivatedRouteProxy(Nn,D),W=new So(ts,Ar,this.location.injector),H=null!==(Vn=Kn.routeConfig.component)&&void 0!==Vn?Vn:Kn.component;_e=this.activated=this.location.createComponent(H,{index:this.location.length,injector:W,environmentInjector:null!=K?K:this.environmentInjector}),Nn.next(_e.instance),Qt=this.stackCtrl.createView(this.activated,D),this.proxyMap.set(_e.instance,ts),this.currentActivatedRoute$.next({component:_e.instance,activatedRoute:D})}this.activatedView=Qt,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(Qt).then(Kn=>{this.activateEvents.emit(_e.instance),this.stackEvents.emit(Kn)})}canGoBack(D=1,K){return this.stackCtrl.canGoBack(D,K)}pop(D=1,K){return this.stackCtrl.pop(D,K)}getLastUrl(D){const K=this.stackCtrl.getLastUrl(D);return K?K.url:void 0}getLastRouteView(D){return this.stackCtrl.getLastUrl(D)}getRootView(D){return this.stackCtrl.getRootUrl(D)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(D,K){const _e=new we.gz;return _e._futureSnapshot=K._futureSnapshot,_e._routerState=K._routerState,_e.snapshot=K.snapshot,_e.outlet=K.outlet,_e.component=K.component,_e._paramMap=this.proxyObservable(D,"paramMap"),_e._queryParamMap=this.proxyObservable(D,"queryParamMap"),_e.url=this.proxyObservable(D,"url"),_e.params=this.proxyObservable(D,"params"),_e.queryParams=this.proxyObservable(D,"queryParams"),_e.fragment=this.proxyObservable(D,"fragment"),_e.data=this.proxyObservable(D,"data"),_e}proxyObservable(D,K){return D.pipe((0,Y.h)(_e=>!!_e),(0,ht.w)(_e=>this.currentActivatedRoute$.pipe((0,Y.h)(Qt=>null!==Qt&&Qt.component===_e),(0,ht.w)(Qt=>Qt&&Qt.activatedRoute[K]),(0,Ke.x)())))}updateActivatedRouteProxy(D,K){const _e=this.proxyMap.get(D);if(!_e)throw new Error("Could not find activated route proxy for view");_e._futureSnapshot=K._futureSnapshot,_e._routerState=K._routerState,_e.snapshot=K.snapshot,_e.outlet=K.outlet,_e.component=K.component,this.currentActivatedRoute$.next({component:D,activatedRoute:K})}}return C.\u0275fac=function(D){return new(D||C)(m.$8M("name"),m.$8M("tabs"),m.Y36(fe.Ye),m.Y36(m.SBq),m.Y36(we.F0),m.Y36(m.R0b),m.Y36(we.gz),m.Y36(C,12))},C.\u0275dir=m.lG2({type:C,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),C})();class So{constructor(Q,D,K){this.route=Q,this.childContexts=D,this.parent=K}get(Q,D){return Q===we.gz?this.route:Q===we.y6?this.childContexts:this.parent.get(Q,D)}}let ys=(()=>{class C{constructor(D,K,_e,Qt,Vn){this.locationStrategy=D,this.navCtrl=K,this.elementRef=_e,this.router=Qt,this.routerLink=Vn,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var D;if(null!==(D=this.routerLink)&&void 0!==D&&D.urlTree){const K=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=K}}onClick(){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation)}}return C.\u0275fac=function(D){return new(D||C)(m.Y36(fe.S$),m.Y36(ct),m.Y36(m.SBq),m.Y36(we.F0),m.Y36(we.rH,8))},C.\u0275dir=m.lG2({type:C,selectors:[["a","routerLink",""],["area","routerLink",""]],hostBindings:function(D,K){1&D&&m.NdJ("click",function(){return K.onClick()})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[m.TTD]}),C})(),pi=(()=>{let C=class{constructor(D,K,_e){this.z=_e,this.isCmpOpen=!1,this.el=K.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,D.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,D.detectChanges()}),tn(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}};return C.\u0275fac=function(D){return new(D||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-popover"]],contentQueries:function(D,K,_e){if(1&D&&m.Suo(_e,m.Rgc,5),2&D){let Qt;m.iGM(Qt=m.CRH())&&(K.template=Qt.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"},decls:1,vars:1,consts:[[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(D,K){1&D&&m.YNc(0,We,1,1,"ng-container",0),2&D&&m.Q6J("ngIf",K.isCmpOpen||K.keepContentsMounted)},dependencies:[fe.O5,fe.tP],encapsulation:2,changeDetection:0}),C=(0,oe.gn)([Ht({inputs:["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],methods:["present","dismiss","onDidDismiss","onWillDismiss"]})],C),C})();class po{constructor(Q){this.ctrl=Q}create(Q){return this.ctrl.create(Q||{})}dismiss(Q,D,K){return this.ctrl.dismiss(Q,D,K)}getTop(){return this.ctrl.getTop()}}let no=(()=>{class C extends po{constructor(){super(Ie.a)}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),ua=(()=>{class C extends po{constructor(){super(Ie.m),this.angularDelegate=(0,m.f3M)(rr),this.injector=(0,m.f3M)(m.zs3),this.environmentInjector=(0,m.f3M)(m.lqb)}create(D){return super.create({...D,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac}),C})(),wa=(()=>{class C extends po{constructor(){super(Ie.c),this.angularDelegate=(0,m.f3M)(rr),this.injector=(0,m.f3M)(m.zs3),this.environmentInjector=(0,m.f3M)(m.lqb)}create(D){return super.create({...D,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac}),C})(),$o=(()=>{class C extends po{constructor(){super(Ie.t)}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();class Yi{shouldDetach(Q){return!1}shouldAttach(Q){return!1}store(Q,D){}retrieve(Q){return null}shouldReuseRoute(Q,D){if(Q.routeConfig!==D.routeConfig)return!1;const K=Q.params,_e=D.params,Qt=Object.keys(K),Vn=Object.keys(_e);if(Qt.length!==Vn.length)return!1;for(const Kn of Qt)if(_e[Kn]!==K[Kn])return!1;return!0}}const rs=(C,Q,D)=>()=>{if(Q.defaultView&&typeof window<"u"){(0,Le.s)({...C,_zoneGate:Qt=>D.run(Qt)});const _e="__zone_symbol__addEventListener"in Q.body?"__zone_symbol__addEventListener":"addEventListener";return function Ct(){var C=[];if(typeof window<"u"){var Q=window;(!Q.customElements||Q.Element&&(!Q.Element.prototype.closest||!Q.Element.prototype.matches||!Q.Element.prototype.remove||!Q.Element.prototype.getRootNode))&&C.push(B.e(6748).then(B.t.bind(B,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||Q.NodeList&&!Q.NodeList.prototype.forEach||!Q.fetch||!function(){try{var K=new URL("b","http://a");return K.pathname="c%20d","http://a/c%20d"===K.href&&K.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&C.push(B.e(2214).then(B.t.bind(B,4144,23)))}return Promise.all(C)}().then(()=>((C,Q)=>typeof window>"u"?Promise.resolve():(0,ze.p)().then(()=>(Ue(),(0,ze.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[34,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),Q))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Ge,jmp:Qt=>D.runOutsideAngular(Qt),ael(Qt,Vn,Kn,Ar){Qt[_e](Vn,Kn,Ar)},rel(Qt,Vn,Kn,Ar){Qt.removeEventListener(Vn,Kn,Ar)}}))}};let Va=(()=>{class C{static forRoot(D){return{ngModule:C,providers:[{provide:Qn,useValue:D},{provide:m.ip1,useFactory:rs,multi:!0,deps:[Qn,fe.K0,m.R0b]}]}}}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=m.oAB({type:C}),C.\u0275inj=m.cJS({providers:[rr,ua,wa],imports:[fe.ez]}),C})()},259:(ln,at,B)=>{"use strict";B.d(at,{C6:()=>y.getApps,Mq:()=>y.getApp});var y=B(6881);(0,y.registerVersion)("firebase","9.21.0","app")},9260:(ln,at,B)=>{"use strict";B.d(at,{Z:()=>y.Z});var y=B(3942);y.Z.registerVersion("firebase","9.21.0","app-compat")},9568:(ln,at,B)=>{"use strict";B.r(at);var y=B(5861),m=B(3942),q=B(8502),oe=B(2090),Ce=(B(6881),B(1877),B(4859));function we(){return window}const He=2e3;function me(){return me=(0,y.Z)(function*(he,ye,de){var lt;const{BuildInfo:Re}=we();(0,q.as)(ye.sessionId,"AuthEvent did not contain a session ID");const Fe=yield function Ie(he){return ae.apply(this,arguments)}(ye.sessionId),Ee={};return(0,q.at)()?Ee.ibi=Re.packageName:(0,q.au)()?Ee.apn=Re.packageName:(0,q.av)(he,"operation-not-supported-in-this-environment"),Re.displayName&&(Ee.appDisplayName=Re.displayName),Ee.sessionId=Fe,(0,q.aw)(he,de,ye.type,void 0,null!==(lt=ye.eventId)&&void 0!==lt?lt:void 0,Ee)}),me.apply(this,arguments)}function ke(){return(ke=(0,y.Z)(function*(he){const{BuildInfo:ye}=we(),de={};(0,q.at)()?de.iosBundleId=ye.packageName:(0,q.au)()?de.androidPackageName=ye.packageName:(0,q.av)(he,"operation-not-supported-in-this-environment"),yield(0,q.ax)(he,de)})).apply(this,arguments)}function Xe(){return(Xe=(0,y.Z)(function*(he,ye,de){const{cordova:lt}=we();let Re=()=>{};try{yield new Promise((Fe,Ee)=>{let et=null;function xt(){var mn;Fe();const nr=null===(mn=lt.plugins.browsertab)||void 0===mn?void 0:mn.close;"function"==typeof nr&&nr(),"function"==typeof(null==de?void 0:de.close)&&de.close()}function Yt(){et||(et=window.setTimeout(()=>{Ee((0,q.az)(he,"redirect-cancelled-by-user"))},He))}function gn(){"visible"===(null==document?void 0:document.visibilityState)&&Yt()}ye.addPassiveListener(xt),document.addEventListener("resume",Yt,!1),(0,q.au)()&&document.addEventListener("visibilitychange",gn,!1),Re=()=>{ye.removePassiveListener(xt),document.removeEventListener("resume",Yt,!1),document.removeEventListener("visibilitychange",gn,!1),et&&window.clearTimeout(et)}})}finally{Re()}})).apply(this,arguments)}function ae(){return(ae=(0,y.Z)(function*(he){const ye=function dt(he){if((0,q.as)(/[0-9a-zA-Z]+/.test(he),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(he);const ye=new ArrayBuffer(he.length),de=new Uint8Array(ye);for(let lt=0;lt<he.length;lt++)de[lt]=he.charCodeAt(lt);return de}(he),de=yield crypto.subtle.digest("SHA-256",ye);return Array.from(new Uint8Array(de)).map(Re=>Re.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const ze=20;class Ae extends q.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ye=>{this.resolveInialized=ye})}addPassiveListener(ye){this.passiveListeners.add(ye)}removePassiveListener(ye){this.passiveListeners.delete(ye)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ye){return this.resolveInialized(),this.passiveListeners.forEach(de=>de(ye)),super.onEvent(ye)}initialized(){var ye=this;return(0,y.Z)(function*(){yield ye.initPromise})()}}function Ke(he){return fe.apply(this,arguments)}function fe(){return(fe=(0,y.Z)(function*(he){const ye=yield it()._get(Et(he));return ye&&(yield it()._remove(Et(he))),ye})).apply(this,arguments)}function Ue(){const he=[],ye="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let de=0;de<ze;de++){const lt=Math.floor(Math.random()*ye.length);he.push(ye.charAt(lt))}return he.join("")}function it(){return(0,q.aC)(q.b)}function Et(he){return(0,q.aD)("authEvent",he.config.apiKey,he.name)}function wt(he){if(null==he||!he.includes("?"))return{};const[ye,...de]=he.split("?");return(0,oe.zd)(de.join("?"))}const We=class qe{constructor(){this._redirectPersistence=q.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=q.aE,this._overrideRedirectResult=q.aF}_initialize(ye){var de=this;return(0,y.Z)(function*(){const lt=ye._key();let Re=de.eventManagers.get(lt);return Re||(Re=new Ae(ye),de.eventManagers.set(lt,Re),de.attachCallbackListeners(ye,Re)),Re})()}_openPopup(ye){(0,q.av)(ye,"operation-not-supported-in-this-environment")}_openRedirect(ye,de,lt,Re){var Fe=this;return(0,y.Z)(function*(){!function Te(he){var ye,de,lt,Re,Fe,Ee,et,xt,Yt,gn;const mn=we();(0,q.aA)("function"==typeof(null===(ye=null==mn?void 0:mn.universalLinks)||void 0===ye?void 0:ye.subscribe),he,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,q.aA)(typeof(null===(de=null==mn?void 0:mn.BuildInfo)||void 0===de?void 0:de.packageName)<"u",he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,q.aA)("function"==typeof(null===(Fe=null===(Re=null===(lt=null==mn?void 0:mn.cordova)||void 0===lt?void 0:lt.plugins)||void 0===Re?void 0:Re.browsertab)||void 0===Fe?void 0:Fe.openUrl),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,q.aA)("function"==typeof(null===(xt=null===(et=null===(Ee=null==mn?void 0:mn.cordova)||void 0===Ee?void 0:Ee.plugins)||void 0===et?void 0:et.browsertab)||void 0===xt?void 0:xt.isAvailable),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,q.aA)("function"==typeof(null===(gn=null===(Yt=null==mn?void 0:mn.cordova)||void 0===Yt?void 0:Yt.InAppBrowser)||void 0===gn?void 0:gn.open),he,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ye);const Ee=yield Fe._initialize(ye);yield Ee.initialized(),Ee.resetRedirect(),(0,q.aG)(),yield Fe._originValidation(ye);const et=function Y(he,ye,de=null){return{type:ye,eventId:de,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:he.tenantId,error:(0,q.az)(he,"no-auth-event")}}(ye,lt,Re);yield function ht(he,ye){return it()._set(Et(he),ye)}(ye,et);const xt=yield function Se(he,ye,de){return me.apply(this,arguments)}(ye,et,de),Yt=yield function je(he){const{cordova:ye}=we();return new Promise(de=>{ye.plugins.browsertab.isAvailable(lt=>{let Re=null;lt?ye.plugins.browsertab.openUrl(he):Re=ye.InAppBrowser.open(he,(0,q.ay)()?"_blank":"_system","location=yes"),de(Re)})})}(xt);return function Le(he,ye,de){return Xe.apply(this,arguments)}(ye,Ee,Yt)})()}_isIframeWebStorageSupported(ye,de){throw new Error("Method not implemented.")}_originValidation(ye){const de=ye._key();return this.originValidationPromises[de]||(this.originValidationPromises[de]=function De(he){return ke.apply(this,arguments)}(ye)),this.originValidationPromises[de]}attachCallbackListeners(ye,de){const{universalLinks:lt,handleOpenURL:Re,BuildInfo:Fe}=we(),Ee=setTimeout((0,y.Z)(function*(){yield Ke(ye),de.onEvent(Ge())}),500),et=function(){var gn=(0,y.Z)(function*(mn){clearTimeout(Ee);const nr=yield Ke(ye);let Wr=null;nr&&null!=mn&&mn.url&&(Wr=function Ct(he,ye){var de,lt;const Re=function gt(he){const ye=wt(he),de=ye.link?decodeURIComponent(ye.link):void 0,lt=wt(de).link,Re=ye.deep_link_id?decodeURIComponent(ye.deep_link_id):void 0;return wt(Re).link||Re||lt||de||he}(ye);if(Re.includes("/__/auth/callback")){const Fe=wt(Re),Ee=Fe.firebaseError?function Ve(he){try{return JSON.parse(he)}catch{return null}}(decodeURIComponent(Fe.firebaseError)):null,et=null===(lt=null===(de=null==Ee?void 0:Ee.code)||void 0===de?void 0:de.split("auth/"))||void 0===lt?void 0:lt[1],xt=et?(0,q.az)(et):null;return xt?{type:he.type,eventId:he.eventId,tenantId:he.tenantId,error:xt,urlResponse:null,sessionId:null,postBody:null}:{type:he.type,eventId:he.eventId,tenantId:he.tenantId,sessionId:he.sessionId,urlResponse:Re,postBody:null}}return null}(nr,mn.url)),de.onEvent(Wr||Ge())});return function(nr){return gn.apply(this,arguments)}}();typeof lt<"u"&&"function"==typeof lt.subscribe&&lt.subscribe(null,et);const xt=Re,Yt=`${Fe.packageName.toLowerCase()}://`;we().handleOpenURL=function(){var gn=(0,y.Z)(function*(mn){if(mn.toLowerCase().startsWith(Yt)&&et({url:mn}),"function"==typeof xt)try{xt(mn)}catch(nr){console.error(nr)}});return function(mn){return gn.apply(this,arguments)}}()}};function Ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,q.az)("no-auth-event")}}const jt=1e3;function hn(){var he;return(null===(he=null==self?void 0:self.location)||void 0===he?void 0:he.protocol)||null}function ut(he=(0,oe.z$)()){return!("file:"!==hn()&&"ionic:"!==hn()&&"capacitor:"!==hn()||!he.toLowerCase().match(/iphone|ipad|ipod|android/))}function fn(){try{const he=self.localStorage,ye=q.aL();if(he)return he.setItem(ye,"1"),he.removeItem(ye),!function Un(he=(0,oe.z$)()){return function rn(){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Rn(he=(0,oe.z$)()){return/Edge\/\d+/.test(he)}(he)}()||(0,oe.hl)()}catch{return tn()&&(0,oe.hl)()}return!1}function tn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function En(){return(function Dt(){return"http:"===hn()||"https:"===hn()}()||(0,oe.ru)()||ut())&&!function Rt(){return(0,oe.b$)()||(0,oe.UG)()}()&&fn()&&!tn()}function Ht(){return ut()&&typeof document<"u"}function Zn(){return(Zn=(0,y.Z)(function*(){return!!Ht()&&new Promise(he=>{const ye=setTimeout(()=>{he(!1)},jt);document.addEventListener("deviceready",()=>{clearTimeout(ye),he(!0)})})})).apply(this,arguments)}const dr={LOCAL:"local",NONE:"none",SESSION:"session"},Mi=q.aA,Mr="persistence";function bi(he){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,y.Z)(function*(he){yield he._initializationPromise;const ye=wn(),de=q.aD(Mr,he.config.apiKey,he.name);ye&&ye.setItem(de,he._getPersistence())})).apply(this,arguments)}function wn(){var he;try{return(null===(he=function pn(){return typeof window<"u"?window:null}())||void 0===he?void 0:he.sessionStorage)||null}catch{return null}}const sn=q.aA;class Nr{constructor(){this.browserResolver=q.aC(q.k),this.cordovaResolver=q.aC(We),this.underlyingResolver=null,this._redirectPersistence=q.a,this._completeRedirectFn=q.aE,this._overrideRedirectResult=q.aF}_initialize(ye){var de=this;return(0,y.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._initialize(ye)})()}_openPopup(ye,de,lt,Re){var Fe=this;return(0,y.Z)(function*(){return yield Fe.selectUnderlyingResolver(),Fe.assertedUnderlyingResolver._openPopup(ye,de,lt,Re)})()}_openRedirect(ye,de,lt,Re){var Fe=this;return(0,y.Z)(function*(){return yield Fe.selectUnderlyingResolver(),Fe.assertedUnderlyingResolver._openRedirect(ye,de,lt,Re)})()}_isIframeWebStorageSupported(ye,de){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ye,de)}_originValidation(ye){return this.assertedUnderlyingResolver._originValidation(ye)}get _shouldInitProactively(){return Ht()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return sn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ye=this;return(0,y.Z)(function*(){if(ye.underlyingResolver)return;const de=yield function cr(){return Zn.apply(this,arguments)}();ye.underlyingResolver=de?ye.cordovaResolver:ye.browserResolver})()}}function Xr(he){return he.unwrap()}function Ci(he){return ai(he)}function ai(he){const{_tokenResponse:ye}=he instanceof oe.ZR?he.customData:he;if(!ye)return null;if(!(he instanceof oe.ZR)&&"temporaryProof"in ye&&"phoneNumber"in ye)return q.P.credentialFromResult(he);const de=ye.providerId;if(!de||de===q.p.PASSWORD)return null;let lt;switch(de){case q.p.GOOGLE:lt=q.V;break;case q.p.FACEBOOK:lt=q.U;break;case q.p.GITHUB:lt=q.W;break;case q.p.TWITTER:lt=q.Z;break;default:const{oauthIdToken:Re,oauthAccessToken:Fe,oauthTokenSecret:Ee,pendingToken:et,nonce:xt}=ye;return Fe||Ee||Re||et?et?de.startsWith("saml.")?q.aO._create(de,et):q.L._fromParams({providerId:de,signInMethod:de,pendingToken:et,idToken:Re,accessToken:Fe}):new q.X(de).credential({idToken:Re,accessToken:Fe,rawNonce:xt}):null}return he instanceof oe.ZR?lt.credentialFromError(he):lt.credentialFromResult(he)}function _r(he,ye){return ye.catch(de=>{throw de instanceof oe.ZR&&function kr(he,ye){var de;const lt=null===(de=ye.customData)||void 0===de?void 0:de._tokenResponse;if("auth/multi-factor-auth-required"===(null==ye?void 0:ye.code))ye.resolver=new Di(he,q.aq(he,ye));else if(lt){const Re=ai(ye),Fe=ye;Re&&(Fe.credential=Re,Fe.tenantId=lt.tenantId||void 0,Fe.email=lt.email||void 0,Fe.phoneNumber=lt.phoneNumber||void 0)}}(he,de),de}).then(de=>{const Re=de.user;return{operationType:de.operationType,credential:Ci(de),additionalUserInfo:q.ao(de),user:tr.getOrCreate(Re)}})}function yi(he,ye){return sr.apply(this,arguments)}function sr(){return(sr=(0,y.Z)(function*(he,ye){const de=yield ye;return{verificationId:de.verificationId,confirm:lt=>_r(he,de.confirm(lt))}})).apply(this,arguments)}class Di{constructor(ye,de){this.resolver=de,this.auth=function pr(he){return he.wrapped()}(ye)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ye){return _r(Xr(this.auth),this.resolver.resolveSignIn(ye))}}class tr{constructor(ye){this._delegate=ye,this.multiFactor=q.ar(ye)}static getOrCreate(ye){return tr.USER_MAP.has(ye)||tr.USER_MAP.set(ye,new tr(ye)),tr.USER_MAP.get(ye)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ye){return this._delegate.getIdTokenResult(ye)}getIdToken(ye){return this._delegate.getIdToken(ye)}linkAndRetrieveDataWithCredential(ye){return this.linkWithCredential(ye)}linkWithCredential(ye){var de=this;return(0,y.Z)(function*(){return _r(de.auth,q.a0(de._delegate,ye))})()}linkWithPhoneNumber(ye,de){var lt=this;return(0,y.Z)(function*(){return yi(lt.auth,q.l(lt._delegate,ye,de))})()}linkWithPopup(ye){var de=this;return(0,y.Z)(function*(){return _r(de.auth,q.d(de._delegate,ye,Nr))})()}linkWithRedirect(ye){var de=this;return(0,y.Z)(function*(){return yield bi(q.aH(de.auth)),q.g(de._delegate,ye,Nr)})()}reauthenticateAndRetrieveDataWithCredential(ye){return this.reauthenticateWithCredential(ye)}reauthenticateWithCredential(ye){var de=this;return(0,y.Z)(function*(){return _r(de.auth,q.a1(de._delegate,ye))})()}reauthenticateWithPhoneNumber(ye,de){return yi(this.auth,q.r(this._delegate,ye,de))}reauthenticateWithPopup(ye){return _r(this.auth,q.e(this._delegate,ye,Nr))}reauthenticateWithRedirect(ye){var de=this;return(0,y.Z)(function*(){return yield bi(q.aH(de.auth)),q.h(de._delegate,ye,Nr)})()}sendEmailVerification(ye){return q.ae(this._delegate,ye)}unlink(ye){var de=this;return(0,y.Z)(function*(){return yield q.an(de._delegate,ye),de})()}updateEmail(ye){return q.aj(this._delegate,ye)}updatePassword(ye){return q.ak(this._delegate,ye)}updatePhoneNumber(ye){return q.u(this._delegate,ye)}updateProfile(ye){return q.ai(this._delegate,ye)}verifyBeforeUpdateEmail(ye,de){return q.af(this._delegate,ye,de)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}tr.USER_MAP=new WeakMap;const ni=q.aA;let Gr=(()=>{class he{constructor(de,lt){if(this.app=de,lt.isInitialized())return this._delegate=lt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Re}=de.options;ni(Re,"invalid-api-key",{appName:de.name}),ni(Re,"invalid-api-key",{appName:de.name});const Fe=typeof window<"u"?Nr:void 0;this._delegate=lt.initialize({options:{persistence:Sr(Re,de.name),popupRedirectResolver:Fe}}),this._delegate._updateErrorMap(q.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?tr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(de){this._delegate.languageCode=de}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(de){this._delegate.tenantId=de}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(de,lt){q.I(this._delegate,de,lt)}applyActionCode(de){return q.a5(this._delegate,de)}checkActionCode(de){return q.a6(this._delegate,de)}confirmPasswordReset(de,lt){return q.a4(this._delegate,de,lt)}createUserWithEmailAndPassword(de,lt){var Re=this;return(0,y.Z)(function*(){return _r(Re._delegate,q.a8(Re._delegate,de,lt))})()}fetchProvidersForEmail(de){return this.fetchSignInMethodsForEmail(de)}fetchSignInMethodsForEmail(de){return q.ad(this._delegate,de)}isSignInWithEmailLink(de){return q.ab(this._delegate,de)}getRedirectResult(){var de=this;return(0,y.Z)(function*(){ni(En(),de._delegate,"operation-not-supported-in-this-environment");const lt=yield q.j(de._delegate,Nr);return lt?_r(de._delegate,Promise.resolve(lt)):{credential:null,user:null}})()}addFrameworkForLogging(de){!function _t(he,ye){(0,q.aH)(he)._logFramework(ye)}(this._delegate,de)}onAuthStateChanged(de,lt,Re){const{next:Fe,error:Ee,complete:et}=ri(de,lt,Re);return this._delegate.onAuthStateChanged(Fe,Ee,et)}onIdTokenChanged(de,lt,Re){const{next:Fe,error:Ee,complete:et}=ri(de,lt,Re);return this._delegate.onIdTokenChanged(Fe,Ee,et)}sendSignInLinkToEmail(de,lt){return q.aa(this._delegate,de,lt)}sendPasswordResetEmail(de,lt){return q.a3(this._delegate,de,lt||void 0)}setPersistence(de){var lt=this;return(0,y.Z)(function*(){let Re;switch(function Ri(he,ye){Mi(Object.values(dr).includes(ye),he,"invalid-persistence-type"),(0,oe.b$)()?Mi(ye!==dr.SESSION,he,"unsupported-persistence-type"):(0,oe.UG)()?Mi(ye===dr.NONE,he,"unsupported-persistence-type"):tn()?Mi(ye===dr.NONE||ye===dr.LOCAL&&(0,oe.hl)(),he,"unsupported-persistence-type"):Mi(ye===dr.NONE||fn(),he,"unsupported-persistence-type")}(lt._delegate,de),de){case dr.SESSION:Re=q.a;break;case dr.LOCAL:Re=(yield q.aC(q.i)._isAvailable())?q.i:q.b;break;case dr.NONE:Re=q.N;break;default:return q.av("argument-error",{appName:lt._delegate.name})}return lt._delegate.setPersistence(Re)})()}signInAndRetrieveDataWithCredential(de){return this.signInWithCredential(de)}signInAnonymously(){return _r(this._delegate,q._(this._delegate))}signInWithCredential(de){return _r(this._delegate,q.$(this._delegate,de))}signInWithCustomToken(de){return _r(this._delegate,q.a2(this._delegate,de))}signInWithEmailAndPassword(de,lt){return _r(this._delegate,q.a9(this._delegate,de,lt))}signInWithEmailLink(de,lt){return _r(this._delegate,q.ac(this._delegate,de,lt))}signInWithPhoneNumber(de,lt){return yi(this._delegate,q.s(this._delegate,de,lt))}signInWithPopup(de){var lt=this;return(0,y.Z)(function*(){return ni(En(),lt._delegate,"operation-not-supported-in-this-environment"),_r(lt._delegate,q.c(lt._delegate,de,Nr))})()}signInWithRedirect(de){var lt=this;return(0,y.Z)(function*(){return ni(En(),lt._delegate,"operation-not-supported-in-this-environment"),yield bi(lt._delegate),q.f(lt._delegate,de,Nr)})()}updateCurrentUser(de){return this._delegate.updateCurrentUser(de)}verifyPasswordResetCode(de){return q.a7(this._delegate,de)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return he.Persistence=dr,he})();function ri(he,ye,de){let lt=he;"function"!=typeof he&&({next:lt,error:ye,complete:de}=he);const Re=lt;return{next:Ee=>Re(Ee&&tr.getOrCreate(Ee)),error:ye,complete:de}}function Sr(he,ye){const de=function Xn(he,ye){const de=wn();if(!de)return[];const lt=q.aD(Mr,he,ye);switch(de.getItem(lt)){case dr.NONE:return[q.N];case dr.LOCAL:return[q.i,q.a];case dr.SESSION:return[q.a];default:return[]}}(he,ye);if(typeof self<"u"&&!de.includes(q.i)&&de.push(q.i),typeof window<"u")for(const lt of[q.b,q.a])de.includes(lt)||de.push(lt);return de.includes(q.N)||de.push(q.N),de}class _i{constructor(){this.providerId="phone",this._delegate=new q.P(Xr(m.Z.auth()))}static credential(ye,de){return q.P.credential(ye,de)}verifyPhoneNumber(ye,de){return this._delegate.verifyPhoneNumber(ye,de)}unwrap(){return this._delegate}}_i.PHONE_SIGN_IN_METHOD=q.P.PHONE_SIGN_IN_METHOD,_i.PROVIDER_ID=q.P.PROVIDER_ID;const Ur=q.aA;class Jr{constructor(ye,de,lt=m.Z.app()){var Re;Ur(null===(Re=lt.options)||void 0===Re?void 0:Re.apiKey,"invalid-api-key",{appName:lt.name}),this._delegate=new q.R(ye,de,lt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Be(he){he.INTERNAL.registerComponent(new Ce.wA("auth-compat",ye=>{const de=ye.getProvider("app-compat").getImmediate(),lt=ye.getProvider("auth");return new Gr(de,lt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:q.A.EMAIL_SIGNIN,PASSWORD_RESET:q.A.PASSWORD_RESET,RECOVER_EMAIL:q.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:q.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:q.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:q.A.VERIFY_EMAIL}},EmailAuthProvider:q.Q,FacebookAuthProvider:q.U,GithubAuthProvider:q.W,GoogleAuthProvider:q.V,OAuthProvider:q.X,SAMLAuthProvider:q.Y,PhoneAuthProvider:_i,PhoneMultiFactorGenerator:q.m,RecaptchaVerifier:Jr,TwitterAuthProvider:q.Z,Auth:Gr,AuthCredential:q.J,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),he.registerVersion("@firebase/auth-compat","0.4.1")}(m.Z)},5861:(ln,at,B)=>{"use strict";function y(q,oe,xe,Pe,Ce,we,He){try{var Se=q[we](He),me=Se.value}catch(De){return void xe(De)}Se.done?oe(me):Promise.resolve(me).then(Pe,Ce)}function m(q){return function(){var oe=this,xe=arguments;return new Promise(function(Pe,Ce){var we=q.apply(oe,xe);function He(me){y(we,Pe,Ce,He,Se,"next",me)}function Se(me){y(we,Pe,Ce,He,Se,"throw",me)}He(void 0)})}}B.d(at,{Z:()=>m})}},ln=>{ln(ln.s=5626)}]);